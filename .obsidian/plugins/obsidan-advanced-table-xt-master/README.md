# Advanced Table XT

Enhanced tables with cell merging, table IDs, and a visual toolbar for Obsidian tables.

## 功能特点

- 表格单元格合并（支持水平和垂直合并）
- 表格ID自动生成和管理
- 直观的表格编辑工具栏
- 单元格对齐和样式设置
- 行添加和表格样式应用
- **新增: 表格样式持久化** - 在预览模式下保持表格样式

## 使用方法

### 表格工具栏

表格工具栏在预览模式下点击表格时会自动显示，包含以下功能组：

1. **对齐**
   - 左对齐
   - 居中对齐
   - 右对齐
   - 顶部对齐
   - 垂直居中
   - 底部对齐
   - 全部居中

2. **合并**
   - 合并选中单元格
   - 向右合并
   - 向下合并
   - 拆分单元格

3. **表格**
   - 生成表格ID
   - 添加行
   - 表格样式

### 单元格合并语法

在编辑模式下，您可以使用以下语法来合并单元格：

- `<` - 向左合并（与左侧单元格合并）
- `^` - 向上合并（与上方单元格合并）

示例：

```markdown
| 表头1 | 表头2 | 表头3 |
|------|------|------|
| 内容1 | 内容2 | 内容3 |
| 内容4 | <    | 内容5 |
| 内容6 | ^    | 内容7 |
```

在预览模式下，使用工具栏可以更直观地合并单元格：
1. 选择要合并的单元格（使用Ctrl/Cmd+点击可选择多个单元格）
2. 点击合并按钮

### 表格ID

表格ID功能允许您为表格添加唯一标识符，这对于引用和样式应用非常有用。ID会以HTML注释的形式添加到表格前面：

```markdown
<!-- table-id: tbl-20240711-abc123 -->
| 表头1 | 表头2 |
|------|------|
| 内容1 | 内容2 |
```

可以通过工具栏中的"表格ID"按钮自动生成ID。

### 表格样式持久化

本插件现在支持表格样式的持久化，这意味着您在预览模式下应用的样式（如对齐方式）将被保存并在下次打开文档时自动应用。

样式持久化的工作原理：

1. 当您在预览模式下对表格应用样式时，样式数据会保存到插件的data.json文件中
2. 样式数据与表格ID关联，确保样式应用到正确的表格
3. 当您切换到预览模式时，插件会自动读取保存的样式并应用到对应的表格
4. 样式应用使用Obsidian的MarkdownRenderChild系统，确保与Obsidian的渲染流程无缝集成

支持的持久化样式包括：
- 单元格文本对齐（左对齐、居中、右对齐）
- 单元格垂直对齐（顶部、中间、底部）
- 列宽和行高设置
- 单元格合并状态

### 自定义样式

工具栏提供了几种预设样式：
- 条纹样式 - 为奇数行添加背景色
- 边框样式 - 为所有单元格添加边框

## 设置选项

在插件设置中，您可以配置以下选项：

- 启用单元格合并
- 启用表格ID
- 表格ID前缀
- 自动居中合并单元格
- 启用表格工具栏
- 启用编辑模式下的表格操作 
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/json5/dist/index.js
var require_dist = __commonJS({
  "node_modules/json5/dist/index.js"(exports, module2) {
    (function(global, factory) {
      typeof exports === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define(factory) : global.JSON5 = factory();
    })(exports, function() {
      "use strict";
      function createCommonjsModule(fn, module3) {
        return module3 = { exports: {} }, fn(module3, module3.exports), module3.exports;
      }
      var _global = createCommonjsModule(function(module3) {
        var global = module3.exports = typeof window != "undefined" && window.Math == Math ? window : typeof self != "undefined" && self.Math == Math ? self : Function("return this")();
        if (typeof __g == "number") {
          __g = global;
        }
      });
      var _core = createCommonjsModule(function(module3) {
        var core = module3.exports = { version: "2.6.5" };
        if (typeof __e == "number") {
          __e = core;
        }
      });
      var _core_1 = _core.version;
      var _isObject = function(it) {
        return typeof it === "object" ? it !== null : typeof it === "function";
      };
      var _anObject = function(it) {
        if (!_isObject(it)) {
          throw TypeError(it + " is not an object!");
        }
        return it;
      };
      var _fails = function(exec) {
        try {
          return !!exec();
        } catch (e) {
          return true;
        }
      };
      var _descriptors = !_fails(function() {
        return Object.defineProperty({}, "a", { get: function() {
          return 7;
        } }).a != 7;
      });
      var document2 = _global.document;
      var is = _isObject(document2) && _isObject(document2.createElement);
      var _domCreate = function(it) {
        return is ? document2.createElement(it) : {};
      };
      var _ie8DomDefine = !_descriptors && !_fails(function() {
        return Object.defineProperty(_domCreate("div"), "a", { get: function() {
          return 7;
        } }).a != 7;
      });
      var _toPrimitive = function(it, S) {
        if (!_isObject(it)) {
          return it;
        }
        var fn, val;
        if (S && typeof (fn = it.toString) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        if (typeof (fn = it.valueOf) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        if (!S && typeof (fn = it.toString) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        throw TypeError("Can't convert object to primitive value");
      };
      var dP = Object.defineProperty;
      var f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {
        _anObject(O);
        P = _toPrimitive(P, true);
        _anObject(Attributes);
        if (_ie8DomDefine) {
          try {
            return dP(O, P, Attributes);
          } catch (e) {
          }
        }
        if ("get" in Attributes || "set" in Attributes) {
          throw TypeError("Accessors not supported!");
        }
        if ("value" in Attributes) {
          O[P] = Attributes.value;
        }
        return O;
      };
      var _objectDp = {
        f
      };
      var _propertyDesc = function(bitmap, value) {
        return {
          enumerable: !(bitmap & 1),
          configurable: !(bitmap & 2),
          writable: !(bitmap & 4),
          value
        };
      };
      var _hide = _descriptors ? function(object, key2, value) {
        return _objectDp.f(object, key2, _propertyDesc(1, value));
      } : function(object, key2, value) {
        object[key2] = value;
        return object;
      };
      var hasOwnProperty = {}.hasOwnProperty;
      var _has = function(it, key2) {
        return hasOwnProperty.call(it, key2);
      };
      var id = 0;
      var px = Math.random();
      var _uid = function(key2) {
        return "Symbol(".concat(key2 === void 0 ? "" : key2, ")_", (++id + px).toString(36));
      };
      var _library = false;
      var _shared = createCommonjsModule(function(module3) {
        var SHARED = "__core-js_shared__";
        var store = _global[SHARED] || (_global[SHARED] = {});
        (module3.exports = function(key2, value) {
          return store[key2] || (store[key2] = value !== void 0 ? value : {});
        })("versions", []).push({
          version: _core.version,
          mode: _library ? "pure" : "global",
          copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)"
        });
      });
      var _functionToString = _shared("native-function-to-string", Function.toString);
      var _redefine = createCommonjsModule(function(module3) {
        var SRC = _uid("src");
        var TO_STRING = "toString";
        var TPL = ("" + _functionToString).split(TO_STRING);
        _core.inspectSource = function(it) {
          return _functionToString.call(it);
        };
        (module3.exports = function(O, key2, val, safe) {
          var isFunction = typeof val == "function";
          if (isFunction) {
            _has(val, "name") || _hide(val, "name", key2);
          }
          if (O[key2] === val) {
            return;
          }
          if (isFunction) {
            _has(val, SRC) || _hide(val, SRC, O[key2] ? "" + O[key2] : TPL.join(String(key2)));
          }
          if (O === _global) {
            O[key2] = val;
          } else if (!safe) {
            delete O[key2];
            _hide(O, key2, val);
          } else if (O[key2]) {
            O[key2] = val;
          } else {
            _hide(O, key2, val);
          }
        })(Function.prototype, TO_STRING, function toString() {
          return typeof this == "function" && this[SRC] || _functionToString.call(this);
        });
      });
      var _aFunction = function(it) {
        if (typeof it != "function") {
          throw TypeError(it + " is not a function!");
        }
        return it;
      };
      var _ctx = function(fn, that, length) {
        _aFunction(fn);
        if (that === void 0) {
          return fn;
        }
        switch (length) {
          case 1:
            return function(a) {
              return fn.call(that, a);
            };
          case 2:
            return function(a, b) {
              return fn.call(that, a, b);
            };
          case 3:
            return function(a, b, c2) {
              return fn.call(that, a, b, c2);
            };
        }
        return function() {
          return fn.apply(that, arguments);
        };
      };
      var PROTOTYPE = "prototype";
      var $export = function(type, name, source2) {
        var IS_FORCED = type & $export.F;
        var IS_GLOBAL = type & $export.G;
        var IS_STATIC = type & $export.S;
        var IS_PROTO = type & $export.P;
        var IS_BIND = type & $export.B;
        var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];
        var exports2 = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});
        var expProto = exports2[PROTOTYPE] || (exports2[PROTOTYPE] = {});
        var key2, own, out, exp;
        if (IS_GLOBAL) {
          source2 = name;
        }
        for (key2 in source2) {
          own = !IS_FORCED && target && target[key2] !== void 0;
          out = (own ? target : source2)[key2];
          exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == "function" ? _ctx(Function.call, out) : out;
          if (target) {
            _redefine(target, key2, out, type & $export.U);
          }
          if (exports2[key2] != out) {
            _hide(exports2, key2, exp);
          }
          if (IS_PROTO && expProto[key2] != out) {
            expProto[key2] = out;
          }
        }
      };
      _global.core = _core;
      $export.F = 1;
      $export.G = 2;
      $export.S = 4;
      $export.P = 8;
      $export.B = 16;
      $export.W = 32;
      $export.U = 64;
      $export.R = 128;
      var _export = $export;
      var ceil = Math.ceil;
      var floor = Math.floor;
      var _toInteger = function(it) {
        return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
      };
      var _defined = function(it) {
        if (it == void 0) {
          throw TypeError("Can't call method on  " + it);
        }
        return it;
      };
      var _stringAt = function(TO_STRING) {
        return function(that, pos2) {
          var s = String(_defined(that));
          var i = _toInteger(pos2);
          var l = s.length;
          var a, b;
          if (i < 0 || i >= l) {
            return TO_STRING ? "" : void 0;
          }
          a = s.charCodeAt(i);
          return a < 55296 || a > 56319 || i + 1 === l || (b = s.charCodeAt(i + 1)) < 56320 || b > 57343 ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 55296 << 10) + (b - 56320) + 65536;
        };
      };
      var $at = _stringAt(false);
      _export(_export.P, "String", {
        // 21.1.3.3 String.prototype.codePointAt(pos)
        codePointAt: function codePointAt2(pos2) {
          return $at(this, pos2);
        }
      });
      var codePointAt = _core.String.codePointAt;
      var max = Math.max;
      var min = Math.min;
      var _toAbsoluteIndex = function(index, length) {
        index = _toInteger(index);
        return index < 0 ? max(index + length, 0) : min(index, length);
      };
      var fromCharCode = String.fromCharCode;
      var $fromCodePoint = String.fromCodePoint;
      _export(_export.S + _export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), "String", {
        // 21.1.2.2 String.fromCodePoint(...codePoints)
        fromCodePoint: function fromCodePoint2(x) {
          var arguments$1 = arguments;
          var res = [];
          var aLen = arguments.length;
          var i = 0;
          var code;
          while (aLen > i) {
            code = +arguments$1[i++];
            if (_toAbsoluteIndex(code, 1114111) !== code) {
              throw RangeError(code + " is not a valid code point");
            }
            res.push(
              code < 65536 ? fromCharCode(code) : fromCharCode(((code -= 65536) >> 10) + 55296, code % 1024 + 56320)
            );
          }
          return res.join("");
        }
      });
      var fromCodePoint = _core.String.fromCodePoint;
      var Space_Separator = /[\u1680\u2000-\u200A\u202F\u205F\u3000]/;
      var ID_Start = /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;
      var ID_Continue = /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
      var unicode = {
        Space_Separator,
        ID_Start,
        ID_Continue
      };
      var util = {
        isSpaceSeparator: function isSpaceSeparator(c2) {
          return typeof c2 === "string" && unicode.Space_Separator.test(c2);
        },
        isIdStartChar: function isIdStartChar(c2) {
          return typeof c2 === "string" && (c2 >= "a" && c2 <= "z" || c2 >= "A" && c2 <= "Z" || c2 === "$" || c2 === "_" || unicode.ID_Start.test(c2));
        },
        isIdContinueChar: function isIdContinueChar(c2) {
          return typeof c2 === "string" && (c2 >= "a" && c2 <= "z" || c2 >= "A" && c2 <= "Z" || c2 >= "0" && c2 <= "9" || c2 === "$" || c2 === "_" || c2 === "\u200C" || c2 === "\u200D" || unicode.ID_Continue.test(c2));
        },
        isDigit: function isDigit(c2) {
          return typeof c2 === "string" && /[0-9]/.test(c2);
        },
        isHexDigit: function isHexDigit(c2) {
          return typeof c2 === "string" && /[0-9A-Fa-f]/.test(c2);
        }
      };
      var source;
      var parseState;
      var stack;
      var pos;
      var line;
      var column;
      var token;
      var key;
      var root;
      var parse2 = function parse3(text, reviver) {
        source = String(text);
        parseState = "start";
        stack = [];
        pos = 0;
        line = 1;
        column = 0;
        token = void 0;
        key = void 0;
        root = void 0;
        do {
          token = lex();
          parseStates[parseState]();
        } while (token.type !== "eof");
        if (typeof reviver === "function") {
          return internalize({ "": root }, "", reviver);
        }
        return root;
      };
      function internalize(holder, name, reviver) {
        var value = holder[name];
        if (value != null && typeof value === "object") {
          if (Array.isArray(value)) {
            for (var i = 0; i < value.length; i++) {
              var key2 = String(i);
              var replacement = internalize(value, key2, reviver);
              if (replacement === void 0) {
                delete value[key2];
              } else {
                Object.defineProperty(value, key2, {
                  value: replacement,
                  writable: true,
                  enumerable: true,
                  configurable: true
                });
              }
            }
          } else {
            for (var key$1 in value) {
              var replacement$1 = internalize(value, key$1, reviver);
              if (replacement$1 === void 0) {
                delete value[key$1];
              } else {
                Object.defineProperty(value, key$1, {
                  value: replacement$1,
                  writable: true,
                  enumerable: true,
                  configurable: true
                });
              }
            }
          }
        }
        return reviver.call(holder, name, value);
      }
      var lexState;
      var buffer;
      var doubleQuote;
      var sign;
      var c;
      function lex() {
        lexState = "default";
        buffer = "";
        doubleQuote = false;
        sign = 1;
        for (; ; ) {
          c = peek();
          var token2 = lexStates[lexState]();
          if (token2) {
            return token2;
          }
        }
      }
      function peek() {
        if (source[pos]) {
          return String.fromCodePoint(source.codePointAt(pos));
        }
      }
      function read() {
        var c2 = peek();
        if (c2 === "\n") {
          line++;
          column = 0;
        } else if (c2) {
          column += c2.length;
        } else {
          column++;
        }
        if (c2) {
          pos += c2.length;
        }
        return c2;
      }
      var lexStates = {
        default: function default$1() {
          switch (c) {
            case "	":
            case "\v":
            case "\f":
            case " ":
            case "\xA0":
            case "\uFEFF":
            case "\n":
            case "\r":
            case "\u2028":
            case "\u2029":
              read();
              return;
            case "/":
              read();
              lexState = "comment";
              return;
            case void 0:
              read();
              return newToken("eof");
          }
          if (util.isSpaceSeparator(c)) {
            read();
            return;
          }
          return lexStates[parseState]();
        },
        comment: function comment() {
          switch (c) {
            case "*":
              read();
              lexState = "multiLineComment";
              return;
            case "/":
              read();
              lexState = "singleLineComment";
              return;
          }
          throw invalidChar(read());
        },
        multiLineComment: function multiLineComment() {
          switch (c) {
            case "*":
              read();
              lexState = "multiLineCommentAsterisk";
              return;
            case void 0:
              throw invalidChar(read());
          }
          read();
        },
        multiLineCommentAsterisk: function multiLineCommentAsterisk() {
          switch (c) {
            case "*":
              read();
              return;
            case "/":
              read();
              lexState = "default";
              return;
            case void 0:
              throw invalidChar(read());
          }
          read();
          lexState = "multiLineComment";
        },
        singleLineComment: function singleLineComment() {
          switch (c) {
            case "\n":
            case "\r":
            case "\u2028":
            case "\u2029":
              read();
              lexState = "default";
              return;
            case void 0:
              read();
              return newToken("eof");
          }
          read();
        },
        value: function value() {
          switch (c) {
            case "{":
            case "[":
              return newToken("punctuator", read());
            case "n":
              read();
              literal("ull");
              return newToken("null", null);
            case "t":
              read();
              literal("rue");
              return newToken("boolean", true);
            case "f":
              read();
              literal("alse");
              return newToken("boolean", false);
            case "-":
            case "+":
              if (read() === "-") {
                sign = -1;
              }
              lexState = "sign";
              return;
            case ".":
              buffer = read();
              lexState = "decimalPointLeading";
              return;
            case "0":
              buffer = read();
              lexState = "zero";
              return;
            case "1":
            case "2":
            case "3":
            case "4":
            case "5":
            case "6":
            case "7":
            case "8":
            case "9":
              buffer = read();
              lexState = "decimalInteger";
              return;
            case "I":
              read();
              literal("nfinity");
              return newToken("numeric", Infinity);
            case "N":
              read();
              literal("aN");
              return newToken("numeric", NaN);
            case '"':
            case "'":
              doubleQuote = read() === '"';
              buffer = "";
              lexState = "string";
              return;
          }
          throw invalidChar(read());
        },
        identifierNameStartEscape: function identifierNameStartEscape() {
          if (c !== "u") {
            throw invalidChar(read());
          }
          read();
          var u = unicodeEscape();
          switch (u) {
            case "$":
            case "_":
              break;
            default:
              if (!util.isIdStartChar(u)) {
                throw invalidIdentifier();
              }
              break;
          }
          buffer += u;
          lexState = "identifierName";
        },
        identifierName: function identifierName() {
          switch (c) {
            case "$":
            case "_":
            case "\u200C":
            case "\u200D":
              buffer += read();
              return;
            case "\\":
              read();
              lexState = "identifierNameEscape";
              return;
          }
          if (util.isIdContinueChar(c)) {
            buffer += read();
            return;
          }
          return newToken("identifier", buffer);
        },
        identifierNameEscape: function identifierNameEscape() {
          if (c !== "u") {
            throw invalidChar(read());
          }
          read();
          var u = unicodeEscape();
          switch (u) {
            case "$":
            case "_":
            case "\u200C":
            case "\u200D":
              break;
            default:
              if (!util.isIdContinueChar(u)) {
                throw invalidIdentifier();
              }
              break;
          }
          buffer += u;
          lexState = "identifierName";
        },
        sign: function sign$1() {
          switch (c) {
            case ".":
              buffer = read();
              lexState = "decimalPointLeading";
              return;
            case "0":
              buffer = read();
              lexState = "zero";
              return;
            case "1":
            case "2":
            case "3":
            case "4":
            case "5":
            case "6":
            case "7":
            case "8":
            case "9":
              buffer = read();
              lexState = "decimalInteger";
              return;
            case "I":
              read();
              literal("nfinity");
              return newToken("numeric", sign * Infinity);
            case "N":
              read();
              literal("aN");
              return newToken("numeric", NaN);
          }
          throw invalidChar(read());
        },
        zero: function zero() {
          switch (c) {
            case ".":
              buffer += read();
              lexState = "decimalPoint";
              return;
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
            case "x":
            case "X":
              buffer += read();
              lexState = "hexadecimal";
              return;
          }
          return newToken("numeric", sign * 0);
        },
        decimalInteger: function decimalInteger() {
          switch (c) {
            case ".":
              buffer += read();
              lexState = "decimalPoint";
              return;
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalPointLeading: function decimalPointLeading() {
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalFraction";
            return;
          }
          throw invalidChar(read());
        },
        decimalPoint: function decimalPoint() {
          switch (c) {
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalFraction";
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalFraction: function decimalFraction() {
          switch (c) {
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalExponent: function decimalExponent() {
          switch (c) {
            case "+":
            case "-":
              buffer += read();
              lexState = "decimalExponentSign";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalExponentInteger";
            return;
          }
          throw invalidChar(read());
        },
        decimalExponentSign: function decimalExponentSign() {
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalExponentInteger";
            return;
          }
          throw invalidChar(read());
        },
        decimalExponentInteger: function decimalExponentInteger() {
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        hexadecimal: function hexadecimal() {
          if (util.isHexDigit(c)) {
            buffer += read();
            lexState = "hexadecimalInteger";
            return;
          }
          throw invalidChar(read());
        },
        hexadecimalInteger: function hexadecimalInteger() {
          if (util.isHexDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        string: function string() {
          switch (c) {
            case "\\":
              read();
              buffer += escape();
              return;
            case '"':
              if (doubleQuote) {
                read();
                return newToken("string", buffer);
              }
              buffer += read();
              return;
            case "'":
              if (!doubleQuote) {
                read();
                return newToken("string", buffer);
              }
              buffer += read();
              return;
            case "\n":
            case "\r":
              throw invalidChar(read());
            case "\u2028":
            case "\u2029":
              separatorChar(c);
              break;
            case void 0:
              throw invalidChar(read());
          }
          buffer += read();
        },
        start: function start() {
          switch (c) {
            case "{":
            case "[":
              return newToken("punctuator", read());
          }
          lexState = "value";
        },
        beforePropertyName: function beforePropertyName() {
          switch (c) {
            case "$":
            case "_":
              buffer = read();
              lexState = "identifierName";
              return;
            case "\\":
              read();
              lexState = "identifierNameStartEscape";
              return;
            case "}":
              return newToken("punctuator", read());
            case '"':
            case "'":
              doubleQuote = read() === '"';
              lexState = "string";
              return;
          }
          if (util.isIdStartChar(c)) {
            buffer += read();
            lexState = "identifierName";
            return;
          }
          throw invalidChar(read());
        },
        afterPropertyName: function afterPropertyName() {
          if (c === ":") {
            return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        beforePropertyValue: function beforePropertyValue() {
          lexState = "value";
        },
        afterPropertyValue: function afterPropertyValue() {
          switch (c) {
            case ",":
            case "}":
              return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        beforeArrayValue: function beforeArrayValue() {
          if (c === "]") {
            return newToken("punctuator", read());
          }
          lexState = "value";
        },
        afterArrayValue: function afterArrayValue() {
          switch (c) {
            case ",":
            case "]":
              return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        end: function end() {
          throw invalidChar(read());
        }
      };
      function newToken(type, value) {
        return {
          type,
          value,
          line,
          column
        };
      }
      function literal(s) {
        for (var i = 0, list = s; i < list.length; i += 1) {
          var c2 = list[i];
          var p = peek();
          if (p !== c2) {
            throw invalidChar(read());
          }
          read();
        }
      }
      function escape() {
        var c2 = peek();
        switch (c2) {
          case "b":
            read();
            return "\b";
          case "f":
            read();
            return "\f";
          case "n":
            read();
            return "\n";
          case "r":
            read();
            return "\r";
          case "t":
            read();
            return "	";
          case "v":
            read();
            return "\v";
          case "0":
            read();
            if (util.isDigit(peek())) {
              throw invalidChar(read());
            }
            return "\0";
          case "x":
            read();
            return hexEscape();
          case "u":
            read();
            return unicodeEscape();
          case "\n":
          case "\u2028":
          case "\u2029":
            read();
            return "";
          case "\r":
            read();
            if (peek() === "\n") {
              read();
            }
            return "";
          case "1":
          case "2":
          case "3":
          case "4":
          case "5":
          case "6":
          case "7":
          case "8":
          case "9":
            throw invalidChar(read());
          case void 0:
            throw invalidChar(read());
        }
        return read();
      }
      function hexEscape() {
        var buffer2 = "";
        var c2 = peek();
        if (!util.isHexDigit(c2)) {
          throw invalidChar(read());
        }
        buffer2 += read();
        c2 = peek();
        if (!util.isHexDigit(c2)) {
          throw invalidChar(read());
        }
        buffer2 += read();
        return String.fromCodePoint(parseInt(buffer2, 16));
      }
      function unicodeEscape() {
        var buffer2 = "";
        var count = 4;
        while (count-- > 0) {
          var c2 = peek();
          if (!util.isHexDigit(c2)) {
            throw invalidChar(read());
          }
          buffer2 += read();
        }
        return String.fromCodePoint(parseInt(buffer2, 16));
      }
      var parseStates = {
        start: function start() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          push();
        },
        beforePropertyName: function beforePropertyName() {
          switch (token.type) {
            case "identifier":
            case "string":
              key = token.value;
              parseState = "afterPropertyName";
              return;
            case "punctuator":
              pop();
              return;
            case "eof":
              throw invalidEOF();
          }
        },
        afterPropertyName: function afterPropertyName() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          parseState = "beforePropertyValue";
        },
        beforePropertyValue: function beforePropertyValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          push();
        },
        beforeArrayValue: function beforeArrayValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          if (token.type === "punctuator" && token.value === "]") {
            pop();
            return;
          }
          push();
        },
        afterPropertyValue: function afterPropertyValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          switch (token.value) {
            case ",":
              parseState = "beforePropertyName";
              return;
            case "}":
              pop();
          }
        },
        afterArrayValue: function afterArrayValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          switch (token.value) {
            case ",":
              parseState = "beforeArrayValue";
              return;
            case "]":
              pop();
          }
        },
        end: function end() {
        }
      };
      function push() {
        var value;
        switch (token.type) {
          case "punctuator":
            switch (token.value) {
              case "{":
                value = {};
                break;
              case "[":
                value = [];
                break;
            }
            break;
          case "null":
          case "boolean":
          case "numeric":
          case "string":
            value = token.value;
            break;
        }
        if (root === void 0) {
          root = value;
        } else {
          var parent = stack[stack.length - 1];
          if (Array.isArray(parent)) {
            parent.push(value);
          } else {
            Object.defineProperty(parent, key, {
              value,
              writable: true,
              enumerable: true,
              configurable: true
            });
          }
        }
        if (value !== null && typeof value === "object") {
          stack.push(value);
          if (Array.isArray(value)) {
            parseState = "beforeArrayValue";
          } else {
            parseState = "beforePropertyName";
          }
        } else {
          var current = stack[stack.length - 1];
          if (current == null) {
            parseState = "end";
          } else if (Array.isArray(current)) {
            parseState = "afterArrayValue";
          } else {
            parseState = "afterPropertyValue";
          }
        }
      }
      function pop() {
        stack.pop();
        var current = stack[stack.length - 1];
        if (current == null) {
          parseState = "end";
        } else if (Array.isArray(current)) {
          parseState = "afterArrayValue";
        } else {
          parseState = "afterPropertyValue";
        }
      }
      function invalidChar(c2) {
        if (c2 === void 0) {
          return syntaxError("JSON5: invalid end of input at " + line + ":" + column);
        }
        return syntaxError("JSON5: invalid character '" + formatChar(c2) + "' at " + line + ":" + column);
      }
      function invalidEOF() {
        return syntaxError("JSON5: invalid end of input at " + line + ":" + column);
      }
      function invalidIdentifier() {
        column -= 5;
        return syntaxError("JSON5: invalid identifier character at " + line + ":" + column);
      }
      function separatorChar(c2) {
        console.warn("JSON5: '" + formatChar(c2) + "' in strings is not valid ECMAScript; consider escaping");
      }
      function formatChar(c2) {
        var replacements = {
          "'": "\\'",
          '"': '\\"',
          "\\": "\\\\",
          "\b": "\\b",
          "\f": "\\f",
          "\n": "\\n",
          "\r": "\\r",
          "	": "\\t",
          "\v": "\\v",
          "\0": "\\0",
          "\u2028": "\\u2028",
          "\u2029": "\\u2029"
        };
        if (replacements[c2]) {
          return replacements[c2];
        }
        if (c2 < " ") {
          var hexString = c2.charCodeAt(0).toString(16);
          return "\\x" + ("00" + hexString).substring(hexString.length);
        }
        return c2;
      }
      function syntaxError(message) {
        var err = new SyntaxError(message);
        err.lineNumber = line;
        err.columnNumber = column;
        return err;
      }
      var stringify = function stringify2(value, replacer, space) {
        var stack2 = [];
        var indent = "";
        var propertyList;
        var replacerFunc;
        var gap = "";
        var quote;
        if (replacer != null && typeof replacer === "object" && !Array.isArray(replacer)) {
          space = replacer.space;
          quote = replacer.quote;
          replacer = replacer.replacer;
        }
        if (typeof replacer === "function") {
          replacerFunc = replacer;
        } else if (Array.isArray(replacer)) {
          propertyList = [];
          for (var i = 0, list = replacer; i < list.length; i += 1) {
            var v = list[i];
            var item = void 0;
            if (typeof v === "string") {
              item = v;
            } else if (typeof v === "number" || v instanceof String || v instanceof Number) {
              item = String(v);
            }
            if (item !== void 0 && propertyList.indexOf(item) < 0) {
              propertyList.push(item);
            }
          }
        }
        if (space instanceof Number) {
          space = Number(space);
        } else if (space instanceof String) {
          space = String(space);
        }
        if (typeof space === "number") {
          if (space > 0) {
            space = Math.min(10, Math.floor(space));
            gap = "          ".substr(0, space);
          }
        } else if (typeof space === "string") {
          gap = space.substr(0, 10);
        }
        return serializeProperty("", { "": value });
        function serializeProperty(key2, holder) {
          var value2 = holder[key2];
          if (value2 != null) {
            if (typeof value2.toJSON5 === "function") {
              value2 = value2.toJSON5(key2);
            } else if (typeof value2.toJSON === "function") {
              value2 = value2.toJSON(key2);
            }
          }
          if (replacerFunc) {
            value2 = replacerFunc.call(holder, key2, value2);
          }
          if (value2 instanceof Number) {
            value2 = Number(value2);
          } else if (value2 instanceof String) {
            value2 = String(value2);
          } else if (value2 instanceof Boolean) {
            value2 = value2.valueOf();
          }
          switch (value2) {
            case null:
              return "null";
            case true:
              return "true";
            case false:
              return "false";
          }
          if (typeof value2 === "string") {
            return quoteString(value2, false);
          }
          if (typeof value2 === "number") {
            return String(value2);
          }
          if (typeof value2 === "object") {
            return Array.isArray(value2) ? serializeArray(value2) : serializeObject(value2);
          }
          return void 0;
        }
        function quoteString(value2) {
          var quotes = {
            "'": 0.1,
            '"': 0.2
          };
          var replacements = {
            "'": "\\'",
            '"': '\\"',
            "\\": "\\\\",
            "\b": "\\b",
            "\f": "\\f",
            "\n": "\\n",
            "\r": "\\r",
            "	": "\\t",
            "\v": "\\v",
            "\0": "\\0",
            "\u2028": "\\u2028",
            "\u2029": "\\u2029"
          };
          var product = "";
          for (var i2 = 0; i2 < value2.length; i2++) {
            var c2 = value2[i2];
            switch (c2) {
              case "'":
              case '"':
                quotes[c2]++;
                product += c2;
                continue;
              case "\0":
                if (util.isDigit(value2[i2 + 1])) {
                  product += "\\x00";
                  continue;
                }
            }
            if (replacements[c2]) {
              product += replacements[c2];
              continue;
            }
            if (c2 < " ") {
              var hexString = c2.charCodeAt(0).toString(16);
              product += "\\x" + ("00" + hexString).substring(hexString.length);
              continue;
            }
            product += c2;
          }
          var quoteChar = quote || Object.keys(quotes).reduce(function(a, b) {
            return quotes[a] < quotes[b] ? a : b;
          });
          product = product.replace(new RegExp(quoteChar, "g"), replacements[quoteChar]);
          return quoteChar + product + quoteChar;
        }
        function serializeObject(value2) {
          if (stack2.indexOf(value2) >= 0) {
            throw TypeError("Converting circular structure to JSON5");
          }
          stack2.push(value2);
          var stepback = indent;
          indent = indent + gap;
          var keys = propertyList || Object.keys(value2);
          var partial = [];
          for (var i2 = 0, list2 = keys; i2 < list2.length; i2 += 1) {
            var key2 = list2[i2];
            var propertyString = serializeProperty(key2, value2);
            if (propertyString !== void 0) {
              var member = serializeKey(key2) + ":";
              if (gap !== "") {
                member += " ";
              }
              member += propertyString;
              partial.push(member);
            }
          }
          var final;
          if (partial.length === 0) {
            final = "{}";
          } else {
            var properties;
            if (gap === "") {
              properties = partial.join(",");
              final = "{" + properties + "}";
            } else {
              var separator = ",\n" + indent;
              properties = partial.join(separator);
              final = "{\n" + indent + properties + ",\n" + stepback + "}";
            }
          }
          stack2.pop();
          indent = stepback;
          return final;
        }
        function serializeKey(key2) {
          if (key2.length === 0) {
            return quoteString(key2, true);
          }
          var firstChar = String.fromCodePoint(key2.codePointAt(0));
          if (!util.isIdStartChar(firstChar)) {
            return quoteString(key2, true);
          }
          for (var i2 = firstChar.length; i2 < key2.length; i2++) {
            if (!util.isIdContinueChar(String.fromCodePoint(key2.codePointAt(i2)))) {
              return quoteString(key2, true);
            }
          }
          return key2;
        }
        function serializeArray(value2) {
          if (stack2.indexOf(value2) >= 0) {
            throw TypeError("Converting circular structure to JSON5");
          }
          stack2.push(value2);
          var stepback = indent;
          indent = indent + gap;
          var partial = [];
          for (var i2 = 0; i2 < value2.length; i2++) {
            var propertyString = serializeProperty(String(i2), value2);
            partial.push(propertyString !== void 0 ? propertyString : "null");
          }
          var final;
          if (partial.length === 0) {
            final = "[]";
          } else {
            if (gap === "") {
              var properties = partial.join(",");
              final = "[" + properties + "]";
            } else {
              var separator = ",\n" + indent;
              var properties$1 = partial.join(separator);
              final = "[\n" + indent + properties$1 + ",\n" + stepback + "]";
            }
          }
          stack2.pop();
          indent = stepback;
          return final;
        }
      };
      var JSON52 = {
        parse: parse2,
        stringify
      };
      var lib = JSON52;
      var es5 = lib;
      return es5;
    });
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  ObsidianSpreadsheet: () => ObsidianSpreadsheet,
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var SheetSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Advanced Table XT \u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u539F\u751F\u8868\u683C\u540E\u5904\u7406").setDesc("\u542F\u7528\u6B64\u8BBE\u7F6E\u4EE5\u4F7F\u7528Obsidian Sheets\u7684\u6E32\u67D3\u5668").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.nativeProcessing).onChange(async (value) => {
        var _a, _b;
        this.plugin.settings.nativeProcessing = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.activeLeaf) == null ? void 0 : _a.rebuildView();
        (_b = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _b.previewMode.rerender(true);
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u5728\u5355\u5143\u683C\u4E2D\u4F7F\u7528\u6BB5\u843D").setDesc("\u542F\u7528\u6B64\u8BBE\u7F6E\u4EE5\u5728\u8868\u683C\u5355\u5143\u683C\u4E2D\u4F7F\u7528\u6BB5\u843D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.paragraphs).onChange(async (value) => {
        var _a, _b;
        this.plugin.settings.paragraphs = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.activeLeaf) == null ? void 0 : _a.rebuildView();
        (_b = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _b.previewMode.rerender(true);
      })
    );
    containerEl.createEl("h3", { text: "\u5DE5\u5177\u680F\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u8868\u683C\u5DE5\u5177\u680F").setDesc("\u542F\u7528\u6216\u7981\u7528\u8868\u683C\u5DE5\u5177\u680F\u529F\u80FD").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.toolbarEnabled).onChange(async (value) => {
        this.plugin.settings.toolbarEnabled = value;
        await this.plugin.saveSettings();
        if (value) {
          this.plugin.createToolbar();
        } else {
          document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
            container.remove();
          });
        }
      })
    );
    containerEl.createEl("h3", { text: "\u7F16\u8F91\u6A21\u5F0F\u64CD\u4F5C" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C").setDesc("\u5141\u8BB8\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u76F4\u63A5\u4FEE\u6539 Markdown \u6E90\u7801\u4E2D\u7684\u8868\u683C").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableEditModeOperations).onChange(async (value) => {
        this.plugin.settings.enableEditModeOperations = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\u5355\u5143\u683C\u5408\u5E76" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u5355\u5143\u683C\u5408\u5E76").setDesc("\u542F\u7528\u4F7F\u7528 < \u548C ^ \u6807\u8BB0\u8FDB\u884C\u5355\u5143\u683C\u5408\u5E76\u7684\u529F\u80FD").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableCellMerging).onChange(async (value) => {
        var _a;
        this.plugin.settings.enableCellMerging = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _a.previewMode.rerender(true);
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u5408\u5E76\u975E\u7A7A\u5355\u5143\u683C\u65F6\u786E\u8BA4").setDesc("\u5F53\u5408\u5E76\u5305\u542B\u5185\u5BB9\u7684\u5355\u5143\u683C\u65F6\u663E\u793A\u786E\u8BA4\u5BF9\u8BDD\u6846").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.confirmMergeNonEmpty).onChange(async (value) => {
        this.plugin.settings.confirmMergeNonEmpty = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u5C45\u4E2D\u5408\u5E76\u5355\u5143\u683C").setDesc("\u81EA\u52A8\u5C06\u5408\u5E76\u5355\u5143\u683C\u4E2D\u7684\u5185\u5BB9\u5C45\u4E2D\u663E\u793A").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoCenterMergedCells).onChange(async (value) => {
        var _a;
        this.plugin.settings.autoCenterMergedCells = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _a.previewMode.rerender(true);
      })
    );
    containerEl.createEl("h3", { text: "\u8868\u683CID\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u8868\u683CID").setDesc("\u81EA\u52A8\u4E3A\u8868\u683C\u6DFB\u52A0ID\u4F5C\u4E3AHTML\u6CE8\u91CA").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableTableIds).onChange(async (value) => {
        this.plugin.settings.enableTableIds = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u4F7F\u7528\u8868\u683C\u6CE8\u91CA\u5939\u6A21\u5F0F").setDesc('\u5728\u8868\u683C\u524D\u540E\u6DFB\u52A0\u914D\u5BF9\u7684HTML\u6CE8\u91CA\uFF0C\u5F62\u6210"\u6CE8\u91CA\u5939"\uFF0C\u63D0\u9AD8\u8868\u683CID\u8BC6\u522B\u7684\u51C6\u786E\u6027').addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.useTableWrapperComments).onChange(async (value) => {
        this.plugin.settings.useTableWrapperComments = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u8868\u683CID\u524D\u7F00").setDesc("\u751F\u6210\u7684\u8868\u683CID\u524D\u7F00").addText(
      (text) => text.setValue(this.plugin.settings.idPrefix).onChange(async (value) => {
        this.plugin.settings.idPrefix = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u8868\u683C\u7279\u5F81\u5339\u914D\u76F8\u4F3C\u5EA6\u9608\u503C").setDesc("\u5F53\u901A\u8FC7\u7279\u5F81\u5339\u914D\u8868\u683C\u65F6\uFF0C\u9700\u8981\u8FBE\u5230\u7684\u6700\u5C0F\u76F8\u4F3C\u5EA6\uFF080-1\u4E4B\u95F4\uFF0C\u9ED8\u8BA40.7\uFF09").addSlider(
      (slider) => slider.setLimits(0.5, 1, 0.05).setValue(this.plugin.settings.featureSimilarityThreshold || 0.7).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.featureSimilarityThreshold = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u4F18\u5148\u4F7F\u7528\u8868\u683C\u7279\u5F81\u5339\u914D").setDesc("\u542F\u7528\u540E\uFF0C\u5C06\u4F18\u5148\u4F7F\u7528\u7279\u5F81\u5339\u914D\u800C\u975E\u4F4D\u7F6E\u5339\u914D\u6765\u8BC6\u522B\u8868\u683CID").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.preferFeatureMatching || false).onChange(async (value) => {
        this.plugin.settings.preferFeatureMatching = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\u6570\u636E\u5B58\u50A8\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u4F18\u5148\u4F7F\u7528\u6587\u4EF6\u5B58\u50A8").setDesc("\u542F\u7528\u540E\uFF0C\u8868\u683C\u6570\u636E\u5C06\u4F18\u5148\u5B58\u50A8\u5728Markdown\u6587\u4EF6\u4E2D\uFF0C\u800C\u4E0D\u662Fdata.json\u6587\u4EF6\u4E2D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.preferFileStorage || false).onChange(async (value) => {
        this.plugin.settings.preferFileStorage = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u5BFC\u51FA\u5230\u6587\u4EF6").setDesc("\u542F\u7528\u540E\uFF0C\u5373\u4F7F\u4F7F\u7528data.json\u5B58\u50A8\u6570\u636E\uFF0C\u4E5F\u4F1A\u81EA\u52A8\u5C06\u6570\u636E\u5BFC\u51FA\u5230Markdown\u6587\u4EF6\u4E2D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoExportToFile || false).onChange(async (value) => {
        this.plugin.settings.autoExportToFile = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/sheetElement.ts
var import_obsidian2 = require("obsidian");
var JSON5 = __toESM(require_dist());
var MERGE_UP_SIGNIFIER = "^";
var MERGE_LEFT_SIGNIFIER = "<";
var HEADER_DELIMETER = "-";
var META_DELIMETER = "---";
var SheetElement = class extends import_obsidian2.MarkdownRenderChild {
  constructor(el, source, ctx, app, plugin) {
    super(el);
    this.el = el;
    this.source = source;
    this.ctx = ctx;
    this.app = app;
    this.plugin = plugin;
    this.globalStyle = {};
    this.cellMaxLength = 0;
    this.rowMaxLength = 0;
    this.rowStyles = [];
    this.colStyles = [];
    this.domGrid = [];
  }
  async onload() {
    this.metaRE = new RegExp(String.raw`^${META_DELIMETER}\s*?(?:~(.*?))?\s*?\n+`, "mg");
    this.newLineRE = new RegExp(String.raw`\n`);
    this.cellBorderRE = new RegExp(String.raw`(?<!\\)\|`);
    this.headerRE = new RegExp(String.raw`^\s*?(:)?(?:${HEADER_DELIMETER})+?(:)?\s*?(?:(?<!\\)~(.*?))?$`);
    this.parseInputToGrid();
    this.validateInput();
    this.normalizeGrid();
    this.table = this.el;
    this.table.id = "obsidian-sheets-parsed";
    this.tableHead = this.table.createEl("thead");
    this.tableBody = this.table.createEl("tbody");
    this.getHeaderBoundaries();
    this.getHeaderStyles();
    this.buildDomTable();
  }
  onunload() {
  }
  displayError(error) {
    this.el.createDiv({
      text: `
Error: \`${error}\`

`,
      cls: "obs-sheets_error"
    });
    this.unload();
  }
  parseInputToGrid() {
    var _a;
    if (!this.metaRE.test(this.source))
      return this.contentGrid = this.source.split(this.newLineRE).filter((row) => this.cellBorderRE.test(row)).map((row) => row.split(this.cellBorderRE).map((cell) => cell.trim()));
    const [meta, unparsedStyle, source] = this.source.split(this.metaRE);
    this.parseMetadata(meta);
    if (unparsedStyle) {
      let cellStyle = {};
      const cls = unparsedStyle.match(/\.\S+/g) || [];
      cls.forEach((cssClass) => {
        var _a2;
        cellStyle = { ...cellStyle, ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {} };
      });
      const inlineStyle = ((_a = unparsedStyle.match(/\{.*\}/)) == null ? void 0 : _a[0]) || "{}";
      try {
        cellStyle = { ...cellStyle, ...JSON5.parse(inlineStyle) };
      } catch (e) {
        console.error(`Invalid cell style \`${inlineStyle}\``);
      }
      this.globalStyle = cellStyle;
    }
    return this.contentGrid = source.split(this.newLineRE).map((row) => row.split(this.cellBorderRE).map((cell) => cell.trim()));
  }
  parseMetadata(meta) {
    let metadata;
    try {
      metadata = JSON5.parse(meta);
    } catch (error) {
      return this.displayError("Metadata is not proper JSON");
    }
    this.metadata = metadata;
    if (metadata.classes) {
      this.styles = metadata.classes;
    }
  }
  validateInput() {
    if (!this.contentGrid.every(
      (row) => {
        var _a, _b;
        return !((_a = row.pop()) == null ? void 0 : _a.trim()) && !((_b = row.shift()) == null ? void 0 : _b.trim());
      }
    ))
      return this.displayError("Malformed table");
  }
  normalizeGrid() {
    for (let rowIndex = 0; rowIndex < this.contentGrid.length; rowIndex++) {
      const row = this.contentGrid[rowIndex];
      if (this.rowMaxLength < row.length)
        this.rowMaxLength = row.length;
      for (let colIndex = 0; colIndex < row.length; colIndex++)
        if (this.cellMaxLength < row[colIndex].trim().length)
          this.cellMaxLength = row[colIndex].trim().length;
    }
    this.contentGrid = this.contentGrid.map(
      (line) => Array.from(
        { ...line, length: this.rowMaxLength },
        (cell) => cell || ""
      )
    );
  }
  getHeaderBoundaries() {
    this.headerRow = this.contentGrid.findIndex(
      (headerRow) => headerRow.every((headerCol) => this.headerRE.test(headerCol))
    );
    this.headerCol = this.contentGrid[0].map(
      (_, i) => this.contentGrid.map((row) => row[i])
    ).findIndex(
      (headerCol) => headerCol.every((headerCol2) => this.headerRE.test(headerCol2))
    );
  }
  getHeaderStyles() {
    if (this.headerRow !== -1)
      this.colStyles = this.contentGrid[this.headerRow].map((rowHead) => {
        var _a, _b;
        let styles = {};
        const alignment = rowHead.match(this.headerRE);
        if (!alignment)
          return { classes: [], styles };
        else if (alignment[1] && alignment[2])
          styles["textAlign"] = "center";
        else if (alignment[1])
          styles["textAlign"] = "left";
        else if (alignment[2])
          styles["textAlign"] = "right";
        const classes = ((_b = (_a = alignment[3]) == null ? void 0 : _a.match(/\.\S+/g)) == null ? void 0 : _b.map(String)) || [];
        classes.forEach(
          (cssClass) => {
            var _a2;
            return styles = {
              ...styles,
              ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {}
            };
          }
        );
        return { classes, styles };
      });
    if (this.headerCol !== -1)
      this.rowStyles = this.contentGrid[0].map(
        (_, i) => this.contentGrid.map((row) => row[i])
      )[this.headerCol].map((rowHead) => {
        var _a, _b;
        let styles = {};
        const alignment = rowHead.match(this.headerRE);
        if (!alignment)
          return { classes: [], styles };
        else if (alignment[1] && alignment[2])
          styles["textAlign"] = "center";
        else if (alignment[1])
          styles["textAlign"] = "left";
        else if (alignment[2])
          styles["textAlign"] = "right";
        const classes = ((_b = (_a = alignment[3]) == null ? void 0 : _a.match(/\.\S+/g)) == null ? void 0 : _b.map(String)) || [];
        classes.forEach(
          (cssClass) => {
            var _a2;
            return styles = {
              ...styles,
              ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {}
            };
          }
        );
        return { classes, styles };
      });
  }
  buildDomTable() {
    for (let rowIndex = 0; rowIndex < this.contentGrid.length; rowIndex++)
      this.buildDomRow(rowIndex);
  }
  buildDomRow(rowIndex) {
    const rowContents = this.contentGrid[rowIndex];
    let rowNode = this.tableBody.createEl("tr");
    if (rowIndex < this.headerRow)
      rowNode = this.tableHead.createEl("tr");
    else if (rowIndex === this.headerRow)
      return;
    this.domGrid[rowIndex] = [];
    for (let columnIndex = 0; columnIndex < rowContents.length; columnIndex++)
      this.buildDomCell(rowIndex, columnIndex, rowNode);
  }
  async buildDomCell(rowIndex, columnIndex, rowNode) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    const [
      cellContent,
      cellStyles
    ] = this.contentGrid[rowIndex][columnIndex].split(/(?<![\\~])~(?!~)/);
    let cls = [];
    let cellStyle = this.globalStyle;
    if (this.rowStyles[rowIndex]) {
      cellStyle = { ...cellStyle, ...this.rowStyles[rowIndex].styles };
      cls.push(...this.rowStyles[rowIndex].classes);
    }
    if (this.colStyles[columnIndex]) {
      cellStyle = { ...cellStyle, ...this.colStyles[columnIndex].styles };
      cls.push(...this.colStyles[columnIndex].classes);
    }
    if (cellStyles) {
      cls = cellStyles.match(/(?<=\.)\S+/g) || [];
      cls.forEach((cssClass) => {
        var _a2;
        cellStyle = { ...cellStyle, ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass]) || {} };
      });
      const inlineStyle = ((_a = cellStyles.match(/\{.*\}/)) == null ? void 0 : _a[0]) || "{}";
      try {
        cellStyle = { ...cellStyle, ...JSON5.parse(inlineStyle) };
      } catch (e) {
        console.error(`Invalid cell style \`${inlineStyle}\``);
      }
    }
    let cellTag = "td";
    let cell;
    if (columnIndex === this.headerCol || rowIndex === this.headerRow)
      return;
    else if (columnIndex < this.headerCol || rowIndex < this.headerRow)
      cellTag = "th";
    if (cellContent == MERGE_LEFT_SIGNIFIER && ((_c = (_b = this.domGrid) == null ? void 0 : _b[rowIndex]) == null ? void 0 : _c[columnIndex - 1])) {
      cell = this.domGrid[rowIndex][columnIndex - 1];
      (cell == null ? void 0 : cell.colSpan) || Object.assign(cell, { colSpan: 1 });
      cell.colSpan = columnIndex - parseInt(cell.getAttribute("col-index") || columnIndex.toString()) + 1;
    } else if (cellContent == MERGE_UP_SIGNIFIER && ((_e = (_d = this.domGrid) == null ? void 0 : _d[rowIndex - 1]) == null ? void 0 : _e[columnIndex])) {
      cell = this.domGrid[rowIndex - 1][columnIndex];
      (cell == null ? void 0 : cell.rowSpan) || Object.assign(cell, { rowSpan: 1 });
      cell.rowSpan = rowIndex - parseInt(cell.getAttribute("row-index") || "0") + 1;
    } else if (((_g = (_f = this.domGrid) == null ? void 0 : _f[rowIndex - 1]) == null ? void 0 : _g[columnIndex]) && ((_i = (_h = this.domGrid) == null ? void 0 : _h[rowIndex]) == null ? void 0 : _i[columnIndex - 1]) && this.domGrid[rowIndex][columnIndex - 1] === this.domGrid[rowIndex - 1][columnIndex])
      cell = this.domGrid[rowIndex][columnIndex - 1];
    else {
      cell = rowNode.createEl(cellTag, { cls });
      cell.setAttribute("row-index", rowIndex.toString());
      cell.setAttribute("col-index", columnIndex.toString());
      import_obsidian2.MarkdownRenderer.render(
        this.app,
        "\u200B " + (cellContent || "\u200B"),
        // Make sure markdown that requires to be at the start of a line is not rendered
        cell,
        "",
        this
      ).then(() => {
        cell.innerHTML = cell.children[0].innerHTML.replace(/^\u200B /g, "");
      });
      Object.assign(cell.style, cellStyle);
    }
    return this.domGrid[rowIndex][columnIndex] = cell;
  }
};

// src/markdownTableDetector.ts
var import_obsidian3 = require("obsidian");
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, message, onClose) {
    super(app);
    this.result = false;
    this.message = message;
    this.onClose = onClose;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "\u786E\u8BA4\u64CD\u4F5C" });
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.createEl("button", { text: "\u53D6\u6D88" }).addEventListener("click", () => {
      this.result = false;
      this.close();
    });
    buttonContainer.createEl("button", { text: "\u786E\u8BA4", cls: "mod-cta" }).addEventListener("click", () => {
      this.result = true;
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onClose(this.result);
  }
};
var MarkdownTableDetector = class {
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  constructor(plugin) {
    this.plugin = plugin;
    console.log("MarkdownTableDetector initialized");
  }
  /**
   * 显示确认对话框
   * @param message 确认消息
   * @returns 用户是否确认
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const modal = new ConfirmModal(this.getApp(), message, (result) => {
        resolve(result);
      });
      modal.open();
    });
  }
  /**
   * 检查是否为HTML格式的表格（而非Markdown生成的表格）
   * @param table 表格HTML元素
   * @returns 是否为HTML格式的表格
   */
  isHtmlFormattedTable(table) {
    try {
      if (table.hasAttribute("border") || table.hasAttribute("cellpadding") || table.hasAttribute("cellspacing") || table.hasAttribute("width") || table.hasAttribute("height") || table.hasAttribute("bgcolor")) {
        return true;
      }
      const style = table.getAttribute("style");
      if (style && (style.includes("border-collapse") || style.includes("text-align") || style.includes("font-family") || style.includes("background-color"))) {
        return true;
      }
      const cells = table.querySelectorAll("td, th");
      for (const cell of Array.from(cells).slice(0, 10)) {
        const html = cell.innerHTML || "";
        if (html.includes("<") && html.includes(">") && !html.match(/^<(em|strong|s|code|a|span)[^>]*>.*<\/(em|strong|s|code|a|span)>$/)) {
          return true;
        }
      }
      const rows = table.querySelectorAll("tr");
      if (rows.length > 1) {
        const secondRow = rows[1];
        const separatorCells = secondRow.querySelectorAll("td, th");
        let isSeparatorRow = true;
        for (const cell of Array.from(separatorCells)) {
          const text = cell.textContent || "";
          if (!text.match(/^:?-+:?$/)) {
            isSeparatorRow = false;
            break;
          }
        }
        if (!isSeparatorRow) {
          return true;
        }
      }
      return false;
    } catch (error) {
      console.error("\u68C0\u6D4BHTML\u8868\u683C\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 设置表格行列索引
   * @param table 表格HTML元素
   */
  setupTableIndices(table) {
    try {
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          cell.dataset.rowIndex = rowIndex.toString();
          cell.dataset.colIndex = colIndex.toString();
          cell.setAttribute("row-index", rowIndex.toString());
          cell.setAttribute("col-index", colIndex.toString());
          cell.classList.add("advanced-table-cell");
          if (cell.tagName.toLowerCase() === "th") {
            cell.classList.add("advanced-table-header");
          }
          if (!cell.innerHTML.trim()) {
            cell.innerHTML = "&nbsp;";
          }
        }
      }
    } catch (error) {
      console.error("\u8BBE\u7F6E\u8868\u683C\u7D22\u5F15\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 检查单元格内容是否为合并标记
   * @param cell 单元格元素
   * @param marker 标记符号类型 ('^' 或 '<')
   * @returns 是否为指定类型的合并标记
   */
  isMergeMarker(cell, marker) {
    var _a;
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    if (marker === "^") {
      return /^(\^+|\\\^|\s*\^+\s*)$/.test(content);
    } else if (marker === "<") {
      return /^(<+|\\<|\s*<+\s*)$/.test(content);
    }
    return false;
  }
  /**
   * 检查单元格是否非空且有有效内容
   * @param cell 单元格元素
   * @returns 是否有有效内容
   */
  hasMeaningfulContent(cell) {
    var _a;
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    return content !== "" && content !== "&nbsp;" && !/^(\^+|\\\^|\s*\^+\s*)$/.test(content) && !/^(<+|\\<|\s*<+\s*)$/.test(content);
  }
  /**
   * 解析表格的合并标记
   * @param table 表格HTML元素
   */
  async parseMergeCellMarkers(table) {
    var _a, _b, _c, _d, _e, _f, _g;
    if (!this.plugin.settings.enableCellMerging)
      return;
    try {
      const rows = table.querySelectorAll("tr");
      const mergeUp = [];
      const mergeLeft = [];
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          const upMatch = content.match(/^(\^+)$/);
          if (upMatch) {
            const count = upMatch[1].length;
            console.log(`\u53D1\u73B0\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${count}, \u5185\u5BB9="${content}"`);
            mergeUp.push({ cell, count });
            continue;
          }
          const leftMatch = content.match(/^(<+)$/);
          if (leftMatch) {
            const count = leftMatch[1].length;
            console.log(`\u53D1\u73B0\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${count}, \u5185\u5BB9="${content}"`);
            mergeLeft.push({ cell, count });
            continue;
          }
          if (content === "\\^" || content === " ^ " || content === " \\^ ") {
            console.log(`\u53D1\u73B0\u8F6C\u4E49\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u5185\u5BB9="${content}"`);
            mergeUp.push({ cell, count: 1 });
          } else if (content === "\\<" || content === " < " || content === " \\< ") {
            console.log(`\u53D1\u73B0\u8F6C\u4E49\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u5185\u5BB9="${content}"`);
            mergeLeft.push({ cell, count: 1 });
          }
        }
      }
      for (const { cell, count } of mergeUp) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        console.log(`\u5904\u7406\u5411\u4E0A\u5408\u5E76: \u884C=${rowIndex}, \u5217=${colIndex}, \u5408\u5E76\u6570\u91CF=${count}`);
        if (rowIndex >= count) {
          const targetRowIndex = rowIndex - count;
          const targetRow = rows[targetRowIndex];
          if (targetRow) {
            const targetCells = targetRow.querySelectorAll("td, th");
            if (colIndex < targetCells.length) {
              const targetCell = targetCells[colIndex];
              if (this.hasMeaningfulContent(targetCell)) {
                const cellsToMerge = [];
                if (this.hasMeaningfulContent(cell)) {
                  cellsToMerge.push({
                    rowIndex,
                    colIndex,
                    content: ((_b = cell.textContent) == null ? void 0 : _b.trim()) || ""
                  });
                }
                for (let i = 1; i < count; i++) {
                  const midRowIndex = rowIndex - i;
                  if (midRowIndex > targetRowIndex) {
                    const midRow = rows[midRowIndex];
                    const midCells = midRow.querySelectorAll("td, th");
                    if (colIndex < midCells.length) {
                      const midCell = midCells[colIndex];
                      if (this.hasMeaningfulContent(midCell)) {
                        cellsToMerge.push({
                          rowIndex: midRowIndex,
                          colIndex,
                          content: ((_c = midCell.textContent) == null ? void 0 : _c.trim()) || ""
                        });
                      }
                    }
                  }
                }
                if (this.plugin.settings.confirmMergeNonEmpty && cellsToMerge.length > 0) {
                  const cellContents = cellsToMerge.map(
                    (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
                  ).join("\n");
                  const confirmMerge = await this.showConfirmDialog(
                    `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
                  );
                  if (!confirmMerge) {
                    console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5355\u5143\u683C\u5408\u5E76");
                    continue;
                  }
                }
                let rowSpan = parseInt(targetCell.getAttribute("rowspan") || "1");
                rowSpan = rowSpan + count;
                console.log(`\u8BBE\u7F6Erowspan: \u76EE\u6807\u5355\u5143\u683C(${targetRowIndex},${colIndex}), rowspan=${rowSpan}`);
                targetCell.setAttribute("rowspan", rowSpan.toString());
                targetCell.rowSpan = rowSpan;
                targetCell.classList.add("obs-merged-cell");
                cell.style.display = "none";
              } else {
                console.warn("\u5411\u4E0A\u5408\u5E76\u5931\u8D25: \u76EE\u6807\u5355\u5143\u683C\u6CA1\u6709\u6709\u6548\u5185\u5BB9", targetCell);
              }
            }
          }
        }
      }
      for (const { cell, count } of mergeLeft) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        console.log(`\u5904\u7406\u5411\u5DE6\u5408\u5E76: \u884C=${rowIndex}, \u5217=${colIndex}, \u5408\u5E76\u6570\u91CF=${count}`);
        if (colIndex >= count) {
          const targetColIndex = colIndex - count;
          const targetCell = (_d = rows[rowIndex]) == null ? void 0 : _d.querySelectorAll("td, th")[targetColIndex];
          if (targetCell) {
            if (this.hasMeaningfulContent(targetCell)) {
              const cellsToMerge = [];
              if (this.hasMeaningfulContent(cell)) {
                cellsToMerge.push({
                  rowIndex,
                  colIndex,
                  content: ((_e = cell.textContent) == null ? void 0 : _e.trim()) || ""
                });
              }
              for (let i = 1; i < count; i++) {
                const midColIndex = colIndex - i;
                if (midColIndex > targetColIndex) {
                  const midCell = (_f = rows[rowIndex]) == null ? void 0 : _f.querySelectorAll("td, th")[midColIndex];
                  if (midCell && this.hasMeaningfulContent(midCell)) {
                    cellsToMerge.push({
                      rowIndex,
                      colIndex: midColIndex,
                      content: ((_g = midCell.textContent) == null ? void 0 : _g.trim()) || ""
                    });
                  }
                }
              }
              if (this.plugin.settings.confirmMergeNonEmpty && cellsToMerge.length > 0) {
                const cellContents = cellsToMerge.map(
                  (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
                ).join("\n");
                const confirmMerge = await this.showConfirmDialog(
                  `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
                );
                if (!confirmMerge) {
                  console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5355\u5143\u683C\u5408\u5E76");
                  continue;
                }
              }
              let colSpan = parseInt(targetCell.getAttribute("colspan") || "1");
              colSpan = colSpan + count;
              console.log(`\u8BBE\u7F6Ecolspan: \u76EE\u6807\u5355\u5143\u683C(${rowIndex},${targetColIndex}), colspan=${colSpan}`);
              targetCell.setAttribute("colspan", colSpan.toString());
              targetCell.colSpan = colSpan;
              targetCell.classList.add("obs-merged-cell");
              cell.style.display = "none";
            } else {
              console.warn("\u5411\u5DE6\u5408\u5E76\u5931\u8D25: \u76EE\u6807\u5355\u5143\u683C\u6CA1\u6709\u6709\u6548\u5185\u5BB9", targetCell);
            }
          }
        }
      }
      if (this.plugin.settings.autoCenterMergedCells) {
        const mergedCells = table.querySelectorAll("[rowspan], [colspan]");
        mergedCells.forEach((cell) => {
          const htmlCell = cell;
          if (parseInt(htmlCell.getAttribute("rowspan") || "1") > 1 || parseInt(htmlCell.getAttribute("colspan") || "1") > 1) {
            htmlCell.style.textAlign = "center";
            htmlCell.style.verticalAlign = "middle";
            htmlCell.classList.add("obs-merged-cell");
          }
        });
      }
    } catch (error) {
      console.error("\u89E3\u6790\u5355\u5143\u683C\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 应用表格合并标记到Markdown
   * @param table 表格HTML元素
   */
  applyMergeCellsMarkers(table) {
    var _a;
    try {
      if (table.dataset.tableMergeProcessed === "true") {
        return;
      }
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          const cellContent = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          const leftMatch = cellContent.match(/^(<+|\\<|\s*<+\s*)$/);
          if (leftMatch && colIndex > 0) {
            let mergeCount = 1;
            if (cellContent.match(/^<+$/)) {
              mergeCount = cellContent.length;
            }
            console.log(`\u5E94\u7528\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${mergeCount}, \u5185\u5BB9="${cellContent}"`);
            const targetColIndex = colIndex - mergeCount;
            if (targetColIndex >= 0) {
              const leftCell = cells[targetColIndex];
              const colSpan2 = mergeCount + 1;
              console.log(`\u8BBE\u7F6Ecolspan: \u76EE\u6807\u5355\u5143\u683C(${rowIndex},${targetColIndex}), colspan=${colSpan2}`);
              leftCell.colSpan = colSpan2;
              leftCell.setAttribute("colspan", colSpan2.toString());
              cell.style.display = "none";
              if (this.plugin.settings.autoCenterMergedCells) {
                leftCell.style.textAlign = "center";
                leftCell.style.verticalAlign = "middle";
              }
              leftCell.classList.add("obs-merged-cell");
            }
            continue;
          }
          const upMatch = cellContent.match(/^(\^+|\\\^|\s*\^+\s*)$/);
          if (upMatch && rowIndex > 0) {
            let mergeCount = 1;
            if (cellContent.match(/^\^+$/)) {
              mergeCount = cellContent.length;
            }
            console.log(`\u5E94\u7528\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${mergeCount}, \u5185\u5BB9="${cellContent}"`);
            const targetRowIndex = rowIndex - mergeCount;
            if (targetRowIndex >= 0) {
              const aboveRow = rows[targetRowIndex];
              const aboveCells = aboveRow.querySelectorAll("td, th");
              if (colIndex < aboveCells.length) {
                const aboveCell = aboveCells[colIndex];
                const rowSpan2 = mergeCount + 1;
                console.log(`\u8BBE\u7F6Erowspan: \u76EE\u6807\u5355\u5143\u683C(${targetRowIndex},${colIndex}), rowspan=${rowSpan2}`);
                aboveCell.rowSpan = rowSpan2;
                aboveCell.setAttribute("rowspan", rowSpan2.toString());
                cell.style.display = "none";
                if (this.plugin.settings.autoCenterMergedCells) {
                  aboveCell.style.textAlign = "center";
                  aboveCell.style.verticalAlign = "middle";
                }
                aboveCell.classList.add("obs-merged-cell");
              }
            }
            continue;
          }
          const rowSpan = parseInt(cell.getAttribute("rowspan") || "1");
          const colSpan = parseInt(cell.getAttribute("colspan") || "1");
          if (rowSpan > 1) {
            for (let i = 1; i < rowSpan; i++) {
              if (rowIndex + i < rows.length) {
                const targetRow = rows[rowIndex + i];
                const targetCells = targetRow.querySelectorAll("td, th");
                if (colIndex < targetCells.length) {
                  const targetCell = targetCells[colIndex];
                  const markerText = "^".repeat(i);
                  console.log(`\u6DFB\u52A0\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u4F4D\u7F6E(${rowIndex + i},${colIndex}), \u6807\u8BB0="${markerText}"`);
                  targetCell.textContent = markerText;
                  targetCell.classList.add("merge-marker");
                }
              }
            }
          }
          if (colSpan > 1) {
            for (let i = 1; i < colSpan; i++) {
              if (colIndex + i < cells.length) {
                const targetCell = cells[colIndex + i];
                const markerText = "<".repeat(i);
                console.log(`\u6DFB\u52A0\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u4F4D\u7F6E(${rowIndex},${colIndex + i}), \u6807\u8BB0="${markerText}"`);
                targetCell.textContent = markerText;
                targetCell.classList.add("merge-marker");
              }
            }
          }
        }
      }
      table.dataset.tableMergeProcessed = "true";
      console.log(`\u8868\u683C\u5904\u7406\u5B8C\u6210\uFF0C\u5DF2\u6DFB\u52A0\u5408\u5E76\u6807\u8BB0`);
    } catch (error) {
      console.error("\u5E94\u7528\u5408\u5E76\u5355\u5143\u683C\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 处理多选单元格合并
   * @param table 表格元素
   * @param selectedCells 选中的单元格数组
   * @returns 是否成功合并
   */
  async mergeSelectedCells(table, selectedCells) {
    var _a;
    if (!selectedCells || selectedCells.length < 2) {
      new import_obsidian3.Notice("\u8BF7\u9009\u62E9\u81F3\u5C112\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
      return false;
    }
    try {
      let minRow = Number.MAX_SAFE_INTEGER;
      let maxRow = 0;
      let minCol = Number.MAX_SAFE_INTEGER;
      let maxCol = 0;
      for (const cell of selectedCells) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        minRow = Math.min(minRow, rowIndex);
        maxRow = Math.max(maxRow, rowIndex);
        minCol = Math.min(minCol, colIndex);
        maxCol = Math.max(maxCol, colIndex);
      }
      const expectedCellCount = (maxRow - minRow + 1) * (maxCol - minCol + 1);
      if (expectedCellCount !== selectedCells.length) {
        new import_obsidian3.Notice("\u53EA\u80FD\u5408\u5E76\u5F62\u6210\u5B8C\u6574\u77E9\u5F62\u7684\u5355\u5143\u683C");
        return false;
      }
      const mainCell = table.querySelector(`[row-index="${minRow}"][col-index="${minCol}"]`);
      if (!mainCell) {
        new import_obsidian3.Notice("\u65E0\u6CD5\u627E\u5230\u4E3B\u5355\u5143\u683C");
        return false;
      }
      if (this.plugin.settings.confirmMergeNonEmpty) {
        const nonEmptyCells = [];
        for (const cell of selectedCells) {
          if (cell === mainCell)
            continue;
          if (this.hasMeaningfulContent(cell)) {
            const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
            const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
            nonEmptyCells.push({
              rowIndex,
              colIndex,
              content: ((_a = cell.textContent) == null ? void 0 : _a.trim()) || ""
            });
          }
        }
        if (nonEmptyCells.length > 0) {
          const cellContents = nonEmptyCells.map(
            (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
          ).join("\n");
          const confirmMerge = await this.showConfirmDialog(
            `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
          );
          if (!confirmMerge) {
            new import_obsidian3.Notice("\u5DF2\u53D6\u6D88\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      const rowSpanValue = maxRow - minRow + 1;
      const colSpanValue = maxCol - minCol + 1;
      mainCell.setAttribute("rowspan", rowSpanValue.toString());
      mainCell.setAttribute("colspan", colSpanValue.toString());
      mainCell.rowSpan = rowSpanValue;
      mainCell.colSpan = colSpanValue;
      mainCell.classList.add("obs-merged-cell");
      if (this.plugin.settings.autoCenterMergedCells) {
        mainCell.style.textAlign = "center";
        mainCell.style.verticalAlign = "middle";
      }
      for (const cell of selectedCells) {
        if (cell !== mainCell) {
          cell.style.display = "none";
        }
      }
      this.applyMergeCellsMarkersForArea(table, minRow, minCol, maxRow, maxCol);
      return true;
    } catch (error) {
      console.error("\u5408\u5E76\u9009\u4E2D\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 为特定区域应用合并标记
   * @param table 表格元素
   * @param startRow 起始行
   * @param startCol 起始列
   * @param endRow 结束行
   * @param endCol 结束列
   */
  applyMergeCellsMarkersForArea(table, startRow, startCol, endRow, endCol) {
    try {
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = startRow; rowIndex <= endRow; rowIndex++) {
        if (rowIndex < rows.length) {
          const row = rows[rowIndex];
          const cells = row.querySelectorAll("td, th");
          for (let colIndex = startCol; colIndex <= endCol; colIndex++) {
            if (colIndex < cells.length && !(rowIndex === startRow && colIndex === startCol)) {
              const cell = cells[colIndex];
              if (colIndex === startCol) {
                cell.textContent = "^";
                cell.classList.add("merge-marker");
              } else if (rowIndex === startRow) {
                cell.textContent = "<";
                cell.classList.add("merge-marker");
              } else {
                cell.textContent = Math.random() > 0.5 ? "^" : "<";
                cell.classList.add("merge-marker", "hidden-marker");
              }
            }
          }
        }
      }
    } catch (error) {
      console.error("\u5E94\u7528\u533A\u57DF\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
};

// src/tableIdManager.ts
var import_obsidian4 = require("obsidian");
var _TableIdManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    console.log("TableIdManager initialized");
  }
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  /**
   * 获取表格标识符
   * @param table 表格HTML元素
   * @param useFallback 是否在未找到HTML注释ID时使用其他ID来源
   * @returns 表格ID或null
   */
  getTableIdentifier(table, useFallback = false) {
    try {
      if (_TableIdManager.isProcessingTableId)
        return null;
      _TableIdManager.isProcessingTableId = true;
      console.log("\u5F00\u59CB\u83B7\u53D6\u8868\u683CID");
      const currentDomId = table.getAttribute("data-table-id");
      if (currentDomId) {
        console.log(`\u8868\u683C\u5F53\u524DDOM\u5C5E\u6027ID: ${currentDomId}`);
      }
      const tableFeature = this.extractTableFeature(table);
      if (tableFeature) {
        console.log(`\u63D0\u53D6\u7684\u8868\u683C\u7279\u5F81:`, tableFeature);
      }
      let commentId = this.getTableIdFromComment(table);
      if (commentId) {
        console.log(`\u4ECEHTML\u6CE8\u91CA\u83B7\u53D6\u5230\u8868\u683CID: ${commentId}`);
        if (currentDomId && currentDomId !== commentId) {
          console.log(`\u8B66\u544A: DOM\u4E2D\u7684ID(${currentDomId})\u4E0EHTML\u6CE8\u91CA\u4E2D\u7684ID(${commentId})\u4E0D\u5339\u914D`);
          console.log(`\u6B63\u5728\u66F4\u65B0DOM\u5C5E\u6027\uFF0C\u4F7F\u7528HTML\u6CE8\u91CA\u4E2D\u7684ID: ${commentId}`);
          table.setAttribute("data-table-id", commentId);
        } else if (!currentDomId) {
          console.log(`\u8BBE\u7F6EDOM\u5C5E\u6027ID: ${commentId}`);
          table.setAttribute("data-table-id", commentId);
        }
        if (tableFeature) {
          table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        }
        _TableIdManager.isProcessingTableId = false;
        return commentId;
      }
      if (useFallback && currentDomId) {
        console.log(`\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u56DE\u9000\u4F7F\u7528DOM\u5C5E\u6027ID: ${currentDomId}`);
        if (tableFeature) {
          table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        }
        _TableIdManager.isProcessingTableId = false;
        return currentDomId;
      }
      console.log("\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u4E0D\u4F7F\u7528\u5176\u4ED6ID\u6765\u6E90");
      if (!useFallback && currentDomId) {
        console.log(`\u8B66\u544A: \u8868\u683CDOM\u4E2D\u6709ID(${currentDomId})\uFF0C\u4F46\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u5BF9\u5E94ID`);
        console.log("\u6E05\u9664DOM\u4E2D\u7684ID\u5C5E\u6027\uFF0C\u4EE5\u907F\u514D\u4F7F\u7528\u8FC7\u65F6\u6216\u4E0D\u6B63\u786E\u7684ID");
        table.removeAttribute("data-table-id");
      }
      _TableIdManager.isProcessingTableId = false;
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      _TableIdManager.isProcessingTableId = false;
      return null;
    }
  }
  /**
   * 获取或创建表格ID
   * @param table 表格HTML元素
   * @returns 表格ID
   */
  getOrCreateTableId(table) {
    try {
      if (_TableIdManager.isCreatingTableId)
        return "";
      _TableIdManager.isCreatingTableId = true;
      let tableId = this.getTableIdentifier(table, true);
      if (!tableId) {
        console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u53EF\u4EE5\u4F7F\u7528confirmAndCreateTableId\u65B9\u6CD5\u521B\u5EFA\u65B0ID");
        new import_obsidian4.Notice('\u672A\u627E\u5230\u8868\u683CID\uFF0C\u8BF7\u4F7F\u7528\u8868\u683C\u5DE5\u5177\u680F\u4E2D\u7684"\u8BBE\u7F6E\u8868\u683CID"\u529F\u80FD\u521B\u5EFA\u65B0ID');
      }
      _TableIdManager.isCreatingTableId = false;
      return tableId || "";
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      _TableIdManager.isCreatingTableId = false;
      return "";
    }
  }
  /**
   * 确认并创建表格ID
   * @param table 表格HTML元素
   * @returns 创建的表格ID
   */
  confirmAndCreateTableId(table) {
    try {
      const existingId = this.getTableIdentifier(table, true);
      if (existingId) {
        console.log(`\u8868\u683C\u5DF2\u6709ID: ${existingId}\uFF0C\u4E0D\u9700\u8981\u521B\u5EFA\u65B0ID`);
        new import_obsidian4.Notice(`\u8868\u683C\u5DF2\u6709ID: ${existingId}`);
        return existingId;
      }
      const newId = this.generateTableId();
      console.log(`\u4E3A\u8868\u683C\u751F\u6210\u65B0ID: ${newId}`);
      this.addTableIdComment(table, newId);
      return newId;
    } catch (error) {
      console.error("\u786E\u8BA4\u5E76\u521B\u5EFA\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return "";
    }
  }
  /**
   * 从HTML注释中获取表格ID
   * @param table 表格HTML元素
   * @returns 表格ID或null
   */
  getTableIdFromComment(table) {
    var _a, _b;
    try {
      console.log("\u5F00\u59CB\u4ECEHTML\u6CE8\u91CA\u4E2D\u67E5\u627E\u8868\u683CID");
      console.log("\u8868\u683CDOM:", table.outerHTML.substring(0, 100) + "...");
      try {
        const activeFile = this.getApp().workspace.getActiveFile();
        if (activeFile) {
          console.log(`\u5C1D\u8BD5\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u67E5\u627E\u8868\u683CID: ${activeFile.path}`);
          const tablePosition = this.getTablePositionInDOM(table);
          if (tablePosition) {
            console.log(`\u8868\u683C\u4F4D\u7F6E: \u7B2C${tablePosition.index}\u4E2A\u8868\u683C`);
            this.getApp().vault.read(activeFile).then((content) => {
              const tableInfos = this.extractTableIdsFromMarkdown(content);
              console.log(`\u4ECEMarkdown\u5185\u5BB9\u4E2D\u63D0\u53D6\u7684\u8868\u683CID:`, tableInfos);
              if (tableInfos.length > tablePosition.index) {
                const { id } = tableInfos[tablePosition.index];
                if (id) {
                  console.log(`\u4ECEMarkdown\u5185\u5BB9\u4E2D\u627E\u5230\u8868\u683CID: ${id}`);
                  table.setAttribute("data-table-id", id);
                  return id;
                }
              }
            }).catch((err) => {
              console.error("\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\u65F6\u51FA\u9519:", err);
            });
          }
        }
      } catch (error) {
        console.error("\u4ECE\u6587\u4EF6\u5185\u5BB9\u67E5\u627E\u8868\u683CID\u65F6\u51FA\u9519:", error);
      }
      let node = table.previousSibling;
      let nodeCount = 0;
      console.log("\u5F00\u59CB\u904D\u5386\u524D\u7F6E\u8282\u70B9...");
      while (node && nodeCount < 30) {
        nodeCount++;
        const nodeType = node.nodeType;
        const nodeTypeStr = nodeType === Node.COMMENT_NODE ? "COMMENT" : nodeType === Node.TEXT_NODE ? "TEXT" : nodeType === Node.ELEMENT_NODE ? "ELEMENT" : "OTHER";
        console.log(`\u68C0\u67E5\u8282\u70B9 #${nodeCount}: \u7C7B\u578B=${nodeTypeStr}`);
        if (nodeType === Node.COMMENT_NODE) {
          const commentText = ((_a = node.textContent) == null ? void 0 : _a.trim()) || "";
          console.log(`\u53D1\u73B0\u6CE8\u91CA\u8282\u70B9: "${commentText}"`);
          const beginMatch = commentText.match(/table-begin:\s*([a-zA-Z0-9_\-:.]+)/i);
          if (beginMatch && beginMatch[1]) {
            const commentId = beginMatch[1];
            console.log(`\u4ECE\u8868\u683C\u5F00\u59CB\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const idMatch = commentText.match(/table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (idMatch && idMatch[1]) {
            const commentId = idMatch[1];
            console.log(`\u4ECEHTML\u6CE8\u91CA\u4E2D\u6210\u529F\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const altIdMatch = commentText.match(/id:?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (altIdMatch && altIdMatch[1]) {
            const commentId = altIdMatch[1];
            console.log(`\u4ECE\u66FF\u4EE3\u683C\u5F0FHTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const tblMatch = commentText.match(/(tbl|table):?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (tblMatch && tblMatch[2]) {
            const commentId = tblMatch[2];
            console.log(`\u4ECEtbl/table\u683C\u5F0FHTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
        } else if (nodeType === Node.TEXT_NODE) {
          const textContent = node.textContent || "";
          console.log(`\u6587\u672C\u8282\u70B9\u5185\u5BB9: "${textContent.substring(0, 30)}${textContent.length > 30 ? "..." : ""}"`);
          const htmlCommentMatch = textContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (htmlCommentMatch && htmlCommentMatch[1]) {
            const commentId = htmlCommentMatch[1];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const altHtmlCommentMatch = textContent.match(/<!--\s*id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (altHtmlCommentMatch && altHtmlCommentMatch[1]) {
            const commentId = altHtmlCommentMatch[1];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684\u66FF\u4EE3HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const tblHtmlCommentMatch = textContent.match(/<!--\s*(tbl|table):?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (tblHtmlCommentMatch && tblHtmlCommentMatch[2]) {
            const commentId = tblHtmlCommentMatch[2];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684tbl/table HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          if (textContent.trim() === "") {
            node = node.previousSibling;
            continue;
          }
        } else if (nodeType === Node.ELEMENT_NODE) {
          const tagName = node.tagName;
          console.log(`\u5143\u7D20\u8282\u70B9: <${tagName.toLowerCase()}>`);
          const elemDataId = node.getAttribute("data-id") || node.getAttribute("data-table-id");
          if (elemDataId) {
            console.log(`\u4ECE\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${elemDataId}`);
            return elemDataId;
          }
          const elemContent = node.innerHTML || "";
          if (elemContent.includes("<!--") && elemContent.includes("-->")) {
            console.log(`\u5143\u7D20\u5185\u5BB9\u5305\u542BHTML\u6CE8\u91CA: "${elemContent.substring(0, 50)}${elemContent.length > 50 ? "..." : ""}"`);
            const htmlCommentMatch = elemContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
            if (htmlCommentMatch && htmlCommentMatch[1]) {
              const commentId = htmlCommentMatch[1];
              console.log(`\u4ECE\u5143\u7D20\u5185\u5BB9\u4E2D\u7684HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
              return commentId;
            }
          }
          if (["BR", "HR", "P", "DIV", "SPAN"].includes(tagName)) {
            node = node.previousSibling;
            continue;
          }
          console.log(`\u9047\u5230\u5143\u7D20\u8282\u70B9 ${tagName}\uFF0C\u505C\u6B62\u67E5\u627E`);
          break;
        }
        node = node.previousSibling;
      }
      if (table.parentElement) {
        console.log("\u5C1D\u8BD5\u68C0\u67E5\u7236\u5143\u7D20\u53CA\u5176\u524D\u7F6E\u8282\u70B9...");
        const parentDataId = table.parentElement.getAttribute("data-id") || table.parentElement.getAttribute("data-table-id");
        if (parentDataId) {
          console.log(`\u4ECE\u7236\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${parentDataId}`);
          return parentDataId;
        }
        if (table.parentElement.previousSibling) {
          let parentPrevNode = table.parentElement.previousSibling;
          if (parentPrevNode) {
            if (parentPrevNode.nodeType === Node.COMMENT_NODE) {
              const commentText = ((_b = parentPrevNode.textContent) == null ? void 0 : _b.trim()) || "";
              console.log(`\u53D1\u73B0\u7236\u5143\u7D20\u524D\u7684\u6CE8\u91CA\u8282\u70B9: "${commentText}"`);
              const idMatch = commentText.match(/table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)/i);
              if (idMatch && idMatch[1]) {
                const commentId = idMatch[1];
                console.log(`\u4ECE\u7236\u5143\u7D20\u524D\u7684HTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
                return commentId;
              }
            } else if (parentPrevNode.nodeType === Node.TEXT_NODE) {
              const textContent = parentPrevNode.textContent || "";
              const htmlCommentMatch = textContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
              if (htmlCommentMatch && htmlCommentMatch[1]) {
                const commentId = htmlCommentMatch[1];
                console.log(`\u4ECE\u7236\u5143\u7D20\u524D\u7684\u6587\u672C\u8282\u70B9\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
                return commentId;
              }
            }
          }
        }
        if (table.parentElement.parentElement) {
          const grandParentDataId = table.parentElement.parentElement.getAttribute("data-id") || table.parentElement.parentElement.getAttribute("data-table-id");
          if (grandParentDataId) {
            console.log(`\u4ECE\u7956\u7236\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${grandParentDataId}`);
            return grandParentDataId;
          }
        }
      }
      console.log("\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID");
      return null;
    } catch (error) {
      console.error("\u4ECE\u6CE8\u91CA\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 为表格添加ID注释
   * @param table 表格HTML元素
   * @param id 表格ID
   */
  addTableIdComment(table, id) {
    var _a, _b, _c, _d, _e, _f;
    try {
      const tableFeature = this.extractTableFeature(table);
      const featureJson = JSON.stringify(tableFeature);
      const useWrapperComments = this.plugin.settings.useTableWrapperComments;
      const previousNode = table.previousSibling;
      if (previousNode && previousNode.nodeType === Node.COMMENT_NODE) {
        const comment = previousNode.nodeValue || "";
        if (comment.includes("table-id:") || comment.includes("table-begin:")) {
          (_a = previousNode.parentNode) == null ? void 0 : _a.removeChild(previousNode);
        }
      }
      const nextNode = table.nextSibling;
      if (nextNode && nextNode.nodeType === Node.COMMENT_NODE) {
        const comment = nextNode.nodeValue || "";
        if (comment.includes("table-end:") || comment.includes("table-id-end:")) {
          (_b = nextNode.parentNode) == null ? void 0 : _b.removeChild(nextNode);
        }
      }
      if (useWrapperComments) {
        const beginCommentContent = `table-begin: ${id} feature: ${featureJson}`;
        const beginComment = document.createComment(` ${beginCommentContent} `);
        const endCommentContent = `table-end: ${id}`;
        const endComment = document.createComment(` ${endCommentContent} `);
        (_c = table.parentNode) == null ? void 0 : _c.insertBefore(beginComment, table);
        if (table.nextSibling) {
          (_d = table.parentNode) == null ? void 0 : _d.insertBefore(endComment, table.nextSibling);
        } else {
          (_e = table.parentNode) == null ? void 0 : _e.appendChild(endComment);
        }
        console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0\u6CE8\u91CA\u5939: ${id} \u7279\u5F81:`, tableFeature);
      } else {
        const commentContent = `table-id: ${id} feature: ${featureJson}`;
        const comment = document.createComment(` ${commentContent} `);
        (_f = table.parentNode) == null ? void 0 : _f.insertBefore(comment, table);
        console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID\u6CE8\u91CA: ${id} \u7279\u5F81:`, tableFeature);
      }
      table.setAttribute("data-table-id", id);
      table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
      new import_obsidian4.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${id}`);
    } catch (error) {
      console.error("\u6DFB\u52A0\u8868\u683CID\u6CE8\u91CA\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 提取表格特征
   * @param table 表格HTML元素或Markdown字符串
   * @returns 表格特征对象
   */
  extractTableFeature(table) {
    try {
      let rows = 0;
      let cols = 0;
      let headers = "";
      let firstRowContent = "";
      let lastRowContent = "";
      let mergePattern = "";
      let position = void 0;
      let fileInfo = void 0;
      const activeFile = this.getApp().workspace.getActiveFile();
      if (activeFile) {
        fileInfo = {
          path: activeFile.path,
          name: activeFile.basename
        };
      }
      if (typeof table === "string") {
        const lines = table.split("\n");
        const tableLines = lines.filter((line) => line.trim().startsWith("|"));
        rows = tableLines.length;
        if (rows > 0) {
          const cells = tableLines[0].split("|").filter((cell) => cell.trim() !== "");
          cols = cells.length;
          headers = cells.map((c) => c.trim()).join("-");
          firstRowContent = tableLines[0];
          lastRowContent = tableLines[rows - 1];
        }
        mergePattern = this.extractMergePattern(tableLines);
        const firstLineIndex = lines.findIndex((line) => line === tableLines[0]);
        if (firstLineIndex >= 0) {
          position = {
            startLine: firstLineIndex,
            endLine: firstLineIndex + rows - 1
          };
        }
      } else {
        const tableRows = table.querySelectorAll("tr");
        rows = tableRows.length;
        if (rows > 0) {
          const firstRowCells = tableRows[0].querySelectorAll("th, td");
          cols = firstRowCells.length;
          headers = Array.from(firstRowCells).map((cell) => {
            var _a;
            return ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          }).join("-");
          firstRowContent = tableRows[0].textContent || "";
          lastRowContent = tableRows[rows - 1].textContent || "";
        }
        mergePattern = this.extractMergePatterFromDOM(table);
        const positionData = table.getAttribute("data-table-position");
        if (positionData) {
          try {
            position = JSON.parse(positionData);
          } catch (e) {
            console.error("\u89E3\u6790\u8868\u683C\u4F4D\u7F6E\u6570\u636E\u65F6\u51FA\u9519:", e);
          }
        }
      }
      return {
        rows,
        cols,
        headers,
        firstRowContent,
        lastRowContent,
        mergePattern,
        position,
        fileInfo
      };
    } catch (error) {
      console.error("\u63D0\u53D6\u8868\u683C\u7279\u5F81\u65F6\u51FA\u9519:", error);
      return {
        rows: 0,
        cols: 0,
        headers: "",
        firstRowContent: "",
        lastRowContent: "",
        mergePattern: ""
      };
    }
  }
  /**
   * 从Markdown内容中提取合并单元格模式
   */
  extractMergePattern(lines) {
    let pattern = "";
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const cells = line.split("|").filter((cell) => cell.trim() !== "");
      for (let j = 0; j < cells.length; j++) {
        const cell = cells[j].trim();
        if (cell === "^") {
          pattern += `^${i}-${j};`;
        } else if (cell === "<") {
          pattern += `<${i}-${j};`;
        }
      }
    }
    return pattern;
  }
  /**
   * 从DOM中提取合并单元格模式
   */
  extractMergePatterFromDOM(table) {
    let pattern = "";
    const rows = table.querySelectorAll("tr");
    for (let i = 0; i < rows.length; i++) {
      const cells = rows[i].querySelectorAll("th, td");
      for (let j = 0; j < cells.length; j++) {
        const cell = cells[j];
        const rowspan = cell.getAttribute("rowspan");
        const colspan = cell.getAttribute("colspan");
        if (rowspan && parseInt(rowspan) > 1) {
          pattern += `r${i}-${j}-${rowspan};`;
        }
        if (colspan && parseInt(colspan) > 1) {
          pattern += `c${i}-${j}-${colspan};`;
        }
      }
    }
    return pattern;
  }
  /**
   * 计算两个表格特征的相似度
   * @param feature1 第一个表格特征
   * @param feature2 第二个表格特征
   * @returns 相似度分数（0-1之间）
   */
  calculateFeatureSimilarity(feature1, feature2) {
    var _a, _b;
    if (!feature1 || !feature2)
      return 0;
    let score = 0;
    let totalWeight = 0;
    const pathWeight = 5;
    if (((_a = feature1.fileInfo) == null ? void 0 : _a.path) && ((_b = feature2.fileInfo) == null ? void 0 : _b.path) && feature1.fileInfo.path === feature2.fileInfo.path) {
      score += pathWeight;
    }
    totalWeight += pathWeight;
    const rowWeight = 3;
    const colWeight = 3;
    if (feature1.rows === feature2.rows) {
      score += rowWeight;
    } else {
      const rowDiff = Math.abs(feature1.rows - feature2.rows);
      if (rowDiff <= 1)
        score += rowWeight * (1 - rowDiff / 2);
    }
    totalWeight += rowWeight;
    if (feature1.cols === feature2.cols) {
      score += colWeight;
    } else {
      const colDiff = Math.abs(feature1.cols - feature2.cols);
      if (colDiff <= 1)
        score += colWeight * (1 - colDiff / 2);
    }
    totalWeight += colWeight;
    const headerWeight = 4;
    if (feature1.headers && feature2.headers) {
      const headerSimilarity = this.calculateTextSimilarity(feature1.headers, feature2.headers);
      score += headerWeight * headerSimilarity;
    }
    totalWeight += headerWeight;
    const positionWeight = 2;
    if (feature1.position && feature2.position) {
      const startLineDiff = Math.abs(feature1.position.startLine - feature2.position.startLine);
      const positionSimilarity = Math.max(0, 1 - startLineDiff / 10);
      score += positionWeight * positionSimilarity;
    }
    totalWeight += positionWeight;
    const firstRowWeight = 2;
    if (feature1.firstRowContent && feature2.firstRowContent) {
      const firstRowSimilarity = this.calculateTextSimilarity(
        feature1.firstRowContent,
        feature2.firstRowContent
      );
      score += firstRowWeight * firstRowSimilarity;
    }
    totalWeight += firstRowWeight;
    const lastRowWeight = 2;
    if (feature1.lastRowContent && feature2.lastRowContent) {
      const lastRowSimilarity = this.calculateTextSimilarity(
        feature1.lastRowContent,
        feature2.lastRowContent
      );
      score += lastRowWeight * lastRowSimilarity;
    }
    totalWeight += lastRowWeight;
    const mergeWeight = 1;
    if (feature1.mergePattern && feature2.mergePattern) {
      const mergeSimilarity = this.calculateTextSimilarity(
        feature1.mergePattern,
        feature2.mergePattern
      );
      score += mergeWeight * mergeSimilarity;
    }
    totalWeight += mergeWeight;
    const similarity = totalWeight > 0 ? score / totalWeight : 0;
    console.log(`\u8868\u683C\u7279\u5F81\u76F8\u4F3C\u5EA6: ${similarity.toFixed(2)}`);
    return similarity;
  }
  /**
   * 计算两个文本的相似度
   * @param str1 第一个文本
   * @param str2 第二个文本
   * @returns 相似度分数（0-1之间）
   */
  calculateTextSimilarity(str1, str2) {
    if (!str1 || !str2)
      return 0;
    if (str1 === str2)
      return 1;
    const maxLen = Math.max(str1.length, str2.length);
    if (maxLen === 0)
      return 1;
    let matches = 0;
    const minLen = Math.min(str1.length, str2.length);
    for (let i = 0; i < minLen; i++) {
      if (str1[i] === str2[i])
        matches++;
      else
        break;
    }
    for (let i = 1; i <= minLen - matches; i++) {
      if (str1[str1.length - i] === str2[str2.length - i])
        matches++;
      else
        break;
    }
    matches = Math.min(matches, minLen);
    return matches / maxLen;
  }
  /**
   * 获取表格在DOM中的位置
   * @param table 表格元素
   * @returns 表格位置信息或null
   */
  getTablePositionInDOM(table) {
    try {
      const allTables = Array.from(document.querySelectorAll("table"));
      const tableId = table.getAttribute("data-table-id");
      if (tableId) {
        for (let i = 0; i < allTables.length; i++) {
          const currentId = allTables[i].getAttribute("data-table-id");
          if (currentId === tableId) {
            console.log(`\u901A\u8FC7ID\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${i}\u4E2A\u8868\u683C\uFF08ID: ${tableId}\uFF09`);
            return { index: i, id: tableId };
          }
        }
      }
      const tableFeature = this.extractTableFeature(table);
      if (tableFeature) {
        for (let i = 0; i < allTables.length; i++) {
          const currentFeature = this.extractTableFeature(allTables[i]);
          if (tableFeature.contentHash === currentFeature.contentHash && tableFeature.headers === currentFeature.headers && tableFeature.rows === currentFeature.rows && tableFeature.cols === currentFeature.cols) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u7CBE\u786E\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${i}\u4E2A\u8868\u683C`);
            return { index: i };
          }
        }
      }
      let bestMatchIndex = -1;
      let bestMatchScore = 0;
      let bestMatchId = "";
      for (let i = 0; i < allTables.length; i++) {
        const currentTable = allTables[i];
        const currentFeature = this.extractTableFeature(currentTable);
        const currentId = currentTable.getAttribute("data-table-id");
        const similarityScore = this.calculateFeatureSimilarity(tableFeature, currentFeature);
        if (similarityScore > bestMatchScore) {
          bestMatchScore = similarityScore;
          bestMatchIndex = i;
          bestMatchId = currentId || "";
        }
      }
      if (bestMatchIndex !== -1 && bestMatchScore > 0.7) {
        console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${bestMatchIndex}\u4E2A\u8868\u683C\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
        return { index: bestMatchIndex, id: bestMatchId };
      }
      const index = allTables.indexOf(table);
      if (index !== -1) {
        console.log(`\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E: \u7B2C${index}\u4E2A\u8868\u683C\uFF08\u5171${allTables.length}\u4E2A\uFF09`);
        return { index };
      }
      console.warn("\u65E0\u6CD5\u786E\u5B9A\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E");
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683C\u4F4D\u7F6E\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 计算字符串的简单哈希值
   * @param str 输入字符串
   * @returns 哈希值字符串
   */
  simpleHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash).toString(16).substring(0, 8);
  }
  /**
   * 确保表格有ID，如果没有则创建一个
   * @param table 表格元素
   * @param autoCreate 是否自动创建ID（不推荐，应使用confirmAndCreateTableId）
   * @returns 表格ID
   */
  ensureTableHasId(table, autoCreate = false) {
    if (!table)
      return "";
    const tableId = this.getTableIdentifier(table, true);
    if (tableId) {
      if (!table.getAttribute("data-table-id")) {
        table.setAttribute("data-table-id", tableId);
      }
      return tableId;
    }
    if (autoCreate) {
      console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u81EA\u52A8\u521B\u5EFA\u65B0ID");
      return this.confirmAndCreateTableId(table);
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u4E0D\u81EA\u52A8\u521B\u5EFAID");
    return "";
  }
  /**
   * 生成唯一的表格ID
   * @returns 表格ID字符串
   */
  generateTableId() {
    try {
      const prefix = this.plugin.settings.idPrefix || "tbl";
      const date = new Date();
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, "0");
      const day = String(date.getDate()).padStart(2, "0");
      const activeFile = this.getApp().workspace.getActiveFile();
      let fileCode = "doc";
      if (activeFile) {
        const fileName = activeFile.basename;
        if (fileName && fileName.length >= 2) {
          fileCode = fileName.substring(0, 2).toLowerCase();
        }
      }
      const randomChars = "abcdefghijklmnopqrstuvwxyz";
      let randomStr = "";
      for (let i = 0; i < 6; i++) {
        randomStr += randomChars.charAt(Math.floor(Math.random() * randomChars.length));
      }
      const tableId = `${prefix}-${year}${month}${day}-${fileCode}${randomStr}`;
      console.log(`\u751F\u6210\u8868\u683CID: ${tableId}`);
      return tableId;
    } catch (error) {
      console.error("\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519:", error);
      const timestamp = new Date().getTime();
      const random = Math.floor(Math.random() * 1e4);
      return `${this.plugin.settings.idPrefix || "tbl"}-${timestamp}-${random}`;
    }
  }
  /**
   * 从Markdown内容中提取表格ID和特征
   * @param content Markdown内容
   * @returns 表格ID和特征数组
   */
  extractTableIdsFromMarkdown(content) {
    try {
      const result = [];
      const lines = content.split("\n");
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        let tableId = "";
        let tableFeature = {};
        const beginMatch = line.match(/<!--\s*table-begin:\s*([a-zA-Z0-9_\-:.]+)\s*(?:feature:\s*(\{.*\}))?\s*-->/);
        if (beginMatch) {
          tableId = beginMatch[1];
          if (beginMatch[2]) {
            try {
              tableFeature = JSON.parse(beginMatch[2]);
            } catch (e) {
              console.error("\u89E3\u6790\u8868\u683C\u7279\u5F81JSON\u65F6\u51FA\u9519:", e);
            }
          }
          let tableContent = "";
          let tableStartLine = -1;
          let tableEndLine = -1;
          for (let j = i + 1; j < lines.length; j++) {
            if (lines[j].trim().startsWith("|")) {
              tableStartLine = j;
              break;
            }
          }
          if (tableStartLine >= 0) {
            for (let j = tableStartLine; j < lines.length; j++) {
              if (!lines[j].trim().startsWith("|")) {
                tableEndLine = j - 1;
                break;
              }
              if (j === lines.length - 1) {
                tableEndLine = j;
              }
            }
            if (tableEndLine >= tableStartLine) {
              tableContent = lines.slice(tableStartLine, tableEndLine + 1).join("\n");
              const feature = this.extractTableFeature(tableContent);
              feature.position = {
                startLine: tableStartLine,
                endLine: tableEndLine
              };
              const activeFile = this.getApp().workspace.getActiveFile();
              if (activeFile) {
                feature.fileInfo = {
                  path: activeFile.path,
                  name: activeFile.basename
                };
              }
              const mergedFeature = { ...feature, ...tableFeature, id: tableId };
              result.push({
                id: tableId,
                feature: mergedFeature
              });
            }
          }
          continue;
        }
        const idMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*(?:feature:\s*(\{.*\}))?\s*-->/);
        if (idMatch) {
          tableId = idMatch[1];
          if (idMatch[2]) {
            try {
              tableFeature = JSON.parse(idMatch[2]);
            } catch (e) {
              console.error("\u89E3\u6790\u8868\u683C\u7279\u5F81JSON\u65F6\u51FA\u9519:", e);
            }
          }
          let tableContent = "";
          let tableStartLine = -1;
          let tableEndLine = -1;
          for (let j = i + 1; j < lines.length; j++) {
            if (lines[j].trim().startsWith("|")) {
              tableStartLine = j;
              break;
            }
          }
          if (tableStartLine >= 0) {
            for (let j = tableStartLine; j < lines.length; j++) {
              if (!lines[j].trim().startsWith("|")) {
                tableEndLine = j - 1;
                break;
              }
              if (j === lines.length - 1) {
                tableEndLine = j;
              }
            }
            if (tableEndLine >= tableStartLine) {
              tableContent = lines.slice(tableStartLine, tableEndLine + 1).join("\n");
              const feature = this.extractTableFeature(tableContent);
              feature.position = {
                startLine: tableStartLine,
                endLine: tableEndLine
              };
              const activeFile = this.plugin.app.workspace.getActiveFile();
              if (activeFile) {
                feature.fileInfo = {
                  path: activeFile.path,
                  name: activeFile.basename
                };
              }
              const mergedFeature = { ...feature, ...tableFeature, id: tableId };
              result.push({
                id: tableId,
                feature: mergedFeature
              });
            }
          }
        }
      }
      return result;
    } catch (error) {
      console.error("\u4ECEMarkdown\u5185\u5BB9\u63D0\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return [];
    }
  }
};
var TableIdManager = _TableIdManager;
TableIdManager.isProcessingTableId = false;
TableIdManager.isCreatingTableId = false;

// src/tableToolbar.ts
var import_obsidian5 = require("obsidian");
var import_obsidian6 = require("obsidian");
var TableToolbar = class {
  constructor(plugin) {
    this.activeTable = null;
    this.selectedCells = [];
    this.isDragging = false;
    this.dragStartX = 0;
    this.dragStartY = 0;
    this.isCollapsed = false;
    this.initialPosition = { left: "50%", top: "10px" };
    this.editModeTableInfo = null;
    this.applyToEntireTable = false;
    this.plugin = plugin;
    console.log("TableToolbar initialized");
  }
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  /**
   * 创建表格工具栏
   * @param containerEl 容器元素
   */
  createToolbar(containerEl) {
    var _a, _b, _c;
    this.containerEl = containerEl;
    containerEl.style.position = "fixed";
    containerEl.style.zIndex = "1000";
    containerEl.style.left = "50%";
    containerEl.style.top = "10px";
    containerEl.style.transform = "translateX(-50%)";
    containerEl.style.display = "block";
    this.toolbar = containerEl.createEl("div", {
      cls: "advanced-table-toolbar"
    });
    this.toolbar.style.display = "flex";
    this.toolbar.style.flexDirection = "row";
    this.toolbar.style.gap = "5px";
    this.toolbar.style.padding = "5px";
    this.toolbar.style.margin = "5px 0";
    this.toolbar.style.borderRadius = "5px";
    this.toolbar.style.backgroundColor = "var(--background-secondary)";
    this.toolbar.style.boxShadow = "0 2px 8px rgba(0, 0, 0, 0.15)";
    this.toolbar.style.userSelect = "none";
    this.toolbar.style.position = "relative";
    this.dragHandle = this.toolbar.createEl("div", {
      cls: "advanced-table-toolbar-drag-handle"
    });
    this.dragHandle.style.cursor = "grab";
    this.dragHandle.style.padding = "0 5px";
    this.dragHandle.style.display = "flex";
    this.dragHandle.style.alignItems = "center";
    this.dragHandle.style.marginRight = "5px";
    this.dragHandle.style.height = "28px";
    this.dragHandle.style.borderRadius = "3px";
    this.dragHandle.addEventListener("mouseover", () => {
      this.dragHandle.style.backgroundColor = "var(--background-modifier-hover)";
    });
    this.dragHandle.addEventListener("mouseout", () => {
      this.dragHandle.style.backgroundColor = "transparent";
    });
    (0, import_obsidian5.setIcon)(this.dragHandle, "grip-vertical");
    this.toolbarContent = this.toolbar.createEl("div", {
      cls: "advanced-table-toolbar-content"
    });
    this.toolbarContent.style.display = "flex";
    this.toolbarContent.style.flexDirection = "row";
    this.toolbarContent.style.gap = "5px";
    this.toolbarContent.style.flexGrow = "1";
    this.createButtonGroup("\u5BF9\u9F50", [
      { id: "align-left", tooltip: "\u5DE6\u5BF9\u9F50", icon: "align-left" },
      { id: "align-center", tooltip: "\u5C45\u4E2D\u5BF9\u9F50", icon: "align-center" },
      { id: "align-right", tooltip: "\u53F3\u5BF9\u9F50", icon: "align-right" },
      { id: "align-top", tooltip: "\u9876\u90E8\u5BF9\u9F50", icon: "align-top" },
      { id: "align-middle", tooltip: "\u5782\u76F4\u5C45\u4E2D", icon: "align-middle" },
      { id: "align-bottom", tooltip: "\u5E95\u90E8\u5BF9\u9F50", icon: "align-bottom" },
      { id: "align-all", tooltip: "\u5168\u90E8\u5C45\u4E2D", icon: "align-all" }
    ]);
    this.createSeparator();
    this.createButtonGroup("\u5408\u5E76", [
      { id: "merge-cells", tooltip: "\u5408\u5E76\u9009\u4E2D\u5355\u5143\u683C", icon: "merge-cells" },
      { id: "merge-right", tooltip: "\u5411\u53F3\u5408\u5E76", icon: "merge-right" },
      { id: "merge-down", tooltip: "\u5411\u4E0B\u5408\u5E76", icon: "merge-down" },
      { id: "split", tooltip: "\u62C6\u5206\u5355\u5143\u683C", icon: "split" }
    ]);
    this.createSeparator();
    this.createButtonGroup("\u8868\u683C", [
      { id: "table-id", tooltip: "\u751F\u6210\u8868\u683CID", icon: "table-id" },
      { id: "table-row-add", tooltip: "\u6DFB\u52A0\u884C", icon: "table-row-add" },
      { id: "table-style", tooltip: "\u8868\u683C\u6837\u5F0F", icon: "table-style" }
    ]);
    this.collapseButton = this.toolbar.createEl("button", {
      cls: "advanced-table-toolbar-collapse-button",
      attr: { "aria-label": "\u6536\u8D77/\u5C55\u5F00\u5DE5\u5177\u680F", "title": "\u6536\u8D77\u5DE5\u5177\u680F" }
    });
    this.collapseButton.style.display = "flex";
    this.collapseButton.style.justifyContent = "center";
    this.collapseButton.style.alignItems = "center";
    this.collapseButton.style.width = "28px";
    this.collapseButton.style.height = "28px";
    this.collapseButton.style.padding = "3px";
    this.collapseButton.style.border = "none";
    this.collapseButton.style.borderRadius = "3px";
    this.collapseButton.style.backgroundColor = "transparent";
    this.collapseButton.style.cursor = "pointer";
    this.collapseButton.style.marginLeft = "5px";
    (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-left");
    this.collapseButton.addEventListener("mouseover", () => {
      this.collapseButton.style.backgroundColor = "var(--background-modifier-hover)";
    });
    this.collapseButton.addEventListener("mouseout", () => {
      this.collapseButton.style.backgroundColor = "transparent";
    });
    this.collapseButton.addEventListener("click", () => {
      this.toggleCollapse();
    });
    this.setupDraggable();
    console.log("\u5DE5\u5177\u680F\u5DF2\u521B\u5EFA\uFF0C\u62D6\u62FD\u624B\u67C4\u72B6\u6001:", {
      dragHandleExists: !!this.dragHandle,
      dragHandleParent: (_a = this.dragHandle) == null ? void 0 : _a.parentElement,
      dragHandleDisplay: (_b = this.dragHandle) == null ? void 0 : _b.style.display,
      dragHandleIcon: (_c = this.dragHandle) == null ? void 0 : _c.innerHTML,
      toolbarChildren: Array.from(this.toolbar.children).map((child) => child.className)
    });
  }
  /**
   * 设置工具栏可拖拽
   */
  setupDraggable() {
    const container = this.containerEl;
    this.dragHandle.addEventListener("mousedown", (e) => {
      if (e.button !== 0)
        return;
      this.isDragging = true;
      this.dragStartX = e.clientX;
      this.dragStartY = e.clientY;
      const rect = container.getBoundingClientRect();
      this.initialPosition = {
        left: container.style.left || "50%",
        top: container.style.top || "10px"
      };
      this.dragHandle.style.cursor = "grabbing";
      document.body.style.cursor = "grabbing";
      e.preventDefault();
      e.stopPropagation();
    });
    const mouseMoveHandler = (e) => {
      if (!this.isDragging)
        return;
      const deltaX = e.clientX - this.dragStartX;
      const deltaY = e.clientY - this.dragStartY;
      const rect = container.getBoundingClientRect();
      let newLeft;
      if (this.initialPosition.left.endsWith("%")) {
        const viewportWidth = document.documentElement.clientWidth;
        const initialLeftPx = parseFloat(this.initialPosition.left) / 100 * viewportWidth;
        newLeft = `${initialLeftPx + deltaX}px`;
      } else {
        const initialLeftPx = parseFloat(this.initialPosition.left);
        newLeft = `${initialLeftPx + deltaX}px`;
      }
      const newTop = `${parseFloat(this.initialPosition.top) + deltaY}px`;
      container.style.left = newLeft;
      container.style.top = newTop;
      container.style.transform = "none";
      e.preventDefault();
      e.stopPropagation();
    };
    const mouseUpHandler = (e) => {
      if (!this.isDragging)
        return;
      this.isDragging = false;
      this.dragHandle.style.cursor = "grab";
      document.body.style.cursor = "";
      e.stopPropagation();
    };
    document.addEventListener("mousemove", mouseMoveHandler);
    document.addEventListener("mouseup", mouseUpHandler);
    this.plugin.registerDomEvent(document, "mousemove", mouseMoveHandler);
    this.plugin.registerDomEvent(document, "mouseup", mouseUpHandler);
  }
  /**
   * 切换工具栏的收起/展开状态
   */
  toggleCollapse() {
    this.isCollapsed = !this.isCollapsed;
    if (this.isCollapsed) {
      this.toolbarContent.style.display = "none";
      (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-right");
      this.toolbar.style.width = "auto";
      this.toolbar.classList.add("collapsed");
      this.containerEl.style.width = "auto";
      this.containerEl.style.height = "auto";
      this.collapseButton.setAttribute("title", "\u5C55\u5F00\u5DE5\u5177\u680F");
    } else {
      this.toolbarContent.style.display = "flex";
      (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-left");
      this.toolbar.style.width = "";
      this.toolbar.classList.remove("collapsed");
      this.containerEl.style.width = "";
      this.containerEl.style.height = "";
      this.collapseButton.setAttribute("title", "\u6536\u8D77\u5DE5\u5177\u680F");
    }
  }
  /**
   * 创建按钮组
   * @param groupName 组名
   * @param buttons 按钮配置
   */
  createButtonGroup(groupName, buttons) {
    const group = this.toolbarContent.createEl("div", {
      cls: "advanced-table-toolbar-group"
    });
    group.style.display = "flex";
    group.style.flexDirection = "row";
    group.style.alignItems = "center";
    const label = group.createEl("span", {
      text: groupName,
      cls: "advanced-table-toolbar-group-label"
    });
    label.style.fontSize = "12px";
    label.style.marginRight = "5px";
    label.style.opacity = "0.7";
    buttons.forEach((btn) => {
      const button = group.createEl("button", {
        cls: `advanced-table-toolbar-button ${btn.id}`,
        attr: { "aria-label": btn.tooltip }
      });
      button.style.display = "flex";
      button.style.justifyContent = "center";
      button.style.alignItems = "center";
      button.style.width = "28px";
      button.style.height = "28px";
      button.style.padding = "3px";
      button.style.border = "none";
      button.style.borderRadius = "3px";
      button.style.backgroundColor = "transparent";
      button.style.cursor = "pointer";
      (0, import_obsidian5.setIcon)(button, btn.icon);
      button.addEventListener("mouseover", () => {
        button.style.backgroundColor = "var(--background-modifier-hover)";
      });
      button.addEventListener("mouseout", () => {
        button.style.backgroundColor = "transparent";
      });
      button.addEventListener("click", () => {
        this.handleButtonClick(btn.id);
      });
      button.setAttribute("title", btn.tooltip);
    });
  }
  /**
   * 创建分隔线
   */
  createSeparator() {
    const separator = this.toolbarContent.createEl("div", {
      cls: "advanced-table-toolbar-separator"
    });
    separator.style.width = "1px";
    separator.style.height = "24px";
    separator.style.margin = "0 5px";
    separator.style.backgroundColor = "var(--background-modifier-border)";
  }
  /**
   * 处理按钮点击事件
   * @param buttonId 按钮ID
   */
  handleButtonClick(buttonId) {
    try {
      console.log(`\u70B9\u51FB\u4E86\u6309\u94AE: ${buttonId}`);
      const isEditMode = this.isInEditMode();
      switch (buttonId) {
        case "align-left":
          this.applyAlignmentToSelectedCells("left");
          break;
        case "align-center":
          this.applyAlignmentToSelectedCells("center");
          break;
        case "align-right":
          this.applyAlignmentToSelectedCells("right");
          break;
        case "align-top":
          this.applyAlignmentToSelectedCells(void 0, "top");
          break;
        case "align-middle":
          this.applyAlignmentToSelectedCells(void 0, "middle");
          break;
        case "align-bottom":
          this.applyAlignmentToSelectedCells(void 0, "bottom");
          break;
        case "align-all":
          this.applyAlignmentToSelectedCells("center", "middle");
          break;
        case "merge-cells":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u591A\u9009\u5408\u5E76\uFF0C\u8BF7\u4F7F\u7528\u5411\u53F3\u6216\u5411\u4E0B\u5408\u5E76");
          } else {
            this.mergeCells();
          }
          break;
        case "merge-right":
          this.mergeRight();
          break;
        case "merge-down":
          this.mergeDown();
          break;
        case "split":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            this.plugin.markdownSourceEditor.splitMergedCells().then((success) => {
              if (success) {
                this.clearCellSelection();
              }
            }).catch((error) => {
              console.error("\u62C6\u5206\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
              new import_obsidian5.Notice(`\u62C6\u5206\u5355\u5143\u683C\u65F6\u51FA\u9519: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
            });
          } else {
            this.splitCell();
          }
          break;
        case "table-id":
          this.generateTableId();
          break;
        case "table-row-add":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u901A\u8FC7\u5DE5\u5177\u680F\u6DFB\u52A0\u884C\uFF0C\u8BF7\u76F4\u63A5\u7F16\u8F91Markdown\u6E90\u7801");
          } else {
            this.showRowAddMenu();
          }
          break;
        case "table-style":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u6837\u5F0F\u8BBE\u7F6E");
          } else {
            this.showStyleMenu();
          }
          break;
        default:
          console.log(`\u672A\u5904\u7406\u7684\u6309\u94AEID: ${buttonId}`);
      }
    } catch (error) {
      console.error(`\u5904\u7406\u6309\u94AE\u70B9\u51FB\u65F6\u51FA\u9519: ${buttonId}`, error);
    }
  }
  /**
   * 记录调试信息
   */
  logDebugInfo() {
    const allTables = document.querySelectorAll("table").length;
    const selectedTableElements = document.querySelectorAll('table[data-table-selected="true"]').length;
    console.log("\u5F53\u524D\u72B6\u6001:", {
      activeTable: this.activeTable,
      allTables,
      selectedCells: this.selectedCells,
      selectedTableElements,
      toolbarContainer: this.containerEl
    });
  }
  /**
   * 应用对齐样式到选中的单元格
   * @param horizontalAlign 水平对齐方式
   * @param verticalAlign 垂直对齐方式
   */
  applyAlignmentToSelectedCells(horizontalAlign, verticalAlign) {
    try {
      console.log("\u5E94\u7528\u5BF9\u9F50:", { horizontalAlign, verticalAlign });
      this.applyAlignmentStylesOnly(horizontalAlign, verticalAlign);
      if (!this.activeTable || this.selectedCells.length === 0 && !this.applyToEntireTable) {
        console.warn("\u6CA1\u6709\u9009\u4E2D\u5355\u5143\u683C\u6216\u6D3B\u52A8\u8868\u683C");
        return;
      }
      this.plugin.readTableIdFromMarkdown(this.activeTable).then((tableId) => {
        console.log(`\u4ECEMarkdown\u6587\u4EF6\u4E2D\u83B7\u53D6\u8868\u683CID: ${tableId}`);
        if (!tableId) {
          console.warn("\u672A\u627E\u5230HTML\u6CE8\u91CA\u4E2D\u5B9A\u4E49\u7684\u8868\u683CID\uFF0C\u5C06\u53EA\u5E94\u7528\u6837\u5F0F\u4F46\u4E0D\u4FDD\u5B58\u6570\u636E");
          new import_obsidian5.Notice("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u6837\u5F0F\u5DF2\u5E94\u7528\u4F46\u672A\u4FDD\u5B58\u5230\u6570\u636E\u6587\u4EF6");
          return;
        }
        if (this.activeTable) {
          const activeTable = this.activeTable;
          const activeFile = this.getApp().workspace.getActiveFile();
          if (!activeFile) {
            console.warn("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84");
            return;
          }
          const selectedCellPositions = this.getSelectedCellPositions();
          console.log("\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E:", selectedCellPositions);
          this.plugin.loadData().then((existingData) => {
            var _a;
            if (!existingData.tables) {
              existingData.tables = {};
            }
            let tableData = existingData.tables[tableId];
            if (!tableData) {
              console.log(`\u521B\u5EFA\u65B0\u7684\u8868\u683C\u6570\u636E: ${tableId}`);
              const rows = activeTable.querySelectorAll("tr");
              const rowCount = rows.length;
              let colCount = 0;
              if (rowCount > 0) {
                const firstRow = rows[0];
                colCount = firstRow.querySelectorAll("td, th").length;
              }
              tableData = {
                id: tableId,
                locations: [
                  {
                    path: activeFile.path,
                    isActive: true
                  }
                ],
                structure: {
                  rowCount,
                  colCount,
                  hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
                },
                styling: {
                  rowHeights: Array(rowCount).fill("auto"),
                  colWidths: Array(colCount).fill("auto"),
                  alignment: Array(colCount).fill("left"),
                  cellStyles: []
                  // 新增：用于存储单元格样式
                }
              };
              existingData.tables[tableId] = tableData;
              console.log(`\u5DF2\u521B\u5EFA\u65B0\u7684\u8868\u683C\u6570\u636E\u8BB0\u5F55: ${tableId}`, tableData);
            } else {
              console.log(`\u627E\u5230\u73B0\u6709\u8868\u683C\u6570\u636E: ${tableId}`, tableData);
              if (!tableData.structure) {
                const rows = activeTable.querySelectorAll("tr");
                const rowCount = rows.length;
                let colCount = 0;
                if (rowCount > 0) {
                  const firstRow = rows[0];
                  colCount = firstRow.querySelectorAll("td, th").length;
                }
                tableData.structure = {
                  rowCount,
                  colCount,
                  hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
                };
              }
              if (!tableData.styling) {
                tableData.styling = {
                  rowHeights: Array(tableData.structure.rowCount).fill("auto"),
                  colWidths: Array(tableData.structure.colCount).fill("auto"),
                  alignment: Array(tableData.structure.colCount).fill("left"),
                  cellStyles: []
                  // 新增：用于存储单元格样式
                };
              }
              if (!tableData.styling.cellStyles) {
                tableData.styling.cellStyles = [];
              }
              if (!tableData.locations) {
                tableData.locations = [{
                  path: activeFile.path,
                  isActive: true
                }];
              } else {
                const filePathExists = tableData.locations.some((loc) => loc.path === activeFile.path);
                if (!filePathExists) {
                  tableData.locations.push({
                    path: activeFile.path,
                    isActive: true
                  });
                }
              }
            }
            if (this.selectedCells.length === 0 || this.applyToEntireTable) {
              if (horizontalAlign) {
                tableData.styling = tableData.styling || {};
                tableData.styling.alignment = tableData.styling.alignment || [];
                const colCount = ((_a = tableData.structure) == null ? void 0 : _a.colCount) || 0;
                for (let i = 0; i < colCount; i++) {
                  tableData.styling.alignment[i] = horizontalAlign;
                }
                console.log(`\u66F4\u65B0\u8868\u683C\u5BF9\u9F50\u6570\u636E: ${tableId}`, tableData.styling.alignment);
              }
            } else {
              selectedCellPositions.forEach((pos) => {
                const existingStyleIndex = tableData.styling.cellStyles.findIndex(
                  (style) => style.row === pos.row && style.col === pos.col
                );
                if (existingStyleIndex !== -1) {
                  if (horizontalAlign) {
                    tableData.styling.cellStyles[existingStyleIndex].textAlign = horizontalAlign;
                  }
                  if (verticalAlign) {
                    tableData.styling.cellStyles[existingStyleIndex].verticalAlign = verticalAlign;
                  }
                } else {
                  const newStyle = { row: pos.row, col: pos.col };
                  if (horizontalAlign) {
                    newStyle.textAlign = horizontalAlign;
                  }
                  if (verticalAlign) {
                    newStyle.verticalAlign = verticalAlign;
                  }
                  tableData.styling.cellStyles.push(newStyle);
                }
              });
              console.log(`\u66F4\u65B0\u5355\u5143\u683C\u6837\u5F0F\u6570\u636E: ${tableId}`, tableData.styling.cellStyles);
            }
            this.plugin.saveData(existingData);
            console.log(`\u5DF2\u4FDD\u5B58\u8868\u683C\u6570\u636E: ${tableId}`);
            new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230${this.selectedCells.length > 0 ? "\u9009\u4E2D\u5355\u5143\u683C" : "\u6574\u4E2A\u8868\u683C"}\u5E76\u4FDD\u5B58\u5230\u6570\u636E\u6587\u4EF6`);
          }).catch((err) => {
            console.error("\u4FDD\u5B58\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", err);
            new import_obsidian5.Notice(`\u4FDD\u5B58\u8868\u683C\u6570\u636E\u5931\u8D25: ${err.message || "\u672A\u77E5\u9519\u8BEF"}`);
          });
        } else {
          console.warn("\u4FDD\u5B58\u6570\u636E\u65F6\u8868\u683C\u4E0D\u518D\u5B58\u5728");
        }
      }).catch((error) => {
        console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
        new import_obsidian5.Notice(`\u83B7\u53D6\u8868\u683CID\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      });
      console.log("\u5BF9\u9F50\u5E94\u7528\u5B8C\u6210");
    } catch (error) {
      console.error("\u5E94\u7528\u5BF9\u9F50\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u5E94\u7528\u5BF9\u9F50\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 获取选中单元格的位置信息（行列索引）
   * @returns 选中单元格的位置数组
   */
  getSelectedCellPositions() {
    const positions = [];
    if (!this.activeTable || this.selectedCells.length === 0) {
      return positions;
    }
    this.selectedCells.forEach((cell) => {
      const row = cell.closest("tr");
      if (!row)
        return;
      const rowIndex = Array.from(this.activeTable.querySelectorAll("tr")).indexOf(row);
      if (rowIndex === -1)
        return;
      const colIndex = Array.from(row.querySelectorAll("td, th")).indexOf(cell);
      if (colIndex === -1)
        return;
      positions.push({ row: rowIndex, col: colIndex });
    });
    return positions;
  }
  /**
   * 仅应用对齐样式，不保存数据
   * @param horizontalAlign 水平对齐方式
   * @param verticalAlign 垂直对齐方式
   */
  applyAlignmentStylesOnly(horizontalAlign, verticalAlign) {
    if (this.selectedCells.length === 0 && this.activeTable) {
      const cells = this.activeTable.querySelectorAll("td, th");
      cells.forEach((cell) => {
        const cellEl = cell;
        if (horizontalAlign) {
          cellEl.style.textAlign = horizontalAlign;
        }
        if (verticalAlign) {
          cellEl.style.verticalAlign = verticalAlign;
        }
      });
      new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230\u6574\u4E2A\u8868\u683C`);
    } else {
      this.selectedCells.forEach((cell) => {
        if (horizontalAlign) {
          cell.style.textAlign = horizontalAlign;
        }
        if (verticalAlign) {
          cell.style.verticalAlign = verticalAlign;
        }
      });
      new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230\u9009\u4E2D\u5355\u5143\u683C`);
    }
  }
  /**
   * 合并选中的单元格
   */
  async mergeCells() {
    var _a;
    try {
      console.log("\u5C1D\u8BD5\u5408\u5E76\u9009\u4E2D\u7684\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("right");
        if (success) {
          this.clearCellSelection();
          console.log("\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length < 2) {
          new import_obsidian5.Notice("\u8BF7\u9009\u62E9\u81F3\u5C112\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
          return;
        }
        const boundary = this.getSelectedCellsBoundary();
        if (!boundary) {
          new import_obsidian5.Notice("\u65E0\u6CD5\u786E\u5B9A\u9009\u4E2D\u5355\u5143\u683C\u7684\u8FB9\u754C");
          return;
        }
        const { minRow, maxRow, minCol, maxCol } = boundary;
        const expectedCellCount = (maxRow - minRow + 1) * (maxCol - minCol + 1);
        if (expectedCellCount !== this.selectedCells.length) {
          new import_obsidian5.Notice("\u53EA\u80FD\u5408\u5E76\u5F62\u6210\u5B8C\u6574\u77E9\u5F62\u7684\u5355\u5143\u683C");
          return;
        }
        const mainCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${minRow}"][col-index="${minCol}"]`);
        if (!mainCell) {
          new import_obsidian5.Notice("\u65E0\u6CD5\u627E\u5230\u4E3B\u5355\u5143\u683C");
          return;
        }
        if (this.plugin.settings.confirmMergeNonEmpty) {
          const nonEmptyCells = this.selectedCells.filter((cell) => {
            var _a2;
            if (cell === mainCell)
              return false;
            const content = ((_a2 = cell.textContent) == null ? void 0 : _a2.trim()) || "";
            return content !== "" && content !== "<" && content !== "^";
          });
          if (nonEmptyCells.length > 0) {
            const cellContents = nonEmptyCells.map((cell) => {
              var _a2;
              return `"${((_a2 = cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
            }).join(", ");
            const confirmMerge = await this.showConfirmDialog(
              `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
            );
            if (!confirmMerge)
              return;
          }
        }
        const rowSpanValue = maxRow - minRow + 1;
        const colSpanValue = maxCol - minCol + 1;
        if (rowSpanValue > 1) {
          mainCell.setAttribute("rowspan", rowSpanValue.toString());
        }
        if (colSpanValue > 1) {
          mainCell.setAttribute("colspan", colSpanValue.toString());
        }
        for (const cell of this.selectedCells) {
          if (cell === mainCell)
            continue;
          const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
          const colIndex = parseInt(cell.getAttribute("col-index") || "0");
          if (rowIndex === minRow) {
            const markerCount = colIndex - minCol;
            cell.textContent = "<".repeat(markerCount);
            cell.setAttribute("data-merged", "true");
            cell.setAttribute("data-merge-direction", "left");
            cell.setAttribute("data-merge-count", markerCount.toString());
          } else if (colIndex === minCol) {
            const markerCount = rowIndex - minRow;
            cell.textContent = "^".repeat(markerCount);
            cell.setAttribute("data-merged", "true");
            cell.setAttribute("data-merge-direction", "up");
            cell.setAttribute("data-merge-count", markerCount.toString());
          } else {
            if (rowIndex > minRow && colIndex > minCol) {
              const markerCount = colIndex - minCol;
              cell.textContent = "<".repeat(markerCount);
              cell.setAttribute("data-merged", "true");
              cell.setAttribute("data-merge-direction", "left");
              cell.setAttribute("data-merge-count", markerCount.toString());
            }
          }
          cell.style.display = "none";
        }
        this.applyMergedCellStyles(mainCell, this.selectedCells.filter((cell) => cell !== mainCell));
        new import_obsidian5.Notice(`\u5DF2\u6210\u529F\u5408\u5E76${this.selectedCells.length}\u4E2A\u5355\u5143\u683C`);
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        this.clearCellSelection();
      }
    } catch (error) {
      console.error("\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 向右合并单元格
   */
  async mergeRight() {
    var _a, _b;
    try {
      console.log("\u5C1D\u8BD5\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("right");
        if (success) {
          this.clearCellSelection();
          console.log("\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length === 0) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u5408\u5E76\u7684\u5355\u5143\u683C");
          return;
        }
        if (this.selectedCells.length > 1) {
          const rowIndices = /* @__PURE__ */ new Set();
          for (const cell2 of this.selectedCells) {
            const rowIndex2 = parseInt(cell2.getAttribute("row-index") || "0");
            rowIndices.add(rowIndex2);
          }
          if (rowIndices.size !== 1) {
            new import_obsidian5.Notice("\u5411\u53F3\u5408\u5E76\u9700\u8981\u9009\u62E9\u540C\u4E00\u884C\u7684\u5355\u5143\u683C");
            return;
          }
          const cellsWithIndices = this.selectedCells.map((cell2) => {
            return {
              cell: cell2,
              colIndex: parseInt(cell2.getAttribute("col-index") || "0")
            };
          }).sort((a, b) => a.colIndex - b.colIndex);
          for (let i = 1; i < cellsWithIndices.length; i++) {
            if (cellsWithIndices[i].colIndex !== cellsWithIndices[i - 1].colIndex + 1) {
              new import_obsidian5.Notice("\u9700\u8981\u9009\u62E9\u8FDE\u7EED\u7684\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
              return;
            }
          }
          const mainCell = cellsWithIndices[0].cell;
          const mergeCount = cellsWithIndices.length - 1;
          if (this.plugin.settings.confirmMergeNonEmpty) {
            const nonEmptyCells = cellsWithIndices.slice(1).filter((item) => {
              var _a2;
              const content = ((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "";
              return content !== "" && content !== "<" && content !== "^";
            });
            if (nonEmptyCells.length > 0) {
              const cellContents = nonEmptyCells.map((item) => {
                var _a2;
                return `"${((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
              }).join(", ");
              const confirmMerge = await this.showConfirmDialog(
                `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
              );
              if (!confirmMerge)
                return;
            }
          }
          for (let i = 1; i < cellsWithIndices.length; i++) {
            const cell2 = cellsWithIndices[i].cell;
            cell2.textContent = "<".repeat(i);
            cell2.setAttribute("data-merged", "true");
            cell2.setAttribute("data-merge-direction", "left");
            cell2.setAttribute("data-merge-count", i.toString());
          }
          this.applyMergedCellStyles(mainCell, cellsWithIndices.slice(1).map((item) => item.cell));
          new import_obsidian5.Notice(`\u5DF2\u5411\u53F3\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C`);
          console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C\u6210\u529F`);
          this.clearCellSelection();
          return;
        }
        const cell = this.selectedCells[0];
        if (!cell) {
          console.log("\u672A\u627E\u5230\u9009\u4E2D\u7684\u5355\u5143\u683C");
          return;
        }
        const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || "0");
        console.log(`\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}`);
        const rightCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${rowIndex}"][col-index="${colIndex + 1}"]`);
        if (!rightCell) {
          new import_obsidian5.Notice("\u53F3\u4FA7\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
          return;
        }
        const rightContent = (_b = rightCell.textContent) == null ? void 0 : _b.trim();
        if (this.plugin.settings.confirmMergeNonEmpty && rightContent && rightContent !== "<" && rightContent !== "^") {
          const confirmed = await this.showConfirmDialog(
            `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9"${rightContent}"\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
          );
          if (!confirmed)
            return;
        }
        rightCell.textContent = "<";
        rightCell.setAttribute("data-merged", "true");
        rightCell.setAttribute("data-merge-direction", "left");
        this.applyMergedCellStyles(cell, [rightCell]);
        new import_obsidian5.Notice("\u5DF2\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
      }
    } catch (error) {
      console.error("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 向下合并单元格
   */
  async mergeDown() {
    var _a, _b;
    try {
      console.log("\u5C1D\u8BD5\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("down");
        if (success) {
          this.clearCellSelection();
          console.log("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length === 0) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u5408\u5E76\u7684\u5355\u5143\u683C");
          return;
        }
        if (this.selectedCells.length > 1) {
          const colIndices = /* @__PURE__ */ new Set();
          for (const cell2 of this.selectedCells) {
            const colIndex2 = parseInt(cell2.getAttribute("col-index") || "0");
            colIndices.add(colIndex2);
          }
          if (colIndices.size !== 1) {
            new import_obsidian5.Notice("\u5411\u4E0B\u5408\u5E76\u9700\u8981\u9009\u62E9\u540C\u4E00\u5217\u7684\u5355\u5143\u683C");
            return;
          }
          const cellsWithIndices = this.selectedCells.map((cell2) => {
            return {
              cell: cell2,
              rowIndex: parseInt(cell2.getAttribute("row-index") || "0")
            };
          }).sort((a, b) => a.rowIndex - b.rowIndex);
          for (let i = 1; i < cellsWithIndices.length; i++) {
            if (cellsWithIndices[i].rowIndex !== cellsWithIndices[i - 1].rowIndex + 1) {
              new import_obsidian5.Notice("\u9700\u8981\u9009\u62E9\u8FDE\u7EED\u7684\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
              return;
            }
          }
          const mainCell = cellsWithIndices[0].cell;
          const mergeCount = cellsWithIndices.length - 1;
          if (this.plugin.settings.confirmMergeNonEmpty) {
            const nonEmptyCells = cellsWithIndices.slice(1).filter((item) => {
              var _a2;
              const content = ((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "";
              return content !== "" && content !== "<" && content !== "^";
            });
            if (nonEmptyCells.length > 0) {
              const cellContents = nonEmptyCells.map((item) => {
                var _a2;
                return `"${((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
              }).join(", ");
              const confirmMerge = await this.showConfirmDialog(
                `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
              );
              if (!confirmMerge)
                return;
            }
          }
          for (let i = 1; i < cellsWithIndices.length; i++) {
            const cell2 = cellsWithIndices[i].cell;
            cell2.textContent = "^".repeat(i);
            cell2.setAttribute("data-merged", "true");
            cell2.setAttribute("data-merge-direction", "up");
            cell2.setAttribute("data-merge-count", i.toString());
          }
          this.applyMergedCellStyles(mainCell, cellsWithIndices.slice(1).map((item) => item.cell));
          new import_obsidian5.Notice(`\u5DF2\u5411\u4E0B\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C`);
          console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C\u6210\u529F`);
          this.clearCellSelection();
          return;
        }
        const cell = this.selectedCells[0];
        if (!cell) {
          console.log("\u672A\u627E\u5230\u9009\u4E2D\u7684\u5355\u5143\u683C");
          return;
        }
        const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || "0");
        console.log(`\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}`);
        const belowCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${rowIndex + 1}"][col-index="${colIndex}"]`);
        if (!belowCell) {
          new import_obsidian5.Notice("\u4E0B\u65B9\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
          return;
        }
        const belowContent = (_b = belowCell.textContent) == null ? void 0 : _b.trim();
        if (this.plugin.settings.confirmMergeNonEmpty && belowContent && belowContent !== "<" && belowContent !== "^") {
          const confirmed = await this.showConfirmDialog(
            `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9"${belowContent}"\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
          );
          if (!confirmed)
            return;
        }
        belowCell.textContent = "^";
        belowCell.setAttribute("data-merged", "true");
        belowCell.setAttribute("data-merge-direction", "up");
        this.applyMergedCellStyles(cell, [belowCell]);
        new import_obsidian5.Notice("\u5DF2\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
      }
    } catch (error) {
      console.error("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 拆分单元格
   */
  splitCell() {
    try {
      if (this.selectedCells.length !== 1) {
        console.log("\u9700\u8981\u9009\u62E9\u4E00\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u62C6\u5206");
        new import_obsidian5.Notice("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u62C6\u5206");
        return;
      }
      console.log("\u5F00\u59CB\u62C6\u5206\u5355\u5143\u683C");
      const cell = this.selectedCells[0];
      const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
      const colIndex = parseInt(cell.getAttribute("col-index") || "0");
      const colSpan = cell.getAttribute("colspan");
      const rowSpan = cell.getAttribute("rowspan");
      const table = cell.closest("table");
      let hasMergeMarkers = false;
      if (table) {
        const rightCell = table.querySelector(`[row-index="${rowIndex}"][col-index="${colIndex + 1}"]`);
        if (rightCell && rightCell.textContent) {
          const rightContent = rightCell.textContent.trim();
          if (rightContent === "<" || rightContent === "^") {
            hasMergeMarkers = true;
            rightCell.textContent = "";
            console.log("\u5DF2\u6E05\u9664\u53F3\u4FA7\u5355\u5143\u683C\u7684\u5408\u5E76\u6807\u8BB0");
          }
        }
        const belowCell = table.querySelector(`[row-index="${rowIndex + 1}"][col-index="${colIndex}"]`);
        if (belowCell && belowCell.textContent) {
          const belowContent = belowCell.textContent.trim();
          if (belowContent === "<" || belowContent === "^") {
            hasMergeMarkers = true;
            belowCell.textContent = "";
            console.log("\u5DF2\u6E05\u9664\u4E0B\u65B9\u5355\u5143\u683C\u7684\u5408\u5E76\u6807\u8BB0");
          }
        }
        for (let i = colIndex + 1; i < colIndex + 10; i++) {
          const nextCell = table.querySelector(`[row-index="${rowIndex}"][col-index="${i}"]`);
          if (nextCell && nextCell.textContent && nextCell.textContent.trim() === "<") {
            nextCell.textContent = "";
            hasMergeMarkers = true;
            console.log(`\u5DF2\u6E05\u9664\u4F4D\u7F6E (${rowIndex}, ${i}) \u7684\u6C34\u5E73\u5408\u5E76\u6807\u8BB0`);
          } else {
            break;
          }
        }
        for (let i = rowIndex + 1; i < rowIndex + 10; i++) {
          const nextCell = table.querySelector(`[row-index="${i}"][col-index="${colIndex}"]`);
          if (nextCell && nextCell.textContent && nextCell.textContent.trim() === "^") {
            nextCell.textContent = "";
            hasMergeMarkers = true;
            console.log(`\u5DF2\u6E05\u9664\u4F4D\u7F6E (${i}, ${colIndex}) \u7684\u5782\u76F4\u5408\u5E76\u6807\u8BB0`);
          } else {
            break;
          }
        }
      }
      if (!colSpan && !rowSpan && !hasMergeMarkers) {
        console.log("\u9009\u4E2D\u7684\u5355\u5143\u683C\u6CA1\u6709\u5408\u5E76\u5C5E\u6027\uFF0C\u65E0\u9700\u62C6\u5206");
        new import_obsidian5.Notice("\u9009\u4E2D\u7684\u5355\u5143\u683C\u6CA1\u6709\u5408\u5E76\u5C5E\u6027\uFF0C\u65E0\u9700\u62C6\u5206");
        return;
      }
      if (colSpan) {
        cell.removeAttribute("colspan");
      }
      if (rowSpan) {
        cell.removeAttribute("rowspan");
      }
      if (table) {
        const hiddenCells = table.querySelectorAll('td[style*="display: none"], th[style*="display: none"]');
        hiddenCells.forEach((hiddenCell) => {
          hiddenCell.style.display = "";
        });
      }
      new import_obsidian5.Notice("\u5DF2\u62C6\u5206\u5355\u5143\u683C");
      console.log("\u5355\u5143\u683C\u62C6\u5206\u5B8C\u6210");
      this.clearCellSelection();
    } catch (error) {
      console.error("\u62C6\u5206\u5355\u5143\u683C\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u62C6\u5206\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 生成表格ID
   */
  generateTableId() {
    try {
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        this.showConfirmDialog("\u662F\u5426\u4E3A\u5F53\u524D\u8868\u683C\u521B\u5EFAID\uFF1F\u521B\u5EFA\u540E\u5C06\u5728\u8868\u683C\u524D\u6DFB\u52A0HTML\u6CE8\u91CA\u3002").then((confirmed) => {
          if (!confirmed) {
            return;
          }
          const editor = activeView.editor;
          const tableInfo = this.plugin.markdownSourceEditor.locateTableInMarkdown(editor);
          if (tableInfo) {
            if (tableInfo.tableId) {
              new import_obsidian5.Notice(`\u8868\u683C\u5DF2\u6709ID: ${tableInfo.tableId}`);
              return;
            }
            const newId = this.generateUniqueTableId();
            const tableStartLine = tableInfo.startLine;
            const currentPos = editor.getCursor();
            editor.replaceRange(`<!-- table-id: ${newId} -->
`, { line: tableStartLine, ch: 0 });
            editor.setCursor(currentPos);
            new import_obsidian5.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newId}`);
            console.log("\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID:", newId);
          } else {
            new import_obsidian5.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u5728\u8868\u683C\u5185");
          }
        });
      } else {
        if (!this.activeTable) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
          return;
        }
        this.showConfirmDialog("\u662F\u5426\u4E3A\u5F53\u524D\u8868\u683C\u521B\u5EFAID\uFF1F").then((confirmed) => {
          if (!confirmed) {
            return;
          }
          const tableId = this.activeTable ? this.plugin.tableIdManager.confirmAndCreateTableId(this.activeTable) : "";
          if (tableId) {
            const activeView2 = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
            if (activeView2) {
              activeView2.previewMode.rerender(true);
            }
            console.log("\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID:", tableId);
          } else {
            console.error("\u521B\u5EFA\u8868\u683CID\u5931\u8D25");
            new import_obsidian5.Notice("\u521B\u5EFA\u8868\u683CID\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u6DFB\u52A0");
          }
        });
      }
    } catch (error) {
      console.error("\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 生成唯一的表格ID
   * @returns 格式为 tbl-YYYYMMDD-xxxxxxxx 的唯一ID
   */
  generateUniqueTableId() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, "0");
    const day = String(now.getDate()).padStart(2, "0");
    const dateStr = `${year}${month}${day}`;
    const randomChars = "abcdefghijklmnopqrstuvwxyz0123456789";
    let randomStr = "";
    for (let i = 0; i < 8; i++) {
      randomStr += randomChars.charAt(Math.floor(Math.random() * randomChars.length));
    }
    return `tbl-${dateStr}-${randomStr}`;
  }
  /**
   * 检查表格是否已有ID
   * @param editor 编辑器实例
   * @returns 已有ID或null
   */
  checkExistingTableId(editor) {
    const content = editor.getValue();
    const lines = content.split("\n");
    let tableStartLine = -1;
    for (let i = 0; i < lines.length; i++) {
      if (lines[i].trim().startsWith("|") && lines[i].includes("|")) {
        if (i + 1 < lines.length && lines[i + 1].trim().match(/^\|[-:\s|]*\|$/)) {
          tableStartLine = i;
          break;
        }
      }
    }
    if (tableStartLine === -1) {
      return null;
    }
    let idCommentLine = tableStartLine - 1;
    while (idCommentLine >= 0 && (lines[idCommentLine].trim() === "" || lines[idCommentLine].trim().startsWith("<!--"))) {
      const line = lines[idCommentLine].trim();
      if (line.includes("table-id:")) {
        const match = line.match(/table-id:\s*([^\s>]+)/);
        return match ? match[1] : null;
      }
      idCommentLine--;
    }
    return null;
  }
  /**
   * 提取并存储表格信息
   * @param tableId 表格ID
   * @param tableElement 表格元素
   * @param filePath 文件路径
   */
  extractAndStoreTableInfo(tableId, tableElement, filePath) {
    try {
      const rows = tableElement.querySelectorAll("tr");
      const rowCount = rows.length;
      let colCount = 0;
      let hasHeaders = false;
      if (rowCount > 0) {
        const firstRow = rows[0];
        const headerCells = firstRow.querySelectorAll("th");
        hasHeaders = headerCells.length > 0;
        for (const row of Array.from(rows)) {
          const cellCount = row.querySelectorAll("td, th").length;
          colCount = Math.max(colCount, cellCount);
        }
      }
      const mergeInfo = this.extractMergeInfo(tableElement);
      console.log(`\u63D0\u53D6\u8868\u683C\u5408\u5E76\u4FE1\u606F:`, mergeInfo);
      const tableInfo = {
        id: tableId,
        locations: [
          {
            path: filePath,
            isActive: true
          }
        ],
        structure: {
          rowCount,
          colCount,
          hasHeaders
        },
        styling: {
          rowHeights: Array(rowCount).fill("auto"),
          colWidths: Array(colCount).fill("auto"),
          alignment: Array(colCount).fill("left")
        }
      };
      console.log(`\u4FDD\u5B58\u8868\u683C\u4FE1\u606F: ID=${tableId}, \u884C\u6570=${rowCount}, \u5217\u6570=${colCount}, \u8868\u5934=${hasHeaders}`);
      this.plugin.saveTableData(tableInfo);
    } catch (error) {
      console.error("\u63D0\u53D6\u8868\u683C\u4FE1\u606F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 提取表格的合并信息
   * @param tableElement 表格元素
   * @returns 合并信息对象
   */
  extractMergeInfo(tableElement) {
    var _a;
    const mergeInfo = {
      horizontal: [],
      vertical: []
    };
    const rows = tableElement.querySelectorAll("tr");
    for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
      const row = rows[rowIndex];
      const cells = row.querySelectorAll("td, th");
      for (let colIndex = 0; colIndex < cells.length; colIndex++) {
        const cell = cells[colIndex];
        const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
        const leftMatch = content.match(/^(<+)$/);
        if (leftMatch) {
          const count = leftMatch[1].length;
          mergeInfo.horizontal.push({
            row: rowIndex,
            col: colIndex,
            count,
            content
          });
        }
        const upMatch = content.match(/^(\^+)$/);
        if (upMatch) {
          const count = upMatch[1].length;
          mergeInfo.vertical.push({
            row: rowIndex,
            col: colIndex,
            count,
            content
          });
        }
        const colspan = parseInt(cell.getAttribute("colspan") || "1");
        const rowspan = parseInt(cell.getAttribute("rowspan") || "1");
        if (colspan > 1 || rowspan > 1) {
          console.log(`\u53D1\u73B0\u5408\u5E76\u5355\u5143\u683C: \u4F4D\u7F6E(${rowIndex},${colIndex}), colspan=${colspan}, rowspan=${rowspan}`);
        }
      }
    }
    return mergeInfo;
  }
  /**
   * 显示添加行菜单
   */
  showRowAddMenu() {
    try {
      if (!this.activeTable) {
        console.log("\u65E0\u6D3B\u52A8\u8868\u683C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u884C");
        new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
        return;
      }
      console.log("\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355");
      const menu = new import_obsidian5.Menu();
      menu.addItem(
        (item) => item.setTitle("\u5728\u4E0A\u65B9\u6DFB\u52A0\u884C").setIcon("arrow-up").onClick(() => this.addRow("above"))
      );
      menu.addItem(
        (item) => item.setTitle("\u5728\u4E0B\u65B9\u6DFB\u52A0\u884C").setIcon("arrow-down").onClick(() => this.addRow("below"))
      );
      const toolbarEl = this.toolbar;
      if (toolbarEl) {
        const rect = toolbarEl.getBoundingClientRect();
        menu.showAtPosition({ x: rect.left, y: rect.bottom });
      } else {
        menu.showAtMouseEvent(event);
      }
    } catch (error) {
      console.error("\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 添加行
   * @param position 位置，above 或 below
   */
  addRow(position) {
    var _a, _b;
    try {
      if (!this.activeTable) {
        console.log("\u65E0\u6D3B\u52A8\u8868\u683C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u884C");
        new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
        return;
      }
      console.log("\u5F00\u59CB\u6DFB\u52A0\u884C:", position);
      let targetRow = null;
      if (this.selectedCells.length > 0) {
        targetRow = this.selectedCells[0].closest("tr");
      } else {
        targetRow = this.activeTable.querySelector("tr");
      }
      if (!targetRow) {
        console.error("\u65E0\u6CD5\u627E\u5230\u76EE\u6807\u884C");
        new import_obsidian5.Notice("\u65E0\u6CD5\u627E\u5230\u76EE\u6807\u884C");
        return;
      }
      const cellCount = targetRow.querySelectorAll("td, th").length;
      const newRow = document.createElement("tr");
      for (let i = 0; i < cellCount; i++) {
        const cell = document.createElement("td");
        cell.textContent = "";
        newRow.appendChild(cell);
      }
      if (position === "above") {
        (_a = targetRow.parentNode) == null ? void 0 : _a.insertBefore(newRow, targetRow);
      } else {
        (_b = targetRow.parentNode) == null ? void 0 : _b.insertBefore(newRow, targetRow.nextSibling);
      }
      new import_obsidian5.Notice(`\u5DF2\u5728${position === "above" ? "\u4E0A\u65B9" : "\u4E0B\u65B9"}\u6DFB\u52A0\u884C`);
      console.log("\u6DFB\u52A0\u884C\u5B8C\u6210:", position);
    } catch (error) {
      console.error("\u6DFB\u52A0\u884C\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u6DFB\u52A0\u884C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 更新行索引
   */
  updateRowIndices() {
    if (!this.activeTable)
      return;
    const rows = this.activeTable.querySelectorAll("tr");
    rows.forEach((row, rowIndex) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        cell.setAttribute("row-index", rowIndex.toString());
        cell.setAttribute("col-index", colIndex.toString());
      });
    });
  }
  /**
   * 显示样式菜单
   */
  showStyleMenu() {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u8868\u683C\u6837\u5F0F").setIcon("brush").onClick(() => {
        new import_obsidian5.Notice("\u6837\u5F0F\u8BBE\u7F6E\u529F\u80FD\u6B63\u5728\u5F00\u53D1\u4E2D");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u6761\u7EB9\u6837\u5F0F").setIcon("lines").onClick(() => this.applyStripedStyle())
    );
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u8FB9\u6846\u6837\u5F0F").setIcon("box").onClick(() => this.applyBorderedStyle())
    );
    const button = this.toolbar.querySelector(".table-style");
    const rect = button.getBoundingClientRect();
    menu.showAtPosition({ x: rect.left, y: rect.bottom });
  }
  /**
   * 应用条纹样式
   */
  applyStripedStyle() {
    if (!this.activeTable) {
      new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
      return;
    }
    const rows = this.activeTable.querySelectorAll("tr");
    rows.forEach((row, index) => {
      if (index > 0 && index % 2 === 1) {
        const cells = row.querySelectorAll("td");
        cells.forEach((cell) => {
          cell.style.backgroundColor = "var(--background-secondary)";
        });
      }
    });
    new import_obsidian5.Notice("\u5DF2\u5E94\u7528\u6761\u7EB9\u6837\u5F0F");
  }
  /**
   * 应用边框样式
   */
  applyBorderedStyle() {
    if (!this.activeTable) {
      new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
      return;
    }
    this.activeTable.style.borderCollapse = "collapse";
    const cells = this.activeTable.querySelectorAll("td, th");
    cells.forEach((cell) => {
      cell.style.border = "1px solid var(--background-modifier-border)";
      cell.style.padding = "4px 8px";
    });
    new import_obsidian5.Notice("\u5DF2\u5E94\u7528\u8FB9\u6846\u6837\u5F0F");
  }
  /**
   * 设置活动表格
   * @param table 表格HTML元素
   */
  setActiveTable(table) {
    var _a, _b;
    try {
      console.log("\u8BBE\u7F6E\u6D3B\u52A8\u8868\u683C");
      console.log("\u8868\u683CDOM\u7ED3\u6784:", table.outerHTML.substring(0, 200) + "...");
      const tableId = this.plugin.tableIdManager.getTableIdentifier(table);
      console.log(`\u8868\u683CID\u68C0\u67E5\u7ED3\u679C: ${tableId || "\u672A\u627E\u5230"}`);
      let prevNode = table.previousSibling;
      let nodeCount = 0;
      console.log("\u8868\u683C\u524D\u7F6E\u8282\u70B9\u68C0\u67E5:");
      while (prevNode && nodeCount < 5) {
        nodeCount++;
        const nodeType = prevNode.nodeType;
        const nodeTypeStr = nodeType === Node.COMMENT_NODE ? "COMMENT" : nodeType === Node.TEXT_NODE ? "TEXT" : nodeType === Node.ELEMENT_NODE ? "ELEMENT" : "OTHER";
        if (nodeType === Node.COMMENT_NODE) {
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u5185\u5BB9="${((_a = prevNode.textContent) == null ? void 0 : _a.trim()) || ""}"`);
        } else if (nodeType === Node.TEXT_NODE) {
          const text = ((_b = prevNode.textContent) == null ? void 0 : _b.trim()) || "";
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u5185\u5BB9="${text.substring(0, 20)}${text.length > 20 ? "..." : ""}"`);
        } else if (nodeType === Node.ELEMENT_NODE) {
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u6807\u7B7E=<${prevNode.tagName.toLowerCase()}>`);
        }
        prevNode = prevNode.previousSibling;
      }
      this.activeTable = table;
      this.plugin.removeAllTableHighlights();
      this.plugin.highlightSelectedTable(table);
      this.setupCellSelection();
      console.log("\u6D3B\u52A8\u8868\u683C\u8BBE\u7F6E\u5B8C\u6210");
    } catch (error) {
      console.error("\u8BBE\u7F6E\u6D3B\u52A8\u8868\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 设置编辑模式下的活动表格
   * @param tableInfo 表格信息
   */
  setActiveEditModeTable(tableInfo) {
    try {
      if (this.activeTable) {
        this.clearCellSelection();
        this.activeTable.dataset.tableSelected = "false";
        this.activeTable.style.outline = "";
        this.activeTable.style.outlineOffset = "";
        this.activeTable = null;
      }
      this.editModeTableInfo = tableInfo;
      console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u9009\u62E9\u4E86\u8868\u683C:", tableInfo);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u7F16\u8F91\u6A21\u5F0F\u6D3B\u52A8\u8868\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 检查当前是否在编辑模式下
   * @returns 是否在编辑模式下
   */
  isInEditMode() {
    const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    return activeView ? activeView.getMode() === "source" : false;
  }
  /**
   * 设置单元格选择功能
   */
  setupCellSelection() {
    if (!this.activeTable)
      return;
    const cells = this.activeTable.querySelectorAll("td, th");
    cells.forEach((cell) => {
      const cellEl = cell;
      cellEl.onclick = (event2) => this.handleCellClick(cellEl, event2);
    });
  }
  /**
   * 处理单元格点击事件
   * @param cell 单元格元素
   * @param event 事件对象
   */
  handleCellClick(cell, event2) {
    event2.stopPropagation();
    if (!event2.ctrlKey && !event2.metaKey) {
      this.clearCellSelection();
    }
    const index = this.selectedCells.indexOf(cell);
    if (index === -1) {
      this.selectedCells.push(cell);
      cell.classList.add("selected-cell");
      cell.style.backgroundColor = "var(--text-selection)";
      const position = this.selectedCells.length > 1 ? "\u591A\u9009\u6A21\u5F0F" : "\u5DF2\u9009\u62E9\u5355\u5143\u683C";
      new import_obsidian5.Notice(`${position} (${this.selectedCells.length})`, 1e3);
    } else {
      this.selectedCells.splice(index, 1);
      cell.classList.remove("selected-cell");
      cell.style.backgroundColor = "";
      if (this.selectedCells.length > 0) {
        new import_obsidian5.Notice(`\u5DF2\u9009\u62E9 ${this.selectedCells.length} \u4E2A\u5355\u5143\u683C`, 1e3);
      }
    }
    console.log("\u5DF2\u9009\u62E9\u5355\u5143\u683C:", this.selectedCells.length);
  }
  /**
   * 清除单元格选择
   */
  clearCellSelection() {
    this.selectedCells.forEach((cell) => {
      cell.classList.remove("selected-cell");
      cell.style.backgroundColor = "";
    });
    this.selectedCells = [];
  }
  /**
   * 显示确认对话框
   * @param message 确认消息
   * @returns 用户是否确认
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const notice = new import_obsidian5.Notice(message, 0);
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "space-between";
      buttonContainer.style.marginTop = "10px";
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve(false);
      };
      const confirmButton = document.createElement("button");
      confirmButton.textContent = "\u786E\u5B9A";
      confirmButton.style.marginLeft = "10px";
      confirmButton.onclick = () => {
        notice.hide();
        resolve(true);
      };
      buttonContainer.appendChild(cancelButton);
      buttonContainer.appendChild(confirmButton);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 应用合并单元格的样式
   * @param mainCell 主单元格（保留的单元格）
   * @param mergedCells 被合并的单元格（将被隐藏）
   */
  applyMergedCellStyles(mainCell, mergedCells) {
    mainCell.classList.add("obs-merged-cell-main");
    if (this.plugin.settings.autoCenterMergedCells) {
      mainCell.style.textAlign = "center";
      mainCell.style.verticalAlign = "middle";
    }
    for (const cell of mergedCells) {
      cell.style.display = "none";
    }
    mainCell.setAttribute("data-merged-main", "true");
  }
  /**
   * 清除表格选择
   */
  clearSelection() {
    try {
      this.clearCellSelection();
      if (this.activeTable) {
        this.activeTable.dataset.tableSelected = "false";
        this.activeTable.style.outline = "";
        this.activeTable.style.outlineOffset = "";
        this.activeTable = null;
      }
      this.editModeTableInfo = null;
      console.log("\u5DF2\u6E05\u9664\u8868\u683C\u9009\u62E9");
    } catch (error) {
      console.error("\u6E05\u9664\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 获取选中单元格的边界
   * @returns 边界信息 {minRow, maxRow, minCol, maxCol}
   */
  getSelectedCellsBoundary() {
    if (!this.selectedCells || this.selectedCells.length === 0) {
      return null;
    }
    let minRow = Number.MAX_SAFE_INTEGER;
    let maxRow = 0;
    let minCol = Number.MAX_SAFE_INTEGER;
    let maxCol = 0;
    for (const cell of this.selectedCells) {
      const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
      const colIndex = parseInt(cell.getAttribute("col-index") || "0");
      minRow = Math.min(minRow, rowIndex);
      maxRow = Math.max(maxRow, rowIndex);
      minCol = Math.min(minCol, colIndex);
      maxCol = Math.max(maxCol, colIndex);
    }
    return { minRow, maxRow, minCol, maxCol };
  }
};

// src/markdownSourceEditor.ts
var import_obsidian7 = require("obsidian");
var MarkdownSourceEditor = class {
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  constructor(plugin) {
    this.plugin = plugin;
    console.log("MarkdownSourceEditor initialized");
  }
  /**
   * 获取当前活动的编辑器
   * @returns 编辑器实例或null
   */
  getActiveEditor() {
    const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
    if (activeView && activeView.editor) {
      return activeView.editor;
    }
    return null;
  }
  /**
   * 在Markdown源码中定位表格
   * @param editor 编辑器实例
   * @returns 表格信息或null
   */
  locateTableInMarkdown(editor) {
    try {
      const content = editor.getValue();
      const cursor = editor.getCursor();
      const lines = content.split("\n");
      const cursorLine = lines[cursor.line];
      const isInTableRow = cursorLine && cursorLine.trim().startsWith("|") && cursorLine.trim().endsWith("|");
      if (!isInTableRow)
        return null;
      let startLine = cursor.line;
      while (startLine > 0 && lines[startLine - 1].trim().startsWith("|")) {
        startLine--;
      }
      let endLine = cursor.line;
      while (endLine < lines.length - 1 && lines[endLine + 1].trim().startsWith("|")) {
        endLine++;
      }
      if (!this.isValidTable(lines.slice(startLine, endLine + 1))) {
        return null;
      }
      const tableId = this.findTableIdAbove(editor, startLine);
      return {
        startLine,
        endLine,
        content: lines.slice(startLine, endLine + 1).join("\n"),
        tableId
      };
    } catch (error) {
      console.error("\u5B9A\u4F4DMarkdown\u8868\u683C\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 在表格上方查找表格ID
   * @param editor 编辑器实例
   * @param tableLine 表格起始行
   * @returns 表格ID或undefined
   */
  findTableIdAbove(editor, tableLine) {
    console.log(`\u67E5\u627E\u8868\u683CID: \u8868\u683C\u8D77\u59CB\u884C=${tableLine}`);
    const maxLinesToCheck = 10;
    let currentLine = tableLine - 1;
    const minLine = Math.max(0, tableLine - maxLinesToCheck);
    while (currentLine >= minLine) {
      const line = editor.getLine(currentLine);
      if (!line)
        break;
      console.log(`\u68C0\u67E5\u884C ${currentLine}: "${line}"`);
      const standardIdMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (standardIdMatch && standardIdMatch[1]) {
        const id = standardIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u6807\u51C6\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const noHyphenIdMatch = line.match(/<!--\s*tableid:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (noHyphenIdMatch && noHyphenIdMatch[1]) {
        const id = noHyphenIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u8FDE\u5B57\u7B26\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const simpleIdMatch = line.match(/<!--\s*id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (simpleIdMatch && simpleIdMatch[1]) {
        const id = simpleIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u7B80\u5316\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const tableNameIdMatch = line.match(/<!--\s*(table|tbl):\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (tableNameIdMatch && tableNameIdMatch[2]) {
        const id = tableNameIdMatch[2];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u8868\u683C\u540D\u79F0\u683C\u5F0FID: ${id}`);
        return id;
      }
      const noSpaceIdMatch = line.match(/<!--table-id:([a-zA-Z0-9_\-:.]+)-->/i);
      if (noSpaceIdMatch && noSpaceIdMatch[1]) {
        const id = noSpaceIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u7A7A\u683C\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      if (line.trim() !== "" && !line.trim().startsWith("<!--") && !line.trim().startsWith("//")) {
        console.log(`\u5728\u884C ${currentLine} \u9047\u5230\u975E\u7A7A\u975E\u6CE8\u91CA\u884C\uFF0C\u505C\u6B62\u641C\u7D22`);
        break;
      }
      currentLine--;
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID");
    return void 0;
  }
  /**
   * 验证Markdown表格结构是否有效
   * @param lines 表格行数组
   * @returns 是否为有效表格
   */
  isValidTable(lines) {
    if (lines.length < 2)
      return false;
    const firstLine = lines[0].trim();
    if (!firstLine.startsWith("|") || !firstLine.endsWith("|"))
      return false;
    const secondLine = lines[1].trim();
    if (!secondLine.startsWith("|") || !secondLine.endsWith("|"))
      return false;
    const separatorCells = secondLine.split("|").slice(1, -1);
    for (const cell of separatorCells) {
      const trimmedCell = cell.trim();
      if (!trimmedCell.match(/^:?-+:?$/)) {
        return false;
      }
    }
    for (let i = 2; i < lines.length; i++) {
      const line = lines[i].trim();
      if (!line.startsWith("|") || !line.endsWith("|")) {
        return false;
      }
    }
    return true;
  }
  /**
   * 为Markdown表格添加ID
   * @returns 添加的表格ID或null
   */
  async addTableIdToMarkdown() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return null;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return null;
      }
      const tableId = this.checkExistingTableId(editor, tableInfo.startLine);
      if (tableId) {
        new import_obsidian7.Notice(`\u8868\u683C\u5DF2\u6709ID: ${tableId}`);
        return tableId;
      }
      const newTableId = this.generateUniqueTableId();
      console.log(`\u4E3A\u8868\u683C\u6DFB\u52A0\u65B0ID: ${newTableId}, \u8868\u683C\u8D77\u59CB\u884C: ${tableInfo.startLine}`);
      let insertPosition = { line: tableInfo.startLine, ch: 0 };
      let insertContent = `<!-- table-id: ${newTableId} -->
`;
      if (tableInfo.startLine > 0) {
        const prevLine = editor.getLine(tableInfo.startLine - 1);
        if (prevLine && prevLine.trim() !== "") {
          insertContent = `
<!-- table-id: ${newTableId} -->
`;
        }
      }
      editor.replaceRange(insertContent, insertPosition);
      this.saveTableInfo(newTableId, tableInfo);
      console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newTableId}`);
      new import_obsidian7.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newTableId}`);
      return newTableId;
    } catch (error) {
      console.error("\u6DFB\u52A0\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 保存表格信息到插件数据
   * @param tableId 表格ID
   * @param tableInfo 表格信息
   */
  saveTableInfo(tableId, tableInfo) {
    try {
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView || !activeView.file)
        return;
      const filePath = activeView.file.path;
      const { rows, hasHeader } = this.parseTableStructure(tableInfo.content);
      const tableData = {
        id: tableId,
        locations: [
          {
            path: filePath,
            isActive: true
          }
        ],
        structure: {
          rowCount: rows.length,
          colCount: rows.length > 0 ? rows[0].length : 0,
          hasHeaders: hasHeader
        },
        styling: {
          rowHeights: Array(rows.length).fill("auto"),
          colWidths: rows.length > 0 ? Array(rows[0].length).fill("auto") : [],
          alignment: rows.length > 0 ? Array(rows[0].length).fill("left") : []
        }
      };
      this.plugin.saveTableData(tableData);
    } catch (error) {
      console.error("\u4FDD\u5B58\u8868\u683C\u4FE1\u606F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 检查表格是否已有ID
   * @param editor 编辑器实例
   * @param tableLine 表格起始行
   * @returns 表格ID或null
   */
  checkExistingTableId(editor, tableLine) {
    if (tableLine <= 0)
      return null;
    console.log(`\u68C0\u67E5\u8868\u683C\u662F\u5426\u5DF2\u6709ID: \u8868\u683C\u8D77\u59CB\u884C=${tableLine}`);
    const maxLinesToCheck = 10;
    let currentLine = tableLine - 1;
    const minLine = Math.max(0, tableLine - maxLinesToCheck);
    while (currentLine >= minLine) {
      const line = editor.getLine(currentLine);
      if (!line)
        break;
      console.log(`\u68C0\u67E5\u884C ${currentLine}: "${line}"`);
      const standardIdMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (standardIdMatch && standardIdMatch[1]) {
        const id = standardIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u6807\u51C6\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const noHyphenIdMatch = line.match(/<!--\s*tableid:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (noHyphenIdMatch && noHyphenIdMatch[1]) {
        const id = noHyphenIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u8FDE\u5B57\u7B26\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const simpleIdMatch = line.match(/<!--\s*id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (simpleIdMatch && simpleIdMatch[1]) {
        const id = simpleIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u7B80\u5316\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const tableNameIdMatch = line.match(/<!--\s*(table|tbl):\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (tableNameIdMatch && tableNameIdMatch[2]) {
        const id = tableNameIdMatch[2];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u8868\u683C\u540D\u79F0\u683C\u5F0FID: ${id}`);
        return id;
      }
      const noSpaceIdMatch = line.match(/<!--table-id:([a-zA-Z0-9_\-:.]+)-->/i);
      if (noSpaceIdMatch && noSpaceIdMatch[1]) {
        const id = noSpaceIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u7A7A\u683C\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      if (line.trim() !== "" && !line.trim().startsWith("<!--") && !line.trim().startsWith("//")) {
        console.log(`\u5728\u884C ${currentLine} \u9047\u5230\u975E\u7A7A\u975E\u6CE8\u91CA\u884C\uFF0C\u505C\u6B62\u641C\u7D22`);
        break;
      }
      currentLine--;
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID");
    return null;
  }
  /**
   * 生成唯一的表格ID
   * @returns 表格ID字符串
   */
  generateUniqueTableId() {
    const prefix = this.plugin.settings.idPrefix || "tbl";
    const timestamp = new Date().toISOString().slice(0, 10).replace(/-/g, "");
    const randomId = Math.random().toString(36).substring(2, 8);
    return `${prefix}-${timestamp}-${randomId}`;
  }
  /**
   * 解析表格结构
   * @param tableContent 表格内容字符串
   * @returns 解析后的表格数据
   */
  parseTableStructure(tableContent) {
    const lines = tableContent.split("\n");
    const rows = [];
    let hasHeader = false;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (!line.startsWith("|"))
        continue;
      if (line.includes("-") && i === 1) {
        hasHeader = true;
        continue;
      }
      const cells = line.split("|").filter((cell, index, array) => index > 0 && index < array.length - 1).map((cell) => cell.trim());
      rows.push(cells);
    }
    return { rows, hasHeader };
  }
  /**
   * 获取单元格内容
   * @param tableRows 表格行数组
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @returns 单元格内容
   */
  getCellContent(tableRows, rowIndex, colIndex) {
    if (rowIndex >= 0 && rowIndex < tableRows.length && colIndex >= 0 && colIndex < tableRows[rowIndex].length) {
      return tableRows[rowIndex][colIndex];
    }
    return "";
  }
  /**
   * 设置单元格内容
   * @param editor 编辑器实例
   * @param tableInfo 表格信息
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @param content 新内容
   */
  setCellContent(editor, tableInfo, rowIndex, colIndex, content) {
    try {
      const lineIndex = tableInfo.startLine + rowIndex;
      if (lineIndex > tableInfo.endLine)
        return;
      const line = editor.getLine(lineIndex);
      if (!line)
        return;
      const cells = line.split("|");
      if (colIndex + 1 >= cells.length - 1)
        return;
      cells[colIndex + 1] = ` ${content} `;
      editor.replaceRange(
        cells.join("|"),
        { line: lineIndex, ch: 0 },
        { line: lineIndex, ch: line.length }
      );
    } catch (error) {
      console.error("\u8BBE\u7F6E\u5355\u5143\u683C\u5185\u5BB9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 合并单元格
   * @param direction 合并方向 ('right' 或 'down')
   */
  async mergeCells(direction) {
    try {
      console.log(`\u5C1D\u8BD5${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C`);
      const editor = this.getActiveEditor();
      if (!editor) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const cellPosition = this.getCellPosition(editor);
      if (!cellPosition) {
        console.log("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E");
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      const { tableInfo, rowIndex, colIndex } = cellPosition;
      console.log(`\u51C6\u5907${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C: \u884C=${rowIndex}, \u5217=${colIndex}`);
      let result = false;
      if (direction === "right") {
        result = await this.mergeCellsRight(editor, tableInfo, rowIndex, colIndex);
      } else if (direction === "down") {
        result = await this.mergeCellsDown(editor, tableInfo, rowIndex, colIndex);
      }
      if (result) {
        console.log(`${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C\u6210\u529F`);
      } else {
        console.log(`${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25`);
      }
      return result;
    } catch (error) {
      console.error(`\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519(${direction}):`, error);
      new import_obsidian7.Notice(`\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 获取光标所在的列索引
   * @param line 行文本
   * @param cursorCh 光标字符位置
   * @returns 列索引或-1
   */
  getCursorColumnIndex(line, cursorCh) {
    try {
      if (!line.trim().startsWith("|") || !line.trim().endsWith("|")) {
        console.log("\u884C\u4E0D\u662F\u6709\u6548\u7684\u8868\u683C\u884C:", line);
        return -1;
      }
      const cells = line.split("|");
      if (cells[0].trim() === "")
        cells.shift();
      if (cells[cells.length - 1].trim() === "")
        cells.pop();
      let currentPos = line.indexOf("|");
      for (let i = 0; i < cells.length; i++) {
        const cellWidth = cells[i].length + 1;
        const nextPos = currentPos + cellWidth;
        console.log(`\u68C0\u67E5\u5355\u5143\u683C ${i}: \u8303\u56F4=${currentPos}-${nextPos}, \u5185\u5BB9="${cells[i]}"`);
        if (cursorCh > currentPos && cursorCh <= nextPos) {
          console.log(`\u5149\u6807\u5728\u5355\u5143\u683C ${i} \u5185: \u4F4D\u7F6E=${cursorCh}`);
          return i;
        }
        currentPos = nextPos;
      }
      console.log(`\u672A\u627E\u5230\u5149\u6807\u6240\u5728\u5355\u5143\u683C: cursorCh=${cursorCh}, line="${line}"`);
      return -1;
    } catch (error) {
      console.error("\u83B7\u53D6\u5149\u6807\u6240\u5728\u5217\u7D22\u5F15\u65F6\u51FA\u9519:", error);
      return -1;
    }
  }
  /**
   * 获取单元格位置信息
   * @param editor 编辑器实例
   * @returns 单元格位置信息或null
   */
  getCellPosition(editor) {
    try {
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.log("\u672A\u627E\u5230\u8868\u683C");
        return null;
      }
      const cursor = editor.getCursor();
      const rowIndex = cursor.line - tableInfo.startLine;
      if (rowIndex < 0 || rowIndex > tableInfo.endLine - tableInfo.startLine) {
        console.log(`\u884C\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: rowIndex=${rowIndex}, tableRange=${tableInfo.startLine}-${tableInfo.endLine}`);
        return null;
      }
      const line = editor.getLine(cursor.line);
      if (!line) {
        console.log("\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9");
        return null;
      }
      if (!line.trim().startsWith("|") || !line.trim().endsWith("|")) {
        console.log("\u5F53\u524D\u884C\u4E0D\u662F\u6709\u6548\u7684\u8868\u683C\u884C");
        return null;
      }
      const colIndex = this.getCursorColumnIndex(line, cursor.ch);
      if (colIndex === -1) {
        console.log("\u65E0\u6CD5\u786E\u5B9A\u5149\u6807\u6240\u5728\u5217");
        return null;
      }
      console.log(`\u6210\u529F\u83B7\u53D6\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}, \u8868\u683C\u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      return {
        tableInfo,
        rowIndex,
        colIndex
      };
    } catch (error) {
      console.error("\u83B7\u53D6\u5355\u5143\u683C\u4F4D\u7F6E\u4FE1\u606F\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 向右合并单元格
   * @param editor 编辑器实例
   * @param tableInfo 表格信息
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @param mergeCount 已合并的单元格数量，默认为0
   * @returns 是否成功
   */
  async mergeCellsRight(editor, tableInfo, rowIndex, colIndex, mergeCount = 0) {
    try {
      const lineIndex = tableInfo.startLine + rowIndex;
      const line = editor.getLine(lineIndex);
      if (!line) {
        console.log(`\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9: lineIndex=${lineIndex}`);
        return false;
      }
      console.log(`\u5C1D\u8BD5\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C: \u884C=${lineIndex}, \u5217=${colIndex}, \u5DF2\u5408\u5E76=${mergeCount}, \u884C\u5185\u5BB9="${line}"`);
      const cells = line.split("|");
      if (colIndex + 2 >= cells.length) {
        console.log(`\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: colIndex=${colIndex}, cells.length=${cells.length}`);
        new import_obsidian7.Notice("\u53F3\u4FA7\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
        return false;
      }
      const mainContent = cells[colIndex + 1].trim();
      const targetContent = cells[colIndex + 2].trim();
      console.log(`\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${mainContent}", \u76EE\u6807\u5355\u5143\u683C\u5185\u5BB9="${targetContent}"`);
      const isMergeMarker = /^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(targetContent);
      console.log(`\u76EE\u6807\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: ${isMergeMarker}`);
      let mergeAction = "replace";
      if (targetContent && !isMergeMarker) {
        if (this.plugin.settings.confirmMergeNonEmpty) {
          mergeAction = await this.showMergeCellOptionsDialog(mainContent, targetContent);
          console.log(`\u7528\u6237\u9009\u62E9\u7684\u5408\u5E76\u64CD\u4F5C: ${mergeAction}`);
          if (mergeAction === "cancel") {
            console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      if (mergeAction === "merge" && mainContent && targetContent && !isMergeMarker) {
        cells[colIndex + 1] = ` ${mainContent} ${targetContent} `;
        console.log(`\u5408\u5E76\u5185\u5BB9: \u65B0\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${cells[colIndex + 1]}"`);
      }
      const mergeDistance = mergeCount + 1;
      const mergeMarker = "<".repeat(mergeDistance);
      console.log(`\u751F\u6210\u5408\u5E76\u6807\u8BB0: \u8DDD\u79BB=${mergeDistance}, \u6807\u8BB0="${mergeMarker}"`);
      cells[colIndex + 2] = ` ${mergeMarker} `;
      const newLine = cells.join("|");
      console.log(`\u65B0\u884C\u5185\u5BB9="${newLine}"`);
      editor.replaceRange(
        newLine,
        { line: lineIndex, ch: 0 },
        { line: lineIndex, ch: line.length }
      );
      if (colIndex + 3 < cells.length) {
        const nextCellContent = cells[colIndex + 3].trim();
        console.log(`\u68C0\u67E5\u4E0B\u4E00\u4E2A\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: \u5185\u5BB9="${nextCellContent}"`);
        if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(nextCellContent)) {
          console.log("\u68C0\u6D4B\u5230\u53F3\u4FA7\u6709\u8FDE\u7EED\u5408\u5E76\u5355\u5143\u683C\uFF0C\u7EE7\u7EED\u5408\u5E76");
          await this.mergeCellsRight(editor, tableInfo, rowIndex, colIndex + 1, mergeDistance);
        }
      }
      new import_obsidian7.Notice("\u5DF2\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
      return true;
    } catch (error) {
      console.error("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 向下合并单元格
   * @param editor 编辑器实例
   * @param tableInfo 表格信息
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @param mergeCount 已合并的单元格数量，默认为0
   * @returns 是否成功
   */
  async mergeCellsDown(editor, tableInfo, rowIndex, colIndex, mergeCount = 0) {
    try {
      const currentLineIndex = tableInfo.startLine + rowIndex;
      const nextLineIndex = currentLineIndex + 1;
      if (nextLineIndex > tableInfo.endLine) {
        console.log(`\u4E0B\u4E00\u884C\u8D85\u51FA\u8868\u683C\u8303\u56F4: nextLineIndex=${nextLineIndex}, tableEndLine=${tableInfo.endLine}`);
        new import_obsidian7.Notice("\u4E0B\u65B9\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
        return false;
      }
      const currentLine = editor.getLine(currentLineIndex);
      const nextLine = editor.getLine(nextLineIndex);
      if (!currentLine || !nextLine) {
        console.log(`\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9: currentLine=${!!currentLine}, nextLine=${!!nextLine}`);
        return false;
      }
      console.log(`\u5C1D\u8BD5\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C: \u5F53\u524D\u884C=${currentLineIndex}, \u4E0B\u4E00\u884C=${nextLineIndex}, \u5217=${colIndex}, \u5DF2\u5408\u5E76=${mergeCount}`);
      console.log(`\u5F53\u524D\u884C\u5185\u5BB9="${currentLine}"`);
      console.log(`\u4E0B\u4E00\u884C\u5185\u5BB9="${nextLine}"`);
      const currentCells = currentLine.split("|");
      const nextCells = nextLine.split("|");
      if (colIndex + 1 >= currentCells.length || colIndex + 1 >= nextCells.length) {
        console.log(`\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: colIndex=${colIndex}, currentCells.length=${currentCells.length}, nextCells.length=${nextCells.length}`);
        new import_obsidian7.Notice("\u65E0\u6CD5\u5408\u5E76\u5355\u5143\u683C\uFF0C\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4");
        return false;
      }
      const mainContent = currentCells[colIndex + 1].trim();
      const targetContent = nextCells[colIndex + 1].trim();
      console.log(`\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${mainContent}", \u76EE\u6807\u5355\u5143\u683C\u5185\u5BB9="${targetContent}"`);
      const isMergeMarker = /^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(targetContent);
      console.log(`\u76EE\u6807\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: ${isMergeMarker}`);
      let mergeAction = "replace";
      if (targetContent && !isMergeMarker) {
        if (this.plugin.settings.confirmMergeNonEmpty) {
          mergeAction = await this.showMergeCellOptionsDialog(mainContent, targetContent);
          console.log(`\u7528\u6237\u9009\u62E9\u7684\u5408\u5E76\u64CD\u4F5C: ${mergeAction}`);
          if (mergeAction === "cancel") {
            console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      if (mergeAction === "merge" && mainContent && targetContent && !isMergeMarker) {
        currentCells[colIndex + 1] = ` ${mainContent} ${targetContent} `;
        console.log(`\u5408\u5E76\u5185\u5BB9: \u65B0\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${currentCells[colIndex + 1]}"`);
        editor.replaceRange(
          currentCells.join("|"),
          { line: currentLineIndex, ch: 0 },
          { line: currentLineIndex, ch: currentLine.length }
        );
      }
      const mergeDistance = mergeCount + 1;
      const mergeMarker = "^".repeat(mergeDistance);
      console.log(`\u751F\u6210\u5408\u5E76\u6807\u8BB0: \u8DDD\u79BB=${mergeDistance}, \u6807\u8BB0="${mergeMarker}"`);
      nextCells[colIndex + 1] = ` ${mergeMarker} `;
      const newNextLine = nextCells.join("|");
      console.log(`\u65B0\u4E0B\u4E00\u884C\u5185\u5BB9="${newNextLine}"`);
      editor.replaceRange(
        newNextLine,
        { line: nextLineIndex, ch: 0 },
        { line: nextLineIndex, ch: nextLine.length }
      );
      if (nextLineIndex + 1 <= tableInfo.endLine) {
        const nextNextLine = editor.getLine(nextLineIndex + 1);
        if (nextNextLine) {
          const nextNextCells = nextNextLine.split("|");
          if (colIndex + 1 < nextNextCells.length) {
            const nextNextCellContent = nextNextCells[colIndex + 1].trim();
            console.log(`\u68C0\u67E5\u4E0B\u4E00\u884C\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: \u5185\u5BB9="${nextNextCellContent}"`);
            if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(nextNextCellContent)) {
              console.log("\u68C0\u6D4B\u5230\u4E0B\u65B9\u6709\u8FDE\u7EED\u5408\u5E76\u5355\u5143\u683C\uFF0C\u7EE7\u7EED\u5408\u5E76");
              await this.mergeCellsDown(editor, tableInfo, rowIndex + 1, colIndex, mergeDistance);
            }
          }
        }
      }
      new import_obsidian7.Notice("\u5DF2\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
      return true;
    } catch (error) {
      console.error("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 显示确认对话框
   * @param message 确认消息
   * @returns 用户是否确认
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const notice = new import_obsidian7.Notice(message, 0);
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "space-between";
      buttonContainer.style.marginTop = "10px";
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve(false);
      };
      const confirmButton = document.createElement("button");
      confirmButton.textContent = "\u786E\u5B9A";
      confirmButton.style.marginLeft = "10px";
      confirmButton.onclick = () => {
        notice.hide();
        resolve(true);
      };
      buttonContainer.appendChild(cancelButton);
      buttonContainer.appendChild(confirmButton);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 显示合并单元格选项对话框
   * @param mainContent 主单元格内容
   * @param targetContent 目标单元格内容
   * @returns 选择的操作：'merge'=合并并保留两个内容, 'replace'=仅使用合并标记, 'cancel'=取消操作
   */
  async showMergeCellOptionsDialog(mainContent, targetContent) {
    return new Promise((resolve) => {
      const notice = new import_obsidian7.Notice("\u5408\u5E76\u5355\u5143\u683C\u9009\u9879", 0);
      const contentContainer = document.createElement("div");
      contentContainer.style.marginBottom = "10px";
      contentContainer.innerHTML = `
                <p>\u76EE\u6807\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\uFF1A"${targetContent}"</p>
                <p>\u8BF7\u9009\u62E9\u5408\u5E76\u65B9\u5F0F\uFF1A</p>
            `;
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.flexDirection = "column";
      buttonContainer.style.gap = "5px";
      const mergeButton = document.createElement("button");
      mergeButton.textContent = "\u5408\u5E76\u5E76\u4FDD\u7559\u5185\u5BB9";
      mergeButton.onclick = () => {
        notice.hide();
        resolve("merge");
      };
      const replaceButton = document.createElement("button");
      replaceButton.textContent = "\u4EC5\u4F7F\u7528\u5408\u5E76\u6807\u8BB0";
      replaceButton.onclick = () => {
        notice.hide();
        resolve("replace");
      };
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve("cancel");
      };
      buttonContainer.appendChild(mergeButton);
      buttonContainer.appendChild(replaceButton);
      buttonContainer.appendChild(cancelButton);
      notice.noticeEl.appendChild(contentContainer);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 检测并修复表格合并标记
   * @returns 是否进行了修复
   */
  async detectAndFixMergeMarkers() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      let hasFixedMarkers = false;
      for (let i = tableInfo.startLine; i <= tableInfo.endLine; i++) {
        const line = editor.getLine(i);
        if (!line)
          continue;
        const cells = line.split("|");
        let hasChanges = false;
        for (let j = 1; j < cells.length - 1; j++) {
          const cell = cells[j];
          const trimmedCell = cell.trim();
          if (trimmedCell === "\\<" || trimmedCell === "<") {
            cells[j] = " < ";
            hasChanges = true;
          } else if (trimmedCell === "\\^" || trimmedCell === "^") {
            cells[j] = " ^ ";
            hasChanges = true;
          }
        }
        if (hasChanges) {
          const updatedLine = cells.join("|");
          editor.replaceRange(
            updatedLine,
            { line: i, ch: 0 },
            { line: i, ch: line.length }
          );
          hasFixedMarkers = true;
        }
      }
      if (hasFixedMarkers) {
        new import_obsidian7.Notice("\u5DF2\u7EDF\u4E00\u8868\u683C\u5408\u5E76\u6807\u8BB0\u683C\u5F0F");
      } else {
        new import_obsidian7.Notice("\u672A\u53D1\u73B0\u9700\u8981\u4FEE\u590D\u7684\u5408\u5E76\u6807\u8BB0");
      }
      return hasFixedMarkers;
    } catch (error) {
      console.error("\u68C0\u6D4B\u548C\u4FEE\u590D\u8868\u683C\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 拆分合并的单元格
   * @returns 是否成功
   */
  async splitMergedCells() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const cellPosition = this.getCellPosition(editor);
      if (!cellPosition) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      const { tableInfo, rowIndex, colIndex } = cellPosition;
      const lineIndex = tableInfo.startLine + rowIndex;
      console.log(`\u5C1D\u8BD5\u62C6\u5206\u5355\u5143\u683C: \u884C=${rowIndex}, \u5217=${colIndex}, \u8868\u683C\u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      const line = editor.getLine(lineIndex);
      if (!line)
        return false;
      let hasSplitCells = false;
      if (colIndex + 1 < line.split("|").length - 1) {
        const cells = line.split("|");
        const rightCell = cells[colIndex + 2];
        const rightCellTrimmed = rightCell.trim();
        console.log(`\u53F3\u4FA7\u5355\u5143\u683C\u5185\u5BB9: "${rightCellTrimmed}"`);
        if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(rightCellTrimmed)) {
          cells[colIndex + 2] = "  ";
          editor.replaceRange(
            cells.join("|"),
            { line: lineIndex, ch: 0 },
            { line: lineIndex, ch: line.length }
          );
          console.log("\u5DF2\u62C6\u5206\u53F3\u4FA7\u5408\u5E76\u5355\u5143\u683C");
          hasSplitCells = true;
        }
      }
      if (lineIndex < tableInfo.endLine) {
        const belowLine = editor.getLine(lineIndex + 1);
        if (belowLine) {
          const belowCells = belowLine.split("|");
          if (colIndex + 1 < belowCells.length) {
            const belowCell = belowCells[colIndex + 1];
            const belowCellTrimmed = belowCell.trim();
            console.log(`\u4E0B\u65B9\u5355\u5143\u683C\u5185\u5BB9: "${belowCellTrimmed}"`);
            if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(belowCellTrimmed)) {
              belowCells[colIndex + 1] = "  ";
              editor.replaceRange(
                belowCells.join("|"),
                { line: lineIndex + 1, ch: 0 },
                { line: lineIndex + 1, ch: belowLine.length }
              );
              console.log("\u5DF2\u62C6\u5206\u4E0B\u65B9\u5408\u5E76\u5355\u5143\u683C");
              hasSplitCells = true;
            }
          }
        }
      }
      const recursiveSplit = await this.recursiveSplitMergedCells(editor, tableInfo, rowIndex, colIndex);
      if (recursiveSplit) {
        hasSplitCells = true;
      }
      if (hasSplitCells) {
        new import_obsidian7.Notice("\u5DF2\u6210\u529F\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C");
        return true;
      } else {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u53EF\u62C6\u5206\u7684\u5408\u5E76\u5355\u5143\u683C\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u4F4D\u4E8E\u5408\u5E76\u5355\u5143\u683C\u5185");
        return false;
      }
    } catch (error) {
      console.error("\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 递归拆分合并单元格
   * 查找与当前单元格相关的所有合并单元格并拆分它们
   * @param editor 编辑器实例
   * @param tableInfo 表格信息
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @returns 是否进行了拆分
   */
  async recursiveSplitMergedCells(editor, tableInfo, rowIndex, colIndex) {
    let hasSplitCells = false;
    const maxSearchDepth = 10;
    for (let col = colIndex + 1; col < colIndex + maxSearchDepth; col++) {
      const lineIndex = tableInfo.startLine + rowIndex;
      const line = editor.getLine(lineIndex);
      if (!line)
        break;
      const cells = line.split("|");
      if (col + 1 >= cells.length)
        break;
      const cellContent = cells[col + 1].trim();
      if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(cellContent)) {
        cells[col + 1] = "  ";
        editor.replaceRange(
          cells.join("|"),
          { line: lineIndex, ch: 0 },
          { line: lineIndex, ch: line.length }
        );
        hasSplitCells = true;
        console.log(`\u5DF2\u62C6\u5206\u4F4D\u4E8E (${rowIndex}, ${col}) \u7684\u6C34\u5E73\u5408\u5E76\u5355\u5143\u683C`);
      } else {
        break;
      }
    }
    for (let row = rowIndex + 1; row < rowIndex + maxSearchDepth && row + tableInfo.startLine <= tableInfo.endLine; row++) {
      const lineIndex = tableInfo.startLine + row;
      const line = editor.getLine(lineIndex);
      if (!line)
        break;
      const cells = line.split("|");
      if (colIndex + 1 >= cells.length)
        break;
      const cellContent = cells[colIndex + 1].trim();
      if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(cellContent)) {
        cells[colIndex + 1] = "  ";
        editor.replaceRange(
          cells.join("|"),
          { line: lineIndex, ch: 0 },
          { line: lineIndex, ch: line.length }
        );
        hasSplitCells = true;
        console.log(`\u5DF2\u62C6\u5206\u4F4D\u4E8E (${row}, ${colIndex}) \u7684\u5782\u76F4\u5408\u5E76\u5355\u5143\u683C`);
      } else {
        break;
      }
    }
    return hasSplitCells;
  }
  /**
   * 获取当前光标所在表格的ID
   * @returns 表格ID或null
   */
  async getCurrentTableId() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        console.warn("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return null;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.warn("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return null;
      }
      let tableId = tableInfo.tableId;
      if (!tableId) {
        console.log("\u5728tableInfo\u4E2D\u672A\u627E\u5230ID\uFF0C\u5C1D\u8BD5\u4F7F\u7528checkExistingTableId\u67E5\u627E");
        tableId = this.checkExistingTableId(editor, tableInfo.startLine) || void 0;
      }
      if (tableId) {
        console.log(`\u627E\u5230\u8868\u683CID: ${tableId}`);
        return tableId;
      }
      console.warn("\u672A\u627E\u5230\u8868\u683CID");
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u5F53\u524D\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
};

// src/icons.ts
var import_obsidian8 = require("obsidian");
function loadIcons() {
  (0, import_obsidian8.addIcon)("align-left", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M25,50 L60,50 M25,70 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-center", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M35,50 L65,50 M30,70 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-right", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M40,50 L75,50 M30,70 L75,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-top", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,25 L50,60 M70,25 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-middle", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,35 L50,65 M70,30 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-bottom", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,40 L50,75 M70,30 L70,75" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-all", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <circle cx="50" cy="50" r="15" fill="none" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-cells", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="10" y="10" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="60" y="10" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="10" y="60" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="60" y="60" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,45 L50,55 M45,50 L55,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-right", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="30" width="30" height="40" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="55" y="30" width="30" height="40" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M45,50 L55,50 M50,45 L55,50 L50,55" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-down", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="30" y="15" width="40" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="30" y="55" width="40" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,45 L50,55 M45,50 L50,55 L55,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("split", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,20 L50,80 M20,50 L80,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-id", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="30" width="60" height="50" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,30 L80,30" stroke="currentColor" stroke-width="5"/>
        <rect x="35" y="15" width="30" height="15" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M45,45 L45,65 M55,45 L55,65 M45,55 L55,55" stroke="currentColor" stroke-width="2"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-row-add", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,50 L80,50" stroke="currentColor" stroke-width="3"/>
        <circle cx="85" cy="50" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M85,45 L85,55 M80,50 L90,50" stroke="currentColor" stroke-width="2"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-style", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,40 L80,40 M20,60 L80,60 M40,20 L40,80 M60,20 L60,80" stroke="currentColor" stroke-width="2"/>
        <path d="M65,25 L75,35 M65,35 L75,25" stroke="currentColor" stroke-width="2"/>
        <path d="M25,45 L35,55 M35,45 L25,55" stroke="currentColor" stroke-width="2"/>
        <circle cx="50" cy="50" r="5" fill="currentColor"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-toolbar-toggle", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M15,35 L85,35 M15,65 L85,65" stroke="currentColor" stroke-width="2"/>
        <path d="M35,15 L35,85 M65,15 L65,85" stroke="currentColor" stroke-width="2"/>
        <rect x="40" y="5" width="20" height="10" fill="currentColor"/>
        <rect x="40" y="85" width="20" height="10" fill="currentColor"/>
        <rect x="5" y="40" width="10" height="20" fill="currentColor"/>
        <rect x="85" y="40" width="10" height="20" fill="currentColor"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-edit-mode", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="25" width="70" height="50" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M15,45 L85,45" stroke="currentColor" stroke-width="2"/>
        <path d="M35,25 L35,75" stroke="currentColor" stroke-width="2"/>
        <path d="M55,25 L55,75" stroke="currentColor" stroke-width="2"/>
        <path d="M75,10 L90,25 L80,35 L65,20 Z" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M65,20 L80,35" stroke="currentColor" stroke-width="2"/>
    </svg>`);
}

// src/tableStyleRenderer.ts
var import_obsidian9 = require("obsidian");
var TableStyleRenderer = class extends import_obsidian9.MarkdownRenderChild {
  /**
   * 构造函数
   * @param el 表格元素
   * @param tableId 表格ID
   * @param styling 样式数据
   * @param plugin 插件实例
   */
  constructor(el, tableId, styling, plugin) {
    super(el);
    this.tableId = tableId;
    this.styling = styling;
    this.plugin = plugin;
  }
  /**
   * 辅助方法，获取app对象
   */
  getApp() {
    return this.plugin.app;
  }
  /**
   * 加载时应用样式
   */
  onload() {
    console.log(`\u8868\u683C\u6837\u5F0F\u6E32\u67D3\u5668\u52A0\u8F7D: \u8868\u683CID=${this.tableId}`);
    this.applyStyles();
    this.containerEl.classList.add(`table-${this.tableId}`);
    this.containerEl.setAttribute("data-table-styles-applied", "true");
  }
  /**
   * 应用所有样式
   */
  applyStyles() {
    if (!this.styling)
      return;
    if (this.styling.alignment && Array.isArray(this.styling.alignment)) {
      this.applyColumnAlignment(this.styling.alignment);
    }
    if (this.styling.cellStyles && Array.isArray(this.styling.cellStyles)) {
      this.applyCellStyles(this.styling.cellStyles);
    }
    if (this.styling.rowHeights && Array.isArray(this.styling.rowHeights)) {
      this.applyRowHeights(this.styling.rowHeights);
    }
    if (this.styling.colWidths && Array.isArray(this.styling.colWidths)) {
      this.applyColumnWidths(this.styling.colWidths);
    }
  }
  /**
   * 应用列对齐样式
   * @param alignments 列对齐数据
   */
  applyColumnAlignment(alignments) {
    const rows = this.containerEl.querySelectorAll("tr");
    rows.forEach((row) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        if (alignments[colIndex]) {
          cell.style.textAlign = alignments[colIndex];
        }
      });
    });
  }
  /**
   * 应用单元格样式
   * @param cellStyles 单元格样式数据
   */
  applyCellStyles(cellStyles) {
    cellStyles.forEach((style) => {
      if (typeof style.row !== "number" || typeof style.col !== "number") {
        return;
      }
      const cell = this.findCell(style.row, style.col);
      if (!cell)
        return;
      if (style.textAlign)
        cell.style.textAlign = style.textAlign;
      if (style.verticalAlign)
        cell.style.verticalAlign = style.verticalAlign;
      if (style.backgroundColor)
        cell.style.backgroundColor = style.backgroundColor;
      if (style.color)
        cell.style.color = style.color;
      if (style.fontWeight)
        cell.style.fontWeight = style.fontWeight;
      if (style.fontStyle)
        cell.style.fontStyle = style.fontStyle;
    });
  }
  /**
   * 应用行高
   * @param heights 行高数据
   */
  applyRowHeights(heights) {
    console.log(`\u5E94\u7528\u884C\u9AD8: ${JSON.stringify(heights)}`);
    const rows = this.containerEl.querySelectorAll("tr");
    rows.forEach((row, rowIndex) => {
      if (rowIndex < heights.length && heights[rowIndex] && heights[rowIndex] !== "auto") {
        row.style.height = heights[rowIndex];
        console.log(`\u8BBE\u7F6E\u7B2C${rowIndex + 1}\u884C\u9AD8\u5EA6: ${heights[rowIndex]}`);
      }
    });
  }
  /**
   * 应用列宽
   * @param widths 列宽数据
   */
  applyColumnWidths(widths) {
    console.log(`\u5E94\u7528\u5217\u5BBD: ${JSON.stringify(widths)}`);
    let colgroup = this.containerEl.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      this.containerEl.prepend(colgroup);
    } else {
      colgroup.innerHTML = "";
    }
    widths.forEach((width, index) => {
      const col = document.createElement("col");
      if (width && width !== "auto") {
        col.style.width = width;
        console.log(`\u8BBE\u7F6E\u7B2C${index + 1}\u5217\u5BBD\u5EA6: ${width}`);
      }
      if (colgroup) {
        colgroup.appendChild(col);
      }
    });
  }
  /**
   * 查找特定位置的单元格
   * @param rowIndex 行索引
   * @param colIndex 列索引
   * @returns 单元格元素或null
   */
  findCell(rowIndex, colIndex) {
    const rows = this.containerEl.querySelectorAll("tr");
    if (!rows || rows.length <= rowIndex)
      return null;
    const cells = rows[rowIndex].querySelectorAll("td, th");
    if (!cells || cells.length <= colIndex)
      return null;
    return cells[colIndex];
  }
  /**
   * 卸载时的清理工作
   */
  onunload() {
    console.log(`\u8868\u683C ${this.tableId} \u7684\u6837\u5F0F\u6E32\u67D3\u5668\u5DF2\u5378\u8F7D`);
  }
  /**
   * 应用表格样式
   */
  async applyTableStyles(tableElement, tableId) {
    var _a;
    try {
      if (tableElement.getAttribute("data-table-styles-applied") === "true") {
        return;
      }
      const data = await this.plugin.loadData();
      const tableData = (_a = data == null ? void 0 : data.tables) == null ? void 0 : _a[tableId];
      if (!tableData || !tableData.styling) {
        console.log(`\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u8868\u683C\u6837\u5F0F\u6570\u636E\uFF1A${tableId}`);
        return;
      }
      console.log(`\u5E94\u7528\u8868\u683C\u6837\u5F0F - ID=${tableId}`, tableData.styling);
      if (tableData.styling.rowHeights && tableData.styling.rowHeights.length > 0) {
        const rows = tableElement.querySelectorAll("tr");
        tableData.styling.rowHeights.forEach((height, index) => {
          if (index < rows.length && height && height !== "auto") {
            rows[index].style.height = height;
            console.log(`\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
          }
        });
      }
      if (tableData.styling.colWidths && tableData.styling.colWidths.length > 0) {
        let colgroup = tableElement.querySelector("colgroup");
        if (!colgroup) {
          colgroup = document.createElement("colgroup");
          tableElement.insertBefore(colgroup, tableElement.firstChild);
        } else {
          colgroup.innerHTML = "";
        }
        tableData.styling.colWidths.forEach((width, index) => {
          const col = document.createElement("col");
          if (width && width !== "auto") {
            col.style.width = width;
            console.log(`\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
          }
          if (colgroup) {
            colgroup.appendChild(col);
          }
        });
      }
      if (tableData.styling.alignment && tableData.styling.alignment.length > 0) {
        const rows = tableElement.querySelectorAll("tr");
        rows.forEach((row) => {
          const cells = row.querySelectorAll("th, td");
          cells.forEach((cell, cellIndex) => {
            if (cellIndex < tableData.styling.alignment.length) {
              const alignment = tableData.styling.alignment[cellIndex];
              if (alignment) {
                cell.style.textAlign = alignment;
              }
            }
          });
        });
      }
      if (tableData.styling.cellStyles && tableData.styling.cellStyles.length > 0) {
        tableData.styling.cellStyles.forEach((cellStyle) => {
          if (cellStyle.row !== void 0 && cellStyle.col !== void 0) {
            const rows = tableElement.querySelectorAll("tr");
            if (cellStyle.row < rows.length) {
              const row = rows[cellStyle.row];
              const cells = row.querySelectorAll("th, td");
              if (cellStyle.col < cells.length) {
                const cell = cells[cellStyle.col];
                if (cellStyle.backgroundColor) {
                  cell.style.backgroundColor = cellStyle.backgroundColor;
                }
                if (cellStyle.textColor) {
                  cell.style.color = cellStyle.textColor;
                }
                if (cellStyle.fontWeight) {
                  cell.style.fontWeight = cellStyle.fontWeight;
                }
                if (cellStyle.fontStyle) {
                  cell.style.fontStyle = cellStyle.fontStyle;
                }
              }
            }
          }
        });
      }
      tableElement.setAttribute("data-table-styles-applied", "true");
      tableElement.classList.add(`table-${tableId}`);
      console.log(`\u8868\u683C\u6837\u5F0F\u5E94\u7528\u5B8C\u6210 - ID=${tableId}`);
    } catch (error) {
      console.error("\u5E94\u7528\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 应用预览模式下的表格样式
   */
  async applyPreviewModeStyles(containerEl) {
    try {
      console.log("\u9884\u89C8\u6A21\u5F0F\u6FC0\u6D3B\uFF0C\u5F00\u59CB\u5E94\u7528\u4FDD\u5B58\u7684\u8868\u683C\u6837\u5F0F");
      const tables = containerEl.querySelectorAll("table");
      console.log(`\u627E\u5230 ${tables.length} \u4E2A\u8868\u683C\u9700\u8981\u5E94\u7528\u6837\u5F0F`);
      if (!tables.length)
        return;
      for (let index = 0; index < tables.length; index++) {
        const tableElement = tables[index];
        let tableId = tableElement.getAttribute("data-table-id");
        if (!tableId) {
          const activeFile = this.getApp().workspace.getActiveFile();
          if (activeFile) {
            tableId = await this.plugin.readTableIdFromMarkdown(tableElement);
          }
        }
        if (tableId) {
          console.log(`\u4E3A\u8868\u683C\u5E94\u7528\u6837\u5F0F - \u7D22\u5F15=${index}, ID=${tableId}`);
          await this.applyTableStyles(tableElement, tableId);
        } else {
          console.log(`\u65E0\u6CD5\u4E3A\u8868\u683C\u5E94\u7528\u6837\u5F0F - \u7D22\u5F15=${index}, \u672A\u627E\u5230ID`);
        }
      }
    } catch (error) {
      console.error("\u5E94\u7528\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
    }
  }
};
async function renderTablesWithStoredStyles(plugin) {
  var _a;
  function getApp() {
    return plugin.app;
  }
  try {
    console.log("\u5F00\u59CB\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
    const activeView = getApp().workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
    if (!activeView) {
      console.log("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE\uFF0C\u65E0\u6CD5\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
      return;
    }
    const activeFile = activeView.file;
    if (!activeFile) {
      console.log("\u672A\u627E\u5230\u6D3B\u52A8\u6587\u4EF6\uFF0C\u65E0\u6CD5\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
      return;
    }
    const filePath = activeFile.path;
    console.log(`\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84: ${filePath}`);
    let tables = {};
    if (plugin.tableDataExtractor) {
      tables = await plugin.tableDataExtractor.extractTableDataFromFile(activeFile);
      console.log(`\u4ECEMarkdown\u6587\u4EF6\u4E2D\u63D0\u53D6\u5230 ${Object.keys(tables).length} \u4E2A\u8868\u683C\u6570\u636E`);
    }
    if (Object.keys(tables).length === 0) {
      console.log("\u4ECEMarkdown\u6587\u4EF6\u4E2D\u672A\u63D0\u53D6\u5230\u8868\u683C\u6570\u636E\uFF0C\u5C1D\u8BD5\u4ECEdata.json\u83B7\u53D6");
      const pluginData = await plugin.loadData() || {};
      tables = pluginData.tables || {};
      if (!tables || Object.keys(tables).length === 0) {
        console.log("\u6CA1\u6709\u5B58\u50A8\u7684\u8868\u683C\u6570\u636E");
        return;
      }
    }
    const allTables = document.querySelectorAll("table");
    if (!allTables.length) {
      console.log("\u5F53\u524D\u6587\u4EF6\u4E2D\u6CA1\u6709\u8868\u683C");
      return;
    }
    console.log(`\u5F53\u524D\u6587\u4EF6\u4E2D\u6709 ${allTables.length} \u4E2A\u8868\u683C`);
    const renderQueue = [];
    const fileContent = await plugin.app.vault.read(activeFile);
    const tableInfos = plugin.tableIdManager.extractTableIdsFromMarkdown(fileContent);
    console.log(`\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u63D0\u53D6\u5230 ${tableInfos.length} \u4E2A\u8868\u683C\u4FE1\u606F`);
    for (let i = 0; i < allTables.length; i++) {
      const table = allTables[i];
      let tableId = table.getAttribute("data-table-id");
      if (!tableId && i < tableInfos.length) {
        tableId = tableInfos[i].id;
        if (tableId) {
          console.log(`\u901A\u8FC7\u4F4D\u7F6E\u5339\u914D\u627E\u5230\u8868\u683CID: ${tableId}`);
          table.setAttribute("data-table-id", tableId);
        }
      }
      if (!tableId) {
        const tableFeature = plugin.tableIdManager.extractTableFeature(table);
        let bestMatchId = "";
        let bestMatchScore = 0;
        for (const { id, feature } of tableInfos) {
          if (!id)
            continue;
          const score = plugin.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
          if (score > bestMatchScore) {
            bestMatchScore = score;
            bestMatchId = id;
          }
        }
        if (bestMatchId && bestMatchScore > 0.7) {
          console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
          tableId = bestMatchId;
          table.setAttribute("data-table-id", tableId);
        }
      }
      if (tableId && tables[tableId]) {
        const tableData = tables[tableId];
        const isInCurrentFile = (_a = tableData.locations) == null ? void 0 : _a.some((loc) => loc.path === filePath);
        if (isInCurrentFile) {
          console.log(`\u4E3A\u8868\u683C ${tableId} \u6DFB\u52A0\u6E32\u67D3\u4EFB\u52A1`);
          renderQueue.push({
            table,
            tableId,
            tableData
          });
        }
      }
    }
    if (renderQueue.length > 0) {
      console.log(`\u5F00\u59CB\u5904\u7406 ${renderQueue.length} \u4E2A\u8868\u683C\u6E32\u67D3\u4EFB\u52A1`);
      await processRenderQueue(renderQueue, plugin);
    } else {
      console.log("\u6CA1\u6709\u9700\u8981\u6E32\u67D3\u7684\u8868\u683C");
    }
  } catch (error) {
    console.error("\u6E32\u67D3\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
  }
}
async function processRenderQueue(queue, plugin) {
  const batchSize = 3;
  let processedCount = 0;
  let successCount = 0;
  console.log(`\u5F00\u59CB\u5904\u7406\u6E32\u67D3\u961F\u5217\uFF0C\u5171 ${queue.length} \u4E2A\u8868\u683C`);
  const processBatch = async () => {
    try {
      const endIndex = Math.min(processedCount + batchSize, queue.length);
      for (let i = processedCount; i < endIndex; i++) {
        const { table, tableId, tableData } = queue[i];
        console.log(`\u5904\u7406\u961F\u5217\u4E2D\u7684\u8868\u683C ${i + 1}/${queue.length} - ID=${tableId}`);
        try {
          const success = await renderTableWithStyles(table, tableId, tableData, plugin);
          if (success) {
            successCount++;
          }
        } catch (error) {
          console.error(`\u5904\u7406\u8868\u683C ${tableId} \u65F6\u51FA\u9519:`, error);
        }
      }
      processedCount = endIndex;
      if (processedCount < queue.length) {
        return new Promise((resolve) => {
          window.requestAnimationFrame(() => {
            processBatch().then(resolve);
          });
        });
      }
    } catch (error) {
      console.error("\u5904\u7406\u8868\u683C\u6279\u6B21\u65F6\u51FA\u9519:", error);
    }
  };
  await processBatch();
  console.log(`\u5B8C\u6210\u4E86 ${processedCount} \u4E2A\u8868\u683C\u7684\u5904\u7406\uFF0C\u6210\u529F\u5E94\u7528\u6837\u5F0F: ${successCount}`);
}
async function renderTableWithStyles(table, tableId, tableData, plugin) {
  try {
    console.log(`\u5F00\u59CB\u4E3A\u8868\u683C ${tableId} \u5E94\u7528\u6837\u5F0F`);
    if (table.getAttribute("data-table-styles-applied") === "true") {
      console.log(`\u8868\u683C ${tableId} \u5DF2\u7ECF\u5E94\u7528\u4E86\u6837\u5F0F\uFF0C\u8DF3\u8FC7`);
      return true;
    }
    if (!tableData.styling) {
      console.log(`\u8868\u683C ${tableId} \u6CA1\u6709\u6709\u6548\u7684\u6837\u5F0F\u6570\u636E`);
      return false;
    }
    const ctx = getContextForTable(table, plugin);
    if (ctx) {
      try {
        ctx.addChild(new TableStyleRenderer(table, tableId, tableData.styling, plugin));
        console.log(`\u8868\u683C ${tableId} \u5DF2\u4F7F\u7528RenderChild\u5E94\u7528\u6837\u5F0F`);
      } catch (error) {
        console.error(`\u4F7F\u7528RenderChild\u5E94\u7528\u6837\u5F0F\u65F6\u51FA\u9519:`, error);
        applyStylesDirectly(table, tableData.styling);
        console.log(`\u8868\u683C ${tableId} \u56DE\u9000\u5230\u76F4\u63A5\u5E94\u7528\u6837\u5F0F`);
      }
    } else {
      applyStylesDirectly(table, tableData.styling);
      console.log(`\u8868\u683C ${tableId} \u5DF2\u76F4\u63A5\u5E94\u7528\u6837\u5F0F`);
    }
    table.setAttribute("data-table-styles-applied", "true");
    if (!table.classList.contains(`table-${tableId}`)) {
      table.classList.add(`table-${tableId}`);
    }
    console.log(`\u8868\u683C ${tableId} \u6837\u5F0F\u5E94\u7528\u5B8C\u6210`);
    return true;
  } catch (error) {
    console.error(`\u4E3A\u8868\u683C ${tableId} \u5E94\u7528\u6837\u5F0F\u65F6\u51FA\u9519:`, error);
    return false;
  }
}
function getContextForTable(table, plugin) {
  var _a, _b, _c;
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
  if (!activeView || activeView.getMode() !== "preview")
    return null;
  try {
    const sectionEl = table.closest("[data-section-id]");
    if (sectionEl) {
      const sectionId = sectionEl.getAttribute("data-section-id");
      if (sectionId && activeView.previewMode) {
        const sections = (_a = activeView.previewMode.renderer) == null ? void 0 : _a.sections;
        if (sections && sections[sectionId]) {
          return sections[sectionId];
        }
      }
    }
    if (activeView.previewMode) {
      const sectionInfo = (_c = (_b = activeView.previewMode.renderer) == null ? void 0 : _b.getSectionInfo) == null ? void 0 : _c.call(_b, table);
      if (sectionInfo && sectionInfo.section) {
        return sectionInfo.section;
      }
    }
    return null;
  } catch (e) {
    console.warn("\u83B7\u53D6\u8868\u683C\u6E32\u67D3\u4E0A\u4E0B\u6587\u5931\u8D25:", e);
    return null;
  }
}
function applyStylesDirectly(table, styling) {
  if (!styling)
    return;
  if (styling.rowHeights && Array.isArray(styling.rowHeights)) {
    const rows = table.querySelectorAll("tr");
    styling.rowHeights.forEach((height, index) => {
      if (index < rows.length && height && height !== "auto") {
        rows[index].style.height = height;
        console.log(`\u76F4\u63A5\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
      }
    });
  }
  if (styling.colWidths && Array.isArray(styling.colWidths)) {
    let colgroup = table.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      table.insertBefore(colgroup, table.firstChild);
    } else {
      colgroup.innerHTML = "";
    }
    styling.colWidths.forEach((width, index) => {
      const col = document.createElement("col");
      if (width && width !== "auto") {
        col.style.width = width;
        console.log(`\u76F4\u63A5\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
      }
      if (colgroup) {
        colgroup.appendChild(col);
      }
    });
  }
  if (styling.alignment && Array.isArray(styling.alignment)) {
    const rows = table.querySelectorAll("tr");
    rows.forEach((row) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        if (styling.alignment[colIndex]) {
          cell.style.textAlign = styling.alignment[colIndex];
        }
      });
    });
  }
  if (styling.cellStyles && Array.isArray(styling.cellStyles)) {
    styling.cellStyles.forEach((style) => {
      if (typeof style.row !== "number" || typeof style.col !== "number") {
        return;
      }
      const rows = table.querySelectorAll("tr");
      if (!rows || rows.length <= style.row)
        return;
      const cells = rows[style.row].querySelectorAll("td, th");
      if (!cells || cells.length <= style.col)
        return;
      const cell = cells[style.col];
      if (style.textAlign)
        cell.style.textAlign = style.textAlign;
      if (style.verticalAlign)
        cell.style.verticalAlign = style.verticalAlign;
      if (style.backgroundColor)
        cell.style.backgroundColor = style.backgroundColor;
      if (style.color)
        cell.style.color = style.color;
      if (style.fontWeight)
        cell.style.fontWeight = style.fontWeight;
      if (style.fontStyle)
        cell.style.fontStyle = style.fontStyle;
    });
  }
  const tableId = table.getAttribute("data-table-id");
  if (tableId) {
    table.classList.add(`table-${tableId}`);
  }
}

// src/setupPreviewModeTableSelection.ts
function findMergeMarkers(table) {
  var _a;
  const cells = table.querySelectorAll("td, th");
  for (const cell of Array.from(cells)) {
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    if (content === "^" || content === "<") {
      return true;
    }
  }
  return false;
}
function setupPreviewModeTableSelection(plugin) {
  try {
    plugin.currentEditingTable = null;
    const tables = document.querySelectorAll("table");
    if (!tables.length)
      return;
    console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u627E\u5230 ${tables.length} \u4E2A\u8868\u683C`);
    tables.forEach((table, index) => {
      table.removeEventListener("click", plugin.handleTableClick);
      table.addEventListener("click", plugin.handleTableClick);
      plugin.tableDetector.setupTableIndices(table);
      table.setAttribute("data-table-index", index.toString());
      const tableFeature = plugin.tableIdManager.extractTableFeature(table);
      if (tableFeature) {
        table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        table.setAttribute("data-rows", tableFeature.rows.toString());
        table.setAttribute("data-cols", tableFeature.cols.toString());
        if (tableFeature.position) {
          table.setAttribute("data-table-position", JSON.stringify(tableFeature.position));
        }
      }
      plugin.readTableIdFromMarkdown(table).then((tableId) => {
        if (tableId) {
          table.setAttribute("data-table-id", tableId);
          console.log(`\u8868\u683CID\u5DF2\u8BBE\u7F6E: ${tableId}`);
          if (tableFeature) {
            tableFeature.id = tableId;
            table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
          }
        }
      }).catch((error) => {
        console.error("\u8BFB\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      });
      if (plugin.settings.enableCellMerging !== false) {
        if (table.dataset.tableMergeProcessed !== "true") {
          const hasMergeMarkers = findMergeMarkers(table);
          if (hasMergeMarkers) {
            console.log(`\u8868\u683C\u5305\u542B\u5408\u5E76\u6807\u8BB0\uFF0C\u5E94\u7528\u5408\u5E76\u5355\u5143\u683C\u6E32\u67D3`);
            plugin.tableDetector.applyMergeCellsMarkers(table);
          }
        }
      }
    });
    renderTablesWithStoredStyles(plugin);
    console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u8BBE\u7F6E\u4E86\u8868\u683C\u9009\u62E9");
  } catch (error) {
    console.error("\u8BBE\u7F6E\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
  }
}

// src/tableResizer.ts
var TableResizer = class {
  /**
   * 构造函数
   * @param plugin 插件实例
   */
  constructor(plugin) {
    this.activeTable = null;
    this.resizeHandles = [];
    this.isResizing = false;
    this.currentHandle = null;
    this.startX = 0;
    this.startY = 0;
    this.startWidth = 0;
    this.startHeight = 0;
    this.columnIndex = -1;
    this.tableWidth = 0;
    this.targetIndex = -1;
    this.resizeType = "column";
    this.resizeGuide = null;
    this.plugin = plugin;
    console.log("TableResizer: \u521D\u59CB\u5316\u8868\u683C\u5927\u5C0F\u8C03\u6574\u5668");
  }
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  /**
   * 为表格添加拖拽调整大小的功能
   * @param table 表格元素
   */
  setupTableResize(table) {
    try {
      console.log("TableResizer: \u4E3A\u8868\u683C\u8BBE\u7F6E\u5927\u5C0F\u8C03\u6574\u529F\u80FD");
      this.removeResizeHandles();
      this.activeTable = table;
      this.addResizeHandles(table);
      console.log("TableResizer: \u8868\u683C\u5927\u5C0F\u8C03\u6574\u529F\u80FD\u8BBE\u7F6E\u5B8C\u6210");
    } catch (error) {
      console.error("TableResizer: \u8BBE\u7F6E\u8868\u683C\u5927\u5C0F\u8C03\u6574\u529F\u80FD\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 为表格添加拖拽调整大小的句柄
   * @param table 表格元素
   */
  addResizeHandles(table) {
    console.log("TableResizer: \u6DFB\u52A0\u62D6\u62FD\u53E5\u67C4");
    table.style.position = "relative";
    const rows = table.querySelectorAll("tr");
    if (rows.length === 0) {
      console.warn("TableResizer: \u8868\u683C\u6CA1\u6709\u884C");
      return;
    }
    const firstRowCells = rows[0].querySelectorAll("th, td");
    if (firstRowCells.length === 0) {
      console.warn("TableResizer: \u8868\u683C\u7B2C\u4E00\u884C\u6CA1\u6709\u5355\u5143\u683C");
      return;
    }
    console.log(`TableResizer: \u8868\u683C\u6709 ${rows.length} \u884C, ${firstRowCells.length} \u5217`);
    for (let i = 0; i < firstRowCells.length - 1; i++) {
      const cell = firstRowCells[i];
      const nextCell = firstRowCells[i + 1];
      const cellRect = cell.getBoundingClientRect();
      const tableRect = table.getBoundingClientRect();
      const handleLeft = cell.offsetLeft + cell.offsetWidth;
      const colHandle = document.createElement("div");
      colHandle.className = "table-resize-handle-col";
      colHandle.style.position = "absolute";
      colHandle.style.top = "0";
      colHandle.style.left = `${handleLeft}px`;
      colHandle.style.width = "5px";
      colHandle.style.height = "100%";
      colHandle.style.cursor = "col-resize";
      colHandle.style.zIndex = "100";
      colHandle.dataset.index = i.toString();
      colHandle.dataset.type = "column";
      console.log(`TableResizer: \u6DFB\u52A0\u5217\u62D6\u62FD\u53E5\u67C4 - \u7D22\u5F15=${i}, \u4F4D\u7F6E=${handleLeft}px`);
      this.addHandleEventListeners(colHandle);
      table.appendChild(colHandle);
      this.resizeHandles.push(colHandle);
    }
    for (let i = 0; i < rows.length - 1; i++) {
      const row = rows[i];
      const nextRow = rows[i + 1];
      const rowRect = row.getBoundingClientRect();
      const tableRect = table.getBoundingClientRect();
      const handleTop = row.offsetTop + row.offsetHeight;
      const rowHandle = document.createElement("div");
      rowHandle.className = "table-resize-handle-row";
      rowHandle.style.position = "absolute";
      rowHandle.style.left = "0";
      rowHandle.style.top = `${handleTop}px`;
      rowHandle.style.height = "5px";
      rowHandle.style.width = "100%";
      rowHandle.style.cursor = "row-resize";
      rowHandle.style.zIndex = "100";
      rowHandle.dataset.index = i.toString();
      rowHandle.dataset.type = "row";
      console.log(`TableResizer: \u6DFB\u52A0\u884C\u62D6\u62FD\u53E5\u67C4 - \u7D22\u5F15=${i}, \u4F4D\u7F6E=${handleTop}px`);
      this.addHandleEventListeners(rowHandle);
      table.appendChild(rowHandle);
      this.resizeHandles.push(rowHandle);
    }
  }
  /**
   * 为拖拽句柄添加事件监听器
   * @param handle 拖拽句柄元素
   */
  addHandleEventListeners(handle) {
    handle.addEventListener("mousedown", this.handleMouseDown.bind(this));
    handle.addEventListener("mouseenter", () => {
      handle.style.backgroundColor = "var(--interactive-accent)";
    });
    handle.addEventListener("mouseleave", () => {
      if (!this.isResizing || this.currentHandle !== handle) {
        handle.style.backgroundColor = "transparent";
      }
    });
  }
  /**
   * 处理鼠标按下事件
   * @param event 鼠标事件
   */
  handleMouseDown(event2) {
    if (!this.activeTable)
      return;
    event2.stopPropagation();
    event2.preventDefault();
    const handle = event2.target;
    this.currentHandle = handle;
    this.resizeType = handle.dataset.type;
    this.targetIndex = parseInt(handle.dataset.index || "-1");
    console.log(`TableResizer: \u5F00\u59CB\u62D6\u62FD - \u7C7B\u578B=${this.resizeType}, \u7D22\u5F15=${this.targetIndex}`);
    this.startX = event2.clientX;
    this.startY = event2.clientY;
    if (this.resizeType === "column") {
      const cells = this.activeTable.querySelectorAll(`tr:first-child > *:nth-child(${this.targetIndex + 1})`);
      if (cells.length > 0) {
        const cell = cells[0];
        this.startWidth = cell.offsetWidth;
        console.log(`TableResizer: \u5217\u521D\u59CB\u5BBD\u5EA6=${this.startWidth}px`);
      }
    } else {
      const rows = this.activeTable.querySelectorAll(`tr:nth-child(${this.targetIndex + 1})`);
      if (rows.length > 0) {
        const row = rows[0];
        this.startHeight = row.offsetHeight;
        console.log(`TableResizer: \u884C\u521D\u59CB\u9AD8\u5EA6=${this.startHeight}px`);
      }
    }
    this.createResizeGuide();
    this.isResizing = true;
    document.addEventListener("mousemove", this.handleMouseMove.bind(this));
    document.addEventListener("mouseup", this.handleMouseUp.bind(this));
  }
  /**
   * 创建调整大小的辅助线
   */
  createResizeGuide() {
    if (!this.activeTable || !this.currentHandle)
      return;
    const guide = document.createElement("div");
    guide.className = `table-resize-guide table-resize-guide-${this.resizeType}`;
    guide.style.position = "absolute";
    guide.style.backgroundColor = "var(--interactive-accent)";
    guide.style.zIndex = "1000";
    if (this.resizeType === "column") {
      guide.style.width = "2px";
      guide.style.height = "100%";
      guide.style.top = "0";
      guide.style.left = this.currentHandle.style.left;
    } else {
      guide.style.height = "2px";
      guide.style.width = "100%";
      guide.style.left = "0";
      guide.style.top = this.currentHandle.style.top;
    }
    this.activeTable.appendChild(guide);
    this.resizeGuide = guide;
    console.log("TableResizer: \u521B\u5EFA\u8C03\u6574\u5927\u5C0F\u8F85\u52A9\u7EBF");
  }
  /**
   * 处理鼠标移动事件
   * @param event 鼠标事件
   */
  handleMouseMove(event2) {
    if (!this.isResizing || !this.activeTable || !this.currentHandle || !this.resizeGuide)
      return;
    const deltaX = event2.clientX - this.startX;
    const deltaY = event2.clientY - this.startY;
    if (this.resizeType === "column") {
      const newLeft = parseInt(this.currentHandle.style.left) + deltaX;
      this.resizeGuide.style.left = `${newLeft}px`;
      console.log(`TableResizer: \u8C03\u6574\u5217\u8F85\u52A9\u7EBF - \u4F4D\u7F6E=${newLeft}px`);
    } else {
      const newTop = parseInt(this.currentHandle.style.top) + deltaY;
      this.resizeGuide.style.top = `${newTop}px`;
      console.log(`TableResizer: \u8C03\u6574\u884C\u8F85\u52A9\u7EBF - \u4F4D\u7F6E=${newTop}px`);
    }
  }
  /**
   * 处理鼠标松开事件
   * @param event 鼠标事件
   */
  handleMouseUp(event2) {
    if (!this.isResizing || !this.activeTable)
      return;
    console.log("TableResizer: \u7ED3\u675F\u62D6\u62FD");
    const deltaX = event2.clientX - this.startX;
    const deltaY = event2.clientY - this.startY;
    if (this.resizeType === "column" && this.targetIndex >= 0) {
      const newWidth = Math.max(20, this.startWidth + deltaX);
      this.applyColumnWidth(this.targetIndex, newWidth);
      console.log(`TableResizer: \u5E94\u7528\u65B0\u5217\u5BBD - \u7D22\u5F15=${this.targetIndex}, \u5BBD\u5EA6=${newWidth}px`);
    } else if (this.resizeType === "row" && this.targetIndex >= 0) {
      const newHeight = Math.max(20, this.startHeight + deltaY);
      this.applyRowHeight(this.targetIndex, newHeight);
      console.log(`TableResizer: \u5E94\u7528\u65B0\u884C\u9AD8 - \u7D22\u5F15=${this.targetIndex}, \u9AD8\u5EA6=${newHeight}px`);
    }
    this.saveTableSizeData();
    if (this.resizeGuide) {
      this.resizeGuide.remove();
      this.resizeGuide = null;
    }
    this.isResizing = false;
    this.currentHandle = null;
    document.removeEventListener("mousemove", this.handleMouseMove.bind(this));
    document.removeEventListener("mouseup", this.handleMouseUp.bind(this));
  }
  /**
   * 应用列宽
   * @param colIndex 列索引
   * @param width 宽度
   */
  applyColumnWidth(colIndex, width) {
    if (!this.activeTable)
      return;
    let colgroup = this.activeTable.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      const firstRow = this.activeTable.querySelector("tr");
      if (firstRow) {
        const cellCount = firstRow.querySelectorAll("th, td").length;
        for (let i = 0; i < cellCount; i++) {
          const col = document.createElement("col");
          colgroup.appendChild(col);
        }
      }
      this.activeTable.prepend(colgroup);
    }
    const cols = colgroup.querySelectorAll("col");
    if (colIndex < cols.length) {
      const col = cols[colIndex];
      col.style.width = `${width}px`;
    }
  }
  /**
   * 应用行高
   * @param rowIndex 行索引
   * @param height 高度
   */
  applyRowHeight(rowIndex, height) {
    if (!this.activeTable)
      return;
    const rows = this.activeTable.querySelectorAll("tr");
    if (rowIndex < rows.length) {
      const row = rows[rowIndex];
      row.style.height = `${height}px`;
    }
  }
  /**
   * 保存表格尺寸数据
   */
  async saveTableSizeData() {
    if (!this.activeTable)
      return;
    try {
      const tableId = this.activeTable.getAttribute("data-table-id");
      if (!tableId) {
        console.warn("TableResizer: \u65E0\u6CD5\u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E\uFF0C\u8868\u683C\u6CA1\u6709ID");
        return;
      }
      console.log(`TableResizer: \u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E - \u8868\u683CID=${tableId}`);
      const colWidths = [];
      const colgroup = this.activeTable.querySelector("colgroup");
      if (colgroup) {
        const cols = colgroup.querySelectorAll("col");
        cols.forEach((col) => {
          const width = col.style.width || "auto";
          colWidths.push(width);
        });
      }
      if (colWidths.length === 0) {
        const firstRow = this.activeTable.querySelector("tr");
        if (firstRow) {
          const cellCount = firstRow.querySelectorAll("th, td").length;
          for (let i = 0; i < cellCount; i++) {
            colWidths.push("auto");
          }
        }
      }
      const rowHeights = [];
      const rows = this.activeTable.querySelectorAll("tr");
      rows.forEach((row) => {
        const height = row.style.height || "auto";
        rowHeights.push(height);
      });
      console.log("TableResizer: \u6536\u96C6\u7684\u5C3A\u5BF8\u6570\u636E", { colWidths, rowHeights });
      let allData = await this.plugin.loadData() || {};
      if (!allData.tables) {
        allData.tables = {};
      }
      const activeFile = this.getApp().workspace.getActiveFile();
      if (!activeFile) {
        console.warn("TableResizer: \u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84");
        return;
      }
      if (!allData.tables[tableId]) {
        allData.tables[tableId] = {
          id: tableId,
          locations: [{
            path: activeFile.path,
            isActive: true
          }],
          structure: {
            rowCount: rows.length,
            colCount: colWidths.length,
            hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
          },
          styling: {
            rowHeights,
            colWidths,
            alignment: Array(colWidths.length).fill("left"),
            cellStyles: []
          }
        };
        console.log(`TableResizer: \u521B\u5EFA\u4E86\u65B0\u7684\u8868\u683C\u6570\u636E - ID=${tableId}`, allData.tables[tableId]);
      } else {
        if (!allData.tables[tableId].styling) {
          allData.tables[tableId].styling = {};
        }
        if (!allData.tables[tableId].locations) {
          allData.tables[tableId].locations = [{
            path: activeFile.path,
            isActive: true
          }];
        } else {
          const filePathExists = allData.tables[tableId].locations.some(
            (loc) => loc.path === activeFile.path
          );
          if (!filePathExists) {
            allData.tables[tableId].locations.push({
              path: activeFile.path,
              isActive: true
            });
          }
        }
        allData.tables[tableId].styling.rowHeights = rowHeights;
        allData.tables[tableId].styling.colWidths = colWidths;
        allData.tables[tableId].structure = {
          rowCount: rows.length,
          colCount: colWidths.length,
          hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
        };
        console.log(`TableResizer: \u66F4\u65B0\u4E86\u73B0\u6709\u8868\u683C\u6570\u636E - ID=${tableId}`, allData.tables[tableId]);
      }
      await this.plugin.saveData(allData);
      console.log("TableResizer: \u8868\u683C\u5C3A\u5BF8\u6570\u636E\u4FDD\u5B58\u6210\u529F");
      this.applyCurrentSizes();
    } catch (error) {
      console.error("TableResizer: \u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 立即应用当前尺寸到表格
   */
  applyCurrentSizes() {
    if (!this.activeTable)
      return;
    try {
      const colgroup = this.activeTable.querySelector("colgroup");
      if (colgroup) {
        const cols = colgroup.querySelectorAll("col");
        cols.forEach((col, index) => {
          const width = col.style.width;
          if (width) {
            console.log(`TableResizer: \u7ACB\u5373\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
          }
        });
      }
      const rows = this.activeTable.querySelectorAll("tr");
      rows.forEach((row, index) => {
        const height = row.style.height;
        if (height) {
          console.log(`TableResizer: \u7ACB\u5373\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
        }
      });
    } catch (error) {
      console.error("TableResizer: \u5E94\u7528\u5F53\u524D\u5C3A\u5BF8\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 移除所有拖拽句柄
   */
  removeResizeHandles() {
    console.log("TableResizer: \u79FB\u9664\u62D6\u62FD\u53E5\u67C4");
    this.resizeHandles.forEach((handle) => {
      handle.remove();
    });
    this.resizeHandles = [];
    if (this.resizeGuide) {
      this.resizeGuide.remove();
      this.resizeGuide = null;
    }
  }
  /**
   * 清理资源
   */
  cleanup() {
    console.log("TableResizer: \u6E05\u7406\u8D44\u6E90");
    this.removeResizeHandles();
    this.activeTable = null;
    this.isResizing = false;
    this.currentHandle = null;
  }
};

// src/tableDataExtractor.ts
var TableDataExtractor = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  // 辅助方法，获取app对象
  getApp() {
    return this.plugin.app;
  }
  /**
   * 从文件中提取表格数据
   * @param file 文件对象
   * @returns 表格数据对象，键为表格ID
   */
  async extractTableDataFromFile(file) {
    try {
      const fileContent = await this.getApp().vault.read(file);
      const result = {};
      const jsonCodeBlockRegex = /```json:table-data\s*\n([\s\S]*?)\n```/g;
      let jsonMatch;
      while ((jsonMatch = jsonCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const jsonStr = jsonMatch[1].trim();
          const jsonData = JSON.parse(jsonStr);
          if (Array.isArray(jsonData)) {
            for (const tableData of jsonData) {
              if (tableData.id) {
                this.processTableDataObject(tableData, result);
              }
            }
          } else if (jsonData.id) {
            this.processTableDataObject(jsonData, result);
          }
        } catch (error) {
          console.error("\u89E3\u6790JSON\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      const csvCodeBlockRegex = /```csv:table-data\s*\n([\s\S]*?)\n```/g;
      let csvMatch;
      while ((csvMatch = csvCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const csvStr = csvMatch[1].trim();
          const csvLines = csvStr.split("\n");
          if (csvLines.length > 1) {
            const headers = csvLines[0].split(",");
            for (let i = 1; i < csvLines.length; i++) {
              const values = csvLines[i].split(",");
              const tableData = {};
              for (let j = 0; j < headers.length && j < values.length; j++) {
                if (values[j]) {
                  try {
                    tableData[headers[j]] = JSON.parse(values[j]);
                  } catch (e) {
                    tableData[headers[j]] = values[j];
                  }
                }
              }
              if (tableData.id) {
                this.processTableDataObject(tableData, result);
              }
            }
          }
        } catch (error) {
          console.error("\u89E3\u6790CSV\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      const customCodeBlockRegex = /```table-data\s*\n([\s\S]*?)\n```/g;
      let customMatch;
      while ((customMatch = customCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const customStr = customMatch[1].trim();
          const customLines = customStr.split("\n");
          for (const line of customLines) {
            const tableData = this.parseCustomTableDataFormat(line);
            if (tableData && tableData.id) {
              result[tableData.id] = tableData;
            }
          }
        } catch (error) {
          console.error("\u89E3\u6790\u81EA\u5B9A\u4E49\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      this.extractTableDataFromComments(fileContent, result);
      return result;
    } catch (error) {
      console.error("\u4ECE\u6587\u4EF6\u63D0\u53D6\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
      return {};
    }
  }
  /**
   * 从HTML注释中提取表格ID和数据
   * @param fileContent 文件内容
   * @param result 结果对象
   */
  extractTableDataFromComments(fileContent, result) {
    try {
      const commentRegex = /<!--\s*table-id:\s*([\w-]+)(?:\s*\|\s*([^>]*))?\s*-->/g;
      let match;
      while ((match = commentRegex.exec(fileContent)) !== null) {
        const tableId = match[1].trim();
        const dataString = match[2] ? match[2].trim() : null;
        if (tableId && dataString) {
          const tableData = this.parseCustomTableDataFormat(`${tableId}|${dataString}`);
          if (tableData && tableData.id) {
            result[tableData.id] = tableData;
          }
        } else if (tableId && !result[tableId]) {
          result[tableId] = this.createEmptyTableData(tableId);
        }
      }
    } catch (error) {
      console.error("\u4ECEHTML\u6CE8\u91CA\u63D0\u53D6\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 创建空的表格数据结构
   * @param tableId 表格ID
   * @returns 表格数据对象
   */
  createEmptyTableData(tableId) {
    return {
      id: tableId,
      locations: [],
      structure: {
        rowCount: 0,
        colCount: 0,
        hasHeaders: false
      },
      styling: {
        rowHeights: [],
        colWidths: [],
        alignment: []
      }
    };
  }
  /**
   * 处理表格数据对象
   * @param tableData 表格数据对象
   * @param result 结果对象
   */
  processTableDataObject(tableData, result) {
    try {
      if (!tableData.structure) {
        tableData.structure = {
          rowCount: 0,
          colCount: 0,
          hasHeaders: false
        };
      }
      if (!tableData.styling) {
        tableData.styling = {
          rowHeights: [],
          colWidths: [],
          alignment: []
        };
      }
      if (!tableData.locations) {
        tableData.locations = [];
      }
      result[tableData.id] = tableData;
    } catch (error) {
      console.error("\u5904\u7406\u8868\u683C\u6570\u636E\u5BF9\u8C61\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 解析自定义表格数据格式
   * 格式: tableId|key1:value1|key2:value2,...
   * @param line 自定义格式数据行
   * @returns 表格数据对象
   */
  parseCustomTableDataFormat(line) {
    try {
      const parts = line.split("|");
      if (parts.length < 1)
        return null;
      const tableId = parts[0].trim();
      if (!tableId)
        return null;
      const tableData = this.createEmptyTableData(tableId);
      for (let i = 1; i < parts.length; i++) {
        const keyValue = parts[i].split(":");
        if (keyValue.length !== 2)
          continue;
        const key = keyValue[0].trim();
        const value = keyValue[1].trim();
        switch (key) {
          case "wrapper":
            tableData.structure.useTableWrapper = value === "true";
            break;
          case "width":
            tableData.styling.colWidths = value.split(",").map((w) => w.trim());
            break;
          case "align":
            tableData.styling.alignment = value.split(",").map((a) => a.trim());
            break;
          case "height":
            tableData.styling.rowHeights = value.split(",").map((h) => h.trim());
            break;
        }
      }
      return tableData;
    } catch (error) {
      console.error("\u89E3\u6790\u81EA\u5B9A\u4E49\u8868\u683C\u6570\u636E\u683C\u5F0F\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 完善表格数据，根据实际表格内容自动填充缺失的结构信息
   * @param table 表格元素
   * @param tableData 表格数据
   * @returns 完善后的表格数据
   */
  enhanceTableData(table, tableData) {
    const enhancedData = JSON.parse(JSON.stringify(tableData));
    const rows = table.querySelectorAll("tr");
    const rowCount = rows.length;
    let colCount = 0;
    const hasHeaderRow = table.querySelector("thead") !== null;
    rows.forEach((row) => {
      const cellCount = row.querySelectorAll("td, th").length;
      colCount = Math.max(colCount, cellCount);
    });
    if (!enhancedData.structure.rowCount || enhancedData.structure.rowCount === 0) {
      enhancedData.structure.rowCount = rowCount;
    }
    if (!enhancedData.structure.colCount || enhancedData.structure.colCount === 0) {
      enhancedData.structure.colCount = colCount;
    }
    if (enhancedData.structure.hasHeaders === void 0) {
      enhancedData.structure.hasHeaders = hasHeaderRow;
    }
    if (!enhancedData.styling.rowHeights || enhancedData.styling.rowHeights.length === 0) {
      enhancedData.styling.rowHeights = Array(rowCount).fill("auto");
    }
    if (!enhancedData.styling.colWidths || enhancedData.styling.colWidths.length === 0) {
      enhancedData.styling.colWidths = Array(colCount).fill("auto");
    }
    if (!enhancedData.styling.alignment || enhancedData.styling.alignment.length === 0) {
      enhancedData.styling.alignment = Array(colCount).fill("right");
      if (colCount > 0)
        enhancedData.styling.alignment[0] = "left";
    }
    return enhancedData;
  }
  /**
   * 将表格数据导出到Markdown文件
   * @param file 文件对象
   * @param tableId 表格ID
   * @param tableData 表格数据
   */
  async exportTableDataToFile(file, tableId, tableData) {
    try {
      if (!file || !tableId || !tableData)
        return;
      let fileContent = await this.getApp().vault.read(file);
      const dataToExport = JSON.stringify(tableData, null, 2);
      const jsonBlockRegex = new RegExp("```json:table-datas*\n([sS]*?)\n```", "g");
      let found = false;
      fileContent = fileContent.replace(jsonBlockRegex, (match, content) => {
        try {
          const jsonData = JSON.parse(content);
          if (Array.isArray(jsonData) && jsonData.some((item) => item.id === tableId) || jsonData.id === tableId) {
            found = true;
            return "```json:table-data\n" + dataToExport + "\n```";
          }
        } catch (e) {
        }
        return match;
      });
      if (!found) {
        fileContent += "\n\n```json:table-data\n" + dataToExport + "\n```";
      }
      await this.getApp().vault.modify(file, fileContent);
      console.log(`\u5DF2\u5C06\u8868\u683C\u6570\u636E\u5BFC\u51FA\u5230\u6587\u4EF6: ${file.path}, \u8868\u683CID: ${tableId}`);
    } catch (error) {
      console.error("\u5BFC\u51FA\u8868\u683C\u6570\u636E\u5230\u6587\u4EF6\u65F6\u51FA\u9519:", error);
    }
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  nativeProcessing: true,
  paragraphs: true,
  enableCellMerging: true,
  confirmMergeNonEmpty: true,
  enableTableIds: true,
  idPrefix: "tbl",
  autoCenterMergedCells: true,
  toolbarEnabled: true,
  enableEditModeOperations: true,
  useTableWrapperComments: false,
  // 默认不使用注释夹模式
  featureSimilarityThreshold: 0.7,
  // 默认相似度阈值70%
  preferFeatureMatching: false,
  // 默认不优先使用特征匹配
  preferFileStorage: true,
  // 默认优先使用文件存储
  autoExportToFile: false
  // 默认不自动导出到文件
};
var ObsidianSpreadsheet = class extends import_obsidian10.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.currentEditingTable = null;
    // 添加视图模式状态跟踪
    this.lastPreviewModeState = false;
    /**
     * 处理表格点击事件
     */
    this.handleTableClick = (event2) => {
      try {
        const table = event2.currentTarget;
        if (!table)
          return;
        this.removeAllTableHighlights();
        this.highlightSelectedTable(table);
        if (this.settings.toolbarEnabled) {
          this.tableToolbar.setActiveTable(table);
        }
        this.tableResizer.setupTableResize(table);
        console.log("\u8868\u683C\u70B9\u51FB\u4E8B\u4EF6\u5DF2\u5904\u7406");
      } catch (error) {
        console.error("\u5904\u7406\u8868\u683C\u70B9\u51FB\u4E8B\u4EF6\u65F6\u51FA\u9519:", error);
      }
    };
    /**
     * 处理文档点击事件
     * @param event 点击事件
     */
    this.handleDocumentClick = (event2) => {
      var _a;
      try {
        const isClickInToolbar = event2.target instanceof Node && ((_a = document.querySelector(".advanced-table-toolbar-container")) == null ? void 0 : _a.contains(event2.target));
        const isClickInTable = event2.target instanceof Node && event2.target.closest("table") !== null;
        if (!isClickInToolbar && !isClickInTable) {
          if (this.tableToolbar.activeTable) {
            this.tableToolbar.clearSelection();
          }
        }
      } catch (error) {
        console.error("\u5904\u7406\u6587\u6863\u70B9\u51FB\u4E8B\u4EF6\u65F6\u51FA\u9519:", error);
      }
    };
    this.handleTableClick = this.handleTableClick.bind(this);
    this.handleDocumentClick = this.handleDocumentClick.bind(this);
  }
  // 移除文档点击事件处理函数
  async onload() {
    try {
      console.log("Loading Advanced Table XT plugin");
      await this.loadSettings();
      if (this.settings.toolbarEnabled === void 0) {
        this.settings.toolbarEnabled = true;
        await this.saveSettings();
      }
      if (this.settings.enableEditModeOperations === void 0) {
        this.settings.enableEditModeOperations = true;
        await this.saveSettings();
      }
      if (this.settings.preferFileStorage === void 0) {
        this.settings.preferFileStorage = true;
        await this.saveSettings();
      }
      if (this.settings.autoExportToFile === void 0) {
        this.settings.autoExportToFile = false;
        await this.saveSettings();
      }
      loadIcons();
      console.log("Initializing plugin components");
      this.tableIdManager = new TableIdManager(this);
      this.markdownSourceEditor = new MarkdownSourceEditor(this);
      this.tableDetector = new MarkdownTableDetector(this);
      this.tableToolbar = new TableToolbar(this);
      this.tableResizer = new TableResizer(this);
      this.tableDataExtractor = new TableDataExtractor(this);
      this.ribbonIcon = this.addRibbonIcon("table-toolbar-toggle", "\u8868\u683C\u5DE5\u5177\u680F", (evt) => {
        this.toggleToolbarState();
      });
      this.addRibbonIcon("table-edit-mode", "\u7F16\u8F91\u6A21\u5F0F\u8868\u683C\u64CD\u4F5C", (evt) => {
        const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
        if (!activeView) {
          new import_obsidian10.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
          return;
        }
        const isEditMode = activeView.getMode() === "source";
        if (!isEditMode) {
          new import_obsidian10.Notice("\u8BF7\u5207\u6362\u5230\u7F16\u8F91\u6A21\u5F0F\u4F7F\u7528\u6B64\u529F\u80FD");
          return;
        }
        const menu = new import_obsidian10.Menu();
        menu.addItem((item) => {
          item.setTitle("\u4E3A\u8868\u683C\u6DFB\u52A0ID").setIcon("table-id").onClick(async () => {
            await this.markdownSourceEditor.addTableIdToMarkdown();
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C").setIcon("merge-right").onClick(async () => {
            await this.markdownSourceEditor.mergeCells("right");
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C").setIcon("merge-down").onClick(async () => {
            await this.markdownSourceEditor.mergeCells("down");
          });
        });
        menu.showAtMouseEvent(evt);
      });
      this.updateRibbonIcon();
      if (this.settings.toolbarEnabled) {
        this.createToolbar();
      }
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          if (this.settings.toolbarEnabled) {
            setTimeout(() => {
              this.setupTableSelection();
            }, 300);
          }
        })
      );
      this.registerEvent(
        this.app.workspace.on("layout-change", () => {
          if (this.settings.toolbarEnabled) {
            setTimeout(() => {
              this.setupTableSelection();
            }, 300);
          }
        })
      );
      this.registerEvent(
        this.app.workspace.on("editor-change", (editor, view) => {
          if (this.settings.toolbarEnabled && this.settings.enableEditModeOperations) {
            if (view instanceof import_obsidian10.MarkdownView && view.getMode() === "source") {
              this.debounce(() => {
                const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
                if (tableInfo) {
                  this.setupEditModeTableSelection(editor);
                }
              }, 500)();
            }
          }
        })
      );
      this.registerDomEvent(document, "click", (evt) => {
        if (this.settings.toolbarEnabled && this.settings.enableEditModeOperations) {
          const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
          if (activeView && activeView.getMode() === "source") {
            setTimeout(() => {
              const editor = activeView.editor;
              const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
              if (tableInfo) {
                this.setupEditModeTableSelection(editor);
              }
            }, 100);
          }
        }
      });
      this.addCommand({
        id: "add-table-id-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4E3A\u8868\u683C\u6DFB\u52A0ID",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.addTableIdToMarkdown();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "merge-cell-right-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.mergeCells("right");
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "merge-cell-down-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.mergeCells("down");
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "show-current-table-id",
        name: "\u663E\u793A\u5F53\u524D\u8868\u683CID",
        callback: async () => {
          await this.showCurrentTableId();
        }
      });
      this.addCommand({
        id: "split-merged-cells",
        name: "\u62C6\u5206\u5DF2\u5408\u5E76\u7684\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.splitMergedCells();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "fix-merge-markers",
        name: "\u4FEE\u590D\u8868\u683C\u5408\u5E76\u6807\u8BB0",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.detectAndFixMergeMarkers();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor(
        "sheet",
        async (source, el, ctx) => {
          source = source.trim();
          ctx.addChild(
            new SheetElement(
              el,
              source,
              ctx,
              this.app,
              this
            )
          );
        }
      );
      this.registerMarkdownPostProcessor(async (el, ctx) => {
        var _a;
        if (!this.settings.nativeProcessing)
          return;
        if (((_a = ctx.frontmatter) == null ? void 0 : _a["disable-sheet"]) === true)
          return;
        const tableEls = el.querySelectorAll("table");
        if (tableEls.length) {
          for (const tableEl of Array.from(tableEls)) {
            if (!tableEl)
              return;
            if ((tableEl == null ? void 0 : tableEl.id) === "obsidian-sheets-parsed")
              return;
            if (this.settings.enableTableIds) {
              this.tableIdManager.ensureTableHasId(tableEl);
            }
            if (this.settings.enableCellMerging !== false) {
              this.renderMergedCells(tableEl, ctx);
              if (tableEl.querySelector("[rowspan], [colspan]")) {
                this.tableDetector.applyMergeCellsMarkers(tableEl);
              }
            }
          }
        }
      });
      this.addSettingTab(new SheetSettingsTab(this.app, this));
      console.log("Advanced Table XT plugin loaded successfully");
    } catch (error) {
      console.error("Error loading Advanced Table XT plugin:", error);
    }
    this.setupViewModeChangeListener();
    this.checkAndRenderTables();
    console.log("Advanced Table XT \u63D2\u4EF6\u5DF2\u52A0\u8F7D");
  }
  /**
   * 防抖函数
   * @param func 要执行的函数
   * @param wait 等待时间（毫秒）
   */
  debounce(func, wait) {
    let timeout = null;
    return function(...args) {
      const context = this;
      const later = function() {
        timeout = null;
        func.apply(context, args);
      };
      if (timeout)
        clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  // 创建工具栏 - 新方法，只在需要时创建工具栏
  createToolbar() {
    try {
      document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
        container.remove();
      });
      const toolbarContainer = document.createElement("div");
      toolbarContainer.className = "advanced-table-toolbar-container";
      document.body.appendChild(toolbarContainer);
      this.tableToolbar.createToolbar(toolbarContainer);
      document.addEventListener("click", this.handleDocumentClick);
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (activeView) {
        const isEditMode = activeView.getMode() === "source";
        if (isEditMode) {
          const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(activeView.editor);
          if (tableInfo) {
            this.setupEditModeTableSelection(activeView.editor);
          }
        } else {
          this.setupPreviewModeTableSelection();
        }
      }
      console.log("\u5DE5\u5177\u680F\u5DF2\u521B\u5EFA");
    } catch (error) {
      console.error("\u521B\u5EFA\u5DE5\u5177\u680F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 设置表格选择功能
   */
  setupTableSelection() {
    try {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView)
        return;
      const isEditMode = activeView.getMode() === "source";
      if (isEditMode) {
        this.setupEditModeTableSelection(activeView.editor);
      } else {
        this.setupPreviewModeTableSelection();
      }
    } catch (error) {
      console.error("\u8BBE\u7F6E\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 设置编辑模式下的表格选择功能
   * @param editor 编辑器实例
   */
  setupEditModeTableSelection(editor) {
    try {
      const cursor = editor.getCursor();
      console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5149\u6807\u4F4D\u7F6E: \u884C=${cursor.line}, \u5217=${cursor.ch}`);
      const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u672A\u627E\u5230\u8868\u683C");
        if (this.currentEditingTable) {
          this.currentEditingTable = null;
          if (this.tableToolbar) {
            this.tableToolbar.clearSelection();
          }
        }
        return;
      }
      console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u627E\u5230\u8868\u683C: \u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      if (!document.querySelector(".advanced-table-toolbar-container")) {
        this.createToolbar();
      }
      this.currentEditingTable = {
        startLine: tableInfo.startLine,
        endLine: tableInfo.endLine,
        content: tableInfo.content
      };
      this.tableToolbar.setActiveEditModeTable(this.currentEditingTable);
      const cellPosition = this.markdownSourceEditor.getCellPosition(editor);
      if (cellPosition) {
        console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5149\u6807\u4F4D\u4E8E\u5355\u5143\u683C: \u884C=${cellPosition.rowIndex}, \u5217=${cellPosition.colIndex}`);
      } else {
        console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u65E0\u6CD5\u786E\u5B9A\u5149\u6807\u6240\u5728\u5355\u5143\u683C");
      }
      console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u9009\u62E9\u4E86\u8868\u683C:", this.currentEditingTable);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u7F16\u8F91\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 设置预览模式下的表格选择功能
   */
  setupPreviewModeTableSelection() {
    try {
      setupPreviewModeTableSelection(this);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  onunload() {
    console.log("\u5378\u8F7D Advanced Table XT \u63D2\u4EF6");
    document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
      container.remove();
    });
    this.removeAllTableHighlights();
    this.tableResizer.cleanup();
    document.querySelectorAll("table[data-table-processed]").forEach((table) => {
      const tableEl = table;
      delete tableEl.dataset.tableProcessed;
      delete tableEl.dataset.tableSelected;
      tableEl.style.outline = "";
      tableEl.style.outlineOffset = "";
      tableEl.onclick = null;
    });
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  highlightSelectedTable(table) {
    this.removeAllTableHighlights();
    table.style.outline = "2px solid var(--interactive-accent)";
    table.style.outlineOffset = "2px";
    table.dataset.tableSelected = "true";
  }
  removeAllTableHighlights() {
    document.querySelectorAll('table[data-table-selected="true"]').forEach((table) => {
      const tableEl = table;
      tableEl.style.outline = "";
      tableEl.style.outlineOffset = "";
      delete tableEl.dataset.tableSelected;
    });
  }
  createTableData(table, tableId) {
    var _a;
    try {
      const commentId = this.tableIdManager.getTableIdentifier(table);
      if (!commentId || commentId !== tableId) {
        console.warn(`\u8868\u683CID\u9A8C\u8BC1\u5931\u8D25: \u4F20\u5165ID=${tableId}, HTML\u6CE8\u91CAID=${commentId || "\u65E0"}`);
        console.warn("\u53EA\u6709\u5728HTML\u6CE8\u91CA\u4E2D\u660E\u786E\u5B9A\u4E49\u7684\u8868\u683CID\u624D\u80FD\u521B\u5EFA\u6570\u636E");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        console.warn("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE\uFF0C\u4E0D\u521B\u5EFA\u8868\u683C\u6570\u636E");
        return;
      }
      const filePath = (_a = activeView.file) == null ? void 0 : _a.path;
      if (!filePath) {
        console.warn("\u65E0\u6CD5\u83B7\u53D6\u6587\u4EF6\u8DEF\u5F84\uFF0C\u4E0D\u521B\u5EFA\u8868\u683C\u6570\u636E");
        return;
      }
      console.log(`\u4E3A\u6709\u6548\u7684HTML\u6CE8\u91CAID\u521B\u5EFA\u8868\u683C\u6570\u636E: ${tableId}`);
      this.tableToolbar.extractAndStoreTableInfo(tableId, table, filePath);
    } catch (error) {
      console.error("\u521B\u5EFA\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  async saveTableData(tableData) {
    try {
      if (!tableData || !tableData.id) {
        console.warn("\u65E0\u6548\u7684\u8868\u683C\u6570\u636E\uFF0C\u7F3A\u5C11ID");
        return;
      }
      console.log(`\u51C6\u5907\u4FDD\u5B58\u8868\u683C\u6570\u636E: ${tableData.id}`);
      if (this.settings.preferFileStorage) {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && this.tableDataExtractor) {
          await this.tableDataExtractor.exportTableDataToFile(activeFile, tableData.id, tableData);
          console.log(`\u5DF2\u5C06\u8868\u683C\u6570\u636E\u4FDD\u5B58\u5230\u6587\u4EF6: ${activeFile.path}`);
          return;
        }
      }
      const existingData = await this.loadData() || {};
      if (!existingData.tables) {
        existingData.tables = {};
      }
      existingData.tables[tableData.id] = tableData;
      await this.saveData(existingData);
      console.log(`\u5DF2\u4FDD\u5B58\u8868\u683C\u6570\u636E\u5230data.json: ${tableData.id}`);
      if (this.settings.autoExportToFile && this.tableDataExtractor) {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          await this.tableDataExtractor.exportTableDataToFile(activeFile, tableData.id, tableData);
          console.log(`\u5DF2\u81EA\u52A8\u5C06\u8868\u683C\u6570\u636E\u5BFC\u51FA\u5230\u6587\u4EF6: ${activeFile.path}`);
        }
      }
    } catch (error) {
      console.error("\u4FDD\u5B58\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  updateRibbonIcon() {
    if (!this.ribbonIcon)
      return;
    this.ribbonIcon.empty();
    if (this.settings.toolbarEnabled) {
      const iconEl = this.ribbonIcon.createEl("div", {
        cls: "ribbon-icon-active"
      });
      iconEl.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>`;
      iconEl.style.color = "var(--interactive-accent)";
    } else {
      const iconEl = this.ribbonIcon.createEl("div");
      iconEl.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>`;
    }
  }
  toggleToolbarState() {
    this.settings.toolbarEnabled = !this.settings.toolbarEnabled;
    this.saveSettings();
    this.updateRibbonIcon();
    if (this.settings.toolbarEnabled) {
      this.createToolbar();
      new import_obsidian10.Notice("\u8868\u683C\u5DE5\u5177\u680F\u5DF2\u542F\u7528");
    } else {
      document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
        container.remove();
      });
      new import_obsidian10.Notice("\u8868\u683C\u5DE5\u5177\u680F\u5DF2\u7981\u7528");
    }
  }
  /**
   * 显示当前表格ID
   */
  async showCurrentTableId() {
    try {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        new import_obsidian10.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      let tableId = null;
      if (isEditMode) {
        tableId = await this.markdownSourceEditor.getCurrentTableId();
      } else {
        if (this.tableToolbar.activeTable) {
          tableId = this.tableIdManager.getTableIdentifier(this.tableToolbar.activeTable);
        }
      }
      if (tableId) {
        new import_obsidian10.Notice(`\u5F53\u524D\u8868\u683CID: ${tableId}`);
        console.log("\u5F53\u524D\u8868\u683CID:", tableId);
      } else {
        new import_obsidian10.Notice("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u5728\u8868\u683C\u5185\u6216\u5DF2\u9009\u62E9\u8868\u683C");
      }
    } catch (error) {
      console.error("\u663E\u793A\u5F53\u524D\u8868\u683CID\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 渲染合并单元格
   * @param tableEl 表格元素
   * @param ctx Markdown处理上下文
   */
  renderMergedCells(tableEl, ctx) {
    var _a;
    try {
      if (tableEl.dataset.tableMergeProcessed === "true") {
        return;
      }
      const rawMarkdown = ((_a = ctx.getSectionInfo(tableEl)) == null ? void 0 : _a.text) || (0, import_obsidian10.htmlToMarkdown)(tableEl);
      if (!rawMarkdown)
        return;
      const lines = rawMarkdown.split("\n");
      const tableLines = lines.filter((line) => line.trim().startsWith("|") && line.trim().endsWith("|"));
      if (tableLines.length < 2)
        return;
      const contentLines = [tableLines[0]].concat(tableLines.slice(2));
      const rows = [];
      for (const line of contentLines) {
        const cells = line.split("|").filter((_, i, arr) => i > 0 && i < arr.length - 1).map((cell) => cell.trim());
        rows.push(cells);
      }
      const domRows = tableEl.querySelectorAll("tr");
      if (domRows.length !== rows.length)
        return;
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const rowCells = rows[rowIndex];
        const domRow = domRows[rowIndex];
        const domCells = domRow.querySelectorAll("th, td");
        if (domCells.length !== rowCells.length)
          continue;
        for (let colIndex = 0; colIndex < rowCells.length; colIndex++) {
          const cellContent = rowCells[colIndex];
          const domCell = domCells[colIndex];
          if ((cellContent === "<" || cellContent === "\\<" || cellContent === " < " || cellContent === " \\< ") && colIndex > 0) {
            const leftCell = domCells[colIndex - 1];
            leftCell.colSpan = (leftCell.colSpan || 1) + 1;
            domCell.style.display = "none";
            if (this.settings.autoCenterMergedCells) {
              leftCell.style.textAlign = "center";
              leftCell.style.verticalAlign = "middle";
            }
            leftCell.classList.add("obs-merged-cell");
          } else if ((cellContent === "^" || cellContent === "\\^" || cellContent === " ^ " || cellContent === " \\^ ") && rowIndex > 0) {
            const aboveRow = domRows[rowIndex - 1];
            const aboveCells = aboveRow.querySelectorAll("th, td");
            if (colIndex < aboveCells.length) {
              const aboveCell = aboveCells[colIndex];
              aboveCell.rowSpan = (aboveCell.rowSpan || 1) + 1;
              domCell.style.display = "none";
              if (this.settings.autoCenterMergedCells) {
                aboveCell.style.textAlign = "center";
                aboveCell.style.verticalAlign = "middle";
              }
              aboveCell.classList.add("obs-merged-cell");
            }
          }
        }
      }
      tableEl.dataset.tableMergeProcessed = "true";
      console.log("\u5DF2\u6E32\u67D3\u8868\u683C\u5408\u5E76\u5355\u5143\u683C");
    } catch (error) {
      console.error("\u6E32\u67D3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 从Markdown文件中读取表格ID
   * 这是一个更可靠的方法，因为它不依赖于DOM结构
   * @param table 表格元素
   * @returns Promise<string | null>
   */
  async readTableIdFromMarkdown(table) {
    try {
      const existingId = table.getAttribute("data-table-id");
      if (existingId) {
        console.log(`\u4ECE\u8868\u683C\u5143\u7D20\u5C5E\u6027\u4E2D\u83B7\u53D6ID: ${existingId}`);
        return existingId;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
        return null;
      }
      const activeFile = this.app.workspace.getActiveFile();
      if (!activeFile) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u6587\u4EF6");
        return null;
      }
      console.log(`\u5C1D\u8BD5\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u67E5\u627E\u8868\u683CID: ${activeFile.path}`);
      const content = await this.app.vault.read(activeFile);
      const tableFeature = this.tableIdManager.extractTableFeature(table);
      console.log(`\u5F53\u524D\u8868\u683C\u7279\u5F81:`, tableFeature);
      const tableInfos = this.tableIdManager.extractTableIdsFromMarkdown(content);
      console.log(`\u4ECE\u6587\u4EF6\u4E2D\u63D0\u53D6\u7684\u8868\u683C\u4FE1\u606F:`, tableInfos);
      const allTables = Array.from(document.querySelectorAll("table"));
      const tableIndex = allTables.indexOf(table);
      console.log(`\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E: \u7B2C${tableIndex}\u4E2A\u8868\u683C\uFF08\u5171${allTables.length}\u4E2A\uFF09`);
      const similarityThreshold = this.settings.featureSimilarityThreshold || 0.7;
      if (this.settings.preferFeatureMatching) {
        if (tableFeature) {
          let bestMatchId = "";
          let bestMatchScore = 0;
          for (const { id, feature } of tableInfos) {
            if (!id)
              continue;
            const score = this.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
            console.log(`\u8868\u683CID ${id} \u7684\u7279\u5F81\u76F8\u4F3C\u5EA6: ${score.toFixed(2)}`);
            if (score > bestMatchScore) {
              bestMatchScore = score;
              bestMatchId = id;
            }
          }
          if (bestMatchId && bestMatchScore > similarityThreshold) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
            table.setAttribute("data-table-id", bestMatchId);
            return bestMatchId;
          }
        }
        if (tableIndex !== -1 && tableIndex < tableInfos.length) {
          const { id } = tableInfos[tableIndex];
          if (id) {
            console.log(`\u901A\u8FC7\u4F4D\u7F6E\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
      } else {
        if (tableIndex !== -1 && tableIndex < tableInfos.length) {
          const { id } = tableInfos[tableIndex];
          if (id) {
            console.log(`\u901A\u8FC7\u4F4D\u7F6E\u7CBE\u786E\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
        if (tableFeature) {
          let bestMatchId = "";
          let bestMatchScore = 0;
          for (const { id, feature } of tableInfos) {
            if (!id)
              continue;
            const score = this.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
            console.log(`\u8868\u683CID ${id} \u7684\u7279\u5F81\u76F8\u4F3C\u5EA6: ${score.toFixed(2)}`);
            if (score > bestMatchScore) {
              bestMatchScore = score;
              bestMatchId = id;
            }
          }
          if (bestMatchId && bestMatchScore > similarityThreshold) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
            table.setAttribute("data-table-id", bestMatchId);
            return bestMatchId;
          }
        }
      }
      if (tableFeature) {
        for (const { id, feature } of tableInfos) {
          if (!id)
            continue;
          if (feature.rows === tableFeature.rows && feature.cols === tableFeature.cols) {
            console.log(`\u901A\u8FC7\u8868\u683C\u7ED3\u6784\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
      }
      if (this.settings.enableTableIds) {
        const newId = this.tableIdManager.generateTableId();
        console.log(`\u672A\u627E\u5230\u8868\u683CID\uFF0C\u751F\u6210\u65B0ID: ${newId}`);
        table.setAttribute("data-table-id", newId);
        return newId;
      }
      console.log("\u672A\u5728Markdown\u5185\u5BB9\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u4E14\u8868\u683CID\u529F\u80FD\u5DF2\u7981\u7528");
      return null;
    } catch (error) {
      console.error("\u4ECEMarkdown\u5185\u5BB9\u8BFB\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 设置视图模式变化监听
   */
  setupViewModeChangeListener() {
    if (this.viewModeChangeHandler) {
      this.app.workspace.off("active-leaf-change", this.viewModeChangeHandler);
      this.app.workspace.off("layout-change", this.viewModeChangeHandler);
    }
    this.viewModeChangeHandler = () => {
      this.checkAndRenderTables();
    };
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", this.viewModeChangeHandler)
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", this.viewModeChangeHandler)
    );
    console.log("\u5DF2\u8BBE\u7F6E\u89C6\u56FE\u6A21\u5F0F\u53D8\u5316\u76D1\u542C\u5668");
  }
  /**
   * 检查当前模式并在需要时渲染表格
   */
  checkAndRenderTables() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
    if (!activeView)
      return;
    const isPreviewMode = activeView.getMode() === "preview";
    if (isPreviewMode && !this.lastPreviewModeState) {
      setTimeout(() => {
        renderTablesWithStoredStyles(this);
      }, 300);
    }
    this.lastPreviewModeState = isPreviewMode;
  }
};
var main_default = ObsidianSpreadsheet;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2pzb241L2Rpc3QvaW5kZXguanMiLCAic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9zaGVldEVsZW1lbnQudHMiLCAic3JjL21hcmtkb3duVGFibGVEZXRlY3Rvci50cyIsICJzcmMvdGFibGVJZE1hbmFnZXIudHMiLCAic3JjL3RhYmxlVG9vbGJhci50cyIsICJzcmMvbWFya2Rvd25Tb3VyY2VFZGl0b3IudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy90YWJsZVN0eWxlUmVuZGVyZXIudHMiLCAic3JjL3NldHVwUHJldmlld01vZGVUYWJsZVNlbGVjdGlvbi50cyIsICJzcmMvdGFibGVSZXNpemVyLnRzIiwgInNyYy90YWJsZURhdGFFeHRyYWN0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5KU09ONSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuXHRmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7XG5cdFx0cmV0dXJuIG1vZHVsZSA9IHsgZXhwb3J0czoge30gfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xuXHR9XG5cblx0dmFyIF9nbG9iYWwgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG5cdHZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuXHQgID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmXG5cdCAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG5cdCAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRpZiAodHlwZW9mIF9fZyA9PSAnbnVtYmVyJykgeyBfX2cgPSBnbG9iYWw7IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXHR9KTtcblxuXHR2YXIgX2NvcmUgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdHZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7IHZlcnNpb246ICcyLjYuNScgfTtcblx0aWYgKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpIHsgX19lID0gY29yZTsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cdH0pO1xuXHR2YXIgX2NvcmVfMSA9IF9jb3JlLnZlcnNpb247XG5cblx0dmFyIF9pc09iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG5cdH07XG5cblx0dmFyIF9hbk9iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIGlmICghX2lzT2JqZWN0KGl0KSkgeyB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7IH1cblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cblx0dmFyIF9mYWlscyA9IGZ1bmN0aW9uIChleGVjKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiAhIWV4ZWMoKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cblx0Ly8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxuXHR2YXIgX2Rlc2NyaXB0b3JzID0gIV9mYWlscyhmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KS5hICE9IDc7XG5cdH0pO1xuXG5cdHZhciBkb2N1bWVudCA9IF9nbG9iYWwuZG9jdW1lbnQ7XG5cdC8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxuXHR2YXIgaXMgPSBfaXNPYmplY3QoZG9jdW1lbnQpICYmIF9pc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblx0dmFyIF9kb21DcmVhdGUgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xuXHR9O1xuXG5cdHZhciBfaWU4RG9tRGVmaW5lID0gIV9kZXNjcmlwdG9ycyAmJiAhX2ZhaWxzKGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9kb21DcmVhdGUoJ2RpdicpLCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcblx0fSk7XG5cblx0Ly8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pXG5cblx0Ly8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcblx0Ly8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcblx0dmFyIF90b1ByaW1pdGl2ZSA9IGZ1bmN0aW9uIChpdCwgUykge1xuXHQgIGlmICghX2lzT2JqZWN0KGl0KSkgeyByZXR1cm4gaXQ7IH1cblx0ICB2YXIgZm4sIHZhbDtcblx0ICBpZiAoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIV9pc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHsgcmV0dXJuIHZhbDsgfVxuXHQgIGlmICh0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhX2lzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgeyByZXR1cm4gdmFsOyB9XG5cdCAgaWYgKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhX2lzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgeyByZXR1cm4gdmFsOyB9XG5cdCAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xuXHR9O1xuXG5cdHZhciBkUCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuXHR2YXIgZiA9IF9kZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHtcblx0ICBfYW5PYmplY3QoTyk7XG5cdCAgUCA9IF90b1ByaW1pdGl2ZShQLCB0cnVlKTtcblx0ICBfYW5PYmplY3QoQXR0cmlidXRlcyk7XG5cdCAgaWYgKF9pZThEb21EZWZpbmUpIHsgdHJ5IHtcblx0ICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcblx0ICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH0gfVxuXHQgIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHsgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsgfVxuXHQgIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIHsgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7IH1cblx0ICByZXR1cm4gTztcblx0fTtcblxuXHR2YXIgX29iamVjdERwID0ge1xuXHRcdGY6IGZcblx0fTtcblxuXHR2YXIgX3Byb3BlcnR5RGVzYyA9IGZ1bmN0aW9uIChiaXRtYXAsIHZhbHVlKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG5cdCAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksXG5cdCAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcblx0ICAgIHZhbHVlOiB2YWx1ZVxuXHQgIH07XG5cdH07XG5cblx0dmFyIF9oaWRlID0gX2Rlc2NyaXB0b3JzID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuXHQgIHJldHVybiBfb2JqZWN0RHAuZihvYmplY3QsIGtleSwgX3Byb3BlcnR5RGVzYygxLCB2YWx1ZSkpO1xuXHR9IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuXHQgIG9iamVjdFtrZXldID0gdmFsdWU7XG5cdCAgcmV0dXJuIG9iamVjdDtcblx0fTtcblxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblx0dmFyIF9oYXMgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xuXHR9O1xuXG5cdHZhciBpZCA9IDA7XG5cdHZhciBweCA9IE1hdGgucmFuZG9tKCk7XG5cdHZhciBfdWlkID0gZnVuY3Rpb24gKGtleSkge1xuXHQgIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7XG5cdH07XG5cblx0dmFyIF9saWJyYXJ5ID0gZmFsc2U7XG5cblx0dmFyIF9zaGFyZWQgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdHZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcblx0dmFyIHN0b3JlID0gX2dsb2JhbFtTSEFSRURdIHx8IChfZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5cblx0KG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHt9KTtcblx0fSkoJ3ZlcnNpb25zJywgW10pLnB1c2goe1xuXHQgIHZlcnNpb246IF9jb3JlLnZlcnNpb24sXG5cdCAgbW9kZTogX2xpYnJhcnkgPyAncHVyZScgOiAnZ2xvYmFsJyxcblx0ICBjb3B5cmlnaHQ6ICdcdTAwQTkgMjAxOSBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSdcblx0fSk7XG5cdH0pO1xuXG5cdHZhciBfZnVuY3Rpb25Ub1N0cmluZyA9IF9zaGFyZWQoJ25hdGl2ZS1mdW5jdGlvbi10by1zdHJpbmcnLCBGdW5jdGlvbi50b1N0cmluZyk7XG5cblx0dmFyIF9yZWRlZmluZSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHtcblx0dmFyIFNSQyA9IF91aWQoJ3NyYycpO1xuXG5cdHZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xuXHR2YXIgVFBMID0gKCcnICsgX2Z1bmN0aW9uVG9TdHJpbmcpLnNwbGl0KFRPX1NUUklORyk7XG5cblx0X2NvcmUuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIHJldHVybiBfZnVuY3Rpb25Ub1N0cmluZy5jYWxsKGl0KTtcblx0fTtcblxuXHQobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywga2V5LCB2YWwsIHNhZmUpIHtcblx0ICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiB2YWwgPT0gJ2Z1bmN0aW9uJztcblx0ICBpZiAoaXNGdW5jdGlvbikgeyBfaGFzKHZhbCwgJ25hbWUnKSB8fCBfaGlkZSh2YWwsICduYW1lJywga2V5KTsgfVxuXHQgIGlmIChPW2tleV0gPT09IHZhbCkgeyByZXR1cm47IH1cblx0ICBpZiAoaXNGdW5jdGlvbikgeyBfaGFzKHZhbCwgU1JDKSB8fCBfaGlkZSh2YWwsIFNSQywgT1trZXldID8gJycgKyBPW2tleV0gOiBUUEwuam9pbihTdHJpbmcoa2V5KSkpOyB9XG5cdCAgaWYgKE8gPT09IF9nbG9iYWwpIHtcblx0ICAgIE9ba2V5XSA9IHZhbDtcblx0ICB9IGVsc2UgaWYgKCFzYWZlKSB7XG5cdCAgICBkZWxldGUgT1trZXldO1xuXHQgICAgX2hpZGUoTywga2V5LCB2YWwpO1xuXHQgIH0gZWxzZSBpZiAoT1trZXldKSB7XG5cdCAgICBPW2tleV0gPSB2YWw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIF9oaWRlKE8sIGtleSwgdmFsKTtcblx0ICB9XG5cdC8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxuXHR9KShGdW5jdGlvbi5wcm90b3R5cGUsIFRPX1NUUklORywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgJiYgdGhpc1tTUkNdIHx8IF9mdW5jdGlvblRvU3RyaW5nLmNhbGwodGhpcyk7XG5cdH0pO1xuXHR9KTtcblxuXHR2YXIgX2FGdW5jdGlvbiA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpOyB9XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXG5cdC8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xuXG5cdHZhciBfY3R4ID0gZnVuY3Rpb24gKGZuLCB0aGF0LCBsZW5ndGgpIHtcblx0ICBfYUZ1bmN0aW9uKGZuKTtcblx0ICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBmbjsgfVxuXHQgIHN3aXRjaCAobGVuZ3RoKSB7XG5cdCAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoLyogLi4uYXJncyAqLykge1xuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0fTtcblxuXHR2YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cblx0dmFyICRleHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgbmFtZSwgc291cmNlKSB7XG5cdCAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkY7XG5cdCAgdmFyIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0Lkc7XG5cdCAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7XG5cdCAgdmFyIElTX1BST1RPID0gdHlwZSAmICRleHBvcnQuUDtcblx0ICB2YXIgSVNfQklORCA9IHR5cGUgJiAkZXhwb3J0LkI7XG5cdCAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IF9nbG9iYWwgOiBJU19TVEFUSUMgPyBfZ2xvYmFsW25hbWVdIHx8IChfZ2xvYmFsW25hbWVdID0ge30pIDogKF9nbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV07XG5cdCAgdmFyIGV4cG9ydHMgPSBJU19HTE9CQUwgPyBfY29yZSA6IF9jb3JlW25hbWVdIHx8IChfY29yZVtuYW1lXSA9IHt9KTtcblx0ICB2YXIgZXhwUHJvdG8gPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KTtcblx0ICB2YXIga2V5LCBvd24sIG91dCwgZXhwO1xuXHQgIGlmIChJU19HTE9CQUwpIHsgc291cmNlID0gbmFtZTsgfVxuXHQgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuXHQgICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG5cdCAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcblx0ICAgIG91dCA9IChvd24gPyB0YXJnZXQgOiBzb3VyY2UpW2tleV07XG5cdCAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuXHQgICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBfY3R4KG91dCwgX2dsb2JhbCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBfY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG5cdCAgICAvLyBleHRlbmQgZ2xvYmFsXG5cdCAgICBpZiAodGFyZ2V0KSB7IF9yZWRlZmluZSh0YXJnZXQsIGtleSwgb3V0LCB0eXBlICYgJGV4cG9ydC5VKTsgfVxuXHQgICAgLy8gZXhwb3J0XG5cdCAgICBpZiAoZXhwb3J0c1trZXldICE9IG91dCkgeyBfaGlkZShleHBvcnRzLCBrZXksIGV4cCk7IH1cblx0ICAgIGlmIChJU19QUk9UTyAmJiBleHBQcm90b1trZXldICE9IG91dCkgeyBleHBQcm90b1trZXldID0gb3V0OyB9XG5cdCAgfVxuXHR9O1xuXHRfZ2xvYmFsLmNvcmUgPSBfY29yZTtcblx0Ly8gdHlwZSBiaXRtYXBcblx0JGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcblx0JGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWxcblx0JGV4cG9ydC5TID0gNDsgICAvLyBzdGF0aWNcblx0JGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuXHQkZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmRcblx0JGV4cG9ydC5XID0gMzI7ICAvLyB3cmFwXG5cdCRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuXHQkZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcblx0dmFyIF9leHBvcnQgPSAkZXhwb3J0O1xuXG5cdC8vIDcuMS40IFRvSW50ZWdlclxuXHR2YXIgY2VpbCA9IE1hdGguY2VpbDtcblx0dmFyIGZsb29yID0gTWF0aC5mbG9vcjtcblx0dmFyIF90b0ludGVnZXIgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcblx0fTtcblxuXHQvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxuXHR2YXIgX2RlZmluZWQgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB7IHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTsgfVxuXHQgIHJldHVybiBpdDtcblx0fTtcblxuXHQvLyB0cnVlICAtPiBTdHJpbmcjYXRcblx0Ly8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5cdHZhciBfc3RyaW5nQXQgPSBmdW5jdGlvbiAoVE9fU1RSSU5HKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0LCBwb3MpIHtcblx0ICAgIHZhciBzID0gU3RyaW5nKF9kZWZpbmVkKHRoYXQpKTtcblx0ICAgIHZhciBpID0gX3RvSW50ZWdlcihwb3MpO1xuXHQgICAgdmFyIGwgPSBzLmxlbmd0aDtcblx0ICAgIHZhciBhLCBiO1xuXHQgICAgaWYgKGkgPCAwIHx8IGkgPj0gbCkgeyByZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7IH1cblx0ICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7XG5cdCAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZlxuXHQgICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYVxuXHQgICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDtcblx0ICB9O1xuXHR9O1xuXG5cdHZhciAkYXQgPSBfc3RyaW5nQXQoZmFsc2UpO1xuXHRfZXhwb3J0KF9leHBvcnQuUCwgJ1N0cmluZycsIHtcblx0ICAvLyAyMS4xLjMuMyBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0KHBvcylcblx0ICBjb2RlUG9pbnRBdDogZnVuY3Rpb24gY29kZVBvaW50QXQocG9zKSB7XG5cdCAgICByZXR1cm4gJGF0KHRoaXMsIHBvcyk7XG5cdCAgfVxuXHR9KTtcblxuXHR2YXIgY29kZVBvaW50QXQgPSBfY29yZS5TdHJpbmcuY29kZVBvaW50QXQ7XG5cblx0dmFyIG1heCA9IE1hdGgubWF4O1xuXHR2YXIgbWluID0gTWF0aC5taW47XG5cdHZhciBfdG9BYnNvbHV0ZUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBsZW5ndGgpIHtcblx0ICBpbmRleCA9IF90b0ludGVnZXIoaW5kZXgpO1xuXHQgIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpO1xuXHR9O1xuXG5cdHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHR2YXIgJGZyb21Db2RlUG9pbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuXHQvLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG5cdF9leHBvcnQoX2V4cG9ydC5TICsgX2V4cG9ydC5GICogKCEhJGZyb21Db2RlUG9pbnQgJiYgJGZyb21Db2RlUG9pbnQubGVuZ3RoICE9IDEpLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpXG5cdCAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KSB7XG5cdCAgICB2YXIgYXJndW1lbnRzJDEgPSBhcmd1bWVudHM7XG5cdCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgICB2YXIgcmVzID0gW107XG5cdCAgICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB2YXIgY29kZTtcblx0ICAgIHdoaWxlIChhTGVuID4gaSkge1xuXHQgICAgICBjb2RlID0gK2FyZ3VtZW50cyQxW2krK107XG5cdCAgICAgIGlmIChfdG9BYnNvbHV0ZUluZGV4KGNvZGUsIDB4MTBmZmZmKSAhPT0gY29kZSkgeyB0aHJvdyBSYW5nZUVycm9yKGNvZGUgKyAnIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQnKTsgfVxuXHQgICAgICByZXMucHVzaChjb2RlIDwgMHgxMDAwMFxuXHQgICAgICAgID8gZnJvbUNoYXJDb2RlKGNvZGUpXG5cdCAgICAgICAgOiBmcm9tQ2hhckNvZGUoKChjb2RlIC09IDB4MTAwMDApID4+IDEwKSArIDB4ZDgwMCwgY29kZSAlIDB4NDAwICsgMHhkYzAwKVxuXHQgICAgICApO1xuXHQgICAgfSByZXR1cm4gcmVzLmpvaW4oJycpO1xuXHQgIH1cblx0fSk7XG5cblx0dmFyIGZyb21Db2RlUG9pbnQgPSBfY29yZS5TdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuXHQvLyBUaGlzIGlzIGEgZ2VuZXJhdGVkIGZpbGUuIERvIG5vdCBlZGl0LlxuXHR2YXIgU3BhY2VfU2VwYXJhdG9yID0gL1tcXHUxNjgwXFx1MjAwMC1cXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXS87XG5cdHZhciBJRF9TdGFydCA9IC9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwODYwLVxcdTA4NkFcXHUwOEEwLVxcdTA4QjRcXHUwOEI2LVxcdTA4QkRcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk4MFxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTA5RkNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQUY5XFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNEXFx1MEM1OC1cXHUwQzVBXFx1MEM2MFxcdTBDNjFcXHUwQzgwXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDU0LVxcdTBENTZcXHUwRDVGLVxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y1XFx1MTNGOC1cXHUxM0ZEXFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4ODRcXHUxODg3LVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUM4MC1cXHUxQzg4XFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyRTJGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJFXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkVBXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OURcXHVBNkEwLVxcdUE2RUZcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3QUVcXHVBN0IwLVxcdUE3QjdcXHVBN0Y3LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QThGRFxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBOUUwLVxcdUE5RTRcXHVBOUU2LVxcdUE5RUZcXHVBOUZBLVxcdUE5RkVcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE3RS1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNjVcXHVBQjcwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERjAwLVxcdURGMUZcXHVERjJELVxcdURGNEFcXHVERjUwLVxcdURGNzVcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENCMC1cXHVEQ0QzXFx1RENEOC1cXHVEQ0ZCXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVEQ0UwLVxcdURDRjJcXHVEQ0Y0XFx1RENGNVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMFxcdURFMTAtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNFxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhcXHVEQzgwLVxcdURDQjJcXHVEQ0MwLVxcdURDRjJdfFxcdUQ4MDRbXFx1REMwMy1cXHVEQzM3XFx1REM4My1cXHVEQ0FGXFx1RENEMC1cXHVEQ0U4XFx1REQwMy1cXHVERDI2XFx1REQ1MC1cXHVERDcyXFx1REQ3NlxcdUREODMtXFx1RERCMlxcdUREQzEtXFx1RERDNFxcdUREREFcXHVERERDXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTJCXFx1REU4MC1cXHVERTg2XFx1REU4OFxcdURFOEEtXFx1REU4RFxcdURFOEYtXFx1REU5RFxcdURFOUYtXFx1REVBOFxcdURFQjAtXFx1REVERVxcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNEXFx1REY1MFxcdURGNUQtXFx1REY2MV18XFx1RDgwNVtcXHVEQzAwLVxcdURDMzRcXHVEQzQ3LVxcdURDNEFcXHVEQzgwLVxcdURDQUZcXHVEQ0M0XFx1RENDNVxcdURDQzdcXHVERDgwLVxcdUREQUVcXHVEREQ4LVxcdUREREJcXHVERTAwLVxcdURFMkZcXHVERTQ0XFx1REU4MC1cXHVERUFBXFx1REYwMC1cXHVERjE5XXxcXHVEODA2W1xcdURDQTAtXFx1RENERlxcdURDRkZcXHVERTAwXFx1REUwQi1cXHVERTMyXFx1REUzQVxcdURFNTBcXHVERTVDLVxcdURFODNcXHVERTg2LVxcdURFODlcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDdbXFx1REMwMC1cXHVEQzA4XFx1REMwQS1cXHVEQzJFXFx1REM0MFxcdURDNzItXFx1REM4RlxcdUREMDAtXFx1REQwNlxcdUREMDhcXHVERDA5XFx1REQwQi1cXHVERDMwXFx1REQ0Nl18XFx1RDgwOFtcXHVEQzAwLVxcdURGOTldfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXFx1REM4MC1cXHVERDQzXXxbXFx1RDgwQ1xcdUQ4MUMtXFx1RDgyMFxcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q1xcdUQ4NkYtXFx1RDg3MlxcdUQ4NzQtXFx1RDg3OV1bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxMVtcXHVEQzAwLVxcdURFNDZdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REVEMC1cXHVERUVEXFx1REYwMC1cXHVERjJGXFx1REY0MC1cXHVERjQzXFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTBcXHVERjkzLVxcdURGOUZcXHVERkUwXFx1REZFMV18XFx1RDgyMVtcXHVEQzAwLVxcdURGRUNdfFxcdUQ4MjJbXFx1REMwMC1cXHVERUYyXXxcXHVEODJDW1xcdURDMDAtXFx1REQxRVxcdURENzAtXFx1REVGQl18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTldfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVERDAwLVxcdURENDNdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRFxcdURDMjAtXFx1REZGRl18XFx1RDg3M1tcXHVEQzAwLVxcdURFQTFcXHVERUIwLVxcdURGRkZdfFxcdUQ4N0FbXFx1REMwMC1cXHVERkUwXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF0vO1xuXHR2YXIgSURfQ29udGludWUgPSAvW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzAwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0ODMtXFx1MDQ4N1xcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjEwLVxcdTA2MUFcXHUwNjIwLVxcdTA2NjlcXHUwNjZFLVxcdTA2RDNcXHUwNkQ1LVxcdTA2RENcXHUwNkRGLVxcdTA2RThcXHUwNkVBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMC1cXHUwNzRBXFx1MDc0RC1cXHUwN0IxXFx1MDdDMC1cXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgyRFxcdTA4NDAtXFx1MDg1QlxcdTA4NjAtXFx1MDg2QVxcdTA4QTAtXFx1MDhCNFxcdTA4QjYtXFx1MDhCRFxcdTA4RDQtXFx1MDhFMVxcdTA4RTMtXFx1MDk2M1xcdTA5NjYtXFx1MDk2RlxcdTA5NzEtXFx1MDk4M1xcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkMtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNFXFx1MDlEN1xcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUzXFx1MDlFNi1cXHUwOUYxXFx1MDlGQ1xcdTBBMDEtXFx1MEEwM1xcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEEzQ1xcdTBBM0UtXFx1MEE0MlxcdTBBNDdcXHUwQTQ4XFx1MEE0Qi1cXHUwQTREXFx1MEE1MVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTY2LVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkMtXFx1MEFDNVxcdTBBQzctXFx1MEFDOVxcdTBBQ0ItXFx1MEFDRFxcdTBBRDBcXHUwQUUwLVxcdTBBRTNcXHUwQUU2LVxcdTBBRUZcXHUwQUY5LVxcdTBBRkZcXHUwQjAxLVxcdTBCMDNcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzQy1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYzXFx1MEI2Ni1cXHUwQjZGXFx1MEI3MVxcdTBCODJcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDBcXHUwQkQ3XFx1MEJFNi1cXHUwQkVGXFx1MEMwMC1cXHUwQzAzXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRC1cXHUwQzQ0XFx1MEM0Ni1cXHUwQzQ4XFx1MEM0QS1cXHUwQzREXFx1MEM1NVxcdTBDNTZcXHUwQzU4LVxcdTBDNUFcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgwLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDAtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTQtXFx1MEQ1N1xcdTBENUYtXFx1MEQ2M1xcdTBENjYtXFx1MEQ2RlxcdTBEN0EtXFx1MEQ3RlxcdTBEODJcXHUwRDgzXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBEQ0FcXHUwRENGLVxcdTBERDRcXHUwREQ2XFx1MEREOC1cXHUwRERGXFx1MERFNi1cXHUwREVGXFx1MERGMlxcdTBERjNcXHUwRTAxLVxcdTBFM0FcXHUwRTQwLVxcdTBFNEVcXHUwRTUwLVxcdTBFNTlcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCOVxcdTBFQkItXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRUM4LVxcdTBFQ0RcXHUwRUQwLVxcdTBFRDlcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEYxOFxcdTBGMTlcXHUwRjIwLVxcdTBGMjlcXHUwRjM1XFx1MEYzN1xcdTBGMzlcXHUwRjNFLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjcxLVxcdTBGODRcXHUwRjg2LVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAwMC1cXHUxMDQ5XFx1MTA1MC1cXHUxMDlEXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzNUQtXFx1MTM1RlxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNVxcdTEzRjgtXFx1MTNGRFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxNFxcdTE3MjAtXFx1MTczNFxcdTE3NDAtXFx1MTc1M1xcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3NzJcXHUxNzczXFx1MTc4MC1cXHUxN0QzXFx1MTdEN1xcdTE3RENcXHUxN0REXFx1MTdFMC1cXHUxN0U5XFx1MTgwQi1cXHUxODBEXFx1MTgxMC1cXHUxODE5XFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MTk0Ni1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MTlEMC1cXHUxOUQ5XFx1MUEwMC1cXHUxQTFCXFx1MUEyMC1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3Ri1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUFBN1xcdTFBQjAtXFx1MUFCRFxcdTFCMDAtXFx1MUI0QlxcdTFCNTAtXFx1MUI1OVxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUJGM1xcdTFDMDAtXFx1MUMzN1xcdTFDNDAtXFx1MUM0OVxcdTFDNEQtXFx1MUM3RFxcdTFDODAtXFx1MUM4OFxcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNGOVxcdTFEMDAtXFx1MURGOVxcdTFERkItXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDNGXFx1MjA0MFxcdTIwNTRcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIwRDAtXFx1MjBEQ1xcdTIwRTFcXHUyMEU1LVxcdTIwRjBcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ3Ri1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkRFMC1cXHUyREZGXFx1MkUyRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyRlxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOTlcXHUzMDlBXFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJFXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkVBXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjJCXFx1QTY0MC1cXHVBNjZGXFx1QTY3NC1cXHVBNjdEXFx1QTY3Ri1cXHVBNkYxXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBN0FFXFx1QTdCMC1cXHVBN0I3XFx1QTdGNy1cXHVBODI3XFx1QTg0MC1cXHVBODczXFx1QTg4MC1cXHVBOEM1XFx1QThEMC1cXHVBOEQ5XFx1QThFMC1cXHVBOEY3XFx1QThGQlxcdUE4RkRcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNjVcXHVBQjcwLVxcdUFCRUFcXHVBQkVDXFx1QUJFRFxcdUFCRjAtXFx1QUJGOVxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMUQtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJGXFx1RkUzM1xcdUZFMzRcXHVGRTRELVxcdUZFNEZcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjEwLVxcdUZGMTlcXHVGRjIxLVxcdUZGM0FcXHVGRjNGXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1RERGRFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURFRTBcXHVERjAwLVxcdURGMUZcXHVERjJELVxcdURGNEFcXHVERjUwLVxcdURGN0FcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENBMC1cXHVEQ0E5XFx1RENCMC1cXHVEQ0QzXFx1RENEOC1cXHVEQ0ZCXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVEQ0UwLVxcdURDRjJcXHVEQ0Y0XFx1RENGNVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMC1cXHVERTAzXFx1REUwNVxcdURFMDZcXHVERTBDLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTM4LVxcdURFM0FcXHVERTNGXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU2XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OFxcdURDODAtXFx1RENCMlxcdURDQzAtXFx1RENGMl18XFx1RDgwNFtcXHVEQzAwLVxcdURDNDZcXHVEQzY2LVxcdURDNkZcXHVEQzdGLVxcdURDQkFcXHVEQ0QwLVxcdURDRThcXHVEQ0YwLVxcdURDRjlcXHVERDAwLVxcdUREMzRcXHVERDM2LVxcdUREM0ZcXHVERDUwLVxcdURENzNcXHVERDc2XFx1REQ4MC1cXHVEREM0XFx1RERDQS1cXHVERENDXFx1REREMC1cXHVERERBXFx1REREQ1xcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUzN1xcdURFM0VcXHVERTgwLVxcdURFODZcXHVERTg4XFx1REU4QS1cXHVERThEXFx1REU4Ri1cXHVERTlEXFx1REU5Ri1cXHVERUE4XFx1REVCMC1cXHVERUVBXFx1REVGMC1cXHVERUY5XFx1REYwMC1cXHVERjAzXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0MtXFx1REY0NFxcdURGNDdcXHVERjQ4XFx1REY0Qi1cXHVERjREXFx1REY1MFxcdURGNTdcXHVERjVELVxcdURGNjNcXHVERjY2LVxcdURGNkNcXHVERjcwLVxcdURGNzRdfFxcdUQ4MDVbXFx1REMwMC1cXHVEQzRBXFx1REM1MC1cXHVEQzU5XFx1REM4MC1cXHVEQ0M1XFx1RENDN1xcdURDRDAtXFx1RENEOVxcdUREODAtXFx1RERCNVxcdUREQjgtXFx1RERDMFxcdURERDgtXFx1RERERFxcdURFMDAtXFx1REU0MFxcdURFNDRcXHVERTUwLVxcdURFNTlcXHVERTgwLVxcdURFQjdcXHVERUMwLVxcdURFQzlcXHVERjAwLVxcdURGMTlcXHVERjFELVxcdURGMkJcXHVERjMwLVxcdURGMzldfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0U5XFx1RENGRlxcdURFMDAtXFx1REUzRVxcdURFNDdcXHVERTUwLVxcdURFODNcXHVERTg2LVxcdURFOTlcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDdbXFx1REMwMC1cXHVEQzA4XFx1REMwQS1cXHVEQzM2XFx1REMzOC1cXHVEQzQwXFx1REM1MC1cXHVEQzU5XFx1REM3Mi1cXHVEQzhGXFx1REM5Mi1cXHVEQ0E3XFx1RENBOS1cXHVEQ0I2XFx1REQwMC1cXHVERDA2XFx1REQwOFxcdUREMDlcXHVERDBCLVxcdUREMzZcXHVERDNBXFx1REQzQ1xcdUREM0RcXHVERDNGLVxcdURENDdcXHVERDUwLVxcdURENTldfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk5XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RVxcdURDODAtXFx1REQ0M118W1xcdUQ4MENcXHVEODFDLVxcdUQ4MjBcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNcXHVEODZGLVxcdUQ4NzJcXHVEODc0LVxcdUQ4NzldW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MTFbXFx1REMwMC1cXHVERTQ2XXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFNjAtXFx1REU2OVxcdURFRDAtXFx1REVFRFxcdURFRjAtXFx1REVGNFxcdURGMDAtXFx1REYzNlxcdURGNDAtXFx1REY0M1xcdURGNTAtXFx1REY1OVxcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwLVxcdURGN0VcXHVERjhGLVxcdURGOUZcXHVERkUwXFx1REZFMV18XFx1RDgyMVtcXHVEQzAwLVxcdURGRUNdfFxcdUQ4MjJbXFx1REMwMC1cXHVERUYyXXxcXHVEODJDW1xcdURDMDAtXFx1REQxRVxcdURENzAtXFx1REVGQl18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTlcXHVEQzlEXFx1REM5RV18XFx1RDgzNFtcXHVERDY1LVxcdURENjlcXHVERDZELVxcdURENzJcXHVERDdCLVxcdUREODJcXHVERDg1LVxcdUREOEJcXHVEREFBLVxcdUREQURcXHVERTQyLVxcdURFNDRdfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQlxcdURGQ0UtXFx1REZGRl18XFx1RDgzNltcXHVERTAwLVxcdURFMzZcXHVERTNCLVxcdURFNkNcXHVERTc1XFx1REU4NFxcdURFOUItXFx1REU5RlxcdURFQTEtXFx1REVBRl18XFx1RDgzOFtcXHVEQzAwLVxcdURDMDZcXHVEQzA4LVxcdURDMThcXHVEQzFCLVxcdURDMjFcXHVEQzIzXFx1REMyNFxcdURDMjYtXFx1REMyQV18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVEQ0QwLVxcdURDRDZcXHVERDAwLVxcdURENEFcXHVERDUwLVxcdURENTldfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRFxcdURDMjAtXFx1REZGRl18XFx1RDg3M1tcXHVEQzAwLVxcdURFQTFcXHVERUIwLVxcdURGRkZdfFxcdUQ4N0FbXFx1REMwMC1cXHVERkUwXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF18XFx1REI0MFtcXHVERDAwLVxcdURERUZdLztcblxuXHR2YXIgdW5pY29kZSA9IHtcblx0XHRTcGFjZV9TZXBhcmF0b3I6IFNwYWNlX1NlcGFyYXRvcixcblx0XHRJRF9TdGFydDogSURfU3RhcnQsXG5cdFx0SURfQ29udGludWU6IElEX0NvbnRpbnVlXG5cdH07XG5cblx0dmFyIHV0aWwgPSB7XG5cdCAgICBpc1NwYWNlU2VwYXJhdG9yOiBmdW5jdGlvbiBpc1NwYWNlU2VwYXJhdG9yIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiB1bmljb2RlLlNwYWNlX1NlcGFyYXRvci50ZXN0KGMpXG5cdCAgICB9LFxuXG5cdCAgICBpc0lkU3RhcnRDaGFyOiBmdW5jdGlvbiBpc0lkU3RhcnRDaGFyIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAoXG5cdCAgICAgICAgICAgIChjID49ICdhJyAmJiBjIDw9ICd6JykgfHxcblx0ICAgICAgICAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8XG5cdCAgICAgICAgKGMgPT09ICckJykgfHwgKGMgPT09ICdfJykgfHxcblx0ICAgICAgICB1bmljb2RlLklEX1N0YXJ0LnRlc3QoYylcblx0ICAgICAgICApXG5cdCAgICB9LFxuXG5cdCAgICBpc0lkQ29udGludWVDaGFyOiBmdW5jdGlvbiBpc0lkQ29udGludWVDaGFyIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAoXG5cdCAgICAgICAgICAgIChjID49ICdhJyAmJiBjIDw9ICd6JykgfHxcblx0ICAgICAgICAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8XG5cdCAgICAgICAgKGMgPj0gJzAnICYmIGMgPD0gJzknKSB8fFxuXHQgICAgICAgIChjID09PSAnJCcpIHx8IChjID09PSAnXycpIHx8XG5cdCAgICAgICAgKGMgPT09ICdcXHUyMDBDJykgfHwgKGMgPT09ICdcXHUyMDBEJykgfHxcblx0ICAgICAgICB1bmljb2RlLklEX0NvbnRpbnVlLnRlc3QoYylcblx0ICAgICAgICApXG5cdCAgICB9LFxuXG5cdCAgICBpc0RpZ2l0OiBmdW5jdGlvbiBpc0RpZ2l0IChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAvWzAtOV0vLnRlc3QoYylcblx0ICAgIH0sXG5cblx0ICAgIGlzSGV4RGlnaXQ6IGZ1bmN0aW9uIGlzSGV4RGlnaXQgKGMpIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIGMgPT09ICdzdHJpbmcnICYmIC9bMC05QS1GYS1mXS8udGVzdChjKVxuXHQgICAgfSxcblx0fTtcblxuXHR2YXIgc291cmNlO1xuXHR2YXIgcGFyc2VTdGF0ZTtcblx0dmFyIHN0YWNrO1xuXHR2YXIgcG9zO1xuXHR2YXIgbGluZTtcblx0dmFyIGNvbHVtbjtcblx0dmFyIHRva2VuO1xuXHR2YXIga2V5O1xuXHR2YXIgcm9vdDtcblxuXHR2YXIgcGFyc2UgPSBmdW5jdGlvbiBwYXJzZSAodGV4dCwgcmV2aXZlcikge1xuXHQgICAgc291cmNlID0gU3RyaW5nKHRleHQpO1xuXHQgICAgcGFyc2VTdGF0ZSA9ICdzdGFydCc7XG5cdCAgICBzdGFjayA9IFtdO1xuXHQgICAgcG9zID0gMDtcblx0ICAgIGxpbmUgPSAxO1xuXHQgICAgY29sdW1uID0gMDtcblx0ICAgIHRva2VuID0gdW5kZWZpbmVkO1xuXHQgICAga2V5ID0gdW5kZWZpbmVkO1xuXHQgICAgcm9vdCA9IHVuZGVmaW5lZDtcblxuXHQgICAgZG8ge1xuXHQgICAgICAgIHRva2VuID0gbGV4KCk7XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUuXG5cdCAgICAgICAgLy8gaWYgKCFwYXJzZVN0YXRlc1twYXJzZVN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkUGFyc2VTdGF0ZSgpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgcGFyc2VTdGF0ZXNbcGFyc2VTdGF0ZV0oKTtcblx0ICAgIH0gd2hpbGUgKHRva2VuLnR5cGUgIT09ICdlb2YnKVxuXG5cdCAgICBpZiAodHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXR1cm4gaW50ZXJuYWxpemUoeycnOiByb290fSwgJycsIHJldml2ZXIpXG5cdCAgICB9XG5cblx0ICAgIHJldHVybiByb290XG5cdH07XG5cblx0ZnVuY3Rpb24gaW50ZXJuYWxpemUgKGhvbGRlciwgbmFtZSwgcmV2aXZlcikge1xuXHQgICAgdmFyIHZhbHVlID0gaG9sZGVyW25hbWVdO1xuXHQgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIga2V5ID0gU3RyaW5nKGkpO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50ID0gaW50ZXJuYWxpemUodmFsdWUsIGtleSwgcmV2aXZlcik7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrZXldO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFsdWUsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVwbGFjZW1lbnQsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBrZXkkMSBpbiB2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50JDEgPSBpbnRlcm5hbGl6ZSh2YWx1ZSwga2V5JDEsIHJldml2ZXIpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50JDEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrZXkkMV07XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWx1ZSwga2V5JDEsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlcGxhY2VtZW50JDEsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiByZXZpdmVyLmNhbGwoaG9sZGVyLCBuYW1lLCB2YWx1ZSlcblx0fVxuXG5cdHZhciBsZXhTdGF0ZTtcblx0dmFyIGJ1ZmZlcjtcblx0dmFyIGRvdWJsZVF1b3RlO1xuXHR2YXIgc2lnbjtcblx0dmFyIGM7XG5cblx0ZnVuY3Rpb24gbGV4ICgpIHtcblx0ICAgIGxleFN0YXRlID0gJ2RlZmF1bHQnO1xuXHQgICAgYnVmZmVyID0gJyc7XG5cdCAgICBkb3VibGVRdW90ZSA9IGZhbHNlO1xuXHQgICAgc2lnbiA9IDE7XG5cblx0ICAgIGZvciAoOzspIHtcblx0ICAgICAgICBjID0gcGVlaygpO1xuXG5cdCAgICAgICAgLy8gVGhpcyBjb2RlIGlzIHVucmVhY2hhYmxlLlxuXHQgICAgICAgIC8vIGlmICghbGV4U3RhdGVzW2xleFN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkTGV4U3RhdGUobGV4U3RhdGUpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgdmFyIHRva2VuID0gbGV4U3RhdGVzW2xleFN0YXRlXSgpO1xuXHQgICAgICAgIGlmICh0b2tlbikge1xuXHQgICAgICAgICAgICByZXR1cm4gdG9rZW5cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblxuXHRmdW5jdGlvbiBwZWVrICgpIHtcblx0ICAgIGlmIChzb3VyY2VbcG9zXSkge1xuXHQgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChzb3VyY2UuY29kZVBvaW50QXQocG9zKSlcblx0ICAgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlYWQgKCkge1xuXHQgICAgdmFyIGMgPSBwZWVrKCk7XG5cblx0ICAgIGlmIChjID09PSAnXFxuJykge1xuXHQgICAgICAgIGxpbmUrKztcblx0ICAgICAgICBjb2x1bW4gPSAwO1xuXHQgICAgfSBlbHNlIGlmIChjKSB7XG5cdCAgICAgICAgY29sdW1uICs9IGMubGVuZ3RoO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb2x1bW4rKztcblx0ICAgIH1cblxuXHQgICAgaWYgKGMpIHtcblx0ICAgICAgICBwb3MgKz0gYy5sZW5ndGg7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBjXG5cdH1cblxuXHR2YXIgbGV4U3RhdGVzID0ge1xuXHQgICAgZGVmYXVsdDogZnVuY3Rpb24gZGVmYXVsdCQxICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdcXHQnOlxuXHQgICAgICAgIGNhc2UgJ1xcdic6XG5cdCAgICAgICAgY2FzZSAnXFxmJzpcblx0ICAgICAgICBjYXNlICcgJzpcblx0ICAgICAgICBjYXNlICdcXHUwMEEwJzpcblx0ICAgICAgICBjYXNlICdcXHVGRUZGJzpcblx0ICAgICAgICBjYXNlICdcXG4nOlxuXHQgICAgICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcvJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdjb21tZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ2VvZicpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNTcGFjZVNlcGFyYXRvcihjKSkge1xuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0ICAgICAgICAvLyBpZiAoIWxleFN0YXRlc1twYXJzZVN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkTGV4U3RhdGUocGFyc2VTdGF0ZSlcblx0ICAgICAgICAvLyB9XG5cblx0ICAgICAgICByZXR1cm4gbGV4U3RhdGVzW3BhcnNlU3RhdGVdKClcblx0ICAgIH0sXG5cblx0ICAgIGNvbW1lbnQ6IGZ1bmN0aW9uIGNvbW1lbnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJyonOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ211bHRpTGluZUNvbW1lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJy8nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ3NpbmdsZUxpbmVDb21tZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgbXVsdGlMaW5lQ29tbWVudDogZnVuY3Rpb24gbXVsdGlMaW5lQ29tbWVudCAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnKic6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnbXVsdGlMaW5lQ29tbWVudEFzdGVyaXNrJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgIH0sXG5cblx0ICAgIG11bHRpTGluZUNvbW1lbnRBc3RlcmlzazogZnVuY3Rpb24gbXVsdGlMaW5lQ29tbWVudEFzdGVyaXNrICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICcqJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJy8nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlZmF1bHQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIGxleFN0YXRlID0gJ211bHRpTGluZUNvbW1lbnQnO1xuXHQgICAgfSxcblxuXHQgICAgc2luZ2xlTGluZUNvbW1lbnQ6IGZ1bmN0aW9uIHNpbmdsZUxpbmVDb21tZW50ICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdcXG4nOlxuXHQgICAgICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVmYXVsdCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdlb2YnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgIH0sXG5cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAneyc6XG5cdCAgICAgICAgY2FzZSAnWyc6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbigncHVuY3R1YXRvcicsIHJlYWQoKSlcblxuXHQgICAgICAgIGNhc2UgJ24nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxpdGVyYWwoJ3VsbCcpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bGwnLCBudWxsKVxuXG5cdCAgICAgICAgY2FzZSAndCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGl0ZXJhbCgncnVlJyk7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbignYm9vbGVhbicsIHRydWUpXG5cblx0ICAgICAgICBjYXNlICdmJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhbHNlJyk7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbignYm9vbGVhbicsIGZhbHNlKVxuXG5cdCAgICAgICAgY2FzZSAnLSc6XG5cdCAgICAgICAgY2FzZSAnKyc6XG5cdCAgICAgICAgICAgIGlmIChyZWFkKCkgPT09ICctJykge1xuXHQgICAgICAgICAgICAgICAgc2lnbiA9IC0xO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnc2lnbic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnLic6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbFBvaW50TGVhZGluZyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnMCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnemVybyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnMSc6XG5cdCAgICAgICAgY2FzZSAnMic6XG5cdCAgICAgICAgY2FzZSAnMyc6XG5cdCAgICAgICAgY2FzZSAnNCc6XG5cdCAgICAgICAgY2FzZSAnNSc6XG5cdCAgICAgICAgY2FzZSAnNic6XG5cdCAgICAgICAgY2FzZSAnNyc6XG5cdCAgICAgICAgY2FzZSAnOCc6XG5cdCAgICAgICAgY2FzZSAnOSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ0knOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxpdGVyYWwoJ25maW5pdHknKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdudW1lcmljJywgSW5maW5pdHkpXG5cblx0ICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhTicpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBOYU4pXG5cblx0ICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgZG91YmxlUXVvdGUgPSAocmVhZCgpID09PSAnXCInKTtcblx0ICAgICAgICAgICAgYnVmZmVyID0gJyc7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ3N0cmluZyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGU6IGZ1bmN0aW9uIGlkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGUgKCkge1xuXHQgICAgICAgIGlmIChjICE9PSAndScpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICB2YXIgdSA9IHVuaWNvZGVFc2NhcGUoKTtcblx0ICAgICAgICBzd2l0Y2ggKHUpIHtcblx0ICAgICAgICBjYXNlICckJzpcblx0ICAgICAgICBjYXNlICdfJzpcblx0ICAgICAgICAgICAgYnJlYWtcblxuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIGlmICghdXRpbC5pc0lkU3RhcnRDaGFyKHUpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBpbnZhbGlkSWRlbnRpZmllcigpXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBicmVha1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSB1O1xuXHQgICAgICAgIGxleFN0YXRlID0gJ2lkZW50aWZpZXJOYW1lJztcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lOiBmdW5jdGlvbiBpZGVudGlmaWVyTmFtZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnJCc6XG5cdCAgICAgICAgY2FzZSAnXyc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAwQyc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAwRCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnXFxcXCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWVFc2NhcGUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0lkQ29udGludWVDaGFyKGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignaWRlbnRpZmllcicsIGJ1ZmZlcilcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lRXNjYXBlOiBmdW5jdGlvbiBpZGVudGlmaWVyTmFtZUVzY2FwZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgIT09ICd1Jykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHZhciB1ID0gdW5pY29kZUVzY2FwZSgpO1xuXHQgICAgICAgIHN3aXRjaCAodSkge1xuXHQgICAgICAgIGNhc2UgJyQnOlxuXHQgICAgICAgIGNhc2UgJ18nOlxuXHQgICAgICAgIGNhc2UgJ1xcdTIwMEMnOlxuXHQgICAgICAgIGNhc2UgJ1xcdTIwMEQnOlxuXHQgICAgICAgICAgICBicmVha1xuXG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgaWYgKCF1dGlsLmlzSWRDb250aW51ZUNoYXIodSkpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IGludmFsaWRJZGVudGlmaWVyKClcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgYnVmZmVyICs9IHU7XG5cdCAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWUnO1xuXHQgICAgfSxcblxuXHQgICAgc2lnbjogZnVuY3Rpb24gc2lnbiQxICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICcuJzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsUG9pbnRMZWFkaW5nJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcwJzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICd6ZXJvJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcxJzpcblx0ICAgICAgICBjYXNlICcyJzpcblx0ICAgICAgICBjYXNlICczJzpcblx0ICAgICAgICBjYXNlICc0Jzpcblx0ICAgICAgICBjYXNlICc1Jzpcblx0ICAgICAgICBjYXNlICc2Jzpcblx0ICAgICAgICBjYXNlICc3Jzpcblx0ICAgICAgICBjYXNlICc4Jzpcblx0ICAgICAgICBjYXNlICc5Jzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsSW50ZWdlcic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnSSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGl0ZXJhbCgnbmZpbml0eScpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogSW5maW5pdHkpXG5cblx0ICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhTicpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBOYU4pXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgemVybzogZnVuY3Rpb24gemVybyAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnLic6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxQb2ludCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnZSc6XG5cdCAgICAgICAgY2FzZSAnRSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAneCc6XG5cdCAgICAgICAgY2FzZSAnWCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2hleGFkZWNpbWFsJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdudW1lcmljJywgc2lnbiAqIDApXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsSW50ZWdlcjogZnVuY3Rpb24gZGVjaW1hbEludGVnZXIgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJy4nOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsUG9pbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ2UnOlxuXHQgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsRXhwb25lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGRlY2ltYWxQb2ludExlYWRpbmc6IGZ1bmN0aW9uIGRlY2ltYWxQb2ludExlYWRpbmcgKCkge1xuXHQgICAgICAgIGlmICh1dGlsLmlzRGlnaXQoYykpIHtcblx0ICAgICAgICAgICAgYnVmZmVyICs9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEZyYWN0aW9uJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgZGVjaW1hbFBvaW50OiBmdW5jdGlvbiBkZWNpbWFsUG9pbnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJ2UnOlxuXHQgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsRXhwb25lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxGcmFjdGlvbic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGRlY2ltYWxGcmFjdGlvbjogZnVuY3Rpb24gZGVjaW1hbEZyYWN0aW9uICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdlJzpcblx0ICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgYnVmZmVyICs9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEV4cG9uZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogTnVtYmVyKGJ1ZmZlcikpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnQ6IGZ1bmN0aW9uIGRlY2ltYWxFeHBvbmVudCAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnKyc6XG5cdCAgICAgICAgY2FzZSAnLSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudFNpZ24nO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnRTaWduOiBmdW5jdGlvbiBkZWNpbWFsRXhwb25lbnRTaWduICgpIHtcblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnRJbnRlZ2VyOiBmdW5jdGlvbiBkZWNpbWFsRXhwb25lbnRJbnRlZ2VyICgpIHtcblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGhleGFkZWNpbWFsOiBmdW5jdGlvbiBoZXhhZGVjaW1hbCAoKSB7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNIZXhEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdoZXhhZGVjaW1hbEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBoZXhhZGVjaW1hbEludGVnZXI6IGZ1bmN0aW9uIGhleGFkZWNpbWFsSW50ZWdlciAoKSB7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNIZXhEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogTnVtYmVyKGJ1ZmZlcikpXG5cdCAgICB9LFxuXG5cdCAgICBzdHJpbmc6IGZ1bmN0aW9uIHN0cmluZyAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnXFxcXCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgYnVmZmVyICs9IGVzY2FwZSgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1wiJzpcblx0ICAgICAgICAgICAgaWYgKGRvdWJsZVF1b3RlKSB7XG5cdCAgICAgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3N0cmluZycsIGJ1ZmZlcilcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgaWYgKCFkb3VibGVRdW90ZSkge1xuXHQgICAgICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdzdHJpbmcnLCBidWZmZXIpXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1xcbic6XG5cdCAgICAgICAgY2FzZSAnXFxyJzpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHNlcGFyYXRvckNoYXIoYyk7XG5cdCAgICAgICAgICAgIGJyZWFrXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICB9LFxuXG5cdCAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJ3snOlxuXHQgICAgICAgIGNhc2UgJ1snOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgdGhlIGRlZmF1bHQgbGV4U3RhdGUgaGFuZGxlcyBlb2YuXG5cdCAgICAgICAgLy8gY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgLy8gICAgIHJldHVybiBuZXdUb2tlbignZW9mJylcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBsZXhTdGF0ZSA9ICd2YWx1ZSc7XG5cdCAgICB9LFxuXG5cdCAgICBiZWZvcmVQcm9wZXJ0eU5hbWU6IGZ1bmN0aW9uIGJlZm9yZVByb3BlcnR5TmFtZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnJCc6XG5cdCAgICAgICAgY2FzZSAnXyc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1xcXFwnOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2lkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cblx0ICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgZG91YmxlUXVvdGUgPSAocmVhZCgpID09PSAnXCInKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnc3RyaW5nJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNJZFN0YXJ0Q2hhcihjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdpZGVudGlmaWVyTmFtZSc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cblx0ICAgIGFmdGVyUHJvcGVydHlOYW1lOiBmdW5jdGlvbiBhZnRlclByb3BlcnR5TmFtZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgPT09ICc6Jykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlWYWx1ZSAoKSB7XG5cdCAgICAgICAgbGV4U3RhdGUgPSAndmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiBhZnRlclByb3BlcnR5VmFsdWUgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlQXJyYXlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlQXJyYXlWYWx1ZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgPT09ICddJykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgbGV4U3RhdGUgPSAndmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJBcnJheVZhbHVlOiBmdW5jdGlvbiBhZnRlckFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgIGNhc2UgJ10nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgZW5kOiBmdW5jdGlvbiBlbmQgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGRlZmF1bHQgbGV4U3RhdGUuXG5cdCAgICAgICAgLy8gaWYgKGMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIC8vICAgICByZWFkKClcblx0ICAgICAgICAvLyAgICAgcmV0dXJuIG5ld1Rva2VuKCdlb2YnKVxuXHQgICAgICAgIC8vIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cdH07XG5cblx0ZnVuY3Rpb24gbmV3VG9rZW4gKHR5cGUsIHZhbHVlKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIHR5cGU6IHR5cGUsXG5cdCAgICAgICAgdmFsdWU6IHZhbHVlLFxuXHQgICAgICAgIGxpbmU6IGxpbmUsXG5cdCAgICAgICAgY29sdW1uOiBjb2x1bW4sXG5cdCAgICB9XG5cdH1cblxuXHRmdW5jdGlvbiBsaXRlcmFsIChzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICAgICAgdmFyIGMgPSBsaXN0W2ldO1xuXG5cdCAgICAgICAgdmFyIHAgPSBwZWVrKCk7XG5cblx0ICAgICAgICBpZiAocCAhPT0gYykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gZXNjYXBlICgpIHtcblx0ICAgIHZhciBjID0gcGVlaygpO1xuXHQgICAgc3dpdGNoIChjKSB7XG5cdCAgICBjYXNlICdiJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICdcXGInXG5cblx0ICAgIGNhc2UgJ2YnOlxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICByZXR1cm4gJ1xcZidcblxuXHQgICAgY2FzZSAnbic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiAnXFxuJ1xuXG5cdCAgICBjYXNlICdyJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICdcXHInXG5cblx0ICAgIGNhc2UgJ3QnOlxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICByZXR1cm4gJ1xcdCdcblxuXHQgICAgY2FzZSAndic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiAnXFx2J1xuXG5cdCAgICBjYXNlICcwJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNEaWdpdChwZWVrKCkpKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gJ1xcMCdcblxuXHQgICAgY2FzZSAneCc6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiBoZXhFc2NhcGUoKVxuXG5cdCAgICBjYXNlICd1Jzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuIHVuaWNvZGVFc2NhcGUoKVxuXG5cdCAgICBjYXNlICdcXG4nOlxuXHQgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICBjYXNlICdcXHUyMDI5Jzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICcnXG5cblx0ICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIGlmIChwZWVrKCkgPT09ICdcXG4nKSB7XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gJydcblxuXHQgICAgY2FzZSAnMSc6XG5cdCAgICBjYXNlICcyJzpcblx0ICAgIGNhc2UgJzMnOlxuXHQgICAgY2FzZSAnNCc6XG5cdCAgICBjYXNlICc1Jzpcblx0ICAgIGNhc2UgJzYnOlxuXHQgICAgY2FzZSAnNyc6XG5cdCAgICBjYXNlICc4Jzpcblx0ICAgIGNhc2UgJzknOlxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblxuXHQgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfVxuXG5cdCAgICByZXR1cm4gcmVhZCgpXG5cdH1cblxuXHRmdW5jdGlvbiBoZXhFc2NhcGUgKCkge1xuXHQgICAgdmFyIGJ1ZmZlciA9ICcnO1xuXHQgICAgdmFyIGMgPSBwZWVrKCk7XG5cblx0ICAgIGlmICghdXRpbC5pc0hleERpZ2l0KGMpKSB7XG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfVxuXG5cdCAgICBidWZmZXIgKz0gcmVhZCgpO1xuXG5cdCAgICBjID0gcGVlaygpO1xuXHQgICAgaWYgKCF1dGlsLmlzSGV4RGlnaXQoYykpIHtcblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9XG5cblx0ICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cblx0ICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChwYXJzZUludChidWZmZXIsIDE2KSlcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaWNvZGVFc2NhcGUgKCkge1xuXHQgICAgdmFyIGJ1ZmZlciA9ICcnO1xuXHQgICAgdmFyIGNvdW50ID0gNDtcblxuXHQgICAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG5cdCAgICAgICAgdmFyIGMgPSBwZWVrKCk7XG5cdCAgICAgICAgaWYgKCF1dGlsLmlzSGV4RGlnaXQoYykpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChwYXJzZUludChidWZmZXIsIDE2KSlcblx0fVxuXG5cdHZhciBwYXJzZVN0YXRlcyA9IHtcblx0ICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCAoKSB7XG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGJlZm9yZVByb3BlcnR5TmFtZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlOYW1lICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcblx0ICAgICAgICBjYXNlICdpZGVudGlmaWVyJzpcblx0ICAgICAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICAgICAgICBrZXkgPSB0b2tlbi52YWx1ZTtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdhZnRlclByb3BlcnR5TmFtZSc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAncHVuY3R1YXRvcic6XG5cdCAgICAgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgICAgICAvLyBpZiAodG9rZW4udmFsdWUgIT09ICd9Jykge1xuXHQgICAgICAgICAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgICAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgICAgIHBvcCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ2VvZic6XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIHRocm93IGludmFsaWRUb2tlbigpXG5cdCAgICB9LFxuXG5cdCAgICBhZnRlclByb3BlcnR5TmFtZTogZnVuY3Rpb24gYWZ0ZXJQcm9wZXJ0eU5hbWUgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAncHVuY3R1YXRvcicgfHwgdG9rZW4udmFsdWUgIT09ICc6Jykge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgICAgIC8vIH1cblxuXHQgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRU9GKClcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZVByb3BlcnR5VmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlWYWx1ZSAoKSB7XG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGJlZm9yZUFycmF5VmFsdWU6IGZ1bmN0aW9uIGJlZm9yZUFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRU9GKClcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3B1bmN0dWF0b3InICYmIHRva2VuLnZhbHVlID09PSAnXScpIHtcblx0ICAgICAgICAgICAgcG9wKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGFmdGVyUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYWZ0ZXJQcm9wZXJ0eVZhbHVlICgpIHtcblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyBpZiAodG9rZW4udHlwZSAhPT0gJ3B1bmN0dWF0b3InKSB7XG5cdCAgICAgICAgLy8gICAgIHRocm93IGludmFsaWRUb2tlbigpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHtcblx0ICAgICAgICBjYXNlICcsJzpcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdiZWZvcmVQcm9wZXJ0eU5hbWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICBwb3AoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJBcnJheVZhbHVlOiBmdW5jdGlvbiBhZnRlckFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAncHVuY3R1YXRvcicpIHtcblx0ICAgICAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgICAgICAvLyB9XG5cblx0ICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2VvZicpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZEVPRigpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZUFycmF5VmFsdWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ10nOlxuXHQgICAgICAgICAgICBwb3AoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgfSxcblxuXHQgICAgZW5kOiBmdW5jdGlvbiBlbmQgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAnZW9mJykge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgICAgIC8vIH1cblx0ICAgIH0sXG5cdH07XG5cblx0ZnVuY3Rpb24gcHVzaCAoKSB7XG5cdCAgICB2YXIgdmFsdWU7XG5cblx0ICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuXHQgICAgY2FzZSAncHVuY3R1YXRvcic6XG5cdCAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgJ3snOlxuXHQgICAgICAgICAgICB2YWx1ZSA9IHt9O1xuXHQgICAgICAgICAgICBicmVha1xuXG5cdCAgICAgICAgY2FzZSAnWyc6XG5cdCAgICAgICAgICAgIHZhbHVlID0gW107XG5cdCAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgYnJlYWtcblxuXHQgICAgY2FzZSAnbnVsbCc6XG5cdCAgICBjYXNlICdib29sZWFuJzpcblx0ICAgIGNhc2UgJ251bWVyaWMnOlxuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIGJyZWFrXG5cblx0ICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0ICAgIC8vIGRlZmF1bHQ6XG5cdCAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgIH1cblxuXHQgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJvb3QgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgICAgICAgcGFyZW50LnB1c2godmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJlbnQsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuXHQgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgc3RhY2sucHVzaCh2YWx1ZSk7XG5cblx0ICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdiZWZvcmVBcnJheVZhbHVlJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZVByb3BlcnR5TmFtZSc7XG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgY3VycmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdlbmQnO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50KSkge1xuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2FmdGVyQXJyYXlWYWx1ZSc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdhZnRlclByb3BlcnR5VmFsdWUnO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHBvcCAoKSB7XG5cdCAgICBzdGFjay5wb3AoKTtcblxuXHQgICAgdmFyIGN1cnJlbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2VuZCc7XG5cdCAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudCkpIHtcblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2FmdGVyQXJyYXlWYWx1ZSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHBhcnNlU3RhdGUgPSAnYWZ0ZXJQcm9wZXJ0eVZhbHVlJztcblx0ICAgIH1cblx0fVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZFBhcnNlU3RhdGUgKCkge1xuXHQvLyAgICAgcmV0dXJuIG5ldyBFcnJvcihgSlNPTjU6IGludmFsaWQgcGFyc2Ugc3RhdGUgJyR7cGFyc2VTdGF0ZX0nYClcblx0Ly8gfVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZExleFN0YXRlIChzdGF0ZSkge1xuXHQvLyAgICAgcmV0dXJuIG5ldyBFcnJvcihgSlNPTjU6IGludmFsaWQgbGV4IHN0YXRlICcke3N0YXRlfSdgKVxuXHQvLyB9XG5cblx0ZnVuY3Rpb24gaW52YWxpZENoYXIgKGMpIHtcblx0ICAgIGlmIChjID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gc3ludGF4RXJyb3IoKFwiSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHN5bnRheEVycm9yKChcIkpTT041OiBpbnZhbGlkIGNoYXJhY3RlciAnXCIgKyAoZm9ybWF0Q2hhcihjKSkgKyBcIicgYXQgXCIgKyBsaW5lICsgXCI6XCIgKyBjb2x1bW4pKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW52YWxpZEVPRiAoKSB7XG5cdCAgICByZXR1cm4gc3ludGF4RXJyb3IoKFwiSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0fVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZFRva2VuICgpIHtcblx0Ly8gICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQvLyAgICAgICAgIHJldHVybiBzeW50YXhFcnJvcihgSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0ICR7bGluZX06JHtjb2x1bW59YClcblx0Ly8gICAgIH1cblxuXHQvLyAgICAgY29uc3QgYyA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHRva2VuLnZhbHVlLmNvZGVQb2ludEF0KDApKVxuXHQvLyAgICAgcmV0dXJuIHN5bnRheEVycm9yKGBKU09ONTogaW52YWxpZCBjaGFyYWN0ZXIgJyR7Zm9ybWF0Q2hhcihjKX0nIGF0ICR7bGluZX06JHtjb2x1bW59YClcblx0Ly8gfVxuXG5cdGZ1bmN0aW9uIGludmFsaWRJZGVudGlmaWVyICgpIHtcblx0ICAgIGNvbHVtbiAtPSA1O1xuXHQgICAgcmV0dXJuIHN5bnRheEVycm9yKChcIkpTT041OiBpbnZhbGlkIGlkZW50aWZpZXIgY2hhcmFjdGVyIGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0fVxuXG5cdGZ1bmN0aW9uIHNlcGFyYXRvckNoYXIgKGMpIHtcblx0ICAgIGNvbnNvbGUud2FybigoXCJKU09ONTogJ1wiICsgKGZvcm1hdENoYXIoYykpICsgXCInIGluIHN0cmluZ3MgaXMgbm90IHZhbGlkIEVDTUFTY3JpcHQ7IGNvbnNpZGVyIGVzY2FwaW5nXCIpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdENoYXIgKGMpIHtcblx0ICAgIHZhciByZXBsYWNlbWVudHMgPSB7XG5cdCAgICAgICAgXCInXCI6IFwiXFxcXCdcIixcblx0ICAgICAgICAnXCInOiAnXFxcXFwiJyxcblx0ICAgICAgICAnXFxcXCc6ICdcXFxcXFxcXCcsXG5cdCAgICAgICAgJ1xcYic6ICdcXFxcYicsXG5cdCAgICAgICAgJ1xcZic6ICdcXFxcZicsXG5cdCAgICAgICAgJ1xcbic6ICdcXFxcbicsXG5cdCAgICAgICAgJ1xccic6ICdcXFxccicsXG5cdCAgICAgICAgJ1xcdCc6ICdcXFxcdCcsXG5cdCAgICAgICAgJ1xcdic6ICdcXFxcdicsXG5cdCAgICAgICAgJ1xcMCc6ICdcXFxcMCcsXG5cdCAgICAgICAgJ1xcdTIwMjgnOiAnXFxcXHUyMDI4Jyxcblx0ICAgICAgICAnXFx1MjAyOSc6ICdcXFxcdTIwMjknLFxuXHQgICAgfTtcblxuXHQgICAgaWYgKHJlcGxhY2VtZW50c1tjXSkge1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlbWVudHNbY11cblx0ICAgIH1cblxuXHQgICAgaWYgKGMgPCAnICcpIHtcblx0ICAgICAgICB2YXIgaGV4U3RyaW5nID0gYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTtcblx0ICAgICAgICByZXR1cm4gJ1xcXFx4JyArICgnMDAnICsgaGV4U3RyaW5nKS5zdWJzdHJpbmcoaGV4U3RyaW5nLmxlbmd0aClcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIGNcblx0fVxuXG5cdGZ1bmN0aW9uIHN5bnRheEVycm9yIChtZXNzYWdlKSB7XG5cdCAgICB2YXIgZXJyID0gbmV3IFN5bnRheEVycm9yKG1lc3NhZ2UpO1xuXHQgICAgZXJyLmxpbmVOdW1iZXIgPSBsaW5lO1xuXHQgICAgZXJyLmNvbHVtbk51bWJlciA9IGNvbHVtbjtcblx0ICAgIHJldHVybiBlcnJcblx0fVxuXG5cdHZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiBzdHJpbmdpZnkgKHZhbHVlLCByZXBsYWNlciwgc3BhY2UpIHtcblx0ICAgIHZhciBzdGFjayA9IFtdO1xuXHQgICAgdmFyIGluZGVudCA9ICcnO1xuXHQgICAgdmFyIHByb3BlcnR5TGlzdDtcblx0ICAgIHZhciByZXBsYWNlckZ1bmM7XG5cdCAgICB2YXIgZ2FwID0gJyc7XG5cdCAgICB2YXIgcXVvdGU7XG5cblx0ICAgIGlmIChcblx0ICAgICAgICByZXBsYWNlciAhPSBudWxsICYmXG5cdCAgICAgICAgdHlwZW9mIHJlcGxhY2VyID09PSAnb2JqZWN0JyAmJlxuXHQgICAgICAgICFBcnJheS5pc0FycmF5KHJlcGxhY2VyKVxuXHQgICAgKSB7XG5cdCAgICAgICAgc3BhY2UgPSByZXBsYWNlci5zcGFjZTtcblx0ICAgICAgICBxdW90ZSA9IHJlcGxhY2VyLnF1b3RlO1xuXHQgICAgICAgIHJlcGxhY2VyID0gcmVwbGFjZXIucmVwbGFjZXI7XG5cdCAgICB9XG5cblx0ICAgIGlmICh0eXBlb2YgcmVwbGFjZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXBsYWNlckZ1bmMgPSByZXBsYWNlcjtcblx0ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXBsYWNlcikpIHtcblx0ICAgICAgICBwcm9wZXJ0eUxpc3QgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHJlcGxhY2VyOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgICAgICAgICB2YXIgdiA9IGxpc3RbaV07XG5cblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSAodm9pZCAwKTtcblxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgICAgICBpdGVtID0gdjtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICAgICAgICAgdiBpbnN0YW5jZW9mIFN0cmluZyB8fFxuXHQgICAgICAgICAgICAgICAgdiBpbnN0YW5jZW9mIE51bWJlclxuXHQgICAgICAgICAgICApIHtcblx0ICAgICAgICAgICAgICAgIGl0ZW0gPSBTdHJpbmcodik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoaXRlbSAhPT0gdW5kZWZpbmVkICYmIHByb3BlcnR5TGlzdC5pbmRleE9mKGl0ZW0pIDwgMCkge1xuXHQgICAgICAgICAgICAgICAgcHJvcGVydHlMaXN0LnB1c2goaXRlbSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChzcGFjZSBpbnN0YW5jZW9mIE51bWJlcikge1xuXHQgICAgICAgIHNwYWNlID0gTnVtYmVyKHNwYWNlKTtcblx0ICAgIH0gZWxzZSBpZiAoc3BhY2UgaW5zdGFuY2VvZiBTdHJpbmcpIHtcblx0ICAgICAgICBzcGFjZSA9IFN0cmluZyhzcGFjZSk7XG5cdCAgICB9XG5cblx0ICAgIGlmICh0eXBlb2Ygc3BhY2UgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgaWYgKHNwYWNlID4gMCkge1xuXHQgICAgICAgICAgICBzcGFjZSA9IE1hdGgubWluKDEwLCBNYXRoLmZsb29yKHNwYWNlKSk7XG5cdCAgICAgICAgICAgIGdhcCA9ICcgICAgICAgICAgJy5zdWJzdHIoMCwgc3BhY2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwYWNlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIGdhcCA9IHNwYWNlLnN1YnN0cigwLCAxMCk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBzZXJpYWxpemVQcm9wZXJ0eSgnJywgeycnOiB2YWx1ZX0pXG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZVByb3BlcnR5IChrZXksIGhvbGRlcikge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IGhvbGRlcltrZXldO1xuXHQgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUudG9KU09ONSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT041KGtleSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT04oa2V5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChyZXBsYWNlckZ1bmMpIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSByZXBsYWNlckZ1bmMuY2FsbChob2xkZXIsIGtleSwgdmFsdWUpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEJvb2xlYW4pIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgbnVsbDogcmV0dXJuICdudWxsJ1xuXHQgICAgICAgIGNhc2UgdHJ1ZTogcmV0dXJuICd0cnVlJ1xuXHQgICAgICAgIGNhc2UgZmFsc2U6IHJldHVybiAnZmFsc2UnXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHF1b3RlU3RyaW5nKHZhbHVlLCBmYWxzZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHNlcmlhbGl6ZUFycmF5KHZhbHVlKSA6IHNlcmlhbGl6ZU9iamVjdCh2YWx1ZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHF1b3RlU3RyaW5nICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBxdW90ZXMgPSB7XG5cdCAgICAgICAgICAgIFwiJ1wiOiAwLjEsXG5cdCAgICAgICAgICAgICdcIic6IDAuMixcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIHJlcGxhY2VtZW50cyA9IHtcblx0ICAgICAgICAgICAgXCInXCI6IFwiXFxcXCdcIixcblx0ICAgICAgICAgICAgJ1wiJzogJ1xcXFxcIicsXG5cdCAgICAgICAgICAgICdcXFxcJzogJ1xcXFxcXFxcJyxcblx0ICAgICAgICAgICAgJ1xcYic6ICdcXFxcYicsXG5cdCAgICAgICAgICAgICdcXGYnOiAnXFxcXGYnLFxuXHQgICAgICAgICAgICAnXFxuJzogJ1xcXFxuJyxcblx0ICAgICAgICAgICAgJ1xccic6ICdcXFxccicsXG5cdCAgICAgICAgICAgICdcXHQnOiAnXFxcXHQnLFxuXHQgICAgICAgICAgICAnXFx2JzogJ1xcXFx2Jyxcblx0ICAgICAgICAgICAgJ1xcMCc6ICdcXFxcMCcsXG5cdCAgICAgICAgICAgICdcXHUyMDI4JzogJ1xcXFx1MjAyOCcsXG5cdCAgICAgICAgICAgICdcXHUyMDI5JzogJ1xcXFx1MjAyOScsXG5cdCAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBwcm9kdWN0ID0gJyc7XG5cblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBjID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgICAgICBjYXNlIFwiJ1wiOlxuXHQgICAgICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgICAgICAgICBxdW90ZXNbY10rKztcblx0ICAgICAgICAgICAgICAgIHByb2R1Y3QgKz0gYztcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cblx0ICAgICAgICAgICAgY2FzZSAnXFwwJzpcblx0ICAgICAgICAgICAgICAgIGlmICh1dGlsLmlzRGlnaXQodmFsdWVbaSArIDFdKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QgKz0gJ1xcXFx4MDAnO1xuXHQgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnRzW2NdKSB7XG5cdCAgICAgICAgICAgICAgICBwcm9kdWN0ICs9IHJlcGxhY2VtZW50c1tjXTtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoYyA8ICcgJykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGhleFN0cmluZyA9IGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG5cdCAgICAgICAgICAgICAgICBwcm9kdWN0ICs9ICdcXFxceCcgKyAoJzAwJyArIGhleFN0cmluZykuc3Vic3RyaW5nKGhleFN0cmluZy5sZW5ndGgpO1xuXHQgICAgICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHByb2R1Y3QgKz0gYztcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgcXVvdGVDaGFyID0gcXVvdGUgfHwgT2JqZWN0LmtleXMocXVvdGVzKS5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIChxdW90ZXNbYV0gPCBxdW90ZXNbYl0pID8gYSA6IGI7IH0pO1xuXG5cdCAgICAgICAgcHJvZHVjdCA9IHByb2R1Y3QucmVwbGFjZShuZXcgUmVnRXhwKHF1b3RlQ2hhciwgJ2cnKSwgcmVwbGFjZW1lbnRzW3F1b3RlQ2hhcl0pO1xuXG5cdCAgICAgICAgcmV0dXJuIHF1b3RlQ2hhciArIHByb2R1Y3QgKyBxdW90ZUNoYXJcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gc2VyaWFsaXplT2JqZWN0ICh2YWx1ZSkge1xuXHQgICAgICAgIGlmIChzdGFjay5pbmRleE9mKHZhbHVlKSA+PSAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignQ29udmVydGluZyBjaXJjdWxhciBzdHJ1Y3R1cmUgdG8gSlNPTjUnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG5cdCAgICAgICAgdmFyIHN0ZXBiYWNrID0gaW5kZW50O1xuXHQgICAgICAgIGluZGVudCA9IGluZGVudCArIGdhcDtcblxuXHQgICAgICAgIHZhciBrZXlzID0gcHJvcGVydHlMaXN0IHx8IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICAgICAgICB2YXIgcGFydGlhbCA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0ga2V5czsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcblx0ICAgICAgICAgICAgdmFyIGtleSA9IGxpc3RbaV07XG5cblx0ICAgICAgICAgICAgdmFyIHByb3BlcnR5U3RyaW5nID0gc2VyaWFsaXplUHJvcGVydHkoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChwcm9wZXJ0eVN0cmluZyAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gc2VyaWFsaXplS2V5KGtleSkgKyAnOic7XG5cdCAgICAgICAgICAgICAgICBpZiAoZ2FwICE9PSAnJykge1xuXHQgICAgICAgICAgICAgICAgICAgIG1lbWJlciArPSAnICc7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBtZW1iZXIgKz0gcHJvcGVydHlTdHJpbmc7XG5cdCAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gobWVtYmVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciBmaW5hbDtcblx0ICAgICAgICBpZiAocGFydGlhbC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgZmluYWwgPSAne30nO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzO1xuXHQgICAgICAgICAgICBpZiAoZ2FwID09PSAnJykge1xuXHQgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IHBhcnRpYWwuam9pbignLCcpO1xuXHQgICAgICAgICAgICAgICAgZmluYWwgPSAneycgKyBwcm9wZXJ0aWVzICsgJ30nO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHNlcGFyYXRvciA9ICcsXFxuJyArIGluZGVudDtcblx0ICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBwYXJ0aWFsLmpvaW4oc2VwYXJhdG9yKTtcblx0ICAgICAgICAgICAgICAgIGZpbmFsID0gJ3tcXG4nICsgaW5kZW50ICsgcHJvcGVydGllcyArICcsXFxuJyArIHN0ZXBiYWNrICsgJ30nO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICAgICAgaW5kZW50ID0gc3RlcGJhY2s7XG5cdCAgICAgICAgcmV0dXJuIGZpbmFsXG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUtleSAoa2V5KSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHF1b3RlU3RyaW5nKGtleSwgdHJ1ZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgZmlyc3RDaGFyID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoa2V5LmNvZGVQb2ludEF0KDApKTtcblx0ICAgICAgICBpZiAoIXV0aWwuaXNJZFN0YXJ0Q2hhcihmaXJzdENoYXIpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBxdW90ZVN0cmluZyhrZXksIHRydWUpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0Q2hhci5sZW5ndGg7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgaWYgKCF1dGlsLmlzSWRDb250aW51ZUNoYXIoU3RyaW5nLmZyb21Db2RlUG9pbnQoa2V5LmNvZGVQb2ludEF0KGkpKSkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBxdW90ZVN0cmluZyhrZXksIHRydWUpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4ga2V5XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5ICh2YWx1ZSkge1xuXHQgICAgICAgIGlmIChzdGFjay5pbmRleE9mKHZhbHVlKSA+PSAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignQ29udmVydGluZyBjaXJjdWxhciBzdHJ1Y3R1cmUgdG8gSlNPTjUnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG5cdCAgICAgICAgdmFyIHN0ZXBiYWNrID0gaW5kZW50O1xuXHQgICAgICAgIGluZGVudCA9IGluZGVudCArIGdhcDtcblxuXHQgICAgICAgIHZhciBwYXJ0aWFsID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgcHJvcGVydHlTdHJpbmcgPSBzZXJpYWxpemVQcm9wZXJ0eShTdHJpbmcoaSksIHZhbHVlKTtcblx0ICAgICAgICAgICAgcGFydGlhbC5wdXNoKChwcm9wZXJ0eVN0cmluZyAhPT0gdW5kZWZpbmVkKSA/IHByb3BlcnR5U3RyaW5nIDogJ251bGwnKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgZmluYWw7XG5cdCAgICAgICAgaWYgKHBhcnRpYWwubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIGZpbmFsID0gJ1tdJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoZ2FwID09PSAnJykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBwYXJ0aWFsLmpvaW4oJywnKTtcblx0ICAgICAgICAgICAgICAgIGZpbmFsID0gJ1snICsgcHJvcGVydGllcyArICddJztcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnLFxcbicgKyBpbmRlbnQ7XG5cdCAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyQxID0gcGFydGlhbC5qb2luKHNlcGFyYXRvcik7XG5cdCAgICAgICAgICAgICAgICBmaW5hbCA9ICdbXFxuJyArIGluZGVudCArIHByb3BlcnRpZXMkMSArICcsXFxuJyArIHN0ZXBiYWNrICsgJ10nO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICAgICAgaW5kZW50ID0gc3RlcGJhY2s7XG5cdCAgICAgICAgcmV0dXJuIGZpbmFsXG5cdCAgICB9XG5cdH07XG5cblx0dmFyIEpTT041ID0ge1xuXHQgICAgcGFyc2U6IHBhcnNlLFxuXHQgICAgc3RyaW5naWZ5OiBzdHJpbmdpZnksXG5cdH07XG5cblx0dmFyIGxpYiA9IEpTT041O1xuXG5cdHZhciBlczUgPSBsaWI7XG5cblx0cmV0dXJuIGVzNTtcblxufSkpKTtcbiIsICIvLyBpbXBvcnQgeyBNZXRhUGFyc2VyIH0gZnJvbSAnbWV0YVBhcnNlcic7XHJcbmltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIFBsdWdpbiwgaHRtbFRvTWFya2Rvd24sIE5vdGljZSwgTWFya2Rvd25WaWV3LCBNYXJrZG93bkVkaXRWaWV3LCBNZW51LCBNZW51SXRlbSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2hlZXRTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBTaGVldEVsZW1lbnQgfSBmcm9tICcuL3NoZWV0RWxlbWVudCc7XHJcbmltcG9ydCAqIGFzIEpTT041IGZyb20gJ2pzb241JztcclxuaW1wb3J0IHsgTWFya2Rvd25UYWJsZURldGVjdG9yIH0gZnJvbSAnLi9tYXJrZG93blRhYmxlRGV0ZWN0b3InO1xyXG5pbXBvcnQgeyBUYWJsZUlkTWFuYWdlciB9IGZyb20gJy4vdGFibGVJZE1hbmFnZXInO1xyXG5pbXBvcnQgeyBUYWJsZVRvb2xiYXIgfSBmcm9tICcuL3RhYmxlVG9vbGJhcic7XHJcbmltcG9ydCB7IE1hcmtkb3duU291cmNlRWRpdG9yIH0gZnJvbSAnLi9tYXJrZG93blNvdXJjZUVkaXRvcic7XHJcbmltcG9ydCB7IGxvYWRJY29ucyB9IGZyb20gJy4vaWNvbnMnO1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEFwcCwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHNldHVwUHJldmlld01vZGVUYWJsZVNlbGVjdGlvbiB9IGZyb20gJy4vc2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uJztcclxuaW1wb3J0IHsgcmVuZGVyVGFibGVzV2l0aFN0b3JlZFN0eWxlcyB9IGZyb20gJy4vdGFibGVTdHlsZVJlbmRlcmVyJztcclxuaW1wb3J0IHsgVGFibGVSZXNpemVyIH0gZnJvbSAnLi90YWJsZVJlc2l6ZXInO1xyXG5pbXBvcnQgeyBUYWJsZURhdGFFeHRyYWN0b3IgfSBmcm9tICcuL3RhYmxlRGF0YUV4dHJhY3Rvcic7XHJcblxyXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xyXG5cdG5hdGl2ZVByb2Nlc3Npbmc6IGJvb2xlYW47XHJcblx0cGFyYWdyYXBoczogYm9vbGVhbjtcclxuXHRlbmFibGVDZWxsTWVyZ2luZzogYm9vbGVhbjtcclxuXHRjb25maXJtTWVyZ2VOb25FbXB0eTogYm9vbGVhbjtcclxuXHRlbmFibGVUYWJsZUlkczogYm9vbGVhbjtcclxuXHRpZFByZWZpeDogc3RyaW5nO1xyXG5cdGF1dG9DZW50ZXJNZXJnZWRDZWxsczogYm9vbGVhbjtcclxuXHR0b29sYmFyRW5hYmxlZDogYm9vbGVhbjtcclxuXHRlbmFibGVFZGl0TW9kZU9wZXJhdGlvbnM6IGJvb2xlYW47XHJcblx0dXNlVGFibGVXcmFwcGVyQ29tbWVudHM6IGJvb2xlYW47IC8vIFx1NEY3Rlx1NzUyOFx1ODg2OFx1NjgzQ1x1NkNFOFx1OTFDQVx1NTkzOVx1NkEyMVx1NUYwRlxyXG5cdGZlYXR1cmVTaW1pbGFyaXR5VGhyZXNob2xkOiBudW1iZXI7IC8vIFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG5cdHByZWZlckZlYXR1cmVNYXRjaGluZzogYm9vbGVhbjsgLy8gXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHU4MDBDXHU5NzVFXHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHJcblx0cHJlZmVyRmlsZVN0b3JhZ2U6IGJvb2xlYW47IC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NUI1OFx1NTBBOFx1ODAwQ1x1OTc1RWRhdGEuanNvblxyXG5cdGF1dG9FeHBvcnRUb0ZpbGU6IGJvb2xlYW47IC8vIFx1ODFFQVx1NTJBOFx1NUMwNmRhdGEuanNvblx1NEUyRFx1NzY4NFx1NjU3MFx1NjM2RVx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNlxyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRuYXRpdmVQcm9jZXNzaW5nOiB0cnVlLFxyXG5cdHBhcmFncmFwaHM6IHRydWUsXHJcblx0ZW5hYmxlQ2VsbE1lcmdpbmc6IHRydWUsXHJcblx0Y29uZmlybU1lcmdlTm9uRW1wdHk6IHRydWUsXHJcblx0ZW5hYmxlVGFibGVJZHM6IHRydWUsXHJcblx0aWRQcmVmaXg6ICd0YmwnLFxyXG5cdGF1dG9DZW50ZXJNZXJnZWRDZWxsczogdHJ1ZSxcclxuXHR0b29sYmFyRW5hYmxlZDogdHJ1ZSxcclxuXHRlbmFibGVFZGl0TW9kZU9wZXJhdGlvbnM6IHRydWUsXHJcblx0dXNlVGFibGVXcmFwcGVyQ29tbWVudHM6IGZhbHNlLCAvLyBcdTlFRDhcdThCQTRcdTRFMERcdTRGN0ZcdTc1MjhcdTZDRThcdTkxQ0FcdTU5MzlcdTZBMjFcdTVGMEZcclxuXHRmZWF0dXJlU2ltaWxhcml0eVRocmVzaG9sZDogMC43LCAvLyBcdTlFRDhcdThCQTRcdTc2RjhcdTRGM0NcdTVFQTZcdTk2MDhcdTUwM0M3MCVcclxuXHRwcmVmZXJGZWF0dXJlTWF0Y2hpbmc6IGZhbHNlLCAvLyBcdTlFRDhcdThCQTRcdTRFMERcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcclxuXHRwcmVmZXJGaWxlU3RvcmFnZTogdHJ1ZSwgLy8gXHU5RUQ4XHU4QkE0XHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU2NTg3XHU0RUY2XHU1QjU4XHU1MEE4XHJcblx0YXV0b0V4cG9ydFRvRmlsZTogZmFsc2UsIC8vIFx1OUVEOFx1OEJBNFx1NEUwRFx1ODFFQVx1NTJBOFx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNlxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIE9ic2lkaWFuU3ByZWFkc2hlZXQgZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncztcclxuXHRyaWJib25JY29uOiBIVE1MRWxlbWVudDtcclxuXHR0YWJsZUlkTWFuYWdlcjogVGFibGVJZE1hbmFnZXI7XHJcblx0dGFibGVEZXRlY3RvcjogTWFya2Rvd25UYWJsZURldGVjdG9yO1xyXG5cdHRhYmxlVG9vbGJhcjogVGFibGVUb29sYmFyO1xyXG5cdG1hcmtkb3duU291cmNlRWRpdG9yOiBNYXJrZG93blNvdXJjZUVkaXRvcjtcclxuXHRjdXJyZW50RWRpdGluZ1RhYmxlOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1NjY4XHJcblx0dGFibGVSZXNpemVyOiBUYWJsZVJlc2l6ZXI7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2M0QwXHU1M0Q2XHU1NjY4XHJcblx0dGFibGVEYXRhRXh0cmFjdG9yOiBUYWJsZURhdGFFeHRyYWN0b3I7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHU3MkI2XHU2MDAxXHU4RERGXHU4RTJBXHJcblx0bGFzdFByZXZpZXdNb2RlU3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHR2aWV3TW9kZUNoYW5nZUhhbmRsZXI6ICgpID0+IHZvaWQ7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcblx0XHR0aGlzLmhhbmRsZVRhYmxlQ2xpY2sgPSB0aGlzLmhhbmRsZVRhYmxlQ2xpY2suYmluZCh0aGlzKTtcclxuXHRcdHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljayA9IHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljay5iaW5kKHRoaXMpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBcdTc5RkJcdTk2NjRcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdTUxRkRcdTY1NzBcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0xvYWRpbmcgQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIHRvb2xiYXJFbmFibGVkIFx1NUM1RVx1NjAyN1x1NUI1OFx1NTcyOFxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIGVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucyBcdTVDNUVcdTYwMjdcdTVCNThcdTU3MjhcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucyA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIHByZWZlckZpbGVTdG9yYWdlIFx1NUM1RVx1NjAyN1x1NUI1OFx1NTcyOFxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIGF1dG9FeHBvcnRUb0ZpbGUgXHU1QzVFXHU2MDI3XHU1QjU4XHU1NzI4XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9FeHBvcnRUb0ZpbGUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b0V4cG9ydFRvRmlsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIExvYWQgY3VzdG9tIGljb25zXHJcblx0XHRcdGxvYWRJY29ucygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBjb21wb25lbnRzIGluIGNvcnJlY3Qgb3JkZXJcclxuXHRcdFx0Y29uc29sZS5sb2coJ0luaXRpYWxpemluZyBwbHVnaW4gY29tcG9uZW50cycpO1xyXG5cdFx0XHR0aGlzLnRhYmxlSWRNYW5hZ2VyID0gbmV3IFRhYmxlSWRNYW5hZ2VyKHRoaXMpO1xyXG5cdFx0XHR0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yID0gbmV3IE1hcmtkb3duU291cmNlRWRpdG9yKHRoaXMpOyAvLyBJbml0aWFsaXplIGJlZm9yZSBUYWJsZVRvb2xiYXJcclxuXHRcdFx0dGhpcy50YWJsZURldGVjdG9yID0gbmV3IE1hcmtkb3duVGFibGVEZXRlY3Rvcih0aGlzKTtcclxuXHRcdFx0dGhpcy50YWJsZVRvb2xiYXIgPSBuZXcgVGFibGVUb29sYmFyKHRoaXMpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1NjY4XHJcblx0XHRcdHRoaXMudGFibGVSZXNpemVyID0gbmV3IFRhYmxlUmVzaXplcih0aGlzKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjNEMFx1NTNENlx1NTY2OFxyXG5cdFx0XHR0aGlzLnRhYmxlRGF0YUV4dHJhY3RvciA9IG5ldyBUYWJsZURhdGFFeHRyYWN0b3IodGhpcyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgcmliYm9uIGljb24gZm9yIHRvb2xiYXIgdG9nZ2xlXHJcblx0XHRcdHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbigndGFibGUtdG9vbGJhci10b2dnbGUnLCAnXHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlVG9vbGJhclN0YXRlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRkIHJpYmJvbiBpY29uIGZvciBlZGl0IG1vZGUgb3BlcmF0aW9uc1xyXG5cdFx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3RhYmxlLWVkaXQtbW9kZScsICdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTY0Q0RcdTRGNUMnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdFx0aWYgKCFhY3RpdmVWaWV3KSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkUnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcblx0XHRcdFx0Y29uc3QgaXNFZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIWlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTIwN1x1NjM2Mlx1NTIzMFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEY3Rlx1NzUyOFx1NkI2NFx1NTI5Rlx1ODBGRCcpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTY2M0VcdTc5M0FcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTY0Q0RcdTRGNUNcdTgzRENcdTUzNTVcclxuXHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRCcpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCd0YWJsZS1pZCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmFkZFRhYmxlSWRUb01hcmtkb3duKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdtZXJnZS1yaWdodCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ3JpZ2h0Jyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdtZXJnZS1kb3duJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubWFya2Rvd25Tb3VyY2VFZGl0b3IubWVyZ2VDZWxscygnZG93bicpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTY2M0VcdTc5M0FcdTgzRENcdTUzNTVcclxuXHRcdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZ0KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgcmliYm9uIGljb24gc3RhdGVcclxuXHRcdFx0dGhpcy51cGRhdGVSaWJib25JY29uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTVERTVcdTUxNzdcdTY4MEZcdTU0MkZcdTc1MjhcdUZGMENcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQpIHtcclxuXHRcdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHU1M0Q4XHU1MzE2XHVGRjBDXHU5MUNEXHU2NUIwXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERFx1ODlDNlx1NTZGRVx1NURGMlx1NUI4Q1x1NTE2OFx1NTJBMFx1OEY3RFxyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHVwVGFibGVTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHRcdFx0fSwgMzAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU2NTg3XHU2ODYzXHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHVGRjBDXHU5MUNEXHU2NUIwXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCkge1xyXG5cdFx0XHRcdFx0XHQvLyBcdTVFRjZcdThGREZcdTYyNjdcdTg4NENcdUZGMENcdTc4NkVcdTRGRERcdTg5QzZcdTU2RkVcdTVERjJcdTVCOENcdTUxNjhcdTUyQTBcdThGN0RcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cFRhYmxlU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0XHRcdH0sIDMwMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NzZEMVx1NTQyQ1x1N0YxNlx1OEY5MVx1NTY2OFx1NTE0OVx1NjgwN1x1NkQzQlx1NTJBOFx1RkYwQ1x1NjhDMFx1NkQ0Qlx1ODg2OFx1NjgzQ1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgKGVkaXRvciwgdmlldykgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHJcblx0XHRcdFx0XHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJykge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1OTA3Rlx1NTE0RFx1OTg5MVx1N0U0MVx1ODlFNlx1NTNEMVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGVib3VuY2UoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU1MTQ5XHU2ODA3XHU2NjJGXHU1NDI2XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRhYmxlSW5mbykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBcdThCQkVcdTdGNkVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9LCA1MDApKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU3RjE2XHU4RjkxXHU1NjY4XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHVGRjBDXHU2OEMwXHU2RDRCXHU4ODY4XHU2ODNDXHJcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcgJiYgYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERFx1NTE0OVx1NjgwN1x1NURGMlx1NjZGNFx1NjVCMFxyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuXHRcdFx0XHRcdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTUxNDlcdTY4MDdcdTY2MkZcdTU0MjZcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODVcclxuXHRcdFx0XHRcdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRcdFx0XHRcdGlmICh0YWJsZUluZm8pIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHJcblx0XHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdFx0aWQ6ICdhZGQtdGFibGUtaWQtaW4tZWRpdC1tb2RlJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQnLFxyXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5hZGRUYWJsZUlkVG9NYXJrZG93bigpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDXHU1REYyXHU3OTgxXHU3NTI4XHVGRjBDXHU4QkY3XHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU1NDJGXHU3NTI4Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnbWVyZ2UtY2VsbC1yaWdodC1pbi1lZGl0LW1vZGUnLFxyXG5cdFx0XHRcdG5hbWU6ICdcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnLFxyXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5tZXJnZUNlbGxzKCdyaWdodCcpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDXHU1REYyXHU3OTgxXHU3NTI4XHVGRjBDXHU4QkY3XHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU1NDJGXHU3NTI4Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnbWVyZ2UtY2VsbC1kb3duLWluLWVkaXQtbW9kZScsXHJcblx0XHRcdFx0bmFtZTogJ1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycsXHJcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ2Rvd24nKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjRDRFx1NEY1Q1x1NURGMlx1Nzk4MVx1NzUyOFx1RkYwQ1x1OEJGN1x1NTcyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NTQyRlx1NzUyOCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRFxyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnc2hvdy1jdXJyZW50LXRhYmxlLWlkJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDSUQnLFxyXG5cdFx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNob3dDdXJyZW50VGFibGVJZCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTYyQzZcdTUyMDZcdTVERjJcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0XHRpZDogJ3NwbGl0LW1lcmdlZC1jZWxscycsXHJcblx0XHRcdFx0bmFtZTogJ1x1NjJDNlx1NTIwNlx1NURGMlx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycsXHJcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLnNwbGl0TWVyZ2VkQ2VsbHMoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjRDRFx1NEY1Q1x1NURGMlx1Nzk4MVx1NzUyOFx1RkYwQ1x1OEJGN1x1NTcyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NTQyRlx1NzUyOCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTRGRUVcdTU5MERcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0XHRpZDogJ2ZpeC1tZXJnZS1tYXJrZXJzJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU0RkVFXHU1OTBEXHU4ODY4XHU2ODNDXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwJyxcclxuXHRcdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubWFya2Rvd25Tb3VyY2VFZGl0b3IuZGV0ZWN0QW5kRml4TWVyZ2VNYXJrZXJzKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTg4NjhcdTY4M0NcdTY0Q0RcdTRGNUNcdTVERjJcdTc5ODFcdTc1MjhcdUZGMENcdThCRjdcdTU3MjhcdThCQkVcdTdGNkVcdTRFMkRcdTU0MkZcdTc1MjgnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2Q0U4XHU1MThDXHU1MTc2XHU0RUQ2XHU0RThCXHU0RUY2XHU1NDhDXHU1OTA0XHU3NDA2XHU1NjY4XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXHJcblx0XHRcdCdzaGVldCcsXHJcblx0XHRcdGFzeW5jIChcclxuXHRcdFx0XHRzb3VyY2U6IHN0cmluZyxcclxuXHRcdFx0XHRlbDogSFRNTFRhYmxlRWxlbWVudCxcclxuXHRcdFx0XHRjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcclxuXHRcdFx0KSA9PiB7XHJcblx0XHRcdFx0c291cmNlID0gc291cmNlLnRyaW0oKTtcclxuXHRcdFx0XHRjdHguYWRkQ2hpbGQoXHJcblx0XHRcdFx0XHRuZXcgU2hlZXRFbGVtZW50KFxyXG5cdFx0XHRcdFx0XHRlbCxcclxuXHRcdFx0XHRcdFx0c291cmNlLFxyXG5cdFx0XHRcdFx0XHRjdHgsXHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0XHR0aGlzXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblx0XHRcdC8vIFx1NkNFOFx1NTE4QyBNYXJrZG93biBcdTU0MEVcdTU5MDRcdTc0MDZcdTU2NjhcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoYXN5bmMgKGVsLCBjdHgpID0+IFxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubmF0aXZlUHJvY2Vzc2luZykgcmV0dXJuO1xyXG5cdFx0XHRpZiAoY3R4LmZyb250bWF0dGVyPy5bJ2Rpc2FibGUtc2hlZXQnXSA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgdGFibGVFbHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpO1xyXG5cdFx0XHRpZiAodGFibGVFbHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0Zm9yIChjb25zdCB0YWJsZUVsIG9mIEFycmF5LmZyb20odGFibGVFbHMpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmICghdGFibGVFbCkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0aWYgKHRhYmxlRWw/LmlkID09PSAnb2JzaWRpYW4tc2hlZXRzLXBhcnNlZCcpIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTc4NkVcdTRGRERcdTg4NjhcdTY4M0NcdTY3MDlJRFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODg2OFx1NjgzQ0lEXHU1MjlGXHU4MEZEXHVGRjA5XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVUYWJsZUlkcykge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnRhYmxlSWRNYW5hZ2VyLmVuc3VyZVRhYmxlSGFzSWQodGFibGVFbCBhcyBIVE1MRWxlbWVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFx1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgwN1x1OEJCMFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3Nlx1NTI5Rlx1ODBGRFx1RkYwOVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NTg5RVx1NUYzQVx1NzY4NFx1NkUzMlx1NjdEM1x1NjVCOVx1NkNENVxyXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlck1lcmdlZENlbGxzKHRhYmxlRWwgYXMgSFRNTFRhYmxlRWxlbWVudCwgY3R4KTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU4ODY4XHU2ODNDXHU2NzA5cm93c3Bhbi9jb2xzcGFuXHU1QzVFXHU2MDI3XHVGRjBDXHU0RTVGXHU1RTk0XHU3NTI4XHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGXHJcblx0XHRcdFx0XHRcdGlmICh0YWJsZUVsLnF1ZXJ5U2VsZWN0b3IoJ1tyb3dzcGFuXSwgW2NvbHNwYW5dJykpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhYmxlRGV0ZWN0b3IuYXBwbHlNZXJnZUNlbGxzTWFya2Vycyh0YWJsZUVsIGFzIEhUTUxFbGVtZW50KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQy4uLlxyXG5cdFx0XHRcdFx0Ly8gXHU4RkQ5XHU5MUNDXHU0RkREXHU3NTU5XHU4ODY4XHU2ODNDXHU1OTA0XHU3NDA2XHU5MDNCXHU4RjkxXHVGRjBDXHU0RjQ2XHU3OUZCXHU5NjY0XHU0RTBFXHU1REU1XHU1MTc3XHU2ODBGXHU2NjNFXHU3OTNBL1x1OTY5MFx1ODVDRlx1NzZGOFx1NTE3M1x1NzY4NFx1NEVFM1x1NzgwMVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdThCQkVcdTdGNkVcdTkwMDlcdTk4NzlcdTUzNjFcclxuXHRcdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTaGVldFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luOicsIGVycm9yKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gXHU4QkJFXHU3RjZFXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHU1M0Q4XHU1MzE2XHU3NkQxXHU1NDJDXHJcblx0XHR0aGlzLnNldHVwVmlld01vZGVDaGFuZ2VMaXN0ZW5lcigpO1xyXG5cdFx0XHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcclxuXHRcdHRoaXMuY2hlY2tBbmRSZW5kZXJUYWJsZXMoKTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5sb2coJ0FkdmFuY2VkIFRhYmxlIFhUIFx1NjNEMlx1NEVGNlx1NURGMlx1NTJBMFx1OEY3RCcpO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBcdTk2MzJcdTYyOTZcdTUxRkRcdTY1NzBcclxuXHQgKiBAcGFyYW0gZnVuYyBcdTg5ODFcdTYyNjdcdTg4NENcdTc2ODRcdTUxRkRcdTY1NzBcclxuXHQgKiBAcGFyYW0gd2FpdCBcdTdCNDlcdTVGODVcdTY1RjZcdTk1RjRcdUZGMDhcdTZCRUJcdTc5RDJcdUZGMDlcclxuXHQgKi9cclxuXHRwcml2YXRlIGRlYm91bmNlKGZ1bmM6IEZ1bmN0aW9uLCB3YWl0OiBudW1iZXIpIHtcclxuXHRcdGxldCB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oLi4uYXJnczogYW55W10pIHtcclxuXHRcdFx0Y29uc3QgY29udGV4dCA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBsYXRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHRcclxuXHQvLyBcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEYgLSBcdTY1QjBcdTY1QjlcdTZDRDVcdUZGMENcdTUzRUFcdTU3MjhcdTk3MDBcdTg5ODFcdTY1RjZcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcclxuXHRjcmVhdGVUb29sYmFyKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REYyXHU2NzA5XHU3Njg0XHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRhaW5lcicpLmZvckVhY2goY29udGFpbmVyID0+IHtcclxuXHRcdFx0XHRjb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRcdGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0dG9vbGJhckNvbnRhaW5lci5jbGFzc05hbWUgPSAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb250YWluZXInO1xyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2xiYXJDb250YWluZXIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRcdHRoaXMudGFibGVUb29sYmFyLmNyZWF0ZVRvb2xiYXIodG9vbGJhckNvbnRhaW5lcik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdUZGMENcdTc1MjhcdTRFOEVcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcdTU5MTZcdTcwQjlcdTUxRkJcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZURvY3VtZW50Q2xpY2spO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRpZiAoYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG5cdFx0XHRcdGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHRcdC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NjhDMFx1NjdFNVx1NTE0OVx1NjgwN1x1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVxyXG5cdFx0XHRcdFx0Y29uc3QgdGFibGVJbmZvID0gdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5sb2NhdGVUYWJsZUluTWFya2Rvd24oYWN0aXZlVmlldy5lZGl0b3IpO1xyXG5cdFx0XHRcdFx0aWYgKHRhYmxlSW5mbykge1xyXG5cdFx0XHRcdFx0XHQvLyBcdThCQkVcdTdGNkVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcclxuXHRcdFx0XHRcdHRoaXMuc2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnXHU1REU1XHU1MTc3XHU2ODBGXHU1REYyXHU1MjFCXHU1RUZBJyk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTUyOUZcdTgwRkRcclxuXHQgKi9cclxuXHRzZXR1cFRhYmxlU2VsZWN0aW9uKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG5cdFx0XHRjb25zdCBpc0VkaXRNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnO1xyXG5cclxuXHRcdFx0aWYgKGlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHQvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTRGN0ZcdTc1MjhcdTdGMTZcdThGOTFcdTU2NjhcdTRFOEJcdTRFRjZcclxuXHRcdFx0XHR0aGlzLnNldHVwRWRpdE1vZGVUYWJsZVNlbGVjdGlvbihhY3RpdmVWaWV3LmVkaXRvcik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU0RjdGXHU3NTI4RE9NXHU0RThCXHU0RUY2XHJcblx0XHRcdFx0dGhpcy5zZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFxyXG5cdCAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcblx0ICovXHJcblx0c2V0dXBFZGl0TW9kZVRhYmxlU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuXHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFOiBcdTg4NEM9JHtjdXJzb3IubGluZX0sIFx1NTIxNz0ke2N1cnNvci5jaH1gKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NTE0OVx1NjgwN1x1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVxyXG5cdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRpZiAoIXRhYmxlSW5mbykge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0MnKTtcclxuXHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdUZGMENcdTZFMDVcdTk2NjRcdTVGNTNcdTUyNERcdTdGMTZcdThGOTFcdTg4NjhcdTY4M0NcdTcyQjZcdTYwMDFcclxuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50RWRpdGluZ1RhYmxlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRFZGl0aW5nVGFibGUgPSBudWxsO1xyXG5cdFx0XHRcdFx0Ly8gXHU2RTA1XHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU3Njg0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdFx0XHRpZiAodGhpcy50YWJsZVRvb2xiYXIpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy50YWJsZVRvb2xiYXIuY2xlYXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDOiBcdTgzMDNcdTU2RjQ9JHt0YWJsZUluZm8uc3RhcnRMaW5lfS0ke3RhYmxlSW5mby5lbmRMaW5lfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHVGRjA4XHU1OTgyXHU2NzlDXHU1QzFBXHU2NzJBXHU1MjFCXHU1RUZBXHVGRjA5XHJcblx0XHRcdGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkdmFuY2VkLXRhYmxlLXRvb2xiYXItY29udGFpbmVyJykpIHtcclxuXHRcdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU0RkREXHU1QjU4XHU1RjUzXHU1MjREXHU3RjE2XHU4RjkxXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcblx0XHRcdHRoaXMuY3VycmVudEVkaXRpbmdUYWJsZSA9IHtcclxuXHRcdFx0XHRzdGFydExpbmU6IHRhYmxlSW5mby5zdGFydExpbmUsXHJcblx0XHRcdFx0ZW5kTGluZTogdGFibGVJbmZvLmVuZExpbmUsXHJcblx0XHRcdFx0Y29udGVudDogdGFibGVJbmZvLmNvbnRlbnRcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHR0aGlzLnRhYmxlVG9vbGJhci5zZXRBY3RpdmVFZGl0TW9kZVRhYmxlKHRoaXMuY3VycmVudEVkaXRpbmdUYWJsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdUZGMDhcdTc1MjhcdTRFOEVcdThDMDNcdThCRDVcdUZGMDlcclxuXHRcdFx0Y29uc3QgY2VsbFBvc2l0aW9uID0gdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5nZXRDZWxsUG9zaXRpb24oZWRpdG9yKTtcclxuXHRcdFx0aWYgKGNlbGxQb3NpdGlvbikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTUxNDlcdTY4MDdcdTRGNERcdTRFOEVcdTUzNTVcdTUxNDNcdTY4M0M6IFx1ODg0Qz0ke2NlbGxQb3NpdGlvbi5yb3dJbmRleH0sIFx1NTIxNz0ke2NlbGxQb3NpdGlvbi5jb2xJbmRleH1gKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTkwMDlcdTYyRTlcdTRFODZcdTg4NjhcdTY4M0M6JywgdGhpcy5jdXJyZW50RWRpdGluZ1RhYmxlKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdThCQkVcdTdGNkVcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTUyOUZcdTgwRkRcclxuXHQgKi9cclxuXHRzZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb24oKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTRGN0ZcdTc1MjhcdTcyRUNcdTdBQ0JcdTc2ODRzZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb25cdTY1QjlcdTZDRDVcclxuXHRcdFx0c2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uKHRoaXMpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ1x1NTM3OFx1OEY3RCBBZHZhbmNlZCBUYWJsZSBYVCBcdTYzRDJcdTRFRjYnKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb250YWluZXInKS5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XHJcblx0XHRcdGNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTlBRDhcdTRFQUVcdTU0OENcdTkwMDlcdTYyRTlcdTcyQjZcdTYwMDFcclxuXHRcdHRoaXMucmVtb3ZlQWxsVGFibGVIaWdobGlnaHRzKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1NkUwNVx1NzQwNlx1ODg2OFx1NjgzQ1x1NTkyN1x1NUMwRlx1OEMwM1x1NjU3NFx1NTY2OFxyXG5cdFx0dGhpcy50YWJsZVJlc2l6ZXIuY2xlYW51cCgpO1xyXG5cdFx0XHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTRFMEFcdTc2ODRcdTgxRUFcdTVCOUFcdTRFNDlcdTY1NzBcdTYzNkVcdTVDNUVcdTYwMjdcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlW2RhdGEtdGFibGUtcHJvY2Vzc2VkXScpLmZvckVhY2godGFibGUgPT4ge1xyXG5cdFx0XHRjb25zdCB0YWJsZUVsID0gdGFibGUgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGRlbGV0ZSB0YWJsZUVsLmRhdGFzZXQudGFibGVQcm9jZXNzZWQ7XHJcblx0XHRcdGRlbGV0ZSB0YWJsZUVsLmRhdGFzZXQudGFibGVTZWxlY3RlZDtcclxuXHRcdFx0dGFibGVFbC5zdHlsZS5vdXRsaW5lID0gJyc7XHJcblx0XHRcdHRhYmxlRWwuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHJcblx0XHRcdHRhYmxlRWwub25jbGljayA9IG51bGw7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU0RTBEXHU1MThEXHU5NzAwXHU4OTgxXHU3OUZCXHU5NjY0XHU2NTg3XHU2ODYzXHU3RUE3XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHVGRjBDXHU1NkUwXHU0RTNBXHU2MjExXHU0RUVDXHU1REYyXHU3RUNGXHU3OUZCXHU5NjY0XHU0RTg2XHU1QjgzXHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcclxuXHRcdFx0e30sXHJcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXHJcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cdFxyXG5cdGhpZ2hsaWdodFNlbGVjdGVkVGFibGUodGFibGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTc2ODRcdTlBRDhcdTRFQUVcclxuXHRcdHRoaXMucmVtb3ZlQWxsVGFibGVIaWdobGlnaHRzKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1OUFEOFx1NEVBRVx1OTAwOVx1NEUyRFx1NzY4NFx1ODg2OFx1NjgzQ1xyXG5cdFx0dGFibGUuc3R5bGUub3V0bGluZSA9ICcycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XHJcblx0XHR0YWJsZS5zdHlsZS5vdXRsaW5lT2Zmc2V0ID0gJzJweCc7XHJcblx0XHR0YWJsZS5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQgPSAndHJ1ZSc7XHJcblx0fVxyXG5cdFxyXG5cdHJlbW92ZUFsbFRhYmxlSGlnaGxpZ2h0cygpOiB2b2lkIHtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlW2RhdGEtdGFibGUtc2VsZWN0ZWQ9XCJ0cnVlXCJdJykuZm9yRWFjaCh0YWJsZSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhYmxlRWwgPSB0YWJsZSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0dGFibGVFbC5zdHlsZS5vdXRsaW5lID0gJyc7XHJcblx0XHRcdHRhYmxlRWwuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG5cdFx0XHRkZWxldGUgdGFibGVFbC5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQ7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Y3JlYXRlVGFibGVEYXRhKHRhYmxlOiBIVE1MRWxlbWVudCwgdGFibGVJZDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTlBOENcdThCQzFcdTg4NjhcdTY4M0NJRFx1NjYyRlx1NTQyNlx1Njc2NVx1ODFFQUhUTUxcdTZDRThcdTkxQ0FcclxuXHRcdFx0Y29uc3QgY29tbWVudElkID0gdGhpcy50YWJsZUlkTWFuYWdlci5nZXRUYWJsZUlkZW50aWZpZXIodGFibGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1ODNCN1x1NTNENlx1NTIzMElEXHVGRjBDXHU2MjE2XHU4MDA1XHU0RTBFXHU0RjIwXHU1MTY1XHU3Njg0SURcdTRFMERcdTUzMzlcdTkxNERcdUZGMENcdTUyMTlcdTRFMERcdTUyMUJcdTVFRkFcdTY1NzBcdTYzNkVcclxuXHRcdFx0aWYgKCFjb21tZW50SWQgfHwgY29tbWVudElkICE9PSB0YWJsZUlkKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKGBcdTg4NjhcdTY4M0NJRFx1OUE4Q1x1OEJDMVx1NTkzMVx1OEQyNTogXHU0RjIwXHU1MTY1SUQ9JHt0YWJsZUlkfSwgSFRNTFx1NkNFOFx1OTFDQUlEPSR7Y29tbWVudElkIHx8ICdcdTY1RTAnfWApO1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU1M0VBXHU2NzA5XHU1NzI4SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjYwRVx1Nzg2RVx1NUI5QVx1NEU0OVx1NzY4NFx1ODg2OFx1NjgzQ0lEXHU2MjREXHU4MEZEXHU1MjFCXHU1RUZBXHU2NTcwXHU2MzZFJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcclxuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGlmICghYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHVGRjBDXHU0RTBEXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhY3RpdmVWaWV3LmZpbGU/LnBhdGg7XHJcblx0XHRcdGlmICghZmlsZVBhdGgpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFx1RkYwQ1x1NEUwRFx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coYFx1NEUzQVx1NjcwOVx1NjU0OFx1NzY4NEhUTUxcdTZDRThcdTkxQ0FJRFx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RTogJHt0YWJsZUlkfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcblx0XHRcdHRoaXMudGFibGVUb29sYmFyLmV4dHJhY3RBbmRTdG9yZVRhYmxlSW5mbyh0YWJsZUlkLCB0YWJsZSwgZmlsZVBhdGgpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0YXN5bmMgc2F2ZVRhYmxlRGF0YSh0YWJsZURhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU5QThDXHU4QkMxXHU4ODY4XHU2ODNDSURcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuXHRcdFx0aWYgKCF0YWJsZURhdGEgfHwgIXRhYmxlRGF0YS5pZCkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU2NUUwXHU2NTQ4XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHVGRjBDXHU3RjNBXHU1QzExSUQnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTgzQjdcdTUzRDZcdTc2ODRJRFxyXG5cdFx0XHQvLyBcdThGRDlcdTkxQ0NcdTYyMTFcdTRFRUNcdTY1RTBcdTZDRDVcdTc2RjRcdTYzQTVcdTlBOENcdThCQzFJRFx1Njc2NVx1NkU5MFx1RkYwQ1x1NEY0Nlx1NTNFRlx1NEVFNVx1OTAxQVx1OEZDN1x1NjVFNVx1NUZEN1x1NjNEMFx1OTE5MlxyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU1MUM2XHU1OTA3XHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFOiAke3RhYmxlRGF0YS5pZH1gKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NUI1OFx1NTBBOFx1RkYwQ1x1NTIxOVx1NUMxRFx1OEJENVx1NUMwNlx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NTIzMFx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSkge1xyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIHRoaXMudGFibGVEYXRhRXh0cmFjdG9yKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnRhYmxlRGF0YUV4dHJhY3Rvci5leHBvcnRUYWJsZURhdGFUb0ZpbGUoYWN0aXZlRmlsZSwgdGFibGVEYXRhLmlkLCB0YWJsZURhdGEpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1NURGMlx1NUMwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NTIzMFx1NjU4N1x1NEVGNjogJHthY3RpdmVGaWxlLnBhdGh9YCk7XHJcblx0XHRcdFx0XHRyZXR1cm47IC8vIFx1NURGMlx1NEZERFx1NUI1OFx1NTIzMFx1NjU4N1x1NEVGNlx1RkYwQ1x1NEUwRFx1NTE4RFx1NEZERFx1NUI1OFx1NTIzMGRhdGEuanNvblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU0RTBEXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU2NTg3XHU0RUY2XHU1QjU4XHU1MEE4XHU2MjE2XHU2NUUwXHU2Q0Q1XHU0RkREXHU1QjU4XHU1MjMwXHU2NTg3XHU0RUY2XHVGRjBDXHU1MjE5XHU0RkREXHU1QjU4XHU1MjMwZGF0YS5qc29uXHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NUI1OFx1NTBBOFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG5cdFx0XHRjb25zdCBleGlzdGluZ0RhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgfHwge307XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTc4NkVcdTRGRERcdTVCNThcdTU3MjhcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcclxuXHRcdFx0aWYgKCFleGlzdGluZ0RhdGEudGFibGVzKSB7XHJcblx0XHRcdFx0ZXhpc3RpbmdEYXRhLnRhYmxlcyA9IHt9O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY2RjRcdTY1QjBcdTcyNzlcdTVCOUFcdTg4NjhcdTY4M0NcdTc2ODRcdTY1NzBcdTYzNkVcclxuXHRcdFx0ZXhpc3RpbmdEYXRhLnRhYmxlc1t0YWJsZURhdGEuaWRdID0gdGFibGVEYXRhO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU0RkREXHU1QjU4XHU2NkY0XHU2NUIwXHU1NDBFXHU3Njg0XHU2NTcwXHU2MzZFXHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEoZXhpc3RpbmdEYXRhKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKGBcdTVERjJcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTUyMzBkYXRhLmpzb246ICR7dGFibGVEYXRhLmlkfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU4QkJFXHU3RjZFXHU0RTg2XHU4MUVBXHU1MkE4XHU1QkZDXHU1MUZBXHU1MjMwXHU2NTg3XHU0RUY2XHVGRjBDXHU1MjE5XHU1QzFEXHU4QkQ1XHU1QzA2XHU2NTcwXHU2MzZFXHU1QkZDXHU1MUZBXHU1MjMwXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9FeHBvcnRUb0ZpbGUgJiYgdGhpcy50YWJsZURhdGFFeHRyYWN0b3IpIHtcclxuXHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHRpZiAoYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy50YWJsZURhdGFFeHRyYWN0b3IuZXhwb3J0VGFibGVEYXRhVG9GaWxlKGFjdGl2ZUZpbGUsIHRhYmxlRGF0YS5pZCwgdGFibGVEYXRhKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTVERjJcdTgxRUFcdTUyQThcdTVDMDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRkNcdTUxRkFcdTUyMzBcdTY1ODdcdTRFRjY6ICR7YWN0aXZlRmlsZS5wYXRofWApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHJpdmF0ZSB1cGRhdGVSaWJib25JY29uKCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnJpYmJvbkljb24pIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2RTA1XHU5NjY0XHU3M0IwXHU2NzA5XHU1NkZFXHU2ODA3XHJcblx0XHR0aGlzLnJpYmJvbkljb24uZW1wdHkoKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2ODM5XHU2MzZFXHU1REU1XHU1MTc3XHU2ODBGXHU3MkI2XHU2MDAxXHU4QkJFXHU3RjZFXHU1NkZFXHU2ODA3XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCkge1xyXG5cdFx0XHQvLyBcdTVERTVcdTUxNzdcdTY4MEZcdTU0MkZcdTc1MjggLSBcdTY2M0VcdTc5M0FcdTVGNjlcdTgyNzJcdTU2RkVcdTY4MDdcclxuXHRcdFx0Y29uc3QgaWNvbkVsID0gdGhpcy5yaWJib25JY29uLmNyZWF0ZUVsKCdkaXYnLCB7XHJcblx0XHRcdFx0Y2xzOiAncmliYm9uLWljb24tYWN0aXZlJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1NTZGRVx1NjgwN1xyXG5cdFx0XHRpY29uRWwuaW5uZXJIVE1MID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cInN2Zy1pY29uXCI+PHJlY3QgeD1cIjNcIiB5PVwiM1wiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHJ4PVwiMlwiIHJ5PVwiMlwiPjwvcmVjdD48bGluZSB4MT1cIjNcIiB5MT1cIjlcIiB4Mj1cIjIxXCIgeTI9XCI5XCI+PC9saW5lPjxsaW5lIHgxPVwiM1wiIHkxPVwiMTVcIiB4Mj1cIjIxXCIgeTI9XCIxNVwiPjwvbGluZT48bGluZSB4MT1cIjlcIiB5MT1cIjNcIiB4Mj1cIjlcIiB5Mj1cIjIxXCI+PC9saW5lPjxsaW5lIHgxPVwiMTVcIiB5MT1cIjNcIiB4Mj1cIjE1XCIgeTI9XCIyMVwiPjwvbGluZT48L3N2Zz5gO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2REZCXHU1MkEwXHU2RkMwXHU2RDNCXHU2ODM3XHU1RjBGXHJcblx0XHRcdGljb25FbC5zdHlsZS5jb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFx1NURFNVx1NTE3N1x1NjgwRlx1Nzk4MVx1NzUyOCAtIFx1NjYzRVx1NzkzQVx1NzA3MFx1ODI3Mlx1NTZGRVx1NjgwN1xyXG5cdFx0XHRjb25zdCBpY29uRWwgPSB0aGlzLnJpYmJvbkljb24uY3JlYXRlRWwoJ2RpdicpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4QkJFXHU3RjZFXHU1NkZFXHU2ODA3XHJcblx0XHRcdGljb25FbC5pbm5lckhUTUwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb25cIj48cmVjdCB4PVwiM1wiIHk9XCIzXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgcng9XCIyXCIgcnk9XCIyXCI+PC9yZWN0PjxsaW5lIHgxPVwiM1wiIHkxPVwiOVwiIHgyPVwiMjFcIiB5Mj1cIjlcIj48L2xpbmU+PGxpbmUgeDE9XCIzXCIgeTE9XCIxNVwiIHgyPVwiMjFcIiB5Mj1cIjE1XCI+PC9saW5lPjxsaW5lIHgxPVwiOVwiIHkxPVwiM1wiIHgyPVwiOVwiIHkyPVwiMjFcIj48L2xpbmU+PGxpbmUgeDE9XCIxNVwiIHkxPVwiM1wiIHgyPVwiMTVcIiB5Mj1cIjIxXCI+PC9saW5lPjwvc3ZnPmA7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHRvZ2dsZVRvb2xiYXJTdGF0ZSgpOiB2b2lkIHtcclxuXHRcdC8vIFx1NTIwN1x1NjM2Mlx1NURFNVx1NTE3N1x1NjgwRlx1NzJCNlx1NjAwMVxyXG5cdFx0dGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCA9ICF0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkO1xyXG5cdFx0XHJcblx0XHQvLyBcdTY2RjRcdTY1QjBcdThCQkVcdTdGNkVcclxuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1NTZGRVx1NjgwN1x1NzJCNlx1NjAwMVxyXG5cdFx0dGhpcy51cGRhdGVSaWJib25JY29uKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1NjgzOVx1NjM2RVx1NzJCNlx1NjAwMVx1NTIxQlx1NUVGQVx1NjIxNlx1NzlGQlx1OTY2NFx1NURFNVx1NTE3N1x1NjgwRlxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQpIHtcclxuXHRcdFx0dGhpcy5jcmVhdGVUb29sYmFyKCk7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ1x1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRlx1NURGMlx1NTQyRlx1NzUyOCcpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRhaW5lcicpLmZvckVhY2goY29udGFpbmVyID0+IHtcclxuXHRcdFx0XHRjb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRuZXcgTm90aWNlKCdcdTg4NjhcdTY4M0NcdTVERTVcdTUxNzdcdTY4MEZcdTVERjJcdTc5ODFcdTc1MjgnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG5cdCAqL1xyXG5cdGhhbmRsZVRhYmxlQ2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NzBCOVx1NTFGQlx1NzY4NFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHRjb25zdCB0YWJsZSA9IChldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KTtcclxuXHRcdFx0aWYgKCF0YWJsZSkgcmV0dXJuO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU4ODY4XHU2ODNDXHU3Njg0XHU5QUQ4XHU0RUFFXHJcblx0XHRcdHRoaXMucmVtb3ZlQWxsVGFibGVIaWdobGlnaHRzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTlBRDhcdTRFQUVcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NcclxuXHRcdFx0dGhpcy5oaWdobGlnaHRTZWxlY3RlZFRhYmxlKHRhYmxlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTIxQlx1NUVGQVx1NURFNVx1NTE3N1x1NjgwRlxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCkge1xyXG5cdFx0XHRcdHRoaXMudGFibGVUb29sYmFyLnNldEFjdGl2ZVRhYmxlKHRhYmxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1MjlGXHU4MEZEXHJcblx0XHRcdHRoaXMudGFibGVSZXNpemVyLnNldHVwVGFibGVSZXNpemUodGFibGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coJ1x1ODg2OFx1NjgzQ1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1NURGMlx1NTkwNFx1NzQwNicpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBcdTU5MDRcdTc0MDZcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuXHQgKiBAcGFyYW0gZXZlbnQgXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHJcblx0ICovXHJcblx0aGFuZGxlRG9jdW1lbnRDbGljayA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU3MEI5XHU1MUZCXHU2NjJGXHU1NDI2XHU1NzI4XHU1REU1XHU1MTc3XHU2ODBGXHU1MTg1XHJcblx0XHRcdGNvbnN0IGlzQ2xpY2tJblRvb2xiYXIgPSBldmVudC50YXJnZXQgaW5zdGFuY2VvZiBOb2RlICYmIFxyXG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRhaW5lcicpPy5jb250YWlucyhldmVudC50YXJnZXQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU3MEI5XHU1MUZCXHU2NjJGXHU1NDI2XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1XHJcblx0XHRcdGNvbnN0IGlzQ2xpY2tJblRhYmxlID0gZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJiBcclxuXHRcdFx0XHQoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCd0YWJsZScpICE9PSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU3MEI5XHU1MUZCXHU0RTBEXHU1NzI4XHU1REU1XHU1MTc3XHU2ODBGXHU2MjE2XHU4ODY4XHU2ODNDXHU1MTg1XHVGRjBDXHU2RTA1XHU5NjY0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdGlmICghaXNDbGlja0luVG9vbGJhciAmJiAhaXNDbGlja0luVGFibGUpIHtcclxuXHRcdFx0XHQvLyBcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcclxuXHRcdFx0XHRpZiAodGhpcy50YWJsZVRvb2xiYXIuYWN0aXZlVGFibGUpIHtcclxuXHRcdFx0XHRcdHRoaXMudGFibGVUb29sYmFyLmNsZWFyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTU5MDRcdTc0MDZcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDSURcclxuXHQgKi9cclxuXHRhc3luYyBzaG93Q3VycmVudFRhYmxlSWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGlmICghYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcblx0XHRcdGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcblx0XHRcdFxyXG5cdFx0XHRsZXQgdGFibGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaXNFZGl0TW9kZSkge1xyXG5cdFx0XHRcdC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NEY3Rlx1NzUyOCBNYXJrZG93blNvdXJjZUVkaXRvciBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFxyXG5cdFx0XHRcdHRhYmxlSWQgPSBhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmdldEN1cnJlbnRUYWJsZUlkKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU0RjdGXHU3NTI4IFRhYmxlSWRNYW5hZ2VyIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHJcblx0XHRcdFx0aWYgKHRoaXMudGFibGVUb29sYmFyLmFjdGl2ZVRhYmxlKSB7XHJcblx0XHRcdFx0XHR0YWJsZUlkID0gdGhpcy50YWJsZUlkTWFuYWdlci5nZXRUYWJsZUlkZW50aWZpZXIodGhpcy50YWJsZVRvb2xiYXIuYWN0aXZlVGFibGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRhYmxlSWQpIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRDogJHt0YWJsZUlkfWApO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRDonLCB0YWJsZUlkKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1OEJGN1x1Nzg2RVx1NEZERFx1NTE0OVx1NjgwN1x1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVx1NjIxNlx1NURGMlx1OTAwOVx1NjJFOVx1ODg2OFx1NjgzQycpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdTZFMzJcdTY3RDNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuXHQgKiBAcGFyYW0gdGFibGVFbCBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuXHQgKiBAcGFyYW0gY3R4IE1hcmtkb3duXHU1OTA0XHU3NDA2XHU0RTBBXHU0RTBCXHU2NTg3XHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJNZXJnZWRDZWxscyh0YWJsZUVsOiBIVE1MVGFibGVFbGVtZW50LCBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NTkwNFx1NzQwNlx1OEZDN1xyXG5cdFx0XHRpZiAoKHRhYmxlRWwgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQudGFibGVNZXJnZVByb2Nlc3NlZCA9PT0gJ3RydWUnKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuXHRcdFx0Y29uc3QgcmF3TWFya2Rvd24gPSBjdHguZ2V0U2VjdGlvbkluZm8odGFibGVFbCk/LnRleHQgfHwgaHRtbFRvTWFya2Rvd24odGFibGVFbCk7XHJcblx0XHRcdGlmICghcmF3TWFya2Rvd24pIHJldHVybjtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODlFM1x1Njc5MFx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG5cdFx0XHRjb25zdCBsaW5lcyA9IHJhd01hcmtkb3duLnNwbGl0KCdcXG4nKTtcclxuXHRcdFx0Y29uc3QgdGFibGVMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSAmJiBsaW5lLnRyaW0oKS5lbmRzV2l0aCgnfCcpKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjI3RVx1NTIzMFx1NjcwOVx1NjU0OFx1NzY4NFx1ODg2OFx1NjgzQ1x1ODg0Q1x1RkYwQ1x1OEZENFx1NTZERVxyXG5cdFx0XHRpZiAodGFibGVMaW5lcy5sZW5ndGggPCAyKSByZXR1cm47XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTc5RkJcdTk2NjRcdTg4NjhcdTU5MzRcdTUyMDZcdTk2OTRcdTg4NENcdUZGMDhcdTdCMkNcdTRFOENcdTg4NENcdUZGMDlcclxuXHRcdFx0Y29uc3QgY29udGVudExpbmVzID0gW3RhYmxlTGluZXNbMF1dLmNvbmNhdCh0YWJsZUxpbmVzLnNsaWNlKDIpKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODlFM1x1Njc5MFx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc4NFxyXG5cdFx0XHRjb25zdCByb3dzOiBzdHJpbmdbXVtdID0gW107XHJcblx0XHRcdGZvciAoY29uc3QgbGluZSBvZiBjb250ZW50TGluZXMpIHtcclxuXHRcdFx0XHRjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKVxyXG5cdFx0XHRcdFx0LmZpbHRlcigoXywgaSwgYXJyKSA9PiBpID4gMCAmJiBpIDwgYXJyLmxlbmd0aCAtIDEpXHJcblx0XHRcdFx0XHQubWFwKGNlbGwgPT4gY2VsbC50cmltKCkpO1xyXG5cdFx0XHRcdHJvd3MucHVzaChjZWxscyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0RPTVx1N0VEM1x1Njc4NFxyXG5cdFx0XHRjb25zdCBkb21Sb3dzID0gdGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG5cdFx0XHRpZiAoZG9tUm93cy5sZW5ndGggIT09IHJvd3MubGVuZ3RoKSByZXR1cm47XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5MDRcdTc0MDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuXHRcdFx0Zm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcblx0XHRcdFx0Y29uc3Qgcm93Q2VsbHMgPSByb3dzW3Jvd0luZGV4XTtcclxuXHRcdFx0XHRjb25zdCBkb21Sb3cgPSBkb21Sb3dzW3Jvd0luZGV4XTtcclxuXHRcdFx0XHRjb25zdCBkb21DZWxscyA9IGRvbVJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZG9tQ2VsbHMubGVuZ3RoICE9PSByb3dDZWxscy5sZW5ndGgpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGZvciAobGV0IGNvbEluZGV4ID0gMDsgY29sSW5kZXggPCByb3dDZWxscy5sZW5ndGg7IGNvbEluZGV4KyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGNlbGxDb250ZW50ID0gcm93Q2VsbHNbY29sSW5kZXhdO1xyXG5cdFx0XHRcdFx0Y29uc3QgZG9tQ2VsbCA9IGRvbUNlbGxzW2NvbEluZGV4XSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gXHU1OTA0XHU3NDA2XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHJcblx0XHRcdFx0XHRpZiAoKGNlbGxDb250ZW50ID09PSAnPCcgfHwgY2VsbENvbnRlbnQgPT09ICdcXFxcPCcgfHwgXHJcblx0XHRcdFx0XHRcdCBjZWxsQ29udGVudCA9PT0gJyA8ICcgfHwgY2VsbENvbnRlbnQgPT09ICcgXFxcXDwgJykgJiYgY29sSW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGxlZnRDZWxsID0gZG9tQ2VsbHNbY29sSW5kZXggLSAxXSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0bGVmdENlbGwuY29sU3BhbiA9IChsZWZ0Q2VsbC5jb2xTcGFuIHx8IDEpICsgMTtcclxuXHRcdFx0XHRcdFx0ZG9tQ2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU1NDJGXHU3NTI4XHU0RTg2XHU4MUVBXHU1MkE4XHU1QzQ1XHU0RTJEXHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscykge1xyXG5cdFx0XHRcdFx0XHRcdGxlZnRDZWxsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG5cdFx0XHRcdFx0XHRcdGxlZnRDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcblx0XHRcdFx0XHRcdGxlZnRDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gXHU1OTA0XHU3NDA2XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHJcblx0XHRcdFx0XHRlbHNlIGlmICgoY2VsbENvbnRlbnQgPT09ICdeJyB8fCBjZWxsQ29udGVudCA9PT0gJ1xcXFxeJyB8fCBcclxuXHRcdFx0XHRcdFx0XHQgIGNlbGxDb250ZW50ID09PSAnIF4gJyB8fCBjZWxsQ29udGVudCA9PT0gJyBcXFxcXiAnKSAmJiByb3dJbmRleCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWJvdmVSb3cgPSBkb21Sb3dzW3Jvd0luZGV4IC0gMV07XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFib3ZlQ2VsbHMgPSBhYm92ZVJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChjb2xJbmRleCA8IGFib3ZlQ2VsbHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWJvdmVDZWxsID0gYWJvdmVDZWxsc1tjb2xJbmRleF0gYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0YWJvdmVDZWxsLnJvd1NwYW4gPSAoYWJvdmVDZWxsLnJvd1NwYW4gfHwgMSkgKyAxO1xyXG5cdFx0XHRcdFx0XHRcdGRvbUNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdTRFODZcdTgxRUFcdTUyQThcdTVDNDVcdTRFMkRcclxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGFib3ZlQ2VsbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuXHRcdFx0XHRcdFx0XHRcdGFib3ZlQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQwOFx1NUU3Nlx1NjgzN1x1NUYwRlx1N0M3QlxyXG5cdFx0XHRcdFx0XHRcdGFib3ZlQ2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2ODA3XHU4QkIwXHU4ODY4XHU2ODNDXHU0RTNBXHU1REYyXHU1OTA0XHU3NDA2XHJcblx0XHRcdCh0YWJsZUVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnRhYmxlTWVyZ2VQcm9jZXNzZWQgPSAndHJ1ZSc7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnXHU1REYyXHU2RTMyXHU2N0QzXHU4ODY4XHU2ODNDXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTZFMzJcdTY3RDNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdThCRkJcdTUzRDZcdTg4NjhcdTY4M0NJRFxyXG5cdCAqIFx1OEZEOVx1NjYyRlx1NEUwMFx1NEUyQVx1NjZGNFx1NTNFRlx1OTc2MFx1NzY4NFx1NjVCOVx1NkNENVx1RkYwQ1x1NTZFMFx1NEUzQVx1NUI4M1x1NEUwRFx1NEY5RFx1OEQ1Nlx1NEU4RURPTVx1N0VEM1x1Njc4NFxyXG5cdCAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuXHQgKiBAcmV0dXJucyBQcm9taXNlPHN0cmluZyB8IG51bGw+XHJcblx0ICovXHJcblx0YXN5bmMgcmVhZFRhYmxlSWRGcm9tTWFya2Rvd24odGFibGU6IEhUTUxFbGVtZW50KTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyAxLiBcdTk5OTZcdTUxNDhcdTVDMURcdThCRDVcdTRFQ0VcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTc2ODRkYXRhLXRhYmxlLWlkXHU1QzVFXHU2MDI3XHU4M0I3XHU1M0Q2SURcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdJZCA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG5cdFx0XHRpZiAoZXhpc3RpbmdJZCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBcdTRFQ0VcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTVDNUVcdTYwMjdcdTRFMkRcdTgzQjdcdTUzRDZJRDogJHtleGlzdGluZ0lkfWApO1xyXG5cdFx0XHRcdHJldHVybiBleGlzdGluZ0lkO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcclxuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGlmICghYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkUnKTtcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU2NTg3XHU0RUY2XHJcblx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU2NTg3XHU0RUY2Jyk7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKGBcdTVDMURcdThCRDVcdTRFQ0VcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTRFMkRcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NJRDogJHthY3RpdmVGaWxlLnBhdGh9YCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdThCRkJcdTUzRDZcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcclxuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuXHRcdFx0Y29uc3QgdGFibGVGZWF0dXJlID0gdGhpcy50YWJsZUlkTWFuYWdlci5leHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlKTtcclxuXHRcdFx0Y29uc29sZS5sb2coYFx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MTpgLCB0YWJsZUZlYXR1cmUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU0RUNFTWFya2Rvd25cdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuXHRcdFx0Y29uc3QgdGFibGVJbmZvcyA9IHRoaXMudGFibGVJZE1hbmFnZXIuZXh0cmFjdFRhYmxlSWRzRnJvbU1hcmtkb3duKGNvbnRlbnQpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU0RUNFXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU3Njg0XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGOmAsIHRhYmxlSW5mb3MpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU1NzI4RE9NXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXHJcblx0XHRcdGNvbnN0IGFsbFRhYmxlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKSk7XHJcblx0XHRcdGNvbnN0IHRhYmxlSW5kZXggPSBhbGxUYWJsZXMuaW5kZXhPZih0YWJsZSBhcyBIVE1MVGFibGVFbGVtZW50KTtcclxuXHRcdFx0Y29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RTogXHU3QjJDJHt0YWJsZUluZGV4fVx1NEUyQVx1ODg2OFx1NjgzQ1x1RkYwOFx1NTE3MSR7YWxsVGFibGVzLmxlbmd0aH1cdTRFMkFcdUZGMDlgKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG5cdFx0XHRjb25zdCBzaW1pbGFyaXR5VGhyZXNob2xkID0gdGhpcy5zZXR0aW5ncy5mZWF0dXJlU2ltaWxhcml0eVRocmVzaG9sZCB8fCAwLjc7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY4MzlcdTYzNkVcdThCQkVcdTdGNkVcdTUxQjNcdTVCOUFcdTUzMzlcdTkxNERcdTk4N0FcdTVFOEZcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucHJlZmVyRmVhdHVyZU1hdGNoaW5nKSB7XHJcblx0XHRcdFx0Ly8gXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gMS4gXHU5OTk2XHU1MTQ4XHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0aWYgKHRhYmxlRmVhdHVyZSkge1xyXG5cdFx0XHRcdFx0bGV0IGJlc3RNYXRjaElkID0gJyc7XHJcblx0XHRcdFx0XHRsZXQgYmVzdE1hdGNoU2NvcmUgPSAwO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHsgaWQsIGZlYXR1cmUgfSBvZiB0YWJsZUluZm9zKSB7XHJcblx0XHRcdFx0XHRcdGlmICghaWQpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2NvcmUgPSB0aGlzLnRhYmxlSWRNYW5hZ2VyLmNhbGN1bGF0ZUZlYXR1cmVTaW1pbGFyaXR5KHRhYmxlRmVhdHVyZSwgZmVhdHVyZSk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NJRCAke2lkfSBcdTc2ODRcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTY6ICR7c2NvcmUudG9GaXhlZCgyKX1gKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChzY29yZSA+IGJlc3RNYXRjaFNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0YmVzdE1hdGNoU2NvcmUgPSBzY29yZTtcclxuXHRcdFx0XHRcdFx0XHRiZXN0TWF0Y2hJZCA9IGlkO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFx1NEY3Rlx1NzUyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NzY4NFx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG5cdFx0XHRcdFx0aWYgKGJlc3RNYXRjaElkICYmIGJlc3RNYXRjaFNjb3JlID4gc2ltaWxhcml0eVRocmVzaG9sZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgXHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU3NkY4XHU0RjNDXHU1RUE2XHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQ6ICR7YmVzdE1hdGNoSWR9XHVGRjA4XHU3NkY4XHU0RjNDXHU1RUE2OiAke2Jlc3RNYXRjaFNjb3JlLnRvRml4ZWQoMil9XHVGRjA5YCk7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUMwNklEXHU0RkREXHU1QjU4XHU1MjMwXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHVGRjBDXHU0RUU1XHU0RkJGXHU1NDBFXHU3RUVEXHU0RjdGXHU3NTI4XHJcblx0XHRcdFx0XHRcdHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIGJlc3RNYXRjaElkKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGJlc3RNYXRjaElkO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyAyLiBcdTU5ODJcdTY3OUNcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcdTU5MzFcdThEMjVcdUZGMENcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcclxuXHRcdFx0XHRpZiAodGFibGVJbmRleCAhPT0gLTEgJiYgdGFibGVJbmRleCA8IHRhYmxlSW5mb3MubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRjb25zdCB7IGlkIH0gPSB0YWJsZUluZm9zW3RhYmxlSW5kZXhdO1xyXG5cdFx0XHRcdFx0aWYgKGlkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1QzA2SURcdTRGRERcdTVCNThcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcdUZGMENcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTRGN0ZcdTc1MjhcclxuXHRcdFx0XHRcdFx0dGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgaWQpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaWQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFx1OUVEOFx1OEJBNFx1OTg3QVx1NUU4Rlx1RkYxQVx1NTE0OFx1NEY0RFx1N0Y2RVx1NTMzOVx1OTE0RFx1RkYwQ1x1NTE4RFx1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIDEuIFx1OTk5Nlx1NTE0OFx1NUMxRFx1OEJENVx1OTAxQVx1OEZDN1x1NEY0RFx1N0Y2RVx1N0NCRVx1Nzg2RVx1NTMzOVx1OTE0RFxyXG5cdFx0XHRcdGlmICh0YWJsZUluZGV4ICE9PSAtMSAmJiB0YWJsZUluZGV4IDwgdGFibGVJbmZvcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHsgaWQgfSA9IHRhYmxlSW5mb3NbdGFibGVJbmRleF07XHJcblx0XHRcdFx0XHRpZiAoaWQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1OTAxQVx1OEZDN1x1NEY0RFx1N0Y2RVx1N0NCRVx1Nzg2RVx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG5cdFx0XHRcdFx0XHQvLyBcdTVDMDZJRFx1NEZERFx1NUI1OFx1NTIzMFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NEUwQVx1RkYwQ1x1NEVFNVx1NEZCRlx1NTQwRVx1N0VFRFx1NEY3Rlx1NzUyOFxyXG5cdFx0XHRcdFx0XHR0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBpZCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBpZDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gMi4gXHU1OTgyXHU2NzlDXHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHU1OTMxXHU4RDI1XHVGRjBDXHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0aWYgKHRhYmxlRmVhdHVyZSkge1xyXG5cdFx0XHRcdFx0bGV0IGJlc3RNYXRjaElkID0gJyc7XHJcblx0XHRcdFx0XHRsZXQgYmVzdE1hdGNoU2NvcmUgPSAwO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHsgaWQsIGZlYXR1cmUgfSBvZiB0YWJsZUluZm9zKSB7XHJcblx0XHRcdFx0XHRcdGlmICghaWQpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2NvcmUgPSB0aGlzLnRhYmxlSWRNYW5hZ2VyLmNhbGN1bGF0ZUZlYXR1cmVTaW1pbGFyaXR5KHRhYmxlRmVhdHVyZSwgZmVhdHVyZSk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NJRCAke2lkfSBcdTc2ODRcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTY6ICR7c2NvcmUudG9GaXhlZCgyKX1gKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChzY29yZSA+IGJlc3RNYXRjaFNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0YmVzdE1hdGNoU2NvcmUgPSBzY29yZTtcclxuXHRcdFx0XHRcdFx0XHRiZXN0TWF0Y2hJZCA9IGlkO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFx1NEY3Rlx1NzUyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NzY4NFx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG5cdFx0XHRcdFx0aWYgKGJlc3RNYXRjaElkICYmIGJlc3RNYXRjaFNjb3JlID4gc2ltaWxhcml0eVRocmVzaG9sZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgXHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU3NkY4XHU0RjNDXHU1RUE2XHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQ6ICR7YmVzdE1hdGNoSWR9XHVGRjA4XHU3NkY4XHU0RjNDXHU1RUE2OiAke2Jlc3RNYXRjaFNjb3JlLnRvRml4ZWQoMil9XHVGRjA5YCk7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUMwNklEXHU0RkREXHU1QjU4XHU1MjMwXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHVGRjBDXHU0RUU1XHU0RkJGXHU1NDBFXHU3RUVEXHU0RjdGXHU3NTI4XHJcblx0XHRcdFx0XHRcdHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIGJlc3RNYXRjaElkKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGJlc3RNYXRjaElkO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gMy4gXHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU4ODY4XHU2ODNDXHU3RUQzXHU2Nzg0XHU1MzM5XHU5MTREXHVGRjA4XHU4ODRDXHU2NTcwXHU1NDhDXHU1MjE3XHU2NTcwXHVGRjA5XHJcblx0XHRcdGlmICh0YWJsZUZlYXR1cmUpIHtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IHsgaWQsIGZlYXR1cmUgfSBvZiB0YWJsZUluZm9zKSB7XHJcblx0XHRcdFx0XHRpZiAoIWlkKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU4ODRDXHU2NTcwXHU1NDhDXHU1MjE3XHU2NTcwXHU5MEZEXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0XHRpZiAoZmVhdHVyZS5yb3dzID09PSB0YWJsZUZlYXR1cmUucm93cyAmJiBmZWF0dXJlLmNvbHMgPT09IHRhYmxlRmVhdHVyZS5jb2xzKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1QzA2SURcdTRGRERcdTVCNThcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcdUZGMENcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTRGN0ZcdTc1MjhcclxuXHRcdFx0XHRcdFx0dGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgaWQpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaWQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyA0LiBcdTU5ODJcdTY3OUNcdTYyNDBcdTY3MDlcdTUzMzlcdTkxNERcdTkwRkRcdTU5MzFcdThEMjVcdUZGMENcdTRGNDZcdTg4NjhcdTY4M0NJRFx1NTI5Rlx1ODBGRFx1NURGMlx1NTQyRlx1NzUyOFx1RkYwQ1x1NTIxOVx1NzUxRlx1NjIxMFx1NjVCMElEXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVRhYmxlSWRzKSB7XHJcblx0XHRcdFx0Y29uc3QgbmV3SWQgPSB0aGlzLnRhYmxlSWRNYW5hZ2VyLmdlbmVyYXRlVGFibGVJZCgpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NzUxRlx1NjIxMFx1NjVCMElEOiAke25ld0lkfWApO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFx1NUMwNklEXHU0RkREXHU1QjU4XHU1MjMwXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHVGRjBDXHU0RUU1XHU0RkJGXHU1NDBFXHU3RUVEXHU0RjdGXHU3NTI4XHJcblx0XHRcdFx0dGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgbmV3SWQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJldHVybiBuZXdJZDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU3OTgxXHU3NTI4XHU0RTg2XHU4ODY4XHU2ODNDSURcdTUyOUZcdTgwRkRcdUZGMENcdTUyMTlcdThGRDRcdTU2REVudWxsXHJcblx0XHRcdGNvbnNvbGUubG9nKCdcdTY3MkFcdTU3MjhNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU0RTE0XHU4ODY4XHU2ODNDSURcdTUyOUZcdTgwRkRcdTVERjJcdTc5ODFcdTc1MjgnKTtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1OEJGQlx1NTNENlx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFx1OEJCRVx1N0Y2RVx1ODlDNlx1NTZGRVx1NkEyMVx1NUYwRlx1NTNEOFx1NTMxNlx1NzZEMVx1NTQyQ1xyXG5cdCAqL1xyXG5cdHNldHVwVmlld01vZGVDaGFuZ2VMaXN0ZW5lcigpOiB2b2lkIHtcclxuXHRcdC8vIFx1NzlGQlx1OTY2NFx1NTNFRlx1ODBGRFx1NUI1OFx1NTcyOFx1NzY4NFx1NjVFN1x1NzZEMVx1NTQyQ1x1NTY2OFxyXG5cdFx0aWYgKHRoaXMudmlld01vZGVDaGFuZ2VIYW5kbGVyKSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vZmYoJ2FjdGl2ZS1sZWFmLWNoYW5nZScsIHRoaXMudmlld01vZGVDaGFuZ2VIYW5kbGVyKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9mZignbGF5b3V0LWNoYW5nZScsIHRoaXMudmlld01vZGVDaGFuZ2VIYW5kbGVyKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU1OTA0XHU3NDA2XHU1MUZEXHU2NTcwXHJcblx0XHR0aGlzLnZpZXdNb2RlQ2hhbmdlSGFuZGxlciA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jaGVja0FuZFJlbmRlclRhYmxlcygpO1xyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2Q0U4XHU1MThDXHU3NkQxXHU1NDJDXHU1NjY4XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgdGhpcy52aWV3TW9kZUNoYW5nZUhhbmRsZXIpXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIHRoaXMudmlld01vZGVDaGFuZ2VIYW5kbGVyKVxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5sb2coXCJcdTVERjJcdThCQkVcdTdGNkVcdTg5QzZcdTU2RkVcdTZBMjFcdTVGMEZcdTUzRDhcdTUzMTZcdTc2RDFcdTU0MkNcdTU2NjhcIik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcdTVFNzZcdTU3MjhcdTk3MDBcdTg5ODFcdTY1RjZcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcclxuXHQgKi9cclxuXHRjaGVja0FuZFJlbmRlclRhYmxlcygpOiB2b2lkIHtcclxuXHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRVxyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHJcblx0XHRjb25zdCBpc1ByZXZpZXdNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdwcmV2aWV3JztcclxuXHRcdFxyXG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU2NjJGXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHVGRjBDXHU0RTE0XHU0RTBFXHU0RTBBXHU2QjIxXHU3MkI2XHU2MDAxXHU0RTBEXHU1NDBDXHVGRjBDXHU4OUU2XHU1M0QxXHU2RTMyXHU2N0QzXHJcblx0XHRpZiAoaXNQcmV2aWV3TW9kZSAmJiAhdGhpcy5sYXN0UHJldmlld01vZGVTdGF0ZSkge1xyXG5cdFx0XHQvLyBcdTVFRjZcdThGREZcdTYyNjdcdTg4NENcdUZGMENcdTc4NkVcdTRGRERET01cdTVERjJcdTVCOENcdTUxNjhcdTUyQTBcdThGN0RcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0cmVuZGVyVGFibGVzV2l0aFN0b3JlZFN0eWxlcyh0aGlzKTtcclxuXHRcdFx0fSwgMzAwKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gXHU4QkIwXHU1RjU1XHU1RjUzXHU1MjREXHU3MkI2XHU2MDAxXHJcblx0XHR0aGlzLmxhc3RQcmV2aWV3TW9kZVN0YXRlID0gaXNQcmV2aWV3TW9kZTtcclxuXHR9XHJcbn1cclxuXHJcbi8vIFx1OUVEOFx1OEJBNFx1NUJGQ1x1NTFGQVx1NjNEMlx1NEVGNlx1N0M3QlxyXG5leHBvcnQgZGVmYXVsdCBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG4iLCAiaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgQXBwLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE9ic2lkaWFuU3ByZWFkc2hlZXQgfSBmcm9tICcuL21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoZWV0U2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIFxyXG57XHJcblx0cGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSBcclxuXHR7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCBcclxuXHR7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQWR2YW5jZWQgVGFibGUgWFQgXHU4QkJFXHU3RjZFJyB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTM5Rlx1NzUxRlx1ODg2OFx1NjgzQ1x1NTQwRVx1NTkwNFx1NzQwNicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTZCNjRcdThCQkVcdTdGNkVcdTRFRTVcdTRGN0ZcdTc1MjhPYnNpZGlhbiBTaGVldHNcdTc2ODRcdTZFMzJcdTY3RDNcdTU2NjgnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmF0aXZlUHJvY2Vzc2luZylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmF0aXZlUHJvY2Vzc2luZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciB3b3Jrc3BhY2UuYWN0aXZlTGVhZiBpcyBkZXByZWNhdGVkIGFuZCB0aGUgZm9sbG93aW5nIFxyXG5cdFx0XHRcdFx0XHQvLyBsaW5lIGlzIHByZWZlcmVkIGJ1dCB0aGUgZm9sbG93aW5nIGxpbmUgZG9lcyBub3QgYWN0dWFsbHkgd29yayBvbiBteSBcclxuXHRcdFx0XHRcdFx0Ly8gbWFjaGluZSBzbyBkZXByZWNhdGVkIGl0IGlzIEkgZ3Vlc3NcclxuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY/LnJlYnVpbGRWaWV3KCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LnByZXZpZXdNb2RlLnJlcmVuZGVyKHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTcyOFx1NTM1NVx1NTE0M1x1NjgzQ1x1NEUyRFx1NEY3Rlx1NzUyOFx1NkJCNVx1ODQzRCcpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTZCNjRcdThCQkVcdTdGNkVcdTRFRTVcdTU3MjhcdTg4NjhcdTY4M0NcdTUzNTVcdTUxNDNcdTY4M0NcdTRFMkRcdTRGN0ZcdTc1MjhcdTZCQjVcdTg0M0QnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFyYWdyYXBocylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGFyYWdyYXBocyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciB3b3Jrc3BhY2UuYWN0aXZlTGVhZiBpcyBkZXByZWNhdGVkIGFuZCB0aGUgZm9sbG93aW5nIFxyXG5cdFx0XHRcdFx0XHQvLyBsaW5lIGlzIHByZWZlcmVkIGJ1dCB0aGUgZm9sbG93aW5nIGxpbmUgZG9lcyBub3QgYWN0dWFsbHkgd29yayBvbiBteSBcclxuXHRcdFx0XHRcdFx0Ly8gbWFjaGluZSBzbyBkZXByZWNhdGVkIGl0IGlzIEkgZ3Vlc3NcclxuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY/LnJlYnVpbGRWaWV3KCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LnByZXZpZXdNb2RlLnJlcmVuZGVyKHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTVERTVcdTUxNzdcdTY4MEZcdThCQkVcdTdGNkUnIH0pO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTQyRlx1NzUyOFx1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTYyMTZcdTc5ODFcdTc1MjhcdTg4NjhcdTY4M0NcdTVERTVcdTUxNzdcdTY4MEZcdTUyOUZcdTgwRkQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbGJhckVuYWJsZWQpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uY3JlYXRlVG9vbGJhcigpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFx1NzlGQlx1OTY2NFx1NURFNVx1NTE3N1x1NjgwRlx1NUJCOVx1NTY2OFxyXG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRhaW5lcicpLmZvckVhY2goY29udGFpbmVyID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTY0Q0RcdTRGNUMnIH0pO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTQyRlx1NzUyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjRDRFx1NEY1QycpXHJcblx0XHRcdC5zZXREZXNjKCdcdTUxNDFcdThCQjhcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2RjRcdTYzQTVcdTRGRUVcdTY1MzkgTWFya2Rvd24gXHU2RTkwXHU3ODAxXHU0RTJEXHU3Njg0XHU4ODY4XHU2ODNDJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzYnIH0pO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTQyRlx1NzUyOFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3NicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTRGN0ZcdTc1MjggPCBcdTU0OEMgXiBcdTY4MDdcdThCQjBcdThGREJcdTg4NENcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzZcdTc2ODRcdTUyOUZcdTgwRkQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNlbGxNZXJnaW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5wcmV2aWV3TW9kZS5yZXJlbmRlcih0cnVlKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTU0MDhcdTVFNzZcdTk3NUVcdTdBN0FcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTc4NkVcdThCQTQnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1RjUzXHU1NDA4XHU1RTc2XHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2JylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTgxRUFcdTUyQThcdTVDNDVcdTRFMkRcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU4MUVBXHU1MkE4XHU1QzA2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RTJEXHU3Njg0XHU1MTg1XHU1QkI5XHU1QzQ1XHU0RTJEXHU2NjNFXHU3OTNBJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5wcmV2aWV3TW9kZS5yZXJlbmRlcih0cnVlKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU4ODY4XHU2ODNDSURcdThCQkVcdTdGNkUnIH0pO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTQyRlx1NzUyOFx1ODg2OFx1NjgzQ0lEJylcclxuXHRcdFx0LnNldERlc2MoJ1x1ODFFQVx1NTJBOFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHU0RjVDXHU0RTNBSFRNTFx1NkNFOFx1OTFDQScpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVUYWJsZUlkcylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVGFibGVJZHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU0RjdGXHU3NTI4XHU4ODY4XHU2ODNDXHU2Q0U4XHU5MUNBXHU1OTM5XHU2QTIxXHU1RjBGJylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTcyOFx1ODg2OFx1NjgzQ1x1NTI0RFx1NTQwRVx1NkRGQlx1NTJBMFx1OTE0RFx1NUJGOVx1NzY4NEhUTUxcdTZDRThcdTkxQ0FcdUZGMENcdTVGNjJcdTYyMTBcIlx1NkNFOFx1OTFDQVx1NTkzOVwiXHVGRjBDXHU2M0QwXHU5QUQ4XHU4ODY4XHU2ODNDSURcdThCQzZcdTUyMkJcdTc2ODRcdTUxQzZcdTc4NkVcdTYwMjcnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlVGFibGVXcmFwcGVyQ29tbWVudHMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVRhYmxlV3JhcHBlckNvbW1lbnRzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1ODg2OFx1NjgzQ0lEXHU1MjREXHU3RjAwJylcclxuXHRcdFx0LnNldERlc2MoJ1x1NzUxRlx1NjIxMFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHU1MjREXHU3RjAwJylcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlkUHJlZml4KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZFByZWZpeCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcdTc2RjhcdTRGM0NcdTVFQTZcdTk2MDhcdTUwM0MnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1RjUzXHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHU4ODY4XHU2ODNDXHU2NUY2XHVGRjBDXHU5NzAwXHU4OTgxXHU4RkJFXHU1MjMwXHU3Njg0XHU2NzAwXHU1QzBGXHU3NkY4XHU0RjNDXHU1RUE2XHVGRjA4MC0xXHU0RTRCXHU5NUY0XHVGRjBDXHU5RUQ4XHU4QkE0MC43XHVGRjA5JylcclxuXHRcdFx0LmFkZFNsaWRlcihzbGlkZXIgPT4gXHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKDAuNSwgMS4wLCAwLjA1KVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZlYXR1cmVTaW1pbGFyaXR5VGhyZXNob2xkIHx8IDAuNylcclxuXHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mZWF0dXJlU2ltaWxhcml0eVRocmVzaG9sZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTUzMzlcdTkxNEQnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1NDJGXHU3NTI4XHU1NDBFXHVGRjBDXHU1QzA2XHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHU4MDBDXHU5NzVFXHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHU2NzY1XHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZmVyRmVhdHVyZU1hdGNoaW5nIHx8IGZhbHNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJGZWF0dXJlTWF0Y2hpbmcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NjU3MFx1NjM2RVx1NUI1OFx1NTBBOFx1OEJCRVx1N0Y2RScgfSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU2NTg3XHU0RUY2XHU1QjU4XHU1MEE4JylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTQyRlx1NzUyOFx1NTQwRVx1RkYwQ1x1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUMwNlx1NEYxOFx1NTE0OFx1NUI1OFx1NTBBOFx1NTcyOE1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHVGRjBDXHU4MDBDXHU0RTBEXHU2NjJGZGF0YS5qc29uXHU2NTg3XHU0RUY2XHU0RTJEJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZlckZpbGVTdG9yYWdlIHx8IGZhbHNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTgxRUFcdTUyQThcdTVCRkNcdTUxRkFcdTUyMzBcdTY1ODdcdTRFRjYnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1NDJGXHU3NTI4XHU1NDBFXHVGRjBDXHU1MzczXHU0RjdGXHU0RjdGXHU3NTI4ZGF0YS5qc29uXHU1QjU4XHU1MEE4XHU2NTcwXHU2MzZFXHVGRjBDXHU0RTVGXHU0RjFBXHU4MUVBXHU1MkE4XHU1QzA2XHU2NTcwXHU2MzZFXHU1QkZDXHU1MUZBXHU1MjMwTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0V4cG9ydFRvRmlsZSB8fCBmYWxzZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0V4cG9ydFRvRmlsZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnbWFpbic7XHJcbmltcG9ydCB7XHJcblx0QXBwLFxyXG5cdE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsXHJcblx0TWFya2Rvd25SZW5kZXJDaGlsZCxcclxuXHRNYXJrZG93blJlbmRlcmVyLFxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgeyBQcm9wZXJ0aWVzIH0gZnJvbSAnY3NzdHlwZSc7XHJcbmltcG9ydCAqIGFzIEpTT041IGZyb20gJ2pzb241JztcclxuXHJcbi8vIFRPRE86IE1vdmUgdGhlc2UgdG8gc2V0dGluZ3NcclxuY29uc3QgTUVSR0VfVVBfU0lHTklGSUVSID0gJ14nLFxyXG5cdE1FUkdFX0xFRlRfU0lHTklGSUVSID0gJzwnLFxyXG5cdEhFQURFUl9ERUxJTUVURVIgPSAnLScsXHJcblx0TUVUQV9ERUxJTUVURVIgPSAnLS0tJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNoZWV0TWV0YURhdGEge1xyXG5cdGNsYXNzZXM6IHsgW2tleTogc3RyaW5nXTogUHJvcGVydGllcyB9O1xyXG5cdGxvZzogYm9vbGVhbjtcclxufVxyXG5cclxudHlwZSBncm91cFN0eWxlcyA9IHtcclxuXHRjbGFzc2VzOiBzdHJpbmdbXVxyXG5cdHN0eWxlczogUHJvcGVydGllc1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hlZXRFbGVtZW50IGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XHJcblx0cHJpdmF0ZSBuZXdMaW5lUkU6IFJlZ0V4cDtcclxuXHRwcml2YXRlIGNlbGxCb3JkZXJSRTogUmVnRXhwO1xyXG5cdHByaXZhdGUgbWV0YVJFOiBSZWdFeHA7XHJcblx0cHJpdmF0ZSBoZWFkZXJSRTogUmVnRXhwO1xyXG5cdHByaXZhdGUgY29udGVudEdyaWQ6IHN0cmluZ1tdW107XHJcblx0cHJpdmF0ZSBtZXRhZGF0YTogUGFydGlhbDxJU2hlZXRNZXRhRGF0YT47XHJcblx0cHJpdmF0ZSBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIFByb3BlcnRpZXM+O1xyXG5cdHByaXZhdGUgZ2xvYmFsU3R5bGU6IFByb3BlcnRpZXMgPSB7fTtcclxuXHRwcml2YXRlIGNlbGxNYXhMZW5ndGggPSAwO1xyXG5cdHByaXZhdGUgcm93TWF4TGVuZ3RoID0gMDtcclxuXHRwcml2YXRlIGhlYWRlclJvdzogbnVtYmVyO1xyXG5cdHByaXZhdGUgaGVhZGVyQ29sOiBudW1iZXI7XHJcblx0cHJpdmF0ZSByb3dTdHlsZXM6IGdyb3VwU3R5bGVzW10gPSBbXTtcclxuXHRwcml2YXRlIGNvbFN0eWxlczogZ3JvdXBTdHlsZXNbXSA9IFtdO1xyXG5cdHByaXZhdGUgdGFibGU6IEhUTUxUYWJsZUVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0YWJsZUhlYWQ6IEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xyXG5cdHByaXZhdGUgdGFibGVCb2R5OiBIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcclxuXHRwcml2YXRlIGRvbUdyaWQ6IEhUTUxUYWJsZUNlbGxFbGVtZW50W11bXSA9IFtdO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZWw6IEhUTUxUYWJsZUVsZW1lbnQsXHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IHNvdXJjZTogc3RyaW5nLFxyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsXHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IGFwcDogQXBwLFxyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQsXHJcblx0KSB7XHJcblx0XHRzdXBlcihlbCk7XHJcblx0XHQvLyBUT0RPOiBIYW5kbGUgc2V0dGluZ3MgaGVyZSAtPiBtb3ZlIDoxMS0xMlxyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHR0aGlzLm1ldGFSRSA9IG5ldyBSZWdFeHAoU3RyaW5nLnJhd2BeJHtNRVRBX0RFTElNRVRFUn1cXHMqPyg/On4oLio/KSk/XFxzKj9cXG4rYCwgJ21nJyk7XHJcblx0XHR0aGlzLm5ld0xpbmVSRSA9IG5ldyBSZWdFeHAoU3RyaW5nLnJhd2BcXG5gKTtcclxuXHRcdHRoaXMuY2VsbEJvcmRlclJFID0gbmV3IFJlZ0V4cChTdHJpbmcucmF3YCg/PCFcXFxcKVxcfGApO1xyXG5cdFx0dGhpcy5oZWFkZXJSRSA9IG5ldyBSZWdFeHAoU3RyaW5nLnJhd2BeXFxzKj8oOik/KD86JHtIRUFERVJfREVMSU1FVEVSfSkrPyg6KT9cXHMqPyg/Oig/PCFcXFxcKX4oLio/KSk/JGApO1xyXG5cclxuXHRcdC8vIFBhcnNlIGNvZGUgYmxvY2sgaW5wdXRcclxuXHRcdHRoaXMucGFyc2VJbnB1dFRvR3JpZCgpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdyaWQgaXMgdmFsaWQgKGV2ZXJ5IGxpbmUgc3RhcnRzIGFuZCBlbmRzIHdpdGggYHxgKVxyXG5cdFx0dGhpcy52YWxpZGF0ZUlucHV0KCk7XHJcblxyXG5cdFx0Ly8gRmluZCBhbmQgZml4IGdyaWQgZGltZW5zaW9uc1xyXG5cdFx0dGhpcy5ub3JtYWxpemVHcmlkKCk7XHJcblxyXG5cdFx0Ly8gU3RhcnQgYnVpbGRpbmcgRE9NIGVsZW1lbnRcclxuXHRcdHRoaXMudGFibGUgPSB0aGlzLmVsO1xyXG5cdFx0dGhpcy50YWJsZS5pZCA9ICdvYnNpZGlhbi1zaGVldHMtcGFyc2VkJztcclxuXHRcdHRoaXMudGFibGVIZWFkID0gdGhpcy50YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcclxuXHRcdHRoaXMudGFibGVCb2R5ID0gdGhpcy50YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcclxuXHJcblx0XHQvLyBGaW5kIGhlYWRlciBib3VuZGFyaWVzXHJcblx0XHR0aGlzLmdldEhlYWRlckJvdW5kYXJpZXMoKTtcclxuXHJcblx0XHQvLyBGaW5kIGhlYWRlciBzdHlsZXNcclxuXHRcdHRoaXMuZ2V0SGVhZGVyU3R5bGVzKCk7XHJcblxyXG5cdFx0Ly8gQnVpbGQgY2VsbHMgaW50byBET01cclxuXHRcdHRoaXMuYnVpbGREb21UYWJsZSgpO1xyXG5cclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXNHcmlkKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkgeyB9XHJcblxyXG5cdGRpc3BsYXlFcnJvcihlcnJvcj86IHN0cmluZykge1xyXG5cdFx0dGhpcy5lbC5jcmVhdGVEaXYoe1xyXG5cdFx0XHR0ZXh0OiBgXFxuRXJyb3I6IFxcYCR7ZXJyb3J9XFxgXFxuXFxuYCxcclxuXHRcdFx0Y2xzOiAnb2JzLXNoZWV0c19lcnJvcicsXHJcblx0XHR9KTtcclxuXHRcdHRoaXMudW5sb2FkKCk7XHJcblx0fVxyXG5cclxuXHRwYXJzZUlucHV0VG9HcmlkKCkge1xyXG5cdFx0aWYgKCF0aGlzLm1ldGFSRS50ZXN0KHRoaXMuc291cmNlKSkgcmV0dXJuIHRoaXMuY29udGVudEdyaWQgPVxyXG5cdFx0XHR0aGlzLnNvdXJjZS5zcGxpdCh0aGlzLm5ld0xpbmVSRSlcclxuXHRcdFx0XHQuZmlsdGVyKChyb3cpID0+IHRoaXMuY2VsbEJvcmRlclJFLnRlc3Qocm93KSlcclxuXHRcdFx0XHQubWFwKChyb3cpID0+IHJvdy5zcGxpdCh0aGlzLmNlbGxCb3JkZXJSRSlcclxuXHRcdFx0XHRcdC5tYXAoY2VsbCA9PiBjZWxsLnRyaW0oKSkpO1xyXG5cclxuXHRcdGNvbnN0IFttZXRhLCB1bnBhcnNlZFN0eWxlLCBzb3VyY2VdID0gdGhpcy5zb3VyY2Uuc3BsaXQodGhpcy5tZXRhUkUpO1xyXG5cclxuXHRcdHRoaXMucGFyc2VNZXRhZGF0YShtZXRhKTtcclxuXHJcblx0XHRpZiAodW5wYXJzZWRTdHlsZSkge1xyXG5cdFx0XHRsZXQgY2VsbFN0eWxlOiBQcm9wZXJ0aWVzID0ge307XHJcblx0XHRcdGNvbnN0IGNscyA9IHVucGFyc2VkU3R5bGUubWF0Y2goL1xcLlxcUysvZykgfHwgW107XHJcblx0XHRcdGNscy5mb3JFYWNoKGNzc0NsYXNzID0+IHtcclxuXHRcdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4uKHRoaXMuc3R5bGVzPy5bY3NzQ2xhc3Muc2xpY2UoMSldIHx8IHt9KSB9O1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbnN0IGlubGluZVN0eWxlID0gdW5wYXJzZWRTdHlsZS5tYXRjaCgvXFx7LipcXH0vKT8uWzBdIHx8ICd7fSc7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y2VsbFN0eWxlID0geyAuLi5jZWxsU3R5bGUsIC4uLkpTT041LnBhcnNlKGlubGluZVN0eWxlKSB9O1xyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBJbnZhbGlkIGNlbGwgc3R5bGUgXFxgJHtpbmxpbmVTdHlsZX1cXGBgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5nbG9iYWxTdHlsZSA9IGNlbGxTdHlsZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5jb250ZW50R3JpZCA9IHNvdXJjZS5zcGxpdCh0aGlzLm5ld0xpbmVSRSlcclxuXHRcdFx0Lm1hcCgocm93KSA9PiByb3cuc3BsaXQodGhpcy5jZWxsQm9yZGVyUkUpXHJcblx0XHRcdFx0Lm1hcChjZWxsID0+IGNlbGwudHJpbSgpKSk7XHJcblx0fVxyXG5cclxuXHRwYXJzZU1ldGFkYXRhKG1ldGE6IHN0cmluZykge1xyXG5cdFx0bGV0IG1ldGFkYXRhOiBQYXJ0aWFsPElTaGVldE1ldGFEYXRhPjtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRtZXRhZGF0YSA9IEpTT041LnBhcnNlKG1ldGEpO1xyXG5cdFx0fVxyXG5cdFx0Y2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmRpc3BsYXlFcnJvcignTWV0YWRhdGEgaXMgbm90IHByb3BlciBKU09OJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xyXG5cclxuXHRcdC8vIFNlcGFyYXRlIHRoaXMgb3V0IHdoZW4gbW9yZSBtZXRhZGF0YSBpcyBpbnRyb2R1Y2VkXHJcblx0XHRpZiAobWV0YWRhdGEuY2xhc3Nlcykge1xyXG5cdFx0XHR0aGlzLnN0eWxlcyA9IG1ldGFkYXRhLmNsYXNzZXM7XHJcblx0XHR9XHJcblx0XHQvLyBUT0RPOiBBZGQgbG9nZ2luZyBhbmQgZGVidWdnaW5nIGluIG1ldGFkYXRhXHJcblx0XHQvLyBpZiAobWV0YWRhdGEubG9nKSB0aGlzLmxvZ2dpbmcgPSB0cnVlXHJcblx0fVxyXG5cclxuXHR2YWxpZGF0ZUlucHV0KCkge1xyXG5cdFx0aWYgKFxyXG5cdFx0XHQhdGhpcy5jb250ZW50R3JpZC5ldmVyeShcclxuXHRcdFx0XHQocm93KSA9PiAhcm93LnBvcCgpPy50cmltKCkgJiYgIXJvdy5zaGlmdCgpPy50cmltKClcclxuXHRcdFx0KVxyXG5cdFx0KSByZXR1cm4gdGhpcy5kaXNwbGF5RXJyb3IoJ01hbGZvcm1lZCB0YWJsZScpO1xyXG5cdH1cclxuXHJcblx0bm9ybWFsaXplR3JpZCgpIHtcclxuXHRcdGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCB0aGlzLmNvbnRlbnRHcmlkLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG5cdFx0XHRjb25zdCByb3cgPSB0aGlzLmNvbnRlbnRHcmlkW3Jvd0luZGV4XTtcclxuXHRcdFx0aWYgKHRoaXMucm93TWF4TGVuZ3RoIDwgcm93Lmxlbmd0aCkgdGhpcy5yb3dNYXhMZW5ndGggPSByb3cubGVuZ3RoO1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IHJvdy5sZW5ndGg7IGNvbEluZGV4KyspXHJcblx0XHRcdFx0aWYgKHRoaXMuY2VsbE1heExlbmd0aCA8IHJvd1tjb2xJbmRleF0udHJpbSgpLmxlbmd0aClcclxuXHRcdFx0XHRcdHRoaXMuY2VsbE1heExlbmd0aCA9IHJvd1tjb2xJbmRleF0udHJpbSgpLmxlbmd0aDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvbnRlbnRHcmlkID0gdGhpcy5jb250ZW50R3JpZC5tYXAoKGxpbmUpID0+XHJcblx0XHRcdEFycmF5LmZyb20oXHJcblx0XHRcdFx0eyAuLi5saW5lLCBsZW5ndGg6IHRoaXMucm93TWF4TGVuZ3RoIH0sXHJcblx0XHRcdFx0KGNlbGwpID0+IGNlbGwgfHwgJydcclxuXHRcdFx0KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGdldEhlYWRlckJvdW5kYXJpZXMoKSB7XHJcblx0XHR0aGlzLmhlYWRlclJvdyA9IHRoaXMuY29udGVudEdyaWQuZmluZEluZGV4KFxyXG5cdFx0XHQoaGVhZGVyUm93KSA9PlxyXG5cdFx0XHRcdGhlYWRlclJvdy5ldmVyeSgoaGVhZGVyQ29sKSA9PiB0aGlzLmhlYWRlclJFLnRlc3QoaGVhZGVyQ29sKSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gdHJhbnNwb3NlIGdyaWRcclxuXHRcdHRoaXMuaGVhZGVyQ29sID0gdGhpcy5jb250ZW50R3JpZFswXS5tYXAoKF8sIGkpID0+XHJcblx0XHRcdHRoaXMuY29udGVudEdyaWQubWFwKHJvdyA9PiByb3dbaV0pXHJcblx0XHQpXHJcblx0XHRcdC5maW5kSW5kZXgoXHJcblx0XHRcdFx0KGhlYWRlckNvbCkgPT5cclxuXHRcdFx0XHRcdGhlYWRlckNvbC5ldmVyeSgoaGVhZGVyQ29sKSA9PiB0aGlzLmhlYWRlclJFLnRlc3QoaGVhZGVyQ29sKSlcclxuXHRcdFx0KTtcclxuXHR9XHJcblxyXG5cdGdldEhlYWRlclN0eWxlcygpIHtcclxuXHRcdC8vIFRPRE86IEFkZCBzYW1lIHN5bnRheCBvZiBjdXN0b20gc3R5bGluZyBhcyBjZWxsc1xyXG5cdFx0aWYgKHRoaXMuaGVhZGVyUm93ICE9PSAtMSkgdGhpcy5jb2xTdHlsZXMgPSB0aGlzLmNvbnRlbnRHcmlkW3RoaXMuaGVhZGVyUm93XS5tYXAocm93SGVhZCA9PiB7XHJcblx0XHRcdGxldCBzdHlsZXM6IFByb3BlcnRpZXMgPSB7fTtcclxuXHJcblx0XHRcdGNvbnN0IGFsaWdubWVudCA9IHJvd0hlYWQubWF0Y2godGhpcy5oZWFkZXJSRSk7XHJcblx0XHRcdGlmICghYWxpZ25tZW50KSByZXR1cm4geyBjbGFzc2VzOiBbXSwgc3R5bGVzIH07XHJcblx0XHRcdGVsc2UgaWYgKGFsaWdubWVudFsxXSAmJiBhbGlnbm1lbnRbMl0pIHN0eWxlc1sndGV4dEFsaWduJ10gPSAnY2VudGVyJztcclxuXHRcdFx0ZWxzZSBpZiAoYWxpZ25tZW50WzFdKSBzdHlsZXNbJ3RleHRBbGlnbiddID0gJ2xlZnQnO1xyXG5cdFx0XHRlbHNlIGlmIChhbGlnbm1lbnRbMl0pIHN0eWxlc1sndGV4dEFsaWduJ10gPSAncmlnaHQnO1xyXG5cclxuXHRcdFx0Ly8gUGFyc2UgflxyXG5cdFx0XHRjb25zdCBjbGFzc2VzID0gYWxpZ25tZW50WzNdPy5tYXRjaCgvXFwuXFxTKy9nKT8ubWFwKFN0cmluZykgfHwgW107XHJcblx0XHRcdGNsYXNzZXMuZm9yRWFjaChjc3NDbGFzcyA9PiBcclxuXHRcdFx0XHRzdHlsZXMgPSB7XHJcblx0XHRcdFx0XHQuLi5zdHlsZXMsXHJcblx0XHRcdFx0XHQuLi4odGhpcy5zdHlsZXM/Lltjc3NDbGFzcy5zbGljZSgxKV1cclxuXHRcdFx0XHRcdFx0XHR8fCB7fVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdFx0cmV0dXJuIHsgY2xhc3Nlcywgc3R5bGVzIH07XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAodGhpcy5oZWFkZXJDb2wgIT09IC0xKSB0aGlzLnJvd1N0eWxlcyA9IHRoaXMuY29udGVudEdyaWRbMF0ubWFwKChfLCBpKSA9PlxyXG5cdFx0XHR0aGlzLmNvbnRlbnRHcmlkLm1hcChyb3cgPT4gcm93W2ldKVxyXG5cdFx0KVt0aGlzLmhlYWRlckNvbF0ubWFwKHJvd0hlYWQgPT4ge1xyXG5cdFx0XHRsZXQgc3R5bGVzOiBQcm9wZXJ0aWVzID0ge307XHJcblxyXG5cdFx0XHRjb25zdCBhbGlnbm1lbnQgPSByb3dIZWFkLm1hdGNoKHRoaXMuaGVhZGVyUkUpO1xyXG5cdFx0XHRpZiAoIWFsaWdubWVudCkgcmV0dXJuIHsgY2xhc3NlczogW10sIHN0eWxlcyB9O1xyXG5cdFx0XHRlbHNlIGlmIChhbGlnbm1lbnRbMV0gJiYgYWxpZ25tZW50WzJdKSBzdHlsZXNbJ3RleHRBbGlnbiddID0gJ2NlbnRlcic7XHJcblx0XHRcdGVsc2UgaWYgKGFsaWdubWVudFsxXSkgc3R5bGVzWyd0ZXh0QWxpZ24nXSA9ICdsZWZ0JztcclxuXHRcdFx0ZWxzZSBpZiAoYWxpZ25tZW50WzJdKSBzdHlsZXNbJ3RleHRBbGlnbiddID0gJ3JpZ2h0JztcclxuXHJcblx0XHRcdC8vIFBhcnNlIH5cclxuXHRcdFx0Y29uc3QgY2xhc3NlcyA9IGFsaWdubWVudFszXT8ubWF0Y2goL1xcLlxcUysvZyk/Lm1hcChTdHJpbmcpIHx8IFtdO1xyXG5cdFx0XHRjbGFzc2VzLmZvckVhY2goY3NzQ2xhc3MgPT4gXHJcblx0XHRcdFx0c3R5bGVzID0ge1xyXG5cdFx0XHRcdFx0Li4uc3R5bGVzLFxyXG5cdFx0XHRcdFx0Li4uKHRoaXMuc3R5bGVzPy5bY3NzQ2xhc3Muc2xpY2UoMSldXHJcblx0XHRcdFx0XHRcdFx0fHwge31cclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRcdHJldHVybiB7IGNsYXNzZXMsIHN0eWxlcyB9O1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRidWlsZERvbVRhYmxlKCkge1xyXG5cdFx0Zm9yIChcclxuXHRcdFx0bGV0IHJvd0luZGV4ID0gMDtcclxuXHRcdFx0cm93SW5kZXggPCB0aGlzLmNvbnRlbnRHcmlkLmxlbmd0aDtcclxuXHRcdFx0cm93SW5kZXgrK1xyXG5cdFx0KSB0aGlzLmJ1aWxkRG9tUm93KHJvd0luZGV4KTtcclxuXHR9XHJcblxyXG5cdGJ1aWxkRG9tUm93KHJvd0luZGV4OiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IHJvd0NvbnRlbnRzID0gdGhpcy5jb250ZW50R3JpZFtyb3dJbmRleF07XHJcblx0XHRsZXQgcm93Tm9kZSA9IHRoaXMudGFibGVCb2R5LmNyZWF0ZUVsKCd0cicpO1xyXG5cclxuXHRcdGlmIChyb3dJbmRleCA8IHRoaXMuaGVhZGVyUm93KSByb3dOb2RlID0gdGhpcy50YWJsZUhlYWQuY3JlYXRlRWwoJ3RyJyk7XHJcblx0XHRlbHNlIGlmIChyb3dJbmRleCA9PT0gdGhpcy5oZWFkZXJSb3cpIHJldHVybjtcclxuXHJcblx0XHR0aGlzLmRvbUdyaWRbcm93SW5kZXhdID0gW107XHJcblxyXG5cdFx0Zm9yIChcclxuXHRcdFx0bGV0IGNvbHVtbkluZGV4ID0gMDtcclxuXHRcdFx0Y29sdW1uSW5kZXggPCByb3dDb250ZW50cy5sZW5ndGg7XHJcblx0XHRcdGNvbHVtbkluZGV4KytcclxuXHRcdCkgdGhpcy5idWlsZERvbUNlbGwocm93SW5kZXgsIGNvbHVtbkluZGV4LCByb3dOb2RlKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGJ1aWxkRG9tQ2VsbChyb3dJbmRleDogbnVtYmVyLCBjb2x1bW5JbmRleDogbnVtYmVyLCByb3dOb2RlOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgW1xyXG5cdFx0XHRjZWxsQ29udGVudCxcclxuXHRcdFx0Y2VsbFN0eWxlc1xyXG5cdFx0XSA9IHRoaXMuY29udGVudEdyaWRbcm93SW5kZXhdW2NvbHVtbkluZGV4XS5zcGxpdCgvKD88IVtcXFxcfl0pfig/IX4pLyk7XHJcblxyXG5cdFx0bGV0IGNsczogc3RyaW5nW10gPSBbXTtcclxuXHRcdGxldCBjZWxsU3R5bGU6IFByb3BlcnRpZXMgPSB0aGlzLmdsb2JhbFN0eWxlO1xyXG5cclxuXHRcdGlmICh0aGlzLnJvd1N0eWxlc1tyb3dJbmRleF0pIHtcclxuXHRcdFx0Y2VsbFN0eWxlID0geyAuLi5jZWxsU3R5bGUsIC4uLnRoaXMucm93U3R5bGVzW3Jvd0luZGV4XS5zdHlsZXMgfTsgXHJcblx0XHRcdGNscy5wdXNoKC4uLnRoaXMucm93U3R5bGVzW3Jvd0luZGV4XS5jbGFzc2VzKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmNvbFN0eWxlc1tjb2x1bW5JbmRleF0pIHtcclxuXHRcdFx0Y2VsbFN0eWxlID0geyAuLi5jZWxsU3R5bGUsIC4uLnRoaXMuY29sU3R5bGVzW2NvbHVtbkluZGV4XS5zdHlsZXMgfTsgXHJcblx0XHRcdGNscy5wdXNoKC4uLnRoaXMuY29sU3R5bGVzW2NvbHVtbkluZGV4XS5jbGFzc2VzKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoY2VsbFN0eWxlcykge1xyXG5cdFx0XHRjbHMgPSBjZWxsU3R5bGVzLm1hdGNoKC8oPzw9XFwuKVxcUysvZykgfHwgW107XHJcblx0XHRcdGNscy5mb3JFYWNoKGNzc0NsYXNzID0+IHtcclxuXHRcdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4uKHRoaXMuc3R5bGVzPy5bY3NzQ2xhc3NdIHx8IHt9KSB9O1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbnN0IGlubGluZVN0eWxlID0gY2VsbFN0eWxlcy5tYXRjaCgvXFx7LipcXH0vKT8uWzBdIHx8ICd7fSc7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y2VsbFN0eWxlID0geyAuLi5jZWxsU3R5bGUsIC4uLkpTT041LnBhcnNlKGlubGluZVN0eWxlKSB9O1xyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBJbnZhbGlkIGNlbGwgc3R5bGUgXFxgJHtpbmxpbmVTdHlsZX1cXGBgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBjZWxsVGFnOiBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXAgPSAndGQnO1xyXG5cdFx0bGV0IGNlbGw6IEhUTUxUYWJsZUNlbGxFbGVtZW50O1xyXG5cclxuXHRcdGlmIChjb2x1bW5JbmRleCA9PT0gdGhpcy5oZWFkZXJDb2wgfHwgcm93SW5kZXggPT09IHRoaXMuaGVhZGVyUm93KSByZXR1cm47XHJcblx0XHRlbHNlIGlmIChjb2x1bW5JbmRleCA8IHRoaXMuaGVhZGVyQ29sIHx8IHJvd0luZGV4IDwgdGhpcy5oZWFkZXJSb3cpIGNlbGxUYWcgPSAndGgnO1xyXG5cclxuXHRcdGlmIChjZWxsQ29udGVudCA9PSBNRVJHRV9MRUZUX1NJR05JRklFUiAmJiB0aGlzLmRvbUdyaWQ/Lltyb3dJbmRleF0/Lltjb2x1bW5JbmRleCAtIDFdKSB7XHJcblx0XHRcdGNlbGwgPSB0aGlzLmRvbUdyaWRbcm93SW5kZXhdW2NvbHVtbkluZGV4IC0gMV07XHJcblx0XHRcdGNlbGw/LmNvbFNwYW4gfHwgT2JqZWN0LmFzc2lnbihjZWxsLCB7IGNvbFNwYW46IDEgfSk7XHJcblx0XHRcdGNlbGwuY29sU3BhbiA9IGNvbHVtbkluZGV4IC0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8IGNvbHVtbkluZGV4LnRvU3RyaW5nKCkpICsgMTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGNlbGxDb250ZW50ID09IE1FUkdFX1VQX1NJR05JRklFUiAmJiB0aGlzLmRvbUdyaWQ/Lltyb3dJbmRleCAtIDFdPy5bY29sdW1uSW5kZXhdKSB7XHJcblx0XHRcdGNlbGwgPSB0aGlzLmRvbUdyaWRbcm93SW5kZXggLSAxXVtjb2x1bW5JbmRleF07XHJcblx0XHRcdGNlbGw/LnJvd1NwYW4gfHwgT2JqZWN0LmFzc2lnbihjZWxsLCB7IHJvd1NwYW46IDEgfSk7XHJcblx0XHRcdGNlbGwucm93U3BhbiA9IHJvd0luZGV4IC0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8ICcwJykgKyAxO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoXHJcblx0XHRcdHRoaXMuZG9tR3JpZD8uW3Jvd0luZGV4IC0gMV0/Lltjb2x1bW5JbmRleF0gJiYgdGhpcy5kb21HcmlkPy5bcm93SW5kZXhdPy5bY29sdW1uSW5kZXggLSAxXSAmJlxyXG5cdFx0XHR0aGlzLmRvbUdyaWRbcm93SW5kZXhdW2NvbHVtbkluZGV4IC0gMV0gPT09IHRoaXMuZG9tR3JpZFtyb3dJbmRleCAtIDFdW2NvbHVtbkluZGV4XVxyXG5cdFx0KSBjZWxsID0gdGhpcy5kb21HcmlkW3Jvd0luZGV4XVtjb2x1bW5JbmRleCAtIDFdO1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdC8vIGNvbnN0IGNvbnRlbnRDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdC8vIGNvbnRlbnRDZWxsLmNsYXNzTGlzdC5hZGQoJ3RhYmxlLWNlbGwtd3JhcHBlcicpO1xyXG5cclxuXHRcdFx0Y2VsbCA9IHJvd05vZGUuY3JlYXRlRWwoY2VsbFRhZywgeyBjbHMgfSk7XHJcblx0XHRcdGNlbGwuc2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnLCByb3dJbmRleC50b1N0cmluZygpKTtcclxuXHRcdFx0Y2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcsIGNvbHVtbkluZGV4LnRvU3RyaW5nKCkpO1xyXG5cclxuXHRcdFx0TWFya2Rvd25SZW5kZXJlci5yZW5kZXIoXHJcblx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0J1xcdTIwMEIgJyArIChjZWxsQ29udGVudCB8fCAnXFx1MjAwQicpLCAvLyBNYWtlIHN1cmUgbWFya2Rvd24gdGhhdCByZXF1aXJlcyB0byBiZSBhdCB0aGUgc3RhcnQgb2YgYSBsaW5lIGlzIG5vdCByZW5kZXJlZFxyXG5cdFx0XHRcdGNlbGwsXHJcblx0XHRcdFx0JycsXHJcblx0XHRcdFx0dGhpc1xyXG5cdFx0XHQpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdGNlbGwuaW5uZXJIVE1MID1cclxuXHRcdFx0XHRcdGNlbGxcclxuXHRcdFx0XHRcdFx0LmNoaWxkcmVuWzBdXHJcblx0XHRcdFx0XHRcdC5pbm5lckhUTUxcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoL15cXHUyMDBCIC9nLCAnJyk7XHJcblx0XHRcdFx0Ly8gY2VsbC5hcHBlbmQoY29udGVudENlbGwpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0T2JqZWN0LmFzc2lnbihjZWxsLnN0eWxlLCBjZWxsU3R5bGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLmRvbUdyaWRbcm93SW5kZXhdW2NvbHVtbkluZGV4XSA9IGNlbGw7XHJcblx0fVxyXG59XHJcbiIsICIvLyBAdHMtbm9jaGVja1xyXG4vLyBcdTRFMEFcdTk3NjJcdTc2ODRcdTYzMDdcdTRFRTRcdTRGMUFcdTc5ODFcdTc1MjhcdTY1NzRcdTRFMkFcdTY1ODdcdTRFRjZcdTc2ODRcdTdDN0JcdTU3OEJcdTY4QzBcdTY3RTVcclxuXHJcbmltcG9ydCB7IE9ic2lkaWFuU3ByZWFkc2hlZXQgfSBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBBcHAsIE5vdGljZSwgTW9kYWwsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2XHU3QzdCIC0gXHU3NTI4XHU0RThFXHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU2RDg4XHU2MDZGXHJcbiAqL1xyXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIHJlc3VsdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBvbkNsb3NlOiAocmVzdWx0OiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1lc3NhZ2U6IHN0cmluZywgb25DbG9zZTogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UgPSBvbkNsb3NlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHU3ODZFXHU4QkE0XHU2NENEXHU0RjVDJyB9KTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUzRDZcdTZEODgnIH0pXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Nzg2RVx1OEJBNCcsIGNsczogJ21vZC1jdGEnIH0pXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UodGhpcy5yZXN1bHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogTWFya2Rvd25cdTg4NjhcdTY4M0NcdTY4QzBcdTZENEJcdTU2NjggLSBcdThEMUZcdThEMjNcdTY4QzBcdTZENEJcdTMwMDFcdTUyMDZcdTY3OTBcdTU0OENcdTU5MDRcdTc0MDZNYXJrZG93blx1ODg2OFx1NjgzQ1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1hcmtkb3duVGFibGVEZXRlY3RvciB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIFxyXG4gICAgLy8gXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU4M0I3XHU1M0Q2YXBwXHU1QkY5XHU4QzYxXHJcbiAgICBwcml2YXRlIGdldEFwcCgpOiBBcHAge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4pLmFwcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01hcmtkb3duVGFibGVEZXRlY3RvciBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjYzRVx1NzkzQVx1Nzg2RVx1OEJBNFx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgXHU3ODZFXHU4QkE0XHU2RDg4XHU2MDZGXHJcbiAgICAgKiBAcmV0dXJucyBcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTc4NkVcdThCQTRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgc2hvd0NvbmZpcm1EaWFsb2cobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbCh0aGlzLmdldEFwcCgpLCBtZXNzYWdlLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FIVE1MXHU2ODNDXHU1RjBGXHU3Njg0XHU4ODY4XHU2ODNDXHVGRjA4XHU4MDBDXHU5NzVFTWFya2Rvd25cdTc1MUZcdTYyMTBcdTc2ODRcdTg4NjhcdTY4M0NcdUZGMDlcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NIVE1MXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTRFM0FIVE1MXHU2ODNDXHU1RjBGXHU3Njg0XHU4ODY4XHU2ODNDXHJcbiAgICAgKi9cclxuICAgIGlzSHRtbEZvcm1hdHRlZFRhYmxlKHRhYmxlOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1N0I1Nlx1NzU2NTE6IFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1NzI3OVx1NUI5QUhUTUxcdTg4NjhcdTY4M0NcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0F0dHJpYnV0ZSgnYm9yZGVyJykgfHwgXHJcbiAgICAgICAgICAgICAgICB0YWJsZS5oYXNBdHRyaWJ1dGUoJ2NlbGxwYWRkaW5nJykgfHwgXHJcbiAgICAgICAgICAgICAgICB0YWJsZS5oYXNBdHRyaWJ1dGUoJ2NlbGxzcGFjaW5nJykgfHxcclxuICAgICAgICAgICAgICAgIHRhYmxlLmhhc0F0dHJpYnV0ZSgnd2lkdGgnKSB8fFxyXG4gICAgICAgICAgICAgICAgdGFibGUuaGFzQXR0cmlidXRlKCdoZWlnaHQnKSB8fFxyXG4gICAgICAgICAgICAgICAgdGFibGUuaGFzQXR0cmlidXRlKCdiZ2NvbG9yJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTdCNTZcdTc1NjUyOiBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJIVE1MXHU3Mjc5XHU1QjlBXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdGFibGUuZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUgJiYgKFxyXG4gICAgICAgICAgICAgICAgc3R5bGUuaW5jbHVkZXMoJ2JvcmRlci1jb2xsYXBzZScpIHx8XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5pbmNsdWRlcygndGV4dC1hbGlnbicpIHx8XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5pbmNsdWRlcygnZm9udC1mYW1pbHknKSB8fFxyXG4gICAgICAgICAgICAgICAgc3R5bGUuaW5jbHVkZXMoJ2JhY2tncm91bmQtY29sb3InKVxyXG4gICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3QjU2XHU3NTY1MzogXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCXHU1OTBEXHU2NzQySFRNTFx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2YgQXJyYXkuZnJvbShjZWxscykuc2xpY2UoMCwgMTApKSB7IC8vIFx1NTNFQVx1NjhDMFx1NjdFNVx1NTI0RDEwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sID0gKGNlbGwgYXMgSFRNTEVsZW1lbnQpLmlubmVySFRNTCB8fCAnJztcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQkhUTUxcdTY4MDdcdTdCN0VcdUZGMDhcdTRGNDZcdTYzOTJcdTk2NjRPYnNpZGlhblx1NjNEMlx1NTE2NVx1NzY4NFx1N0I4MFx1NTM1NVx1NjgzQ1x1NUYwRlx1NjgwN1x1N0I3RVx1RkYwOVxyXG4gICAgICAgICAgICAgICAgaWYgKGh0bWwuaW5jbHVkZXMoJzwnKSAmJiBodG1sLmluY2x1ZGVzKCc+JykgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgIWh0bWwubWF0Y2goL148KGVtfHN0cm9uZ3xzfGNvZGV8YXxzcGFuKVtePl0qPi4qPFxcLyhlbXxzdHJvbmd8c3xjb2RlfGF8c3Bhbik+JC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1N0I1Nlx1NzU2NTQ6IFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc4NFx1NjYyRlx1NTQyNlx1N0IyNlx1NTQwOE1hcmtkb3duXHU4ODY4XHU2ODNDXHU3NTFGXHU2MjEwXHU4OUM0XHU1MjE5XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYXJrZG93blx1ODg2OFx1NjgzQ1x1NzY4NFx1N0IyQ1x1NEU4Q1x1ODg0Q1x1OTAxQVx1NUUzOFx1NjYyRlx1NTIwNlx1OTY5NFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kUm93ID0gcm93c1sxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcGFyYXRvckNlbGxzID0gc2Vjb25kUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTUyMDZcdTk2OTRcdTg4NENcdTc2ODRcdTYyNDBcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcdTkwMUFcdTVFMzhcdTUzRUFcdTUzMDVcdTU0MkIgLS0tLSBcdTYyMTYgOi0tLS06IFx1N0I0OVx1NUY2Mlx1NUYwRlxyXG4gICAgICAgICAgICAgICAgbGV0IGlzU2VwYXJhdG9yUm93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBBcnJheS5mcm9tKHNlcGFyYXRvckNlbGxzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBjZWxsLnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NjYyRlx1NTIwNlx1OTY5NFx1N0IyNlx1NjgzQ1x1NUYwRlx1RkYwQ1x1NTNFRlx1ODBGRFx1NEUwRFx1NjYyRk1hcmtkb3duXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXh0Lm1hdGNoKC9eOj8tKzo/JC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VwYXJhdG9yUm93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU3QjI2XHU1NDA4TWFya2Rvd25cdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdUZGMENcdTUzRUZcdTgwRkRcdTY2MkZIVE1MXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzU2VwYXJhdG9yUm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OUVEOFx1OEJBNFx1NEUwRFx1NjYyRkhUTUxcdTY4M0NcdTVGMEZcdTc2ODRcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjhDMFx1NkQ0QkhUTUxcdTg4NjhcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFx1OTUxOVx1OEJFRlx1NjVGNlx1OUVEOFx1OEJBNFx1NEUzQVx1NTQyNlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1ODg2OFx1NjgzQ1x1ODg0Q1x1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqL1xyXG4gICAgc2V0dXBUYWJsZUluZGljZXModGFibGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgcm93cy5sZW5ndGg7IHJvd0luZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3Nbcm93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbEluZGV4ID0gMDsgY29sSW5kZXggPCBjZWxscy5sZW5ndGg7IGNvbEluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjU3MFx1NjM2RVx1NUM1RVx1NjAyN1x1NUI1OFx1NTBBOFx1ODg0Q1x1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuZGF0YXNldC5yb3dJbmRleCA9IHJvd0luZGV4LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5kYXRhc2V0LmNvbEluZGV4ID0gY29sSW5kZXgudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVyb3ctaW5kZXhcdTU0OENjb2wtaW5kZXhcdTVDNUVcdTYwMjdcdUZGMENcdTc4NkVcdTRGRERcdTRFMEVtYWluLnRzXHU0RTJEXHU0RjdGXHU3NTI4XHU3Njg0XHU1QzVFXHU2MDI3XHU0RTAwXHU4MUY0XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcsIHJvd0luZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnLCBjb2xJbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTdDN0JcdTRFRTVcdTRGQkZcdTY4MzdcdTVGMEZcdThDMDNcdTY1NzRcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2FkdmFuY2VkLXRhYmxlLWNlbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTg4NjhcdTU5MzRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTZERkJcdTUyQTBcdTcyNzlcdTZCOEFcdTdDN0JcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0aCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdhZHZhbmNlZC10YWJsZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RTNBXHU3QTdBXHU1MzU1XHU1MTQzXHU2ODNDXHU2REZCXHU1MkEwXHU1MzYwXHU0RjREXHU3QjI2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsLmlubmVySFRNTC50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSAnJm5ic3A7JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTdEMjJcdTVGMTVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjhDMFx1NjdFNVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVx1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICogQHBhcmFtIGNlbGwgXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gbWFya2VyIFx1NjgwN1x1OEJCMFx1N0IyNlx1NTNGN1x1N0M3Qlx1NTc4QiAoJ14nIFx1NjIxNiAnPCcpXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTRFM0FcdTYzMDdcdTVCOUFcdTdDN0JcdTU3OEJcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAqL1xyXG4gICAgaXNNZXJnZU1hcmtlcihjZWxsOiBIVE1MRWxlbWVudCwgbWFya2VyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjYyRlx1NjMwN1x1NUI5QVx1N0M3Qlx1NTc4Qlx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwOFx1NjUyRlx1NjMwMVx1NTkxQVx1NEUyQVx1OEZERVx1N0VFRFx1NjgwN1x1OEJCMFx1RkYwOVxyXG4gICAgICAgIGlmIChtYXJrZXIgPT09ICdeJykge1xyXG4gICAgICAgICAgICByZXR1cm4gL14oXFxeK3xcXFxcXFxefFxccypcXF4rXFxzKikkLy50ZXN0KGNvbnRlbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFya2VyID09PSAnPCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC9eKDwrfFxcXFw8fFxccyo8K1xccyopJC8udGVzdChjb250ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2N0U1XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU5NzVFXHU3QTdBXHU0RTE0XHU2NzA5XHU2NzA5XHU2NTQ4XHU1MTg1XHU1QkI5XHJcbiAgICAgKiBAcGFyYW0gY2VsbCBcdTUzNTVcdTUxNDNcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NjcwOVx1NjcwOVx1NjU0OFx1NTE4NVx1NUJCOVxyXG4gICAgICovXHJcbiAgICBoYXNNZWFuaW5nZnVsQ29udGVudChjZWxsOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU3QTdBXHU2MjE2XHU1M0VBXHU2NzA5XHU3QTdBXHU2ODNDXHUzMDAxXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQgIT09ICcnICYmIFxyXG4gICAgICAgICAgICAgICBjb250ZW50ICE9PSAnJm5ic3A7JyAmJiBcclxuICAgICAgICAgICAgICAgIS9eKFxcXit8XFxcXFxcXnxcXHMqXFxeK1xccyopJC8udGVzdChjb250ZW50KSAmJiBcclxuICAgICAgICAgICAgICAgIS9eKDwrfFxcXFw8fFxccyo8K1xccyopJC8udGVzdChjb250ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODlFM1x1Njc5MFx1ODg2OFx1NjgzQ1x1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqL1xyXG4gICAgYXN5bmMgcGFyc2VNZXJnZUNlbGxNYXJrZXJzKHRhYmxlOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTk5Nlx1NTE0OFx1NjdFNVx1NjI3RVx1NjI0MFx1NjcwOVx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZVVwOiB7Y2VsbDogSFRNTEVsZW1lbnQsIGNvdW50OiBudW1iZXJ9W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2VMZWZ0OiB7Y2VsbDogSFRNTEVsZW1lbnQsIGNvdW50OiBudW1iZXJ9W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCByb3dzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IGNlbGxzLmxlbmd0aDsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cE1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXF4rKSQvKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZeXHU3Njg0XHU2NTcwXHU5MUNGXHVGRjBDXHU4ODY4XHU3OTNBXHU1NDA4XHU1RTc2XHU3Njg0XHU4ODRDXHU2NTcwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdXBNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRDFcdTczQjBcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTY4MDdcdThCQjBcdTY1NzBcdTkxQ0Y9JHtjb3VudH0sIFx1NTE4NVx1NUJCOT1cIiR7Y29udGVudH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZVVwLnB1c2goe2NlbGwsIGNvdW50fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKDwrKSQvKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENjxcdTc2ODRcdTY1NzBcdTkxQ0ZcdUZGMENcdTg4NjhcdTc5M0FcdTU0MDhcdTVFNzZcdTc2ODRcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBsZWZ0TWF0Y2hbMV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1M0QxXHU3M0IwXHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU2ODA3XHU4QkIwXHU2NTcwXHU5MUNGPSR7Y291bnR9LCBcdTUxODVcdTVCQjk9XCIke2NvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VMZWZ0LnB1c2goe2NlbGwsIGNvdW50fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdThGNkNcdTRFNDlcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCA9PT0gJ1xcXFxeJyB8fCBjb250ZW50ID09PSAnIF4gJyB8fCBjb250ZW50ID09PSAnIFxcXFxeICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTNEMVx1NzNCMFx1OEY2Q1x1NEU0OVx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NTE4NVx1NUJCOT1cIiR7Y29udGVudH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZVVwLnB1c2goe2NlbGwsIGNvdW50OiAxfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZW50ID09PSAnXFxcXDwnIHx8IGNvbnRlbnQgPT09ICcgPCAnIHx8IGNvbnRlbnQgPT09ICcgXFxcXDwgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1M0QxXHU3M0IwXHU4RjZDXHU0RTQ5XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU1MTg1XHU1QkI5PVwiJHtjb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlTGVmdC5wdXNoKHtjZWxsLCBjb3VudDogMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qge2NlbGwsIGNvdW50fSBvZiBtZXJnZVVwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCBjZWxsLmRhdGFzZXQucm93SW5kZXggfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5jb2xJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1OTA0XHU3NDA2XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2OiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU1NDA4XHU1RTc2XHU2NTcwXHU5MUNGPSR7Y291bnR9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1OTcwMFx1ODk4MVx1NjI3RVx1NTIzMFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4ID49IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Um93SW5kZXggPSByb3dJbmRleCAtIGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFJvdyA9IHJvd3NbdGFyZ2V0Um93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VsbHMgPSB0YXJnZXRSb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA8IHRhcmdldENlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VsbCA9IHRhcmdldENlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1QjlFXHU5NjQ1XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNNZWFuaW5nZnVsQ29udGVudCh0YXJnZXRDZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1OTcwMFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzVG9NZXJnZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01lYW5pbmdmdWxDb250ZW50KGNlbGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzVG9NZXJnZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbEluZGV4OiBjb2xJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU0RTJEXHU5NUY0XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZFJvd0luZGV4ID0gcm93SW5kZXggLSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkUm93SW5kZXggPiB0YXJnZXRSb3dJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkUm93ID0gcm93c1ttaWRSb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWRDZWxscyA9IG1pZFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA8IG1pZENlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZENlbGwgPSBtaWRDZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQobWlkQ2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNUb01lcmdlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IG1pZFJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg6IGNvbEluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWlkQ2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdThCQTRcdTY2MkZcdTU0MjZcdTg5ODZcdTc2RDZcdTk3NUVcdTdBN0FcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkgJiYgY2VsbHNUb01lcmdlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3ODZFXHU4QkE0XHU2RDg4XHU2MDZGXHVGRjBDXHU1MzA1XHU1NDJCXHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU4OTg2XHU3NkQ2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50cyA9IGNlbGxzVG9NZXJnZS5tYXAoYyA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBbJHtjLnJvd0luZGV4KzF9LCR7Yy5jb2xJbmRleCsxfV06IFwiJHtjLmNvbnRlbnR9XCJgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTWVyZ2UgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFx1NEVFNVx1NEUwQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQlx1NTE4NVx1NUJCOVx1NUMwNlx1ODhBQlx1ODk4Nlx1NzZENjpcXG4ke2NlbGxDb250ZW50c31cXG5cXG5cdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdThGRDlcdTRFOUJcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1NZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NzUyOFx1NjIzN1x1NTNENlx1NkQ4OFx1NEU4Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU1RjUzXHU1MjREXHU3Njg0cm93c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByb3dTcGFuID0gcGFyc2VJbnQodGFyZ2V0Q2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nKSB8fCAnMScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NjVCMFx1NzY4NHJvd3NwYW5cdUZGMUFcdTVGNTNcdTUyNERyb3dzcGFuICsgY291bnRcdUZGMDhcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzBcdUZGMDlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dTcGFuID0gcm93U3BhbiArIGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVyb3dzcGFuOiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0MoJHt0YXJnZXRSb3dJbmRleH0sJHtjb2xJbmRleH0pLCByb3dzcGFuPSR7cm93U3Bhbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTY1QjBcdTc2ODRyb3dzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dTcGFuLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwucm93U3BhbiA9IHJvd1NwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTVGNTNcdTUyNERcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU1OTMxXHU4RDI1OiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTZDQTFcdTY3MDlcdTY3MDlcdTY1NDhcdTUxODVcdTVCQjknLCB0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qge2NlbGwsIGNvdW50fSBvZiBtZXJnZUxlZnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5yb3dJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgY2VsbC5kYXRhc2V0LmNvbEluZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU5MDRcdTc0MDZcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzY6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTU0MDhcdTVFNzZcdTY1NzBcdTkxQ0Y9JHtjb3VudH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU5NzAwXHU4OTgxXHU2MjdFXHU1MjMwXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPj0gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDb2xJbmRleCA9IGNvbEluZGV4IC0gY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VsbCA9IHJvd3Nbcm93SW5kZXhdPy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKVt0YXJnZXRDb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1QjlFXHU5NjQ1XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01lYW5pbmdmdWxDb250ZW50KHRhcmdldENlbGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY1MzZcdTk2QzZcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzVG9NZXJnZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01lYW5pbmdmdWxDb250ZW50KGNlbGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNUb01lcmdlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbEluZGV4OiBjb2xJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NEUyRFx1OTVGNFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkQ29sSW5kZXggPSBjb2xJbmRleCAtIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZENvbEluZGV4ID4gdGFyZ2V0Q29sSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkQ2VsbCA9IHJvd3Nbcm93SW5kZXhdPy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKVttaWRDb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRDZWxsICYmIHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQobWlkQ2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzVG9NZXJnZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg6IG1pZENvbEluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1pZENlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1OEJBNFx1NjYyRlx1NTQyNlx1ODk4Nlx1NzZENlx1OTc1RVx1N0E3QVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5ICYmIGNlbGxzVG9NZXJnZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3ODZFXHU4QkE0XHU2RDg4XHU2MDZGXHVGRjBDXHU1MzA1XHU1NDJCXHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU4OTg2XHU3NkQ2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gY2VsbHNUb01lcmdlLm1hcChjID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgWyR7Yy5yb3dJbmRleCsxfSwke2MuY29sSW5kZXgrMX1dOiBcIiR7Yy5jb250ZW50fVwiYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybU1lcmdlID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFx1NEVFNVx1NEUwQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQlx1NTE4NVx1NUJCOVx1NUMwNlx1ODhBQlx1ODk4Nlx1NzZENjpcXG4ke2NlbGxDb250ZW50c31cXG5cXG5cdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdThGRDlcdTRFOUJcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1NZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU3NTI4XHU2MjM3XHU1M0Q2XHU2RDg4XHU0RTg2XHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU1RjUzXHU1MjREXHU3Njg0Y29sc3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbFNwYW4gPSBwYXJzZUludCh0YXJnZXRDZWxsLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpIHx8ICcxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NjVCMFx1NzY4NGNvbHNwYW5cdUZGMUFcdTVGNTNcdTUyNERjb2xzcGFuICsgY291bnRcdUZGMDhcdTU0MDhcdTVFNzZcdTc2ODRcdTUyMTdcdTY1NzBcdUZGMDlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW4gPSBjb2xTcGFuICsgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4QkJFXHU3RjZFY29sc3BhbjogXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDKCR7cm93SW5kZXh9LCR7dGFyZ2V0Q29sSW5kZXh9KSwgY29sc3Bhbj0ke2NvbFNwYW59YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NGNvbHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sU3Bhbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwuY29sU3BhbiA9IGNvbFNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQwOFx1NUU3Nlx1NjgzN1x1NUYwRlx1N0M3QlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1RjUzXHU1MjREXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NTkzMVx1OEQyNTogXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2Q0ExXHU2NzA5XHU2NzA5XHU2NTQ4XHU1MTg1XHU1QkI5JywgdGFyZ2V0Q2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFx1RkYwQ1x1NUJGOVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NUU5NFx1NzUyOFx1NUM0NVx1NEUyRFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRDZWxscyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb3dzcGFuXSwgW2NvbHNwYW5dJyk7XHJcbiAgICAgICAgICAgICAgICBtZXJnZWRDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxDZWxsID0gY2VsbCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoaHRtbENlbGwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJykgfHwgJzEnKSA+IDEgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGh0bWxDZWxsLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpIHx8ICcxJykgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDZWxsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTUyMzBNYXJrZG93blxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqL1xyXG4gICAgYXBwbHlNZXJnZUNlbGxzTWFya2Vycyh0YWJsZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTU5MDRcdTc0MDZcdThGQzdcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmRhdGFzZXQudGFibGVNZXJnZVByb2Nlc3NlZCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2QkNGXHU0RTJBXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCByb3dzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IGNlbGxzLmxlbmd0aDsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnQgPSBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdE1hdGNoID0gY2VsbENvbnRlbnQubWF0Y2goL14oPCt8XFxcXDx8XFxzKjwrXFxzKikkLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRNYXRjaCAmJiBjb2xJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU1NDA4XHU1RTc2XHU3Njg0XHU1MjE3XHU2NTcwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXJnZUNvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDb250ZW50Lm1hdGNoKC9ePCskLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlQ291bnQgPSBjZWxsQ29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUU5NFx1NzUyOFx1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NjgwN1x1OEJCMFx1NjU3MFx1OTFDRj0ke21lcmdlQ291bnR9LCBcdTUxODVcdTVCQjk9XCIke2NlbGxDb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q29sSW5kZXggPSBjb2xJbmRleCAtIG1lcmdlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRDb2xJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0Q2VsbCA9IGNlbGxzW3RhcmdldENvbEluZGV4XSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFY29sc3Bhblx1RkYxQVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTIxN1x1NjU3MCArIDFcdUZGMDhcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTY3MkNcdThFQUJcdUZGMDlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbFNwYW4gPSBtZXJnZUNvdW50ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVjb2xzcGFuOiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0MoJHtyb3dJbmRleH0sJHt0YXJnZXRDb2xJbmRleH0pLCBjb2xzcGFuPSR7Y29sU3Bhbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRDZWxsLmNvbFNwYW4gPSBjb2xTcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sU3Bhbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1RjUzXHU1MjREXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0Q2VsbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjYyRlx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwTWF0Y2ggPSBjZWxsQ29udGVudC5tYXRjaCgvXihcXF4rfFxcXFxcXF58XFxzKlxcXitcXHMqKSQvKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBNYXRjaCAmJiByb3dJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU1NDA4XHU1RTc2XHU3Njg0XHU4ODRDXHU2NTcwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXJnZUNvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDb250ZW50Lm1hdGNoKC9eXFxeKyQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VDb3VudCA9IGNlbGxDb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RTk0XHU3NTI4XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU2ODA3XHU4QkIwXHU2NTcwXHU5MUNGPSR7bWVyZ2VDb3VudH0sIFx1NTE4NVx1NUJCOT1cIiR7Y2VsbENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRSb3dJbmRleCA9IHJvd0luZGV4IC0gbWVyZ2VDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFJvd0luZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3ZlUm93ID0gcm93c1t0YXJnZXRSb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3ZlQ2VsbHMgPSBhYm92ZVJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA8IGFib3ZlQ2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm92ZUNlbGwgPSBhYm92ZUNlbGxzW2NvbEluZGV4XSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVyb3dzcGFuXHVGRjFBXHU1NDA4XHU1RTc2XHU3Njg0XHU4ODRDXHU2NTcwICsgMVx1RkYwOFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjcyQ1x1OEVBQlx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd1NwYW4gPSBtZXJnZUNvdW50ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4QkJFXHU3RjZFcm93c3BhbjogXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDKCR7dGFyZ2V0Um93SW5kZXh9LCR7Y29sSW5kZXh9KSwgcm93c3Bhbj0ke3Jvd1NwYW59YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvdmVDZWxsLnJvd1NwYW4gPSByb3dTcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3ZlQ2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dTcGFuLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OTY5MFx1ODVDRlx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdTRFODZcdTgxRUFcdTUyQThcdTVDNDVcdTRFMkRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm92ZUNlbGwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvdmVDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm92ZUNlbGwuY2xhc3NMaXN0LmFkZCgnb2JzLW1lcmdlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2cm93c3Bhblx1NTQ4Q2NvbHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dTcGFuID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nKSB8fCAnMScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbFNwYW4gPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpIHx8ICcxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU1NDA4XHU1RTc2XHVGRjBDXHU0RTNBXHU0RTBCXHU2NUI5XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2REZCXHU1MkEwXHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwKF4pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd1NwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcm93U3BhbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93SW5kZXggKyBpIDwgcm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRSb3cgPSByb3dzW3Jvd0luZGV4ICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VsbHMgPSB0YXJnZXRSb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4IDwgdGFyZ2V0Q2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENlbGwgPSB0YXJnZXRDZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTFDRFx1NTkwRFx1NzY4NF5cdTg4NjhcdTc5M0FcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyVGV4dCA9ICdeJy5yZXBlYXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTZERkJcdTUyQTBcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1NEY0RFx1N0Y2RSgke3Jvd0luZGV4K2l9LCR7Y29sSW5kZXh9KSwgXHU2ODA3XHU4QkIwPVwiJHttYXJrZXJUZXh0fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwudGV4dENvbnRlbnQgPSBtYXJrZXJUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoJ21lcmdlLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTU0MDhcdTVFNzZcdUZGMENcdTRFM0FcdTUzRjNcdTRGQTdcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAoPClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sU3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb2xTcGFuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCArIGkgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gY2VsbHNbY29sSW5kZXggKyBpXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTkxQ0RcdTU5MERcdTc2ODQ8XHU4ODY4XHU3OTNBXHU1NDA4XHU1RTc2XHU3Njg0XHU1MjE3XHU2NTcwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyVGV4dCA9ICc8Jy5yZXBlYXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NkRGQlx1NTJBMFx1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU0RjREXHU3RjZFKCR7cm93SW5kZXh9LCR7Y29sSW5kZXgraX0pLCBcdTY4MDdcdThCQjA9XCIke21hcmtlclRleHR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLnRleHRDb250ZW50ID0gbWFya2VyVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoJ21lcmdlLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4MDdcdThCQjBcdTg4NjhcdTY4M0NcdTRFM0FcdTVERjJcdTU5MDRcdTc0MDZcclxuICAgICAgICAgICAgdGFibGUuZGF0YXNldC50YWJsZU1lcmdlUHJvY2Vzc2VkID0gJ3RydWUnO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU1OTA0XHU3NDA2XHU1QjhDXHU2MjEwXHVGRjBDXHU1REYyXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgwN1x1OEJCMFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1OTA0XHU3NDA2XHU1OTFBXHU5MDA5XHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2XHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0ZWRDZWxscyBcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY1NzBcdTdFQzRcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1NTQwOFx1NUU3NlxyXG4gICAgICovXHJcbiAgICBhc3luYyBtZXJnZVNlbGVjdGVkQ2VsbHModGFibGU6IEhUTUxFbGVtZW50LCBzZWxlY3RlZENlbGxzOiBIVE1MRWxlbWVudFtdKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZENlbGxzIHx8IHNlbGVjdGVkQ2VsbHMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTkwMDlcdTYyRTlcdTgxRjNcdTVDMTEyXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU4RkRCXHU4ODRDXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NUI5QVx1OTAwOVx1NEUyRFx1NTMzQVx1NTdERlx1NzY4NFx1OEZCOVx1NzU0Q1xyXG4gICAgICAgICAgICBsZXQgbWluUm93ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgIGxldCBtYXhSb3cgPSAwO1xyXG4gICAgICAgICAgICBsZXQgbWluQ29sID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgIGxldCBtYXhDb2wgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2MjQwXHU2NzA5XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU1RTc2XHU4QkIwXHU1RjU1XHU4RkI5XHU3NTRDXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBzZWxlY3RlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCBjZWxsLmRhdGFzZXQucm93SW5kZXggfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5jb2xJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtaW5Sb3cgPSBNYXRoLm1pbihtaW5Sb3csIHJvd0luZGV4KTtcclxuICAgICAgICAgICAgICAgIG1heFJvdyA9IE1hdGgubWF4KG1heFJvdywgcm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgbWluQ29sID0gTWF0aC5taW4obWluQ29sLCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBtYXhDb2wgPSBNYXRoLm1heChtYXhDb2wsIGNvbEluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU2NjJGXHU1NDI2XHU1RjYyXHU2MjEwXHU1QjhDXHU2NTc0XHU3N0U5XHU1RjYyXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ2VsbENvdW50ID0gKG1heFJvdyAtIG1pblJvdyArIDEpICogKG1heENvbCAtIG1pbkNvbCArIDEpO1xyXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWRDZWxsQ291bnQgIT09IHNlbGVjdGVkQ2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTUzRUFcdTgwRkRcdTU0MDhcdTVFNzZcdTVGNjJcdTYyMTBcdTVCOENcdTY1NzRcdTc3RTlcdTVGNjJcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU1REU2XHU0RTBBXHU4OUQyXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjVDXHU0RTNBXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IG1haW5DZWxsID0gdGFibGUucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7bWluUm93fVwiXVtjb2wtaW5kZXg9XCIke21pbkNvbH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCFtYWluQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU2MjdFXHU1MjMwXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1OTc1RVx1N0E3QVx1NTM1NVx1NTE0M1x1NjgzQ1x1OTcwMFx1ODk4MVx1Nzg2RVx1OEJBNFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1OTcwMFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1OTc1RVx1N0E3QVx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOFx1OTY2NFx1NEU4Nlx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9uRW1wdHlDZWxscyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2Ygc2VsZWN0ZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsID09PSBtYWluQ2VsbCkgY29udGludWU7IC8vIFx1NUZGRFx1NzU2NVx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01lYW5pbmdmdWxDb250ZW50KGNlbGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5yb3dJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCBjZWxsLmRhdGFzZXQuY29sSW5kZXggfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vbkVtcHR5Q2VsbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xJbmRleDogY29sSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobm9uRW1wdHlDZWxscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3ODZFXHU4QkE0XHU2RDg4XHU2MDZGXHVGRjBDXHU1MzA1XHU1NDJCXHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU4OTg2XHU3NkQ2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gbm9uRW1wdHlDZWxscy5tYXAoYyA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFske2Mucm93SW5kZXgrMX0sJHtjLmNvbEluZGV4KzF9XTogXCIke2MuY29udGVudH1cImBcclxuICAgICAgICAgICAgICAgICAgICApLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUU3Nlx1NjYzRVx1NzkzQVx1Nzg2RVx1OEJBNFx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1NZXJnZSA9IGF3YWl0IHRoaXMuc2hvd0NvbmZpcm1EaWFsb2coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTRFRTVcdTRFMEJcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjlcdTVDMDZcdTg4QUJcdTg5ODZcdTc2RDY6XFxuJHtjZWxsQ29udGVudHN9XFxuXFxuXHU3ODZFXHU1QjlBXHU4OTgxXHU1NDA4XHU1RTc2XHU4RkQ5XHU0RTlCXHU1MzU1XHU1MTQzXHU2ODNDXHU1NDE3XHVGRjFGYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtTWVyZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1M0Q2XHU2RDg4XHU1NDA4XHU1RTc2XHU2NENEXHU0RjVDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTQwOFx1NUU3Nlx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICBjb25zdCByb3dTcGFuVmFsdWUgPSBtYXhSb3cgLSBtaW5Sb3cgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xTcGFuVmFsdWUgPSBtYXhDb2wgLSBtaW5Db2wgKyAxO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4cm93c3Bhblx1NTQ4Q2NvbHNwYW5cdTUyMzBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgbWFpbkNlbGwuc2V0QXR0cmlidXRlKCdyb3dzcGFuJywgcm93U3BhblZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBtYWluQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIG1haW5DZWxsLnJvd1NwYW4gPSByb3dTcGFuVmFsdWU7XHJcbiAgICAgICAgICAgIG1haW5DZWxsLmNvbFNwYW4gPSBjb2xTcGFuVmFsdWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcdTdDN0JcclxuICAgICAgICAgICAgbWFpbkNlbGwuY2xhc3NMaXN0LmFkZCgnb2JzLW1lcmdlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdTRFODZcdTgxRUFcdTUyQThcdTVDNDVcdTRFMkRcclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgbWFpbkNlbGwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICBtYWluQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1OTY5MFx1ODVDRlx1NTE3Nlx1NEVENlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2Ygc2VsZWN0ZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwgIT09IG1haW5DZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MDdcdThCQjBcdTUyMzBcdTUzM0FcdTU3REZcclxuICAgICAgICAgICAgdGhpcy5hcHBseU1lcmdlQ2VsbHNNYXJrZXJzRm9yQXJlYSh0YWJsZSwgbWluUm93LCBtaW5Db2wsIG1heFJvdywgbWF4Q29sKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTQwOFx1NUU3Nlx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRFM0FcdTcyNzlcdTVCOUFcdTUzM0FcdTU3REZcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSBzdGFydFJvdyBcdThENzdcdTU5Q0JcdTg4NENcclxuICAgICAqIEBwYXJhbSBzdGFydENvbCBcdThENzdcdTU5Q0JcdTUyMTdcclxuICAgICAqIEBwYXJhbSBlbmRSb3cgXHU3RUQzXHU2NzVGXHU4ODRDXHJcbiAgICAgKiBAcGFyYW0gZW5kQ29sIFx1N0VEM1x1Njc1Rlx1NTIxN1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5TWVyZ2VDZWxsc01hcmtlcnNGb3JBcmVhKHRhYmxlOiBIVE1MRWxlbWVudCwgc3RhcnRSb3c6IG51bWJlciwgc3RhcnRDb2w6IG51bWJlciwgZW5kUm93OiBudW1iZXIsIGVuZENvbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVCRjlcdTUzM0FcdTU3REZcdTUxODVcdTk2NjRcdTRFODZcdTVERTZcdTRFMEFcdTg5RDJcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MTZcdTc2ODRcdTYyNDBcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0NcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgZm9yIChsZXQgcm93SW5kZXggPSBzdGFydFJvdzsgcm93SW5kZXggPD0gZW5kUm93OyByb3dJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93SW5kZXggPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3Nbcm93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbEluZGV4ID0gc3RhcnRDb2w7IGNvbEluZGV4IDw9IGVuZENvbDsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPCBjZWxscy5sZW5ndGggJiYgIShyb3dJbmRleCA9PT0gc3RhcnRSb3cgJiYgY29sSW5kZXggPT09IHN0YXJ0Q29sKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3QjJDXHU0RTAwXHU1MjE3XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjdGXHU3NTI4XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwKF4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPT09IHN0YXJ0Q29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICdeJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21lcmdlLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0IyQ1x1NEUwMFx1ODg0Q1x1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY3Rlx1NzUyOFx1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCg8KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93SW5kZXggPT09IHN0YXJ0Um93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICc8JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21lcmdlLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MzU1XHU1MTQzXHU2ODNDXHU5NjhGXHU2NzNBXHU0RjdGXHU3NTI4XHU0RTAwXHU3OUNEXHU2ODA3XHU4QkIwXHVGRjBDXHU0RkREXHU4QkMxXHU0RTBEXHU0RjFBXHU3NzBCXHU1MjMwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gKE1hdGgucmFuZG9tKCkgPiAwLjUpID8gJ14nIDogJzwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWVyZ2UtbWFya2VyJywgJ2hpZGRlbi1tYXJrZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUU5NFx1NzUyOFx1NTMzQVx1NTdERlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgIi8vIEB0cy1ub2NoZWNrXHJcbi8vIFx1NEUwQVx1OTc2Mlx1NzY4NFx1NjMwN1x1NEVFNFx1NEYxQVx1Nzk4MVx1NzUyOFx1NjU3NFx1NEUyQVx1NjU4N1x1NEVGNlx1NzY4NFx1N0M3Qlx1NTc4Qlx1NjhDMFx1NjdFNVxyXG5cclxuaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgSlNPTjUgZnJvbSAnanNvbjUnO1xyXG5pbXBvcnQgeyBUYWJsZUZlYXR1cmUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBcdTg4NjhcdTY4M0NJRFx1N0JBMVx1NzQwNlx1NTY2OCAtIFx1OEQxRlx1OEQyM1x1ODg2OFx1NjgzQ0lEXHU3Njg0XHU3NTFGXHU2MjEwXHUzMDAxXHU4M0I3XHU1M0Q2XHUzMDAxXHU4OUUzXHU2NzkwXHU1NDhDXHU2MzAxXHU0RTQ1XHU1MzE2XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGFibGVJZE1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQ7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpc1Byb2Nlc3NpbmdUYWJsZUlkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpc0NyZWF0aW5nVGFibGVJZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCkge1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZUlkTWFuYWdlciBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU2ODA3XHU4QkM2XHU3QjI2XHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICogQHBhcmFtIHVzZUZhbGxiYWNrIFx1NjYyRlx1NTQyNlx1NTcyOFx1NjcyQVx1NjI3RVx1NTIzMEhUTUxcdTZDRThcdTkxQ0FJRFx1NjVGNlx1NEY3Rlx1NzUyOFx1NTE3Nlx1NEVENklEXHU2NzY1XHU2RTkwXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgZ2V0VGFibGVJZGVudGlmaWVyKHRhYmxlOiBIVE1MRWxlbWVudCwgdXNlRmFsbGJhY2s6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChUYWJsZUlkTWFuYWdlci5pc1Byb2Nlc3NpbmdUYWJsZUlkKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNQcm9jZXNzaW5nVGFibGVJZCA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjAwXHU1OUNCXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSUQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1OTk5Nlx1NTE0OFx1NEVDRVx1ODg2OFx1NjgzQ0RPTVx1NUM1RVx1NjAyN1x1ODNCN1x1NTNENlx1NUY1M1x1NTI0RElEXHVGRjA4XHU0RUM1XHU3NTI4XHU0RThFXHU2NUU1XHU1RkQ3XHU1NDhDXHU2QkQ0XHU4RjgzXHVGRjA5XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREb21JZCA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudERvbUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU1RjUzXHU1MjRERE9NXHU1QzVFXHU2MDI3SUQ6ICR7Y3VycmVudERvbUlkfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTc1MjhcdTRFOEVcdTlBOENcdThCQzFcclxuICAgICAgICAgICAgY29uc3QgdGFibGVGZWF0dXJlID0gdGhpcy5leHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlRmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjNEMFx1NTNENlx1NzY4NFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MTpgLCB0YWJsZUZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLiBcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU4M0I3XHU1M0Q2SURcdUZGMDhcdTY3MDBcdTlBRDhcdTRGMThcdTUxNDhcdTdFQTdcdUZGMDlcclxuICAgICAgICAgICAgbGV0IGNvbW1lbnRJZCA9IHRoaXMuZ2V0VGFibGVJZEZyb21Db21tZW50KHRhYmxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDQuIFx1NkJENFx1OEY4M0RPTVx1NUM1RVx1NjAyN0lEXHU1NDhDSFRNTFx1NkNFOFx1OTFDQUlEXHJcbiAgICAgICAgICAgIGlmIChjb21tZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU4M0I3XHU1M0Q2XHU1MjMwXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNET01cdTVDNUVcdTYwMjdJRFx1NEUwRUhUTUxcdTZDRThcdTkxQ0FJRFx1NEUwRFx1NTMzOVx1OTE0RFx1RkYwQ1x1NjZGNFx1NjVCMERPTVx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREb21JZCAmJiBjdXJyZW50RG9tSWQgIT09IGNvbW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCNjZcdTU0NEE6IERPTVx1NEUyRFx1NzY4NElEKCR7Y3VycmVudERvbUlkfSlcdTRFMEVIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU3Njg0SUQoJHtjb21tZW50SWR9KVx1NEUwRFx1NTMzOVx1OTE0RGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTZCNjNcdTU3MjhcdTY2RjRcdTY1QjBET01cdTVDNUVcdTYwMjdcdUZGMENcdTRGN0ZcdTc1MjhIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU3Njg0SUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIGNvbW1lbnRJZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFjdXJyZW50RG9tSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNET01cdTZDQTFcdTY3MDlJRFx1NUM1RVx1NjAyN1x1RkYwQ1x1OEJCRVx1N0Y2RVx1NUI4M1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVET01cdTVDNUVcdTYwMjdJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgY29tbWVudElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWZlYXR1cmUnLCBKU09OLnN0cmluZ2lmeSh0YWJsZUZlYXR1cmUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNQcm9jZXNzaW5nVGFibGVJZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNS4gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwSFRNTFx1NkNFOFx1OTFDQUlEXHVGRjBDXHU0RjQ2XHU1MTQxXHU4QkI4XHU1NkRFXHU5MDAwXHVGRjBDXHU1MjE5XHU0RjdGXHU3NTI4RE9NXHU1QzVFXHU2MDI3SURcclxuICAgICAgICAgICAgaWYgKHVzZUZhbGxiYWNrICYmIGN1cnJlbnREb21JZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjcyQVx1NTcyOEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NTZERVx1OTAwMFx1NEY3Rlx1NzUyOERPTVx1NUM1RVx1NjAyN0lEOiAke2N1cnJlbnREb21JZH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWZlYXR1cmUnLCBKU09OLnN0cmluZ2lmeSh0YWJsZUZlYXR1cmUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNQcm9jZXNzaW5nVGFibGVJZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREb21JZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNi4gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwSFRNTFx1NkNFOFx1OTFDQUlEXHVGRjBDXHU0RTE0XHU0RTBEXHU1MTQxXHU4QkI4XHU1NkRFXHU5MDAwXHU2MjE2RE9NXHU0RTJEXHU2Q0ExXHU2NzA5SURcdUZGMENcdTUyMTlcdTRFMERcdThGRDRcdTU2REVcdTRFRkJcdTRGNTVJRFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU1NzI4SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU0RTBEXHU0RjdGXHU3NTI4XHU1MTc2XHU0RUQ2SURcdTY3NjVcdTZFOTAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDcuIFx1NTk4Mlx1Njc5Q0RPTVx1NEUyRFx1NjcwOUlEXHU0RjQ2XHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwSFRNTFx1NkNFOFx1OTFDQUlEXHU0RTE0XHU0RTBEXHU1MTQxXHU4QkI4XHU1NkRFXHU5MDAwXHVGRjBDXHU2RTA1XHU5NjY0RE9NXHU0RTJEXHU3Njg0SURcdTRFRTVcdTkwN0ZcdTUxNERcdTZERjdcdTZEQzZcclxuICAgICAgICAgICAgaWYgKCF1c2VGYWxsYmFjayAmJiBjdXJyZW50RG9tSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCNjZcdTU0NEE6IFx1ODg2OFx1NjgzQ0RPTVx1NEUyRFx1NjcwOUlEKCR7Y3VycmVudERvbUlkfSlcdUZGMENcdTRGNDZcdTY3MkFcdTU3MjhIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2MjdFXHU1MjMwXHU1QkY5XHU1RTk0SURgKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTZFMDVcdTk2NjRET01cdTRFMkRcdTc2ODRJRFx1NUM1RVx1NjAyN1x1RkYwQ1x1NEVFNVx1OTA3Rlx1NTE0RFx1NEY3Rlx1NzUyOFx1OEZDN1x1NjVGNlx1NjIxNlx1NEUwRFx1NkI2M1x1Nzg2RVx1NzY4NElEJyk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNQcm9jZXNzaW5nVGFibGVJZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIFRhYmxlSWRNYW5hZ2VyLmlzUHJvY2Vzc2luZ1RhYmxlSWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2MjE2XHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDSURcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NIVE1MXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICovXHJcbiAgICBnZXRPckNyZWF0ZVRhYmxlSWQodGFibGU6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoVGFibGVJZE1hbmFnZXIuaXNDcmVhdGluZ1RhYmxlSWQpIHJldHVybiAnJztcclxuICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNDcmVhdGluZ1RhYmxlSWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU4M0I3XHU1M0Q2SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NzY4NElEXHVGRjBDXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU1MjE5XHU1NkRFXHU5MDAwXHU1MjMwRE9NXHU1QzVFXHU2MDI3SURcclxuICAgICAgICAgICAgbGV0IHRhYmxlSWQgPSB0aGlzLmdldFRhYmxlSWRlbnRpZmllcih0YWJsZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlJRFx1RkYwQ1x1NTIxOVx1OEZENFx1NTZERVx1N0E3QVx1NUI1N1x1N0IyNlx1NEUzMlx1RkYwQ1x1NEY0Nlx1NjNEMFx1NzkzQVx1NzUyOFx1NjIzN1x1NTNFRlx1NEVFNVx1NTIxQlx1NUVGQUlEXHJcbiAgICAgICAgICAgIGlmICghdGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4Y29uZmlybUFuZENyZWF0ZVRhYmxlSWRcdTY1QjlcdTZDRDVcdTUyMUJcdTVFRkFcdTY1QjBJRCcpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdUZGMENcdThCRjdcdTRGN0ZcdTc1MjhcdTg4NjhcdTY4M0NcdTVERTVcdTUxNzdcdTY4MEZcdTRFMkRcdTc2ODRcIlx1OEJCRVx1N0Y2RVx1ODg2OFx1NjgzQ0lEXCJcdTUyOUZcdTgwRkRcdTUyMUJcdTVFRkFcdTY1QjBJRCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc0NyZWF0aW5nVGFibGVJZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFibGVJZCB8fCAnJztcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIFRhYmxlSWRNYW5hZ2VyLmlzQ3JlYXRpbmdUYWJsZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc4NkVcdThCQTRcdTVFNzZcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1NTIxQlx1NUVGQVx1NzY4NFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKi9cclxuICAgIGNvbmZpcm1BbmRDcmVhdGVUYWJsZUlkKHRhYmxlOiBIVE1MRWxlbWVudCk6IHN0cmluZyB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU1MTQ4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU2NzA5SURcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJZCA9IHRoaXMuZ2V0VGFibGVJZGVudGlmaWVyKHRhYmxlLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTVERjJcdTY3MDlJRDogJHtleGlzdGluZ0lkfVx1RkYwQ1x1NEUwRFx1OTcwMFx1ODk4MVx1NTIxQlx1NUVGQVx1NjVCMElEYCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTg4NjhcdTY4M0NcdTVERjJcdTY3MDlJRDogJHtleGlzdGluZ0lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NjVCMElEXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gdGhpcy5nZW5lcmF0ZVRhYmxlSWQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUzQVx1ODg2OFx1NjgzQ1x1NzUxRlx1NjIxMFx1NjVCMElEOiAke25ld0lkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwSURcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgdGhpcy5hZGRUYWJsZUlkQ29tbWVudCh0YWJsZSwgbmV3SWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4RkQ0XHU1NkRFXHU2NUIwSURcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0lkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Nzg2RVx1OEJBNFx1NUU3Nlx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRhYmxlSWRGcm9tQ29tbWVudCh0YWJsZTogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjAwXHU1OUNCXHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTg4NjhcdTY4M0NET006JywgdGFibGUub3V0ZXJIVE1MLnN1YnN0cmluZygwLCAxMDApICsgJy4uLicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTRFMkRcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NJRFxyXG4gICAgICAgICAgICAvLyBcdThGRDlcdTY2MkZcdTRFMDBcdTRFMkFcdTY2RjRcdTUzRUZcdTk3NjBcdTc2ODRcdTY1QjlcdTZDRDVcdUZGMENcdTU2RTBcdTRFM0FcdTVCODNcdTRFMERcdTRGOURcdThENTZcdTRFOEVET01cdTdFRDNcdTY3ODRcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUMxRFx1OEJENVx1NEVDRVx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NEUyRFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEOiAke2FjdGl2ZUZpbGUucGF0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTU3MjhET01cdTRFMkRcdTc2ODRcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZVBvc2l0aW9uID0gdGhpcy5nZXRUYWJsZVBvc2l0aW9uSW5ET00odGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZVBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkU6IFx1N0IyQyR7dGFibGVQb3NpdGlvbi5pbmRleH1cdTRFMkFcdTg4NjhcdTY4M0NgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NUU3Nlx1NTkwNFx1NzQwNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEFwcCgpLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSkudGhlbihjb250ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTIwNlx1Njc5MFx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1RkYwQ1x1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NTQ4Q1x1NUJGOVx1NUU5NFx1NzY4NElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUluZm9zID0gdGhpcy5leHRyYWN0VGFibGVJZHNGcm9tTWFya2Rvd24oY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFTWFya2Rvd25cdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTc2ODRcdTg4NjhcdTY4M0NJRDpgLCB0YWJsZUluZm9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU1MjMwXHU0RTg2XHU1QkY5XHU1RTk0XHU0RjREXHU3RjZFXHU3Njg0XHU4ODY4XHU2ODNDSURcdUZGMENcdTRGN0ZcdTc1MjhcdTVCODNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUluZm9zLmxlbmd0aCA+IHRhYmxlUG9zaXRpb24uaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSB0YWJsZUluZm9zW3RhYmxlUG9zaXRpb24uaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFTWFya2Rvd25cdTUxODVcdTVCQjlcdTRFMkRcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzA2SURcdThCQkVcdTdGNkVcdTUyMzBcdTg4NjhcdTY4M0NET01cdTVDNUVcdTYwMjdcdTRFMkRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4QkZCXHU1M0Q2XHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1MjREXHU5NzYyXHU3Njg0XHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gdGFibGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICBsZXQgbm9kZUNvdW50ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVGMDBcdTU5Q0JcdTkwNERcdTUzODZcdTUyNERcdTdGNkVcdTgyODJcdTcwQjkuLi4nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTA0RFx1NTM4Nlx1NTI0RFx1OTc2Mlx1NzY4NFx1NjI0MFx1NjcwOVx1ODI4Mlx1NzBCOVx1RkYwQ1x1NzZGNFx1NTIzMFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHU2MjE2XHU4RkJFXHU1MjMwXHU2NzAwXHU1OTI3XHU2OEMwXHU2N0U1XHU2NTcwXHU5MUNGXHJcbiAgICAgICAgICAgIHdoaWxlIChub2RlICYmIG5vZGVDb3VudCA8IDMwKSB7IC8vIFx1NTg5RVx1NTJBMFx1NjhDMFx1NjdFNVx1ODI4Mlx1NzBCOVx1NjU3MFx1OTFDRlx1NTIzMDMwXHU0RTJBXHVGRjBDXHU4RkRCXHU0RTAwXHU2QjY1XHU2M0QwXHU5QUQ4XHU2N0U1XHU2MjdFXHU4MzAzXHU1NkY0XHJcbiAgICAgICAgICAgICAgICBub2RlQ291bnQrKztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4QkIwXHU1RjU1XHU4MjgyXHU3MEI5XHU3QzdCXHU1NzhCXHU1NDhDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlVHlwZVN0ciA9IG5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSA/ICdDT01NRU5UJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSA/ICdURVhUJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSA/ICdFTEVNRU5UJyA6ICdPVEhFUic7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY4QzBcdTY3RTVcdTgyODJcdTcwQjkgIyR7bm9kZUNvdW50fTogXHU3QzdCXHU1NzhCPSR7bm9kZVR5cGVTdHJ9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRUZXh0ID0gbm9kZS50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRDFcdTczQjBcdTZDRThcdTkxQ0FcdTgyODJcdTcwQjk6IFwiJHtjb21tZW50VGV4dH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTMzOVx1OTE0RFx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlZ2luTWF0Y2ggPSBjb21tZW50VGV4dC5tYXRjaCgvdGFibGUtYmVnaW46XFxzKihbYS16QS1aMC05X1xcLTouXSspL2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiZWdpbk1hdGNoICYmIGJlZ2luTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gYmVnaW5NYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlx1NkNFOFx1OTFDQVx1NEUyRFx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MzM5XHU5MTREXHU1OTFBXHU3OUNEXHU1M0VGXHU4MEZEXHU3Njg0XHU2ODNDXHU1RjBGXHVGRjBDXHU2NkY0XHU1QkJEXHU2NzdFXHU3Njg0XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMS4gPCEtLSB0YWJsZS1pZDogeHh4IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIDwhLS0gdGFibGUtaWQ6eHh4IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIDwhLS10YWJsZS1pZDogeHh4LS0+XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gNC4gPCEtLXRhYmxlLWlkOnh4eC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkTWF0Y2ggPSBjb21tZW50VGV4dC5tYXRjaCgvdGFibGVbLV9dP2lkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKykvaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkTWF0Y2ggJiYgaWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSBpZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjIxMFx1NTI5Rlx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU1MTc2XHU0RUQ2XHU1M0VGXHU4MEZEXHU3Njg0XHU2ODNDXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gNS4gPCEtLSBpZDogeHh4IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdElkTWF0Y2ggPSBjb21tZW50VGV4dC5tYXRjaCgvaWQ6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKS9pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWx0SWRNYXRjaCAmJiBhbHRJZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGFsdElkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTY2RkZcdTRFRTNcdTY4M0NcdTVGMEZIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyA2LiA8IS0tIHRibDogeHh4IC0tPiBcdTYyMTYgPCEtLSB0YWJsZTogeHh4IC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRibE1hdGNoID0gY29tbWVudFRleHQubWF0Y2goLyh0Ymx8dGFibGUpOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKykvaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRibE1hdGNoICYmIHRibE1hdGNoWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IHRibE1hdGNoWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFdGJsL3RhYmxlXHU2ODNDXHU1RjBGSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjU4N1x1NjcyQ1x1ODI4Mlx1NzBCOVx1RkYwQ1x1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQkhUTUxcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0Q29udGVudCA9IG5vZGUudGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjU4N1x1NjcyQ1x1ODI4Mlx1NzBCOVx1NTE4NVx1NUJCOTogXCIke3RleHRDb250ZW50LnN1YnN0cmluZygwLCAzMCl9JHt0ZXh0Q29udGVudC5sZW5ndGggPiAzMCA/ICcuLi4nIDogJyd9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY1ODdcdTY3MkNcdTRFMkRcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJIVE1MXHU2Q0U4XHU5MUNBXHU2ODNDXHU1RjBGXHU3Njg0SURcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBodG1sQ29tbWVudE1hdGNoID0gdGV4dENvbnRlbnQubWF0Y2goLzwhLS1cXHMqdGFibGVbLV9dP2lkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChodG1sQ29tbWVudE1hdGNoICYmIGh0bWxDb21tZW50TWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gaHRtbENvbW1lbnRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NjU4N1x1NjcyQ1x1ODI4Mlx1NzBCOVx1NEUyRFx1NzY4NEhUTUxcdTZDRThcdTkxQ0FcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tZW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjZGRlx1NEVFM1x1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdEh0bWxDb21tZW50TWF0Y2ggPSB0ZXh0Q29udGVudC5tYXRjaCgvPCEtLVxccyppZDo/XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWx0SHRtbENvbW1lbnRNYXRjaCAmJiBhbHRIdG1sQ29tbWVudE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGFsdEh0bWxDb21tZW50TWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTY1ODdcdTY3MkNcdTgyODJcdTcwQjlcdTRFMkRcdTc2ODRcdTY2RkZcdTRFRTNIVE1MXHU2Q0U4XHU5MUNBXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTV0YmwvdGFibGVcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YmxIdG1sQ29tbWVudE1hdGNoID0gdGV4dENvbnRlbnQubWF0Y2goLzwhLS1cXHMqKHRibHx0YWJsZSk6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRibEh0bWxDb21tZW50TWF0Y2ggJiYgdGJsSHRtbENvbW1lbnRNYXRjaFsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSB0YmxIdG1sQ29tbWVudE1hdGNoWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU2NTg3XHU2NzJDXHU4MjgyXHU3MEI5XHU0RTJEXHU3Njg0dGJsL3RhYmxlIEhUTUxcdTZDRThcdTkxQ0FcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tZW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Q29udGVudC50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0E3QVx1NzY3RFx1ODI4Mlx1NzBCOVx1RkYwQ1x1N0VFN1x1N0VFRFx1NjhDMFx1NjdFNVx1NTI0RFx1NEUwMFx1NEUyQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU1MTQzXHU3RDIwXHU4MjgyXHU3MEI5XHVGRjBDXHU4QkIwXHU1RjU1XHU2ODA3XHU3QjdFXHU1NDBEXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnTmFtZSA9IChub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTE0M1x1N0QyMFx1ODI4Mlx1NzBCOTogPCR7dGFnTmFtZS50b0xvd2VyQ2FzZSgpfT5gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxNDNcdTdEMjBcdTc2ODRkYXRhLWlkXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbURhdGFJZCA9IChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpIHx8IChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtRGF0YUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTUxNDNcdTdEMjBcdTVDNUVcdTYwMjdcdTRFMkRcdTYyN0VcdTUyMzBJRDogJHtlbGVtRGF0YUlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbURhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MTQzXHU3RDIwXHU1MTg1XHU1QkI5XHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCSFRNTFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1Db250ZW50ID0gKG5vZGUgYXMgRWxlbWVudCkuaW5uZXJIVE1MIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtQ29udGVudC5pbmNsdWRlcygnPCEtLScpICYmIGVsZW1Db250ZW50LmluY2x1ZGVzKCctLT4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MTQzXHU3RDIwXHU1MTg1XHU1QkI5XHU1MzA1XHU1NDJCSFRNTFx1NkNFOFx1OTFDQTogXCIke2VsZW1Db250ZW50LnN1YnN0cmluZygwLCA1MCl9JHtlbGVtQ29udGVudC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQwNFx1NzlDRFx1NjgzQ1x1NUYwRlx1NzY4NEhUTUxcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHRtbENvbW1lbnRNYXRjaCA9IGVsZW1Db250ZW50Lm1hdGNoKC88IS0tXFxzKnRhYmxlWy1fXT9pZDo/XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGh0bWxDb21tZW50TWF0Y2ggJiYgaHRtbENvbW1lbnRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gaHRtbENvbW1lbnRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTUxNDNcdTdEMjBcdTUxODVcdTVCQjlcdTRFMkRcdTc2ODRIVE1MXHU2Q0U4XHU5MUNBXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTZCQjVcdTg0M0RcdTMwMDFcdTYzNjJcdTg4NENcdTYyMTZcdTUyMDZcdTk2OTRcdTdFQkZcdUZGMENcdTdFRTdcdTdFRURcdTY4QzBcdTY3RTVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoWydCUicsICdIUicsICdQJywgJ0RJVicsICdTUEFOJ10uaW5jbHVkZXModGFnTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5MDQ3XHU1MjMwXHU1MTc2XHU0RUQ2XHU1MTQzXHU3RDIwXHVGRjBDXHU1MDVDXHU2QjYyXHU2OEMwXHU2N0U1XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTA0N1x1NTIzMFx1NTE0M1x1N0QyMFx1ODI4Mlx1NzBCOSAke3RhZ05hbWV9XHVGRjBDXHU1MDVDXHU2QjYyXHU2N0U1XHU2MjdFYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTI0RFx1NEUwMFx1NEUyQVx1NTE0NFx1NUYxRlx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdUZGMENcdTVDMURcdThCRDVcdTY4QzBcdTY3RTVcdTcyMzZcdTgyODJcdTcwQjlcdTc2ODRcdTUyNERcdTRFMDBcdTRFMkFcdTUxNDRcdTVGMUZcdTgyODJcdTcwQjlcclxuICAgICAgICAgICAgLy8gXHU4RkQ5XHU1QkY5XHU0RThFXHU1OTA0XHU3NDA2XHU1RDRDXHU1OTU3XHU1NzI4ZGl2XHU2MjE2XHU1MTc2XHU0RUQ2XHU1QkI5XHU1NjY4XHU0RTJEXHU3Njg0XHU4ODY4XHU2ODNDXHU1Rjg4XHU2NzA5XHU3NTI4XHJcbiAgICAgICAgICAgIGlmICh0YWJsZS5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1QzFEXHU4QkQ1XHU2OEMwXHU2N0U1XHU3MjM2XHU1MTQzXHU3RDIwXHU1M0NBXHU1MTc2XHU1MjREXHU3RjZFXHU4MjgyXHU3MEI5Li4uJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzIzNlx1NTE0M1x1N0QyMFx1NzY4NGRhdGEtaWRcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudERhdGFJZCA9IHRhYmxlLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfHwgdGFibGUucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnREYXRhSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU3MjM2XHU1MTQzXHU3RDIwXHU1QzVFXHU2MDI3XHU0RTJEXHU2MjdFXHU1MjMwSUQ6ICR7cGFyZW50RGF0YUlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnREYXRhSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzIzNlx1NTE0M1x1N0QyMFx1NzY4NFx1NTI0RFx1NEUwMFx1NEUyQVx1NTE0NFx1NUYxRlx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlLnBhcmVudEVsZW1lbnQucHJldmlvdXNTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudFByZXZOb2RlID0gdGFibGUucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFByZXZOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRQcmV2Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRUZXh0ID0gcGFyZW50UHJldk5vZGUudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRDFcdTczQjBcdTcyMzZcdTUxNDNcdTdEMjBcdTUyNERcdTc2ODRcdTZDRThcdTkxQ0FcdTgyODJcdTcwQjk6IFwiJHtjb21tZW50VGV4dH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZE1hdGNoID0gY29tbWVudFRleHQubWF0Y2goL3RhYmxlWy1fXT9pZDo/XFxzKihbYS16QS1aMC05X1xcLTouXSspL2kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkTWF0Y2ggJiYgaWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGlkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NzIzNlx1NTE0M1x1N0QyMFx1NTI0RFx1NzY4NEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJlbnRQcmV2Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjU4N1x1NjcyQ1x1NEUyRFx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQkhUTUxcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcGFyZW50UHJldk5vZGUudGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBodG1sQ29tbWVudE1hdGNoID0gdGV4dENvbnRlbnQubWF0Y2goLzwhLS1cXHMqdGFibGVbLV9dP2lkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGh0bWxDb21tZW50TWF0Y2ggJiYgaHRtbENvbW1lbnRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGh0bWxDb21tZW50TWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NzIzNlx1NTE0M1x1N0QyMFx1NTI0RFx1NzY4NFx1NjU4N1x1NjcyQ1x1ODI4Mlx1NzBCOVx1NEUyRFx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTcyMzZcdTUxNDNcdTdEMjBcdTc2ODRcdTcyMzZcdTUxNDNcdTdEMjBcdUZGMDhcdTU0MTFcdTRFMEFcdTRFMjRcdTdFQTdcdUZGMDlcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFuZFBhcmVudERhdGFJZCA9IHRhYmxlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmFuZFBhcmVudERhdGFJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU3OTU2XHU3MjM2XHU1MTQzXHU3RDIwXHU1QzVFXHU2MDI3XHU0RTJEXHU2MjdFXHU1MjMwSUQ6ICR7Z3JhbmRQYXJlbnREYXRhSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBncmFuZFBhcmVudERhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTU3MjhIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU0RUNFXHU2Q0U4XHU5MUNBXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRFx1NkNFOFx1OTFDQVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSBpZCBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFkZFRhYmxlSWRDb21tZW50KHRhYmxlOiBIVE1MRWxlbWVudCwgaWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUZlYXR1cmUgPSB0aGlzLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGUpO1xyXG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlSnNvbiA9IEpTT04uc3RyaW5naWZ5KHRhYmxlRmVhdHVyZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTU0MkZcdTc1MjhcdTRFODZcdTZDRThcdTkxQ0FcdTU5MzlcdTZBMjFcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgdXNlV3JhcHBlckNvbW1lbnRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlVGFibGVXcmFwcGVyQ29tbWVudHM7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUxNDhcdTc5RkJcdTk2NjRcdTVERjJcdTY3MDlcdTc2ODRcdTZDRThcdTkxQ0FcdUZGMDhcdTU5ODJcdTY3OUNcdTVCNThcdTU3MjhcdUZGMDlcclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNOb2RlID0gdGFibGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICBpZiAocHJldmlvdXNOb2RlICYmIHByZXZpb3VzTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBwcmV2aW91c05vZGUubm9kZVZhbHVlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQuaW5jbHVkZXMoJ3RhYmxlLWlkOicpIHx8IGNvbW1lbnQuaW5jbHVkZXMoJ3RhYmxlLWJlZ2luOicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKHByZXZpb3VzTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NTQwRVx1OTc2Mlx1NjYyRlx1NTQyNlx1NjcwOVx1N0VEM1x1Njc1Rlx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICBjb25zdCBuZXh0Tm9kZSA9IHRhYmxlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICBpZiAobmV4dE5vZGUgJiYgbmV4dE5vZGUubm9kZVR5cGUgPT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50ID0gbmV4dE5vZGUubm9kZVZhbHVlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQuaW5jbHVkZXMoJ3RhYmxlLWVuZDonKSB8fCBjb21tZW50LmluY2x1ZGVzKCd0YWJsZS1pZC1lbmQ6JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZS5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZChuZXh0Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh1c2VXcmFwcGVyQ29tbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUYwMFx1NTlDQlx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5Db21tZW50Q29udGVudCA9IGB0YWJsZS1iZWdpbjogJHtpZH0gZmVhdHVyZTogJHtmZWF0dXJlSnNvbn1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5Db21tZW50ID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChgICR7YmVnaW5Db21tZW50Q29udGVudH0gYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1N0VEM1x1Njc1Rlx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kQ29tbWVudENvbnRlbnQgPSBgdGFibGUtZW5kOiAke2lkfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRDb21tZW50ID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChgICR7ZW5kQ29tbWVudENvbnRlbnR9IGApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTYzRDJcdTUxNjVcdTVGMDBcdTU5Q0JcdTZDRThcdTkxQ0FcdTgyODJcdTcwQjlcclxuICAgICAgICAgICAgICAgIHRhYmxlLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShiZWdpbkNvbW1lbnQsIHRhYmxlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2M0QyXHU1MTY1XHU3RUQzXHU2NzVGXHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHVGRjA4XHU1NzI4XHU4ODY4XHU2ODNDXHU1NDBFXHU5NzYyXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUoZW5kQ29tbWVudCwgdGFibGUubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5wYXJlbnROb2RlPy5hcHBlbmRDaGlsZChlbmRDb21tZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NkNFOFx1OTFDQVx1NTkzOTogJHtpZH0gXHU3Mjc5XHU1RjgxOmAsIHRhYmxlRmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTRGMjBcdTdFREZcdTc2ODRcdTUzNTVcdTRFMDBcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOSAtIFx1NTMwNVx1NTQyQlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWVudENvbnRlbnQgPSBgdGFibGUtaWQ6ICR7aWR9IGZlYXR1cmU6ICR7ZmVhdHVyZUpzb259YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KGAgJHtjb21tZW50Q29udGVudH0gYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjNEMlx1NTE2NVx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgdGFibGUucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKGNvbW1lbnQsIHRhYmxlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHU2Q0U4XHU5MUNBOiAke2lkfSBcdTcyNzlcdTVGODE6YCwgdGFibGVGZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIGlkKTtcclxuICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWZlYXR1cmUnLCBKU09OLnN0cmluZ2lmeSh0YWJsZUZlYXR1cmUpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEOiAke2lkfWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NkRGQlx1NTJBMFx1ODg2OFx1NjgzQ0lEXHU2Q0U4XHU5MUNBXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NIVE1MXHU1MTQzXHU3RDIwXHU2MjE2TWFya2Rvd25cdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NUJGOVx1OEM2MVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZTogSFRNTEVsZW1lbnQgfCBzdHJpbmcpOiBUYWJsZUZlYXR1cmUge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCByb3dzID0gMDtcclxuICAgICAgICAgICAgbGV0IGNvbHMgPSAwO1xyXG4gICAgICAgICAgICBsZXQgaGVhZGVycyA9ICcnO1xyXG4gICAgICAgICAgICBsZXQgZmlyc3RSb3dDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIGxldCBsYXN0Um93Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICBsZXQgbWVyZ2VQYXR0ZXJuID0gJyc7XHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgbGV0IGZpbGVJbmZvID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU2NTg3XHU0RUY2XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYWN0aXZlRmlsZS5iYXNlbmFtZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0YWJsZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEVDRU1hcmtkb3duXHU1QjU3XHU3QjI2XHU0RTMyXHU2M0QwXHU1M0Q2XHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRhYmxlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlTGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByb3dzID0gdGFibGVMaW5lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93cyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHRhYmxlTGluZXNbMF0uc3BsaXQoJ3wnKS5maWx0ZXIoY2VsbCA9PiBjZWxsLnRyaW0oKSAhPT0gJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHMgPSBjZWxscy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGNlbGxzLm1hcChjID0+IGMudHJpbSgpKS5qb2luKCctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RSb3dDb250ZW50ID0gdGFibGVMaW5lc1swXTtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0Um93Q29udGVudCA9IHRhYmxlTGluZXNbcm93cyAtIDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtZXJnZVBhdHRlcm4gPSB0aGlzLmV4dHJhY3RNZXJnZVBhdHRlcm4odGFibGVMaW5lcyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1NjI3RVx1NTFGQVx1ODg2OFx1NjgzQ1x1NTcyOFx1NjU4N1x1Njg2M1x1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RMaW5lSW5kZXggPSBsaW5lcy5maW5kSW5kZXgobGluZSA9PiBsaW5lID09PSB0YWJsZUxpbmVzWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdExpbmVJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TGluZTogZmlyc3RMaW5lSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmU6IGZpcnN0TGluZUluZGV4ICsgcm93cyAtIDFcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RUNFRE9NXHU1MTQzXHU3RDIwXHU2M0QwXHU1M0Q2XHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZVJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgcm93cyA9IHRhYmxlUm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyb3dzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93Q2VsbHMgPSB0YWJsZVJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29scyA9IGZpcnN0Um93Q2VsbHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBBcnJheS5mcm9tKGZpcnN0Um93Q2VsbHMpLm1hcChjZWxsID0+IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJykuam9pbignLScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0Um93Q29udGVudCA9IHRhYmxlUm93c1swXS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBsYXN0Um93Q29udGVudCA9IHRhYmxlUm93c1tyb3dzIC0gMV0udGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1lcmdlUGF0dGVybiA9IHRoaXMuZXh0cmFjdE1lcmdlUGF0dGVyRnJvbURPTSh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1RkYwOFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUI1OFx1NTBBOFx1NTcyOGRhdGFcdTVDNUVcdTYwMjdcdTRFMkRcdUZGMDlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uRGF0YSA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1wb3NpdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gSlNPTi5wYXJzZShwb3NpdGlvbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJvd3MsXHJcbiAgICAgICAgICAgICAgICBjb2xzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIGZpcnN0Um93Q29udGVudCxcclxuICAgICAgICAgICAgICAgIGxhc3RSb3dDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgbWVyZ2VQYXR0ZXJuLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBmaWxlSW5mb1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByb3dzOiAwLFxyXG4gICAgICAgICAgICAgICAgY29sczogMCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6ICcnLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RSb3dDb250ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RSb3dDb250ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgIG1lcmdlUGF0dGVybjogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjNEMFx1NTNENlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NkEyMVx1NUYwRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4dHJhY3RNZXJnZVBhdHRlcm4obGluZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcGF0dGVybiA9ICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCMFx1NUY1NSBeIFx1NTQ4QyA8IFx1N0IyNlx1NTNGN1x1NzY4NFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKS5maWx0ZXIoY2VsbCA9PiBjZWxsLnRyaW0oKSAhPT0gJycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjZWxscy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2pdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChjZWxsID09PSAnXicpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBeJHtpfS0ke2p9O2A7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNlbGwgPT09ICc8Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYDwke2l9LSR7an07YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcGF0dGVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRURPTVx1NEUyRFx1NjNEMFx1NTNENlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NkEyMVx1NUYwRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4dHJhY3RNZXJnZVBhdHRlckZyb21ET00odGFibGU6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcGF0dGVybiA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2VsbHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tqXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3NwYW4gPSBjZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sc3BhbiA9IGNlbGwuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyb3dzcGFuICYmIHBhcnNlSW50KHJvd3NwYW4pID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYHIke2l9LSR7an0tJHtyb3dzcGFufTtgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHNwYW4gJiYgcGFyc2VJbnQoY29sc3BhbikgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgYyR7aX0tJHtqfS0ke2NvbHNwYW59O2A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHBhdHRlcm47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQTFcdTdCOTdcdTRFMjRcdTRFMkFcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTc2ODRcdTc2RjhcdTRGM0NcdTVFQTZcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlMSBcdTdCMkNcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlMiBcdTdCMkNcdTRFOENcdTRFMkFcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuICAgICAqIEByZXR1cm5zIFx1NzZGOFx1NEYzQ1x1NUVBNlx1NTIwNlx1NjU3MFx1RkYwODAtMVx1NEU0Qlx1OTVGNFx1RkYwOVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlRmVhdHVyZVNpbWlsYXJpdHkoZmVhdHVyZTE6IFRhYmxlRmVhdHVyZSwgZmVhdHVyZTI6IFRhYmxlRmVhdHVyZSk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCFmZWF0dXJlMSB8fCAhZmVhdHVyZTIpIHJldHVybiAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzY29yZSA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcclxuICAgICAgICBcclxuICAgICAgICAvLyAxLiBcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdTUzMzlcdTkxNEQgLSBcdTY3MDBcdTlBRDhcdTY3NDNcdTkxQ0RcclxuICAgICAgICBjb25zdCBwYXRoV2VpZ2h0ID0gNTtcclxuICAgICAgICBpZiAoZmVhdHVyZTEuZmlsZUluZm8/LnBhdGggJiYgZmVhdHVyZTIuZmlsZUluZm8/LnBhdGggJiYgXHJcbiAgICAgICAgICAgIGZlYXR1cmUxLmZpbGVJbmZvLnBhdGggPT09IGZlYXR1cmUyLmZpbGVJbmZvLnBhdGgpIHtcclxuICAgICAgICAgICAgc2NvcmUgKz0gcGF0aFdlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gcGF0aFdlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyAyLiBcdTdFRDNcdTY3ODRcdTc2RjhcdTRGM0NcdTVFQTZcdUZGMDhcdTg4NENcdTUyMTdcdTY1NzBcdUZGMDktIFx1Njc0M1x1OTFDRFx1OEY4M1x1OUFEOFxyXG4gICAgICAgIGNvbnN0IHJvd1dlaWdodCA9IDM7XHJcbiAgICAgICAgY29uc3QgY29sV2VpZ2h0ID0gMztcclxuICAgICAgICBpZiAoZmVhdHVyZTEucm93cyA9PT0gZmVhdHVyZTIucm93cykge1xyXG4gICAgICAgICAgICBzY29yZSArPSByb3dXZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU5MEU4XHU1MjA2XHU1MzM5XHU5MTREXHVGRjBDXHU4ODRDXHU2NTcwXHU3NkY4XHU1REVFXHU0RTBEXHU4RDg1XHU4RkM3MVx1NEU1Rlx1N0VEOVx1OTBFOFx1NTIwNlx1NTIwNlx1NjU3MFxyXG4gICAgICAgICAgICBjb25zdCByb3dEaWZmID0gTWF0aC5hYnMoZmVhdHVyZTEucm93cyAtIGZlYXR1cmUyLnJvd3MpO1xyXG4gICAgICAgICAgICBpZiAocm93RGlmZiA8PSAxKSBzY29yZSArPSByb3dXZWlnaHQgKiAoMSAtIHJvd0RpZmYgLyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gcm93V2VpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChmZWF0dXJlMS5jb2xzID09PSBmZWF0dXJlMi5jb2xzKSB7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IGNvbFdlaWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTkwRThcdTUyMDZcdTUzMzlcdTkxNERcdUZGMENcdTUyMTdcdTY1NzBcdTc2RjhcdTVERUVcdTRFMERcdThEODVcdThGQzcxXHU0RTVGXHU3RUQ5XHU5MEU4XHU1MjA2XHU1MjA2XHU2NTcwXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbERpZmYgPSBNYXRoLmFicyhmZWF0dXJlMS5jb2xzIC0gZmVhdHVyZTIuY29scyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xEaWZmIDw9IDEpIHNjb3JlICs9IGNvbFdlaWdodCAqICgxIC0gY29sRGlmZiAvIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBjb2xXZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMy4gXHU4ODY4XHU1OTM0XHU1MTg1XHU1QkI5XHU3NkY4XHU0RjNDXHU1RUE2IC0gXHU2NzQzXHU5MUNEXHU5QUQ4XHJcbiAgICAgICAgY29uc3QgaGVhZGVyV2VpZ2h0ID0gNDtcclxuICAgICAgICBpZiAoZmVhdHVyZTEuaGVhZGVycyAmJiBmZWF0dXJlMi5oZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVRleHRTaW1pbGFyaXR5KGZlYXR1cmUxLmhlYWRlcnMsIGZlYXR1cmUyLmhlYWRlcnMpO1xyXG4gICAgICAgICAgICBzY29yZSArPSBoZWFkZXJXZWlnaHQgKiBoZWFkZXJTaW1pbGFyaXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBoZWFkZXJXZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNC4gXHU0RjREXHU3RjZFXHU3NkY4XHU0RjNDXHU1RUE2IC0gXHU2NzQzXHU5MUNEXHU0RTJEXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25XZWlnaHQgPSAyO1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5wb3NpdGlvbiAmJiBmZWF0dXJlMi5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdThENzdcdTU5Q0JcdTg4NENcdTc2RjhcdTU0MENcdTYyMTZcdTc2RjhcdTVERUVcdTRFMERcdTU5MjdcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnRMaW5lRGlmZiA9IE1hdGguYWJzKGZlYXR1cmUxLnBvc2l0aW9uLnN0YXJ0TGluZSAtIGZlYXR1cmUyLnBvc2l0aW9uLnN0YXJ0TGluZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uU2ltaWxhcml0eSA9IE1hdGgubWF4KDAsIDEgLSBzdGFydExpbmVEaWZmIC8gMTApOyAvLyBcdTY3MDBcdTU5MUFcdTUxNDFcdThCQjhcdTc2RjhcdTVERUUxMFx1ODg0Q1xyXG4gICAgICAgICAgICBzY29yZSArPSBwb3NpdGlvbldlaWdodCAqIHBvc2l0aW9uU2ltaWxhcml0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gcG9zaXRpb25XZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNS4gXHU5OTk2XHU4ODRDXHU1MTg1XHU1QkI5XHU3NkY4XHU0RjNDXHU1RUE2IC0gXHU2NzQzXHU5MUNEXHU0RTJEXHJcbiAgICAgICAgY29uc3QgZmlyc3RSb3dXZWlnaHQgPSAyO1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5maXJzdFJvd0NvbnRlbnQgJiYgZmVhdHVyZTIuZmlyc3RSb3dDb250ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93U2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlVGV4dFNpbWlsYXJpdHkoXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlMS5maXJzdFJvd0NvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlMi5maXJzdFJvd0NvbnRlbnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2NvcmUgKz0gZmlyc3RSb3dXZWlnaHQgKiBmaXJzdFJvd1NpbWlsYXJpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvdGFsV2VpZ2h0ICs9IGZpcnN0Um93V2VpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDYuIFx1NjcyQlx1ODg0Q1x1NTE4NVx1NUJCOVx1NzZGOFx1NEYzQ1x1NUVBNiAtIFx1Njc0M1x1OTFDRFx1NEUyRFxyXG4gICAgICAgIGNvbnN0IGxhc3RSb3dXZWlnaHQgPSAyO1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5sYXN0Um93Q29udGVudCAmJiBmZWF0dXJlMi5sYXN0Um93Q29udGVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0Um93U2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlVGV4dFNpbWlsYXJpdHkoXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlMS5sYXN0Um93Q29udGVudCxcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUyLmxhc3RSb3dDb250ZW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IGxhc3RSb3dXZWlnaHQgKiBsYXN0Um93U2ltaWxhcml0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gbGFzdFJvd1dlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyA3LiBcdTU0MDhcdTVFNzZcdTZBMjFcdTVGMEZcdTc2RjhcdTRGM0NcdTVFQTYgLSBcdTY3NDNcdTkxQ0RcdTRGNEVcclxuICAgICAgICBjb25zdCBtZXJnZVdlaWdodCA9IDE7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUxLm1lcmdlUGF0dGVybiAmJiBmZWF0dXJlMi5tZXJnZVBhdHRlcm4pIHtcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2VTaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVUZXh0U2ltaWxhcml0eShcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUxLm1lcmdlUGF0dGVybixcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUyLm1lcmdlUGF0dGVyblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBzY29yZSArPSBtZXJnZVdlaWdodCAqIG1lcmdlU2ltaWxhcml0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gbWVyZ2VXZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2NzAwXHU3RUM4XHU3NkY4XHU0RjNDXHU1RUE2XHU1MjA2XHU2NTcwXHVGRjA4MC0xXHU0RTRCXHU5NUY0XHVGRjA5XHJcbiAgICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRvdGFsV2VpZ2h0ID4gMCA/IHNjb3JlIC8gdG90YWxXZWlnaHQgOiAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTY6ICR7c2ltaWxhcml0eS50b0ZpeGVkKDIpfWApO1xyXG4gICAgICAgIHJldHVybiBzaW1pbGFyaXR5O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJBMVx1N0I5N1x1NEUyNFx1NEUyQVx1NjU4N1x1NjcyQ1x1NzY4NFx1NzZGOFx1NEYzQ1x1NUVBNlxyXG4gICAgICogQHBhcmFtIHN0cjEgXHU3QjJDXHU0RTAwXHU0RTJBXHU2NTg3XHU2NzJDXHJcbiAgICAgKiBAcGFyYW0gc3RyMiBcdTdCMkNcdTRFOENcdTRFMkFcdTY1ODdcdTY3MkNcclxuICAgICAqIEByZXR1cm5zIFx1NzZGOFx1NEYzQ1x1NUVBNlx1NTIwNlx1NjU3MFx1RkYwODAtMVx1NEU0Qlx1OTVGNFx1RkYwOVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVRleHRTaW1pbGFyaXR5KHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIXN0cjEgfHwgIXN0cjIpIHJldHVybiAwO1xyXG4gICAgICAgIGlmIChzdHIxID09PSBzdHIyKSByZXR1cm4gMTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTdCODBcdTUzNTVcdTc2ODRcdTY1ODdcdTY3MkNcdTc2RjhcdTRGM0NcdTVFQTZcdThCQTFcdTdCOTdcdUZGMDhcdTRFMERcdTRGN0ZcdTc1MjhcdTU0QzhcdTVFMENcdUZGMDlcclxuICAgICAgICBjb25zdCBtYXhMZW4gPSBNYXRoLm1heChzdHIxLmxlbmd0aCwgc3RyMi5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChtYXhMZW4gPT09IDApIHJldHVybiAxO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXRjaGVzID0gMDtcclxuICAgICAgICBjb25zdCBtaW5MZW4gPSBNYXRoLm1pbihzdHIxLmxlbmd0aCwgc3RyMi5sZW5ndGgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NTE3MVx1NTQwQ1x1NTI0RFx1N0YwMFx1OTU3Rlx1NUVBNlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHN0cjFbaV0gPT09IHN0cjJbaV0pIG1hdGNoZXMrKztcclxuICAgICAgICAgICAgZWxzZSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU1MTcxXHU1NDBDXHU1NDBFXHU3RjAwXHU5NTdGXHU1RUE2XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWluTGVuIC0gbWF0Y2hlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzdHIxW3N0cjEubGVuZ3RoIC0gaV0gPT09IHN0cjJbc3RyMi5sZW5ndGggLSBpXSkgbWF0Y2hlcysrO1xyXG4gICAgICAgICAgICBlbHNlIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTRFMERcdThEODVcdThGQzdtaW5MZW5cclxuICAgICAgICBtYXRjaGVzID0gTWF0aC5taW4obWF0Y2hlcywgbWluTGVuKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbWF0Y2hlcyAvIG1heExlbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRhYmxlUG9zaXRpb25JbkRPTSh0YWJsZTogSFRNTEVsZW1lbnQpOiB7IGluZGV4OiBudW1iZXIsIGlkPzogc3RyaW5nIH0gfCBudWxsIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcdTRFMkRcdTc2ODRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgYWxsVGFibGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1OTk5Nlx1NTE0OFx1NUMxRFx1OEJENVx1OTAxQVx1OEZDN0lEXHU3NkY0XHU2M0E1XHU1MzM5XHU5MTREXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSB0YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1NTE3N1x1NjcwOVx1NzZGOFx1NTQwQ0lEXHU3Njg0XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhYmxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJZCA9IGFsbFRhYmxlc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudElkID09PSB0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdJRFx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NEY0RFx1N0Y2RTogXHU3QjJDJHtpfVx1NEUyQVx1ODg2OFx1NjgzQ1x1RkYwOElEOiAke3RhYmxlSWR9XHVGRjA5YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGluZGV4OiBpLCBpZDogdGFibGVJZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMi4gXHU2M0QwXHU1M0Q2XHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHU3Njg0XHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRmVhdHVyZSA9IHRoaXMuZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLiBcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTdDQkVcdTc4NkVcdTUzMzlcdTkxNERcclxuICAgICAgICAgICAgaWYgKHRhYmxlRmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxUYWJsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmVhdHVyZSA9IHRoaXMuZXh0cmFjdFRhYmxlRmVhdHVyZShhbGxUYWJsZXNbaV0gYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzI3OVx1NUY4MVx1NjYyRlx1NTQyNlx1NUI4Q1x1NTE2OFx1NTMzOVx1OTE0RFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUZlYXR1cmUuY29udGVudEhhc2ggPT09IGN1cnJlbnRGZWF0dXJlLmNvbnRlbnRIYXNoICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZlYXR1cmUuaGVhZGVycyA9PT0gY3VycmVudEZlYXR1cmUuaGVhZGVycyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZlYXR1cmUucm93cyA9PT0gY3VycmVudEZlYXR1cmUucm93cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZlYXR1cmUuY29scyA9PT0gY3VycmVudEZlYXR1cmUuY29scykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU3Q0JFXHU3ODZFXHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFOiBcdTdCMkMke2l9XHU0RTJBXHU4ODY4XHU2ODNDYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGluZGV4OiBpIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA0LiBcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTZcdTUzMzlcdTkxNERcclxuICAgICAgICAgICAgbGV0IGJlc3RNYXRjaEluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGxldCBiZXN0TWF0Y2hTY29yZSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBiZXN0TWF0Y2hJZCA9ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxUYWJsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYWJsZSA9IGFsbFRhYmxlc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGZWF0dXJlID0gdGhpcy5leHRyYWN0VGFibGVGZWF0dXJlKGN1cnJlbnRUYWJsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SWQgPSBjdXJyZW50VGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJpdHlTY29yZSA9IHRoaXMuY2FsY3VsYXRlRmVhdHVyZVNpbWlsYXJpdHkodGFibGVGZWF0dXJlLCBjdXJyZW50RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChzaW1pbGFyaXR5U2NvcmUgPiBiZXN0TWF0Y2hTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaFNjb3JlID0gc2ltaWxhcml0eVNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2hJZCA9IGN1cnJlbnRJZCB8fCAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJlc3RNYXRjaEluZGV4ICE9PSAtMSAmJiBiZXN0TWF0Y2hTY29yZSA+IDAuNykgeyAvLyA3MCVcdTc2RjhcdTRGM0NcdTVFQTZcdTk2MDhcdTUwM0NcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTZcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkU6IFx1N0IyQyR7YmVzdE1hdGNoSW5kZXh9XHU0RTJBXHU4ODY4XHU2ODNDXHVGRjA4XHU3NkY4XHU0RjNDXHU1RUE2OiAke2Jlc3RNYXRjaFNjb3JlLnRvRml4ZWQoMil9XHVGRjA5YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBpbmRleDogYmVzdE1hdGNoSW5kZXgsIGlkOiBiZXN0TWF0Y2hJZCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA1LiBcdTY3MDBcdTU0MEVcdTYyNERcdTU2REVcdTkwMDBcdTUyMzBcdTdCODBcdTUzNTVcdTc2ODRcdTdEMjJcdTVGMTVcdTUzMzlcdTkxNERcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBhbGxUYWJsZXMuaW5kZXhPZih0YWJsZSBhcyBIVE1MVGFibGVFbGVtZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTU3MjhET01cdTRFMkRcdTc2ODRcdTRGNERcdTdGNkU6IFx1N0IyQyR7aW5kZXh9XHU0RTJBXHU4ODY4XHU2ODNDXHVGRjA4XHU1MTcxJHthbGxUYWJsZXMubGVuZ3RofVx1NEUyQVx1RkYwOWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaW5kZXggfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTY1RTBcdTZDRDVcdTc4NkVcdTVCOUFcdTg4NjhcdTY4M0NcdTU3MjhET01cdTRFMkRcdTc2ODRcdTRGNERcdTdGNkUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4QkExXHU3Qjk3XHU1QjU3XHU3QjI2XHU0RTMyXHU3Njg0XHU3QjgwXHU1MzU1XHU1NEM4XHU1RTBDXHU1MDNDXHJcbiAgICAgKiBAcGFyYW0gc3RyIFx1OEY5M1x1NTE2NVx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICogQHJldHVybnMgXHU1NEM4XHU1RTBDXHU1MDNDXHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgKi9cclxuICAgIHNpbXBsZUhhc2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBoYXNoID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNoYXI7XHJcbiAgICAgICAgICAgIGhhc2ggPSBoYXNoICYgaGFzaDsgLy8gXHU4RjZDXHU2MzYyXHU0RTNBMzJiaXRcdTY1NzRcdTY1NzBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKGhhc2gpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMCwgOCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc4NkVcdTRGRERcdTg4NjhcdTY4M0NcdTY3MDlJRFx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NTIxOVx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICogQHBhcmFtIGF1dG9DcmVhdGUgXHU2NjJGXHU1NDI2XHU4MUVBXHU1MkE4XHU1MjFCXHU1RUZBSURcdUZGMDhcdTRFMERcdTYzQThcdTgzNTBcdUZGMENcdTVFOTRcdTRGN0ZcdTc1Mjhjb25maXJtQW5kQ3JlYXRlVGFibGVJZFx1RkYwOVxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcclxuICAgICAqL1xyXG4gICAgZW5zdXJlVGFibGVIYXNJZCh0YWJsZTogSFRNTEVsZW1lbnQsIGF1dG9DcmVhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCF0YWJsZSkgcmV0dXJuICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENklEXHVGRjBDXHU1MTQxXHU4QkI4XHU1NkRFXHU5MDAwXHU1MjMwRE9NXHU1QzVFXHU2MDI3SURcclxuICAgICAgICBjb25zdCB0YWJsZUlkID0gdGhpcy5nZXRUYWJsZUlkZW50aWZpZXIodGFibGUsIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOUlEXHVGRjBDXHU3ODZFXHU0RkREXHU4ODY4XHU2ODNDXHU2NzA5XHU2NTcwXHU2MzZFXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgdGFibGVJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRhYmxlSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOUlEXHU0RTE0XHU1MTQxXHU4QkI4XHU4MUVBXHU1MkE4XHU1MjFCXHU1RUZBXHJcbiAgICAgICAgaWYgKGF1dG9DcmVhdGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU4MUVBXHU1MkE4XHU1MjFCXHU1RUZBXHU2NUIwSUQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlybUFuZENyZWF0ZVRhYmxlSWQodGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlJRFx1NEUxNFx1NEUwRFx1NTE0MVx1OEJCOFx1ODFFQVx1NTJBOFx1NTIxQlx1NUVGQVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NEUwRFx1ODFFQVx1NTJBOFx1NTIxQlx1NUVGQUlEJyk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZVRhYmxlSWQoKTogc3RyaW5nIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmVmaXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZFByZWZpeCB8fCAndGJsJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NjVFNVx1NjcxRlx1NEY1Q1x1NEUzQUlEXHU3Njg0XHU0RTAwXHU5MEU4XHU1MjA2XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTY1ODdcdTRFRjZcdTRGRTFcdTYwNkZcdTRGNUNcdTRFM0FJRFx1NzY4NFx1NEUwMFx1OTBFOFx1NTIwNlxyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICBsZXQgZmlsZUNvZGUgPSAnZG9jJztcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NTQwRFx1NzY4NFx1NTI0RFx1NEUyNFx1NEUyQVx1NUI1N1x1N0IyNlx1RkYwOFx1NTk4Mlx1Njc5Q1x1NTNFRlx1NzUyOFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBhY3RpdmVGaWxlLmJhc2VuYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVOYW1lICYmIGZpbGVOYW1lLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvZGUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoMCwgMikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5NjhGXHU2NzNBXHU1QjU3XHU3QjI2XHU0RTMyXHVGRjBDXHU0RjQ2XHU0RTBEXHU0RjdGXHU3NTI4XHU1NEM4XHU1RTBDXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUNoYXJzID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcclxuICAgICAgICAgICAgbGV0IHJhbmRvbVN0ciA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tU3RyICs9IHJhbmRvbUNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByYW5kb21DaGFycy5sZW5ndGgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3RUM0XHU1NDA4SUQ6IFx1NTI0RFx1N0YwMC1cdTY1RTVcdTY3MUYtXHU2NTg3XHU0RUY2XHU0RUUzXHU3ODAxLVx1OTY4Rlx1NjczQVx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gYCR7cHJlZml4fS0ke3llYXJ9JHttb250aH0ke2RheX0tJHtmaWxlQ29kZX0ke3JhbmRvbVN0cn1gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzUxRlx1NjIxMFx1ODg2OFx1NjgzQ0lEOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJsZUlkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NzUxRlx1NjIxMFx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTFGQVx1OTUxOVx1NjVGNlx1NEY3Rlx1NzUyOFx1NTkwN1x1NzUyOElEXHU3NTFGXHU2MjEwXHU2NUI5XHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZFByZWZpeCB8fCAndGJsJ30tJHt0aW1lc3RhbXB9LSR7cmFuZG9tfWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RUNFTWFya2Rvd25cdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NTQ4Q1x1NzI3OVx1NUY4MVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQgTWFya2Rvd25cdTUxODVcdTVCQjlcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU1NDhDXHU3Mjc5XHU1RjgxXHU2NTcwXHU3RUM0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBleHRyYWN0VGFibGVJZHNGcm9tTWFya2Rvd24oY29udGVudDogc3RyaW5nKTogQXJyYXk8e2lkOiBzdHJpbmcsIGZlYXR1cmU6IFRhYmxlRmVhdHVyZX0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IEFycmF5PHtpZDogc3RyaW5nLCBmZWF0dXJlOiBUYWJsZUZlYXR1cmV9PiA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDSURcdTZDRThcdTkxQ0FcdTU0OENcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTg4NjhcdTY4M0NJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlSWQgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZUZlYXR1cmU6IGFueSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTZDRThcdTkxQ0FcdTU5MzlcdTZBMjFcdTVGMEZcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlZ2luTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKnRhYmxlLWJlZ2luOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyooPzpmZWF0dXJlOlxccyooXFx7LipcXH0pKT9cXHMqLS0+Lyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVnaW5NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlSWQgPSBiZWdpbk1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1ODlFM1x1Njc5MFx1NzI3OVx1NUY4MUpTT05cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmVnaW5NYXRjaFsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVGZWF0dXJlID0gSlNPTi5wYXJzZShiZWdpbk1hdGNoWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxSlNPTlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlU3RhcnRMaW5lID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlRW5kTGluZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tqXS50cmltKCkuc3RhcnRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXJ0TGluZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTVGMDBcdTU5Q0JcdUZGMENcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTdFRDNcdTY3NUZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVTdGFydExpbmUgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gdGFibGVTdGFydExpbmU7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lc1tqXS50cmltKCkuc3RhcnRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVFbmRMaW5lID0gaiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIzMFx1OEZCRVx1NjU4N1x1NEVGNlx1NjcyQlx1NUMzRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUVuZExpbmUgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlRW5kTGluZSA+PSB0YWJsZVN0YXJ0TGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDb250ZW50ID0gbGluZXMuc2xpY2UodGFibGVTdGFydExpbmUsIHRhYmxlRW5kTGluZSArIDEpLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSB0aGlzLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGVDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TGluZTogdGFibGVTdGFydExpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZTogdGFibGVFbmRMaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZmlsZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYWN0aXZlRmlsZS5iYXNlbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1NjNEMFx1NTNENlx1NzY4NFx1NzI3OVx1NUY4MVx1NEUwRVx1NkNFOFx1OTFDQVx1NEUyRFx1NzY4NFx1NzI3OVx1NUY4MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkRmVhdHVyZSA9IHsgLi4uZmVhdHVyZSwgLi4udGFibGVGZWF0dXJlLCBpZDogdGFibGVJZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMzBcdTdFRDNcdTY3OUNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdGFibGVJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlOiBtZXJnZWRGZWF0dXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTdFRTdcdTdFRURcdTY3RTVcdTYyN0VcdTRFMEJcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2ODA3XHU1MUM2XHU4ODY4XHU2ODNDSURcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKnRhYmxlLWlkOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyooPzpmZWF0dXJlOlxccyooXFx7LipcXH0pKT9cXHMqLS0+Lyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlSWQgPSBpZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1ODlFM1x1Njc5MFx1NzI3OVx1NUY4MUpTT05cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWRNYXRjaFsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVGZWF0dXJlID0gSlNPTi5wYXJzZShpZE1hdGNoWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxSlNPTlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlU3RhcnRMaW5lID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlRW5kTGluZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tqXS50cmltKCkuc3RhcnRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXJ0TGluZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTVGMDBcdTU5Q0JcdUZGMENcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTdFRDNcdTY3NUZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVTdGFydExpbmUgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gdGFibGVTdGFydExpbmU7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lc1tqXS50cmltKCkuc3RhcnRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVFbmRMaW5lID0gaiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIzMFx1OEZCRVx1NjU4N1x1NEVGNlx1NjcyQlx1NUMzRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUVuZExpbmUgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlRW5kTGluZSA+PSB0YWJsZVN0YXJ0TGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDb250ZW50ID0gbGluZXMuc2xpY2UodGFibGVTdGFydExpbmUsIHRhYmxlRW5kTGluZSArIDEpLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSB0aGlzLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGVDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TGluZTogdGFibGVTdGFydExpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZTogdGFibGVFbmRMaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5maWxlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogYWN0aXZlRmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY3RpdmVGaWxlLmJhc2VuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDA4XHU1RTc2XHU2M0QwXHU1M0Q2XHU3Njg0XHU3Mjc5XHU1RjgxXHU0RTBFXHU2Q0U4XHU5MUNBXHU0RTJEXHU3Njg0XHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRGZWF0dXJlID0geyAuLi5mZWF0dXJlLCAuLi50YWJsZUZlYXR1cmUsIGlkOiB0YWJsZUlkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1N0VEM1x1Njc5Q1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmU6IG1lcmdlZEZlYXR1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NEVDRU1hcmtkb3duXHU1MTg1XHU1QkI5XHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IE9ic2lkaWFuU3ByZWFkc2hlZXQgfSBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBzZXRJY29uLCBNZW51LCBOb3RpY2UsIEFwcCwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJsZVRvb2xiYXIge1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIHByaXZhdGUgdG9vbGJhcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgYWN0aXZlVGFibGU6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkQ2VsbHM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuICAgIHByaXZhdGUgaXNEcmFnZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBkcmFnU3RhcnRYOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBkcmFnU3RhcnRZOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBpc0NvbGxhcHNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjb2xsYXBzZUJ1dHRvbjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvb2xiYXJDb250ZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgZHJhZ0hhbmRsZTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGluaXRpYWxQb3NpdGlvbjogeyBsZWZ0OiBzdHJpbmcsIHRvcDogc3RyaW5nIH0gPSB7IGxlZnQ6ICc1MCUnLCB0b3A6ICcxMHB4JyB9O1xyXG4gICAgcHJpdmF0ZSBlZGl0TW9kZVRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcgfSB8IG51bGwgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXBwbHlUb0VudGlyZVRhYmxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlVG9vbGJhciBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyRWwgXHU1QkI5XHU1NjY4XHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVRvb2xiYXIoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NUJCOVx1NTY2OFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBjb250YWluZXJFbC5zdHlsZS56SW5kZXggPSAnMTAwMCc7XHJcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUubGVmdCA9ICc1MCUnO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLnRvcCA9ICcxMHB4JztcclxuICAgICAgICBjb250YWluZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtNTAlKSc7XHJcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IC8vIFx1Nzg2RVx1NEZERFx1NURFNVx1NTE3N1x1NjgwRlx1OUVEOFx1OEJBNFx1NjYzRVx1NzkzQVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NURFNVx1NTE3N1x1NjgwRlx1NUJCOVx1NTY2OFxyXG4gICAgICAgIHRoaXMudG9vbGJhciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ2FkdmFuY2VkLXRhYmxlLXRvb2xiYXInXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuZ2FwID0gJzVweCc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUubWFyZ2luID0gJzVweCAwJztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5ib3hTaGFkb3cgPSAnMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xNSknO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MkQ2XHU2MkZEXHU2MjRCXHU2N0M0IC0gXHU3ODZFXHU0RkREXHU1MTc2XHU1NzI4XHU2NzAwXHU1MjREXHU5NzYyXHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlID0gdGhpcy50b29sYmFyLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ2FkdmFuY2VkLXRhYmxlLXRvb2xiYXItZHJhZy1oYW5kbGUnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2MkQ2XHU2MkZEXHU2MjRCXHU2N0M0XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmN1cnNvciA9ICdncmFiJztcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUucGFkZGluZyA9ICcwIDVweCc7XHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUubWFyZ2luUmlnaHQgPSAnNXB4JztcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuaGVpZ2h0ID0gJzI4cHgnO1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyRDZcdTYyRkRcdTYyNEJcdTY3QzRcdTc2ODRcdTYwQUNcdTUwNUNcdTY1NDhcdTY3OUNcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjJENlx1NjJGRFx1NTZGRVx1NjgwN1xyXG4gICAgICAgIHNldEljb24odGhpcy5kcmFnSGFuZGxlLCAnZ3JpcC12ZXJ0aWNhbCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NURFNVx1NTE3N1x1NjgwRlx1NTE4NVx1NUJCOVx1NUJCOVx1NTY2OFxyXG4gICAgICAgIHRoaXMudG9vbGJhckNvbnRlbnQgPSB0aGlzLnRvb2xiYXIuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb250ZW50J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudG9vbGJhckNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICB0aGlzLnRvb2xiYXJDb250ZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcclxuICAgICAgICB0aGlzLnRvb2xiYXJDb250ZW50LnN0eWxlLmdhcCA9ICc1cHgnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhckNvbnRlbnQuc3R5bGUuZmxleEdyb3cgPSAnMSc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1MjA2XHU3RUM0XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b25Hcm91cCgnXHU1QkY5XHU5RjUwJywgW1xyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tbGVmdCcsIHRvb2x0aXA6ICdcdTVERTZcdTVCRjlcdTlGNTAnLCBpY29uOiAnYWxpZ24tbGVmdCcgfSxcclxuICAgICAgICAgICAgeyBpZDogJ2FsaWduLWNlbnRlcicsIHRvb2x0aXA6ICdcdTVDNDVcdTRFMkRcdTVCRjlcdTlGNTAnLCBpY29uOiAnYWxpZ24tY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tcmlnaHQnLCB0b29sdGlwOiAnXHU1M0YzXHU1QkY5XHU5RjUwJywgaWNvbjogJ2FsaWduLXJpZ2h0JyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tdG9wJywgdG9vbHRpcDogJ1x1OTg3Nlx1OTBFOFx1NUJGOVx1OUY1MCcsIGljb246ICdhbGlnbi10b3AnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdhbGlnbi1taWRkbGUnLCB0b29sdGlwOiAnXHU1NzgyXHU3NkY0XHU1QzQ1XHU0RTJEJywgaWNvbjogJ2FsaWduLW1pZGRsZScgfSxcclxuICAgICAgICAgICAgeyBpZDogJ2FsaWduLWJvdHRvbScsIHRvb2x0aXA6ICdcdTVFOTVcdTkwRThcdTVCRjlcdTlGNTAnLCBpY29uOiAnYWxpZ24tYm90dG9tJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tYWxsJywgdG9vbHRpcDogJ1x1NTE2OFx1OTBFOFx1NUM0NVx1NEUyRCcsIGljb246ICdhbGlnbi1hbGwnIH1cclxuICAgICAgICBdKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVNlcGFyYXRvcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uR3JvdXAoJ1x1NTQwOFx1NUU3NicsIFtcclxuICAgICAgICAgICAgeyBpZDogJ21lcmdlLWNlbGxzJywgdG9vbHRpcDogJ1x1NTQwOFx1NUU3Nlx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQycsIGljb246ICdtZXJnZS1jZWxscycgfSxcclxuICAgICAgICAgICAgeyBpZDogJ21lcmdlLXJpZ2h0JywgdG9vbHRpcDogJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3NicsIGljb246ICdtZXJnZS1yaWdodCcgfSxcclxuICAgICAgICAgICAgeyBpZDogJ21lcmdlLWRvd24nLCB0b29sdGlwOiAnXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2JywgaWNvbjogJ21lcmdlLWRvd24nIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdzcGxpdCcsIHRvb2x0aXA6ICdcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0MnLCBpY29uOiAnc3BsaXQnIH1cclxuICAgICAgICBdKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVNlcGFyYXRvcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uR3JvdXAoJ1x1ODg2OFx1NjgzQycsIFtcclxuICAgICAgICAgICAgeyBpZDogJ3RhYmxlLWlkJywgdG9vbHRpcDogJ1x1NzUxRlx1NjIxMFx1ODg2OFx1NjgzQ0lEJywgaWNvbjogJ3RhYmxlLWlkJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAndGFibGUtcm93LWFkZCcsIHRvb2x0aXA6ICdcdTZERkJcdTUyQTBcdTg4NEMnLCBpY29uOiAndGFibGUtcm93LWFkZCcgfSxcclxuICAgICAgICAgICAgeyBpZDogJ3RhYmxlLXN0eWxlJywgdG9vbHRpcDogJ1x1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRicsIGljb246ICd0YWJsZS1zdHlsZScgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjUzNlx1OEQ3N1x1NjMwOVx1OTRBRVxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24gPSB0aGlzLnRvb2xiYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb2xsYXBzZS1idXR0b24nLFxyXG4gICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1NjUzNlx1OEQ3Ny9cdTVDNTVcdTVGMDBcdTVERTVcdTUxNzdcdTY4MEYnLCAndGl0bGUnOiAnXHU2NTM2XHU4RDc3XHU1REU1XHU1MTc3XHU2ODBGJyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLndpZHRoID0gJzI4cHgnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuaGVpZ2h0ID0gJzI4cHgnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUucGFkZGluZyA9ICczcHgnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICc1cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNldEljb24odGhpcy5jb2xsYXBzZUJ1dHRvbiwgJ2NoZXZyb24tbGVmdCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ29sbGFwc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTYyRDZcdTYyRkRcdTRFOEJcdTRFRjZcclxuICAgICAgICB0aGlzLnNldHVwRHJhZ2dhYmxlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NURFNVx1NTE3N1x1NjgwRlx1NURGMlx1NTIxQlx1NUVGQVx1RkYwQ1x1NjJENlx1NjJGRFx1NjI0Qlx1NjdDNFx1NzJCNlx1NjAwMTonLCB7XHJcbiAgICAgICAgICAgIGRyYWdIYW5kbGVFeGlzdHM6ICEhdGhpcy5kcmFnSGFuZGxlLFxyXG4gICAgICAgICAgICBkcmFnSGFuZGxlUGFyZW50OiB0aGlzLmRyYWdIYW5kbGU/LnBhcmVudEVsZW1lbnQsXHJcbiAgICAgICAgICAgIGRyYWdIYW5kbGVEaXNwbGF5OiB0aGlzLmRyYWdIYW5kbGU/LnN0eWxlLmRpc3BsYXksXHJcbiAgICAgICAgICAgIGRyYWdIYW5kbGVJY29uOiB0aGlzLmRyYWdIYW5kbGU/LmlubmVySFRNTCxcclxuICAgICAgICAgICAgdG9vbGJhckNoaWxkcmVuOiBBcnJheS5mcm9tKHRoaXMudG9vbGJhci5jaGlsZHJlbikubWFwKGNoaWxkID0+IGNoaWxkLmNsYXNzTmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQkVcdTdGNkVcdTVERTVcdTUxNzdcdTY4MEZcdTUzRUZcdTYyRDZcdTYyRkRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXR1cERyYWdnYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OUYyMFx1NjgwN1x1NjMwOVx1NEUwQlx1NEU4Qlx1NEVGNlxyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTUzRUFcdTU0Q0RcdTVFOTRcdTVERTZcdTk1MkVcclxuICAgICAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydFggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0WSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJCMFx1NUY1NVx1NTIxRFx1NTlDQlx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb25zdCByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGNvbnRhaW5lci5zdHlsZS5sZWZ0IHx8ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBjb250YWluZXIuc3R5bGUudG9wIHx8ICcxMHB4J1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NTM5XHU1M0Q4XHU1MTQ5XHU2ODA3XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5jdXJzb3IgPSAnZ3JhYmJpbmcnO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcdTU0OENcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OUYyMFx1NjgwN1x1NzlGQlx1NTJBOFx1NEU4Qlx1NEVGNiAoXHU3RUQxXHU1QjlBXHU1MjMwZG9jdW1lbnRcdTRFRTVcdTYzNTVcdTgzQjdcdTYyNDBcdTY3MDlcdTc5RkJcdTUyQTgpXHJcbiAgICAgICAgY29uc3QgbW91c2VNb3ZlSGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnaW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTRGNERcdTc5RkJcclxuICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gZS5jbGllbnRYIC0gdGhpcy5kcmFnU3RhcnRYO1xyXG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSB0aGlzLmRyYWdTdGFydFk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NjVCMFx1NEY0RFx1N0Y2RSAoXHU3NkY4XHU1QkY5XHU0RThFXHU4OUM2XHU1M0UzKVxyXG4gICAgICAgICAgICBsZXQgbmV3TGVmdDogc3RyaW5nO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsUG9zaXRpb24ubGVmdC5lbmRzV2l0aCgnJScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMURcdTU5Q0JcdTRGNERcdTdGNkVcdTY2MkZcdTc2N0VcdTUyMDZcdTZCRDRcdUZGMENcdThGNkNcdTYzNjJcdTRFM0FcdTUwQ0ZcdTdEMjBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsTGVmdFB4ID0gKHBhcnNlRmxvYXQodGhpcy5pbml0aWFsUG9zaXRpb24ubGVmdCkgLyAxMDApICogdmlld3BvcnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIG5ld0xlZnQgPSBgJHtpbml0aWFsTGVmdFB4ICsgZGVsdGFYfXB4YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIxRFx1NTlDQlx1NEY0RFx1N0Y2RVx1NjYyRlx1NTBDRlx1N0QyMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdGlhbExlZnRQeCA9IHBhcnNlRmxvYXQodGhpcy5pbml0aWFsUG9zaXRpb24ubGVmdCk7XHJcbiAgICAgICAgICAgICAgICBuZXdMZWZ0ID0gYCR7aW5pdGlhbExlZnRQeCArIGRlbHRhWH1weGA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1RvcCA9IGAke3BhcnNlRmxvYXQodGhpcy5pbml0aWFsUG9zaXRpb24udG9wKSArIGRlbHRhWX1weGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY1QjBcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBuZXdMZWZ0O1xyXG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gbmV3VG9wO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3OUZCXHU1MkE4XHU2NUY2XHU1M0Q2XHU2RDg4dHJhbnNmb3JtXHU1QzQ1XHU0RTJEXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcdTU0OENcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5RjIwXHU2ODA3XHU5MUNBXHU2NTNFXHU0RThCXHU0RUY2XHJcbiAgICAgICAgY29uc3QgbW91c2VVcEhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTUxNDlcdTY4MDdcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmN1cnNvciA9ICdncmFiJztcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVxyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3RUQxXHU1QjlBXHU1MTY4XHU1QzQwXHU0RThCXHU0RUY2XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTU3MjhcdTYzRDJcdTRFRjZcdTUzNzhcdThGN0RcdTY1RjZcdTZFMDVcdTc0MDZcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgbW91c2VNb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ21vdXNldXAnLCBtb3VzZVVwSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1MjA3XHU2MzYyXHU1REU1XHU1MTc3XHU2ODBGXHU3Njg0XHU2NTM2XHU4RDc3L1x1NUM1NVx1NUYwMFx1NzJCNlx1NjAwMVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRvZ2dsZUNvbGxhcHNlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNDb2xsYXBzZWQgPSAhdGhpcy5pc0NvbGxhcHNlZDtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAvLyBcdTY1MzZcdThENzdcdTVERTVcdTUxNzdcdTY4MEZcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBzZXRJY29uKHRoaXMuY29sbGFwc2VCdXR0b24sICdjaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS53aWR0aCA9ICdhdXRvJztcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QzAzXHU2NTc0XHU1QkI5XHU1NjY4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc3R5bGUud2lkdGggPSAnYXV0byc7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2M0QwXHU3OTNBXHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdcdTVDNTVcdTVGMDBcdTVERTVcdTUxNzdcdTY4MEYnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTVDNTVcdTVGMDBcdTVERTVcdTUxNzdcdTY4MEZcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgICBzZXRJY29uKHRoaXMuY29sbGFwc2VCdXR0b24sICdjaGV2cm9uLWxlZnQnKTtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLndpZHRoID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NUJCOVx1NTY2OFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLndpZHRoID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc3R5bGUuaGVpZ2h0ID0gJyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTYzRDBcdTc5M0FcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ1x1NjUzNlx1OEQ3N1x1NURFNVx1NTE3N1x1NjgwRicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcdTdFQzRcclxuICAgICAqIEBwYXJhbSBncm91cE5hbWUgXHU3RUM0XHU1NDBEXHJcbiAgICAgKiBAcGFyYW0gYnV0dG9ucyBcdTYzMDlcdTk0QUVcdTkxNERcdTdGNkVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b25Hcm91cChncm91cE5hbWU6IHN0cmluZywgYnV0dG9uczoge2lkOiBzdHJpbmcsIHRvb2x0aXA6IHN0cmluZywgaWNvbjogc3RyaW5nfVtdKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLnRvb2xiYXJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ2FkdmFuY2VkLXRhYmxlLXRvb2xiYXItZ3JvdXAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ3JvdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBncm91cC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XHJcbiAgICAgICAgZ3JvdXAuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1N0VDNFx1NjgwN1x1N0I3RVxyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZ3JvdXAuY3JlYXRlRWwoJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IGdyb3VwTmFtZSxcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1ncm91cC1sYWJlbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuICAgICAgICBsYWJlbC5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIGxhYmVsLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcclxuICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZ3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgICAgIGNsczogYGFkdmFuY2VkLXRhYmxlLXRvb2xiYXItYnV0dG9uICR7YnRuLmlkfWAsXHJcbiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogYnRuLnRvb2x0aXAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBidXR0b24uc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBidXR0b24uc3R5bGUud2lkdGggPSAnMjhweCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5oZWlnaHQgPSAnMjhweCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzNweCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTU2RkVcdTY4MDdcclxuICAgICAgICAgICAgc2V0SWNvbihidXR0b24sIGJ0bi5pY29uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjBBQ1x1NTA1Q1x1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCdXR0b25DbGljayhidG4uaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjBBQ1x1NTA1Q1x1NjNEMFx1NzkzQVxyXG4gICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIGJ0bi50b29sdGlwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMUJcdTVFRkFcdTUyMDZcdTk2OTRcdTdFQkZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVTZXBhcmF0b3IoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gdGhpcy50b29sYmFyQ29udGVudC5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICBjbHM6ICdhZHZhbmNlZC10YWJsZS10b29sYmFyLXNlcGFyYXRvcidcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBzZXBhcmF0b3Iuc3R5bGUud2lkdGggPSAnMXB4JztcclxuICAgICAgICBzZXBhcmF0b3Iuc3R5bGUuaGVpZ2h0ID0gJzI0cHgnO1xyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW4gPSAnMCA1cHgnO1xyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuICAgICAqIEBwYXJhbSBidXR0b25JZCBcdTYzMDlcdTk0QUVJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUJ1dHRvbkNsaWNrKGJ1dHRvbklkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdThCQjBcdTVGNTVcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzBCOVx1NTFGQlx1NEU4Nlx1NjMwOVx1OTRBRTogJHtidXR0b25JZH1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlxyXG4gICAgICAgICAgICBjb25zdCBpc0VkaXRNb2RlID0gdGhpcy5pc0luRWRpdE1vZGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN3aXRjaCAoYnV0dG9uSWQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLWxlZnQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlBbGlnbm1lbnRUb1NlbGVjdGVkQ2VsbHMoJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLWNlbnRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscygnY2VudGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhbGlnbi1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscygncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLXRvcCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscyh1bmRlZmluZWQsICd0b3AnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLW1pZGRsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscyh1bmRlZmluZWQsICdtaWRkbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLWJvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscyh1bmRlZmluZWQsICdib3R0b20nKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLWFsbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscygnY2VudGVyJywgJ21pZGRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UtY2VsbHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY2ODJcdTRFMERcdTY1MkZcdTYzMDFcdTU5MUFcdTkwMDlcdTU0MDhcdTVFNzZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2NjgyXHU0RTBEXHU2NTJGXHU2MzAxXHU1OTFBXHU5MDA5XHU1NDA4XHU1RTc2XHVGRjBDXHU4QkY3XHU0RjdGXHU3NTI4XHU1NDExXHU1M0YzXHU2MjE2XHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZUNlbGxzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UtcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UtZG93bic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZURvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3NwbGl0JzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yIFx1OEZEQlx1ODg0Q1x1NjJDNlx1NTIwNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5tYXJrZG93blNvdXJjZUVkaXRvci5zcGxpdE1lcmdlZENlbGxzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1OTAwOVx1NjJFOVx1RkYwQ1x1NTZFMFx1NEUzQVx1NkU5MFx1NzgwMVx1NURGMlx1N0VDRlx1NEZFRVx1NjUzOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2MkM2XHU1MjA2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYmxlLWlkJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlVGFibGVJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGFibGUtcm93LWFkZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NjY4Mlx1NEUwRFx1NjUyRlx1NjMwMVx1NkRGQlx1NTJBMFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY2ODJcdTRFMERcdTY1MkZcdTYzMDFcdTkwMUFcdThGQzdcdTVERTVcdTUxNzdcdTY4MEZcdTZERkJcdTUyQTBcdTg4NENcdUZGMENcdThCRjdcdTc2RjRcdTYzQTVcdTdGMTZcdThGOTFNYXJrZG93blx1NkU5MFx1NzgwMScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jvd0FkZE1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0YWJsZS1zdHlsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NjY4Mlx1NEUwRFx1NjUyRlx1NjMwMVx1NjgzN1x1NUYwRlx1OEJCRVx1N0Y2RVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY2ODJcdTRFMERcdTY1MkZcdTYzMDFcdTY4MzdcdTVGMEZcdThCQkVcdTdGNkUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dTdHlsZU1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY3MkFcdTU5MDRcdTc0MDZcdTc2ODRcdTYzMDlcdTk0QUVJRDogJHtidXR0b25JZH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NTkwNFx1NzQwNlx1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NjVGNlx1NTFGQVx1OTUxOTogJHtidXR0b25JZH1gLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCMFx1NUY1NVx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvZ0RlYnVnSW5mbygpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTY1ODdcdTY4NjNcdTRFMkRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcclxuICAgICAgICBjb25zdCBhbGxUYWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTVERjJcdTkwMDlcdTYyRTlcdTc2ODRcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFRhYmxlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZVtkYXRhLXRhYmxlLXNlbGVjdGVkPVwidHJ1ZVwiXScpLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU1RjUzXHU1MjREXHU3MkI2XHU2MDAxOicsIHtcclxuICAgICAgICAgICAgYWN0aXZlVGFibGU6IHRoaXMuYWN0aXZlVGFibGUsXHJcbiAgICAgICAgICAgIGFsbFRhYmxlczogYWxsVGFibGVzLFxyXG4gICAgICAgICAgICBzZWxlY3RlZENlbGxzOiB0aGlzLnNlbGVjdGVkQ2VsbHMsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGFibGVFbGVtZW50czogc2VsZWN0ZWRUYWJsZUVsZW1lbnRzLFxyXG4gICAgICAgICAgICB0b29sYmFyQ29udGFpbmVyOiB0aGlzLmNvbnRhaW5lckVsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU1QkY5XHU5RjUwXHU2ODM3XHU1RjBGXHU1MjMwXHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gaG9yaXpvbnRhbEFsaWduIFx1NkMzNFx1NUU3M1x1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICogQHBhcmFtIHZlcnRpY2FsQWxpZ24gXHU1NzgyXHU3NkY0XHU1QkY5XHU5RjUwXHU2NUI5XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlBbGlnbm1lbnRUb1NlbGVjdGVkQ2VsbHMoaG9yaXpvbnRhbEFsaWduPzogc3RyaW5nLCB2ZXJ0aWNhbEFsaWduPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUU5NFx1NzUyOFx1NUJGOVx1OUY1MDonLCB7aG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbEFsaWdufSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTk5OTZcdTUxNDhcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcdTUyMzBET01cdTUxNDNcdTdEMjBcdUZGMENcdTc4NkVcdTRGRERcdTc1MjhcdTYyMzdcdTdBQ0JcdTUzNzNcdTc3MEJcdTUyMzBcdTY1NDhcdTY3OUNcclxuICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFN0eWxlc09ubHkoaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbEFsaWduKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxNlx1NkNBMVx1NjcwOVx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1x1RkYwQ1x1NTIxOVx1NzZGNFx1NjNBNVx1OEZENFx1NTZERVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUgfHwgKHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPT09IDAgJiYgIXRoaXMuYXBwbHlUb0VudGlyZVRhYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTZDQTFcdTY3MDlcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTZcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2NUIwXHU2NUI5XHU2Q0Q1XHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdThCRkJcdTUzRDZcdTg4NjhcdTY4M0NJRFxyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWFkVGFibGVJZEZyb21NYXJrZG93bih0aGlzLmFjdGl2ZVRhYmxlKS50aGVuKHRhYmxlSWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSUQ6ICR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdTgzQjdcdTUzRDZcdTUyMzBcdTY3MDlcdTY1NDhcdTc2ODRcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NTIxOVx1NTNFQVx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlx1NEY0Nlx1NEUwRFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTY3MkFcdTYyN0VcdTUyMzBIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU1QjlBXHU0RTQ5XHU3Njg0XHU4ODY4XHU2ODNDSURcdUZGMENcdTVDMDZcdTUzRUFcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcdTRGNDZcdTRFMERcdTRGRERcdTVCNThcdTY1NzBcdTYzNkUnKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NjgzN1x1NUYwRlx1NURGMlx1NUU5NFx1NzUyOFx1NEY0Nlx1NjcyQVx1NEZERFx1NUI1OFx1NTIzMFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU1MjMwXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWJsZSkgeyAvLyBcdTc4NkVcdTRGRERhY3RpdmVUYWJsZVx1NEVDRFx1NzEzNlx1NUI1OFx1NTcyOFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYmxlID0gdGhpcy5hY3RpdmVUYWJsZTsgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU1RjE1XHU3NTI4XHVGRjBDXHU3ODZFXHU0RkREXHU1NzI4XHU1RjAyXHU2QjY1XHU2NENEXHU0RjVDXHU0RTJEXHU0RTBEXHU0RjFBXHU0RTNBbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDZWxsUG9zaXRpb25zID0gdGhpcy5nZXRTZWxlY3RlZENlbGxQb3NpdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFOicsIHNlbGVjdGVkQ2VsbFBvc2l0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MkEwXHU4RjdEXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9hZERhdGEoKS50aGVuKChleGlzdGluZ0RhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTVCNThcdTU3MjhcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ0RhdGEudGFibGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0RhdGEudGFibGVzID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZURhdGEgPSBleGlzdGluZ0RhdGEudGFibGVzW3RhYmxlSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU2NUIwXHU3Njg0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFibGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NFx1ODg0Q1x1NjU3MFx1NTQ4Q1x1NTIxN1x1NjU3MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IGFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dDb3VudCA9IHJvd3MubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvdyA9IHJvd3NbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sQ291bnQgPSBmaXJzdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ6IHJvd0NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xDb3VudDogY29sQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0hlYWRlcnM6IHJvd3MubGVuZ3RoID4gMCAmJiByb3dzWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzOiBBcnJheShyb3dDb3VudCkuZmlsbCgnYXV0bycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aHM6IEFycmF5KGNvbENvdW50KS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogQXJyYXkoY29sQ291bnQpLmZpbGwoJ2xlZnQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFN0eWxlczogW10gLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU3NTI4XHU0RThFXHU1QjU4XHU1MEE4XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzA2XHU2NUIwXHU1MjFCXHU1RUZBXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2REZCXHU1MkEwXHU1MjMwZXhpc3RpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0RhdGEudGFibGVzW3RhYmxlSWRdID0gdGFibGVEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1OEJCMFx1NUY1NTogJHt0YWJsZUlkfWAsIHRhYmxlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2MjdFXHU1MjMwXHU3M0IwXHU2NzA5XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFOiAke3RhYmxlSWR9YCwgdGFibGVEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU3RUQzXHU2Nzg0XHU2NTcwXHU2MzZFXHU1QjU4XHU1NzI4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhYmxlRGF0YS5zdHJ1Y3R1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dDb3VudCA9IHJvd3MubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvdyA9IHJvd3NbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbENvdW50ID0gZmlyc3RSb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3RydWN0dXJlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudDogcm93Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbENvdW50OiBjb2xDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogcm93cy5sZW5ndGggPiAwICYmIHJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgnKS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREc3R5bGluZ1x1NjU3MFx1NjM2RVx1NUI1OFx1NTcyOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEuc3R5bGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzOiBBcnJheSh0YWJsZURhdGEuc3RydWN0dXJlLnJvd0NvdW50KS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoczogQXJyYXkodGFibGVEYXRhLnN0cnVjdHVyZS5jb2xDb3VudCkuZmlsbCgnYXV0bycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFycmF5KHRhYmxlRGF0YS5zdHJ1Y3R1cmUuY29sQ291bnQpLmZpbGwoJ2xlZnQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFN0eWxlczogW10gLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU3NTI4XHU0RThFXHU1QjU4XHU1MEE4XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREY2VsbFN0eWxlc1x1NjU3MFx1N0VDNFx1NUI1OFx1NTcyOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERsb2NhdGlvbnNcdTY1NzBcdTYzNkVcdTUzMDVcdTU0MkJcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFibGVEYXRhLmxvY2F0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5sb2NhdGlvbnMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1NjYyRlx1NTQyNlx1NURGMlx1NTcyOGxvY2F0aW9uc1x1NEUyRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoRXhpc3RzID0gdGFibGVEYXRhLmxvY2F0aW9ucy5zb21lKChsb2M6IHtwYXRoOiBzdHJpbmd9KSA9PiBsb2MucGF0aCA9PT0gYWN0aXZlRmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGVQYXRoRXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5sb2NhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTAwOVx1NjJFOVx1NEU4Nlx1NUU5NFx1NzUyOFx1NTIzMFx1NjU3NFx1NEUyQVx1ODg2OFx1NjgzQ1x1RkYwQ1x1NTIxOVx1NjZGNFx1NjVCMFx1NTIxN1x1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmFwcGx5VG9FbnRpcmVUYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvcml6b250YWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERHN0eWxpbmdcdTU0OENhbGlnbm1lbnRcdTVCNThcdTU3MjhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZyA9IHRhYmxlRGF0YS5zdHlsaW5nIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudCA9IHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudCB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdTUyMTdcdTc2ODRcdTVCRjlcdTlGNTBcdTY1QjlcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xDb3VudCA9IHRhYmxlRGF0YS5zdHJ1Y3R1cmU/LmNvbENvdW50IHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudFtpXSA9IGhvcml6b250YWxBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjZGNFx1NjVCMFx1ODg2OFx1NjgzQ1x1NUJGOVx1OUY1MFx1NjU3MFx1NjM2RTogJHt0YWJsZUlkfWAsIHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTQyNlx1NTIxOVx1RkYwQ1x1NTNFQVx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsUG9zaXRpb25zLmZvckVhY2gocG9zID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlcdTZCNjRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0eWxlSW5kZXggPSB0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzLmZpbmRJbmRleChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0eWxlOiBhbnkpID0+IHN0eWxlLnJvdyA9PT0gcG9zLnJvdyAmJiBzdHlsZS5jb2wgPT09IHBvcy5jb2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NjcwOVx1NjgzN1x1NUYwRlx1RkYwQ1x1NjZGNFx1NjVCMFx1NUI4M1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1N0eWxlSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3Jpem9udGFsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXNbZXhpc3RpbmdTdHlsZUluZGV4XS50ZXh0QWxpZ24gPSBob3Jpem9udGFsQWxpZ247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnRpY2FsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXNbZXhpc3RpbmdTdHlsZUluZGV4XS52ZXJ0aWNhbEFsaWduID0gdmVydGljYWxBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDI2XHU1MjE5XHVGRjBDXHU2REZCXHU1MkEwXHU2NUIwXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0eWxlOiBhbnkgPSB7IHJvdzogcG9zLnJvdywgY29sOiBwb3MuY29sIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3Jpem9udGFsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0eWxlLnRleHRBbGlnbiA9IGhvcml6b250YWxBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVydGljYWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGUudmVydGljYWxBbGlnbiA9IHZlcnRpY2FsQWxpZ247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlcy5wdXNoKG5ld1N0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjZGNFx1NjVCMFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RTogJHt0YWJsZUlkfWAsIHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTY2RjRcdTY1QjBcdTU0MEVcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZURhdGEoZXhpc3RpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RTogJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2MjEwXHU1MjlGXHU5MDFBXHU3N0U1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NUMwNiR7aG9yaXpvbnRhbEFsaWduIHx8ICcnfSR7aG9yaXpvbnRhbEFsaWduICYmIHZlcnRpY2FsQWxpZ24gPyAnXHU1NDhDJyA6ICcnfSR7dmVydGljYWxBbGlnbiB8fCAnJ31cdTVCRjlcdTlGNTBcdTVFOTRcdTc1MjhcdTUyMzAke3RoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPiAwID8gJ1x1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQycgOiAnXHU2NTc0XHU0RTJBXHU4ODY4XHU2ODNDJ31cdTVFNzZcdTRGRERcdTVCNThcdTUyMzBcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NTkzMVx1OEQyNTogJHtlcnIubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTRGRERcdTVCNThcdTY1NzBcdTYzNkVcdTY1RjZcdTg4NjhcdTY4M0NcdTRFMERcdTUxOERcdTVCNThcdTU3MjgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1QkY5XHU5RjUwXHU1RTk0XHU3NTI4XHU1QjhDXHU2MjEwJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1RTk0XHU3NTI4XHU1QkY5XHU5RjUwXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1RTk0XHU3NTI4XHU1QkY5XHU5RjUwXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1RkYwOFx1ODg0Q1x1NTIxN1x1N0QyMlx1NUYxNVx1RkYwOVxyXG4gICAgICogQHJldHVybnMgXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU0RjREXHU3RjZFXHU2NTcwXHU3RUM0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U2VsZWN0ZWRDZWxsUG9zaXRpb25zKCk6IEFycmF5PHtyb3c6IG51bWJlciwgY29sOiBudW1iZXJ9PiB7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zOiBBcnJheTx7cm93OiBudW1iZXIsIGNvbDogbnVtYmVyfT4gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUgfHwgdGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTkwNERcdTUzODZcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU2MjQwXHU1NzI4XHU3Njg0XHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGNlbGwuY2xvc2VzdCgndHInKTtcclxuICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg0Q1x1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IEFycmF5LmZyb20odGhpcy5hY3RpdmVUYWJsZSEucXVlcnlTZWxlY3RvckFsbCgndHInKSkuaW5kZXhPZihyb3cpO1xyXG4gICAgICAgICAgICBpZiAocm93SW5kZXggPT09IC0xKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTU3MjhcdTg4NENcdTRFMkRcdTc2ODRcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBBcnJheS5mcm9tKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKSkuaW5kZXhPZihjZWxsKTtcclxuICAgICAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU0RjREXHU3RjZFXHU2NTcwXHU3RUM0XHJcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHsgcm93OiByb3dJbmRleCwgY29sOiBjb2xJbmRleCB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDNVx1NUU5NFx1NzUyOFx1NUJGOVx1OUY1MFx1NjgzN1x1NUYwRlx1RkYwQ1x1NEUwRFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVxyXG4gICAgICogQHBhcmFtIGhvcml6b250YWxBbGlnbiBcdTZDMzRcdTVFNzNcdTVCRjlcdTlGNTBcdTY1QjlcdTVGMEZcclxuICAgICAqIEBwYXJhbSB2ZXJ0aWNhbEFsaWduIFx1NTc4Mlx1NzZGNFx1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5QWxpZ25tZW50U3R5bGVzT25seShob3Jpem9udGFsQWxpZ24/OiBzdHJpbmcsIHZlcnRpY2FsQWxpZ24/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTUyMTlcdTVFOTRcdTc1MjhcdTUyMzBcdTY1NzRcdTRFMkFcdTg4NjhcdTY4M0NcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxFbCA9IGNlbGwgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaG9yaXpvbnRhbEFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbEVsLnN0eWxlLnRleHRBbGlnbiA9IGhvcml6b250YWxBbGlnbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNhbEFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbEVsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSB2ZXJ0aWNhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1QzA2JHtob3Jpem9udGFsQWxpZ24gfHwgJyd9JHtob3Jpem9udGFsQWxpZ24gJiYgdmVydGljYWxBbGlnbiA/ICdcdTU0OEMnIDogJyd9JHt2ZXJ0aWNhbEFsaWduIHx8ICcnfVx1NUJGOVx1OUY1MFx1NUU5NFx1NzUyOFx1NTIzMFx1NjU3NFx1NEUyQVx1ODg2OFx1NjgzQ2ApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIzMFx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChob3Jpem9udGFsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnRleHRBbGlnbiA9IGhvcml6b250YWxBbGlnbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNhbEFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gdmVydGljYWxBbGlnbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NUMwNiR7aG9yaXpvbnRhbEFsaWduIHx8ICcnfSR7aG9yaXpvbnRhbEFsaWduICYmIHZlcnRpY2FsQWxpZ24gPyAnXHU1NDhDJyA6ICcnfSR7dmVydGljYWxBbGlnbiB8fCAnJ31cdTVCRjlcdTlGNTBcdTVFOTRcdTc1MjhcdTUyMzBcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1NDA4XHU1RTc2XHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgbWVyZ2VDZWxscygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1QzFEXHU4QkQ1XHU1NDA4XHU1RTc2XHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEY6ICR7aXNFZGl0TW9kZSA/ICdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEYnIDogJ1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRid9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTRGN0ZcdTc1MjggTWFya2Rvd25Tb3VyY2VFZGl0b3IgXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEY3Rlx1NzUyOCBNYXJrZG93blNvdXJjZUVkaXRvclxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMucGx1Z2luLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1RkYwQ1x1NTZFMFx1NEUzQVx1NkU5MFx1NzgwMVx1NURGMlx1N0VDRlx1NEZFRVx1NjUzOVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1ODFGM1x1NUMxMTJcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdThGREJcdTg4NENcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1OEZCOVx1NzU0Q1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm91bmRhcnkgPSB0aGlzLmdldFNlbGVjdGVkQ2VsbHNCb3VuZGFyeSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFib3VuZGFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1Nzg2RVx1NUI5QVx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1OEZCOVx1NzU0QycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBtaW5Sb3csIG1heFJvdywgbWluQ29sLCBtYXhDb2wgfSA9IGJvdW5kYXJ5O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVGNjJcdTYyMTBcdTVCOENcdTY1NzRcdTc2ODRcdTc3RTlcdTVGNjJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQ2VsbENvdW50ID0gKG1heFJvdyAtIG1pblJvdyArIDEpICogKG1heENvbCAtIG1pbkNvbCArIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkQ2VsbENvdW50ICE9PSB0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1M0VBXHU4MEZEXHU1NDA4XHU1RTc2XHU1RjYyXHU2MjEwXHU1QjhDXHU2NTc0XHU3N0U5XHU1RjYyXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDhcdTVERTZcdTRFMEFcdTg5RDJcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1haW5DZWxsID0gdGhpcy5hY3RpdmVUYWJsZT8ucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7bWluUm93fVwiXVtjb2wtaW5kZXg9XCIke21pbkNvbH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICghbWFpbkNlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTYyN0VcdTUyMzBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1OTc1RVx1N0E3QVx1NTE4NVx1NUJCOVx1OTcwMFx1ODk4MVx1Nzg2RVx1OEJBNFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9uRW1wdHlDZWxscyA9IHRoaXMuc2VsZWN0ZWRDZWxscy5maWx0ZXIoY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsID09PSBtYWluQ2VsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudCAhPT0gJycgJiYgY29udGVudCAhPT0gJzwnICYmIGNvbnRlbnQgIT09ICdeJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9uRW1wdHlDZWxscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50cyA9IG5vbkVtcHR5Q2VsbHMubWFwKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcIiR7Y2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcoXHU3QTdBKSd9XCJgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybU1lcmdlID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjkke2NlbGxDb250ZW50c31cdUZGMENcdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybU1lcmdlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTk3MDBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzBcdTU0OENcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd1NwYW5WYWx1ZSA9IG1heFJvdyAtIG1pblJvdyArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xTcGFuVmFsdWUgPSBtYXhDb2wgLSBtaW5Db2wgKyAxO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTU0MDhcdTVFNzZcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgIGlmIChyb3dTcGFuVmFsdWUgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbkNlbGwuc2V0QXR0cmlidXRlKCdyb3dzcGFuJywgcm93U3BhblZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sU3BhblZhbHVlID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW5DZWxsLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbFNwYW5WYWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU0RTNBXHU1MTc2XHU0RUQ2XHU1MzU1XHU1MTQzXHU2ODNDXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2YgdGhpcy5zZWxlY3RlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwgPT09IG1haW5DZWxsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU0RjREXHU3RjZFXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4ID09PSBtaW5Sb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDBDXHU0RTAwXHU4ODRDXHVGRjBDXHU4QkJFXHU3RjZFXHU2QzM0XHU1RTczXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlckNvdW50ID0gY29sSW5kZXggLSBtaW5Db2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnPCcucmVwZWF0KG1hcmtlckNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtY291bnQnLCBtYXJrZXJDb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEluZGV4ID09PSBtaW5Db2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDBDXHU0RTAwXHU1MjE3XHVGRjBDXHU4QkJFXHU3RjZFXHU1NzgyXHU3NkY0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlckNvdW50ID0gcm93SW5kZXggLSBtaW5Sb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnXicucmVwZWF0KG1hcmtlckNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlLWNvdW50JywgbWFya2VyQ291bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU2ODM5XHU2MzZFXHU2MEM1XHU1MUI1XHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dJbmRleCA+IG1pblJvdyAmJiBjb2xJbmRleCA+IG1pbkNvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1M0VGXHU0RUU1XHU5MDA5XHU2MkU5XHU1NDExXHU0RTBBXHU2MjE2XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHVGRjBDXHU4RkQ5XHU5MUNDXHU5MDA5XHU2MkU5XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXJDb3VudCA9IGNvbEluZGV4IC0gbWluQ29sO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICc8Jy5yZXBlYXQobWFya2VyQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlLWRpcmVjdGlvbicsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1jb3VudCcsIG1hcmtlckNvdW50LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OTY5MFx1ODVDRlx1ODhBQlx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5TWVyZ2VkQ2VsbFN0eWxlcyhtYWluQ2VsbCwgdGhpcy5zZWxlY3RlZENlbGxzLmZpbHRlcihjZWxsID0+IGNlbGwgIT09IG1haW5DZWxsKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NjIxMFx1NTI5Rlx1NTQwOFx1NUU3NiR7dGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aH1cdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU1MzU1XHU1MTQzXHU2ODNDXHU5MDA5XHU2MkU5XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG1lcmdlUmlnaHQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUMxRFx1OEJENVx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICBjb25zdCBpc0VkaXRNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGOiAke2lzRWRpdE1vZGUgPyAnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGJyA6ICdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEYnfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yIFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTRGN0ZcdTc1MjggTWFya2Rvd25Tb3VyY2VFZGl0b3JcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5tYXJrZG93blNvdXJjZUVkaXRvci5tZXJnZUNlbGxzKCdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTVGNTNcdTUyNERcdTkwMDlcdTYyRTlcdUZGMENcdTU2RTBcdTRFM0FcdTZFOTBcdTc4MDFcdTVERjJcdTdFQ0ZcdTRGRUVcdTY1MzlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1OTFBXHU0RTJBXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2MEM1XHU1MUI1XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTU3MjhcdTU0MENcdTRFMDBcdTg4NENcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRpY2VzID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiB0aGlzLnNlbGVjdGVkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kaWNlcy5hZGQocm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93SW5kaWNlcy5zaXplICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1OTcwMFx1ODk4MVx1OTAwOVx1NjJFOVx1NTQwQ1x1NEUwMFx1ODg0Q1x1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NTIxN1x1N0QyMlx1NUYxNVx1NUU3Nlx1NjM5Mlx1NUU4RlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzV2l0aEluZGljZXMgPSB0aGlzLnNlbGVjdGVkQ2VsbHMubWFwKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbEluZGV4OiBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuY29sSW5kZXggLSBiLmNvbEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdThGREVcdTdFRURcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxzV2l0aEluZGljZXNbaV0uY29sSW5kZXggIT09IGNlbGxzV2l0aEluZGljZXNbaS0xXS5jb2xJbmRleCArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OTcwMFx1ODk4MVx1OTAwOVx1NjJFOVx1OEZERVx1N0VFRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OEZEQlx1ODg0Q1x1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOFx1NjcwMFx1NURFNlx1NEZBN1x1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOVx1NTQ4Q1x1NTQwOFx1NUU3Nlx1NjU3MFx1OTFDRlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5DZWxsID0gY2VsbHNXaXRoSW5kaWNlc1swXS5jZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlQ291bnQgPSBjZWxsc1dpdGhJbmRpY2VzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5NzVFXHU3QTdBXHU1MTg1XHU1QkI5XHU5NzAwXHU4OTgxXHU3ODZFXHU4QkE0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbkVtcHR5Q2VsbHMgPSBjZWxsc1dpdGhJbmRpY2VzLnNsaWNlKDEpLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50ICE9PSAnJyAmJiBjb250ZW50ICE9PSAnPCcgJiYgY29udGVudCAhPT0gJ14nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub25FbXB0eUNlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50cyA9IG5vbkVtcHR5Q2VsbHMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXCIke2l0ZW0uY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcoXHU3QTdBKSd9XCJgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybU1lcmdlID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5JHtjZWxsQ29udGVudHN9XHVGRjBDXHU3ODZFXHU1QjlBXHU4OTgxXHU1NDA4XHU1RTc2XHU1NDE3XHVGRjFGYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybU1lcmdlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RTNBXHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjZWxsc1dpdGhJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1dpdGhJbmRpY2VzW2ldLmNlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OEZERVx1N0VFRFx1NzY4NCA8IFx1N0IyNlx1NTNGN1x1ODg2OFx1NzkzQVx1NTQwOFx1NUU3Nlx1NTkxQVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gJzwnLnJlcGVhdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtY291bnQnLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5TWVyZ2VkQ2VsbFN0eWxlcyhtYWluQ2VsbCwgY2VsbHNXaXRoSW5kaWNlcy5zbGljZSgxKS5tYXAoaXRlbSA9PiBpdGVtLmNlbGwpKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzYke21lcmdlQ291bnR9XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3NiR7bWVyZ2VDb3VudH1cdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUZgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1MzU1XHU0RTJBXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2MEM1XHU1MUI1XHVGRjA4XHU1MzlGXHU2NzA5XHU5MDNCXHU4RjkxXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5zZWxlY3RlZENlbGxzWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RTogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENlbGwgPSB0aGlzLmFjdGl2ZVRhYmxlPy5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHtyb3dJbmRleH1cIl1bY29sLWluZGV4PVwiJHtjb2xJbmRleCArIDF9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJpZ2h0Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTNGM1x1NEZBN1x1NkNBMVx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTNFRlx1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENvbnRlbnQgPSByaWdodENlbGwudGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSAmJiBcclxuICAgICAgICAgICAgICAgICAgICByaWdodENvbnRlbnQgJiYgcmlnaHRDb250ZW50ICE9PSAnPCcgJiYgcmlnaHRDb250ZW50ICE9PSAnXicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XCIke3JpZ2h0Q29udGVudH1cIlx1RkYwQ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTQwOFx1NUU3Nlx1NTQxN1x1RkYxRmBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTNGM1x1NEZBN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NEUzQVx1NkMzNFx1NUU3M1x1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgcmlnaHRDZWxsLnRleHRDb250ZW50ID0gJzwnO1xyXG4gICAgICAgICAgICAgICAgcmlnaHRDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgcmlnaHRDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlNZXJnZWRDZWxsU3R5bGVzKGNlbGwsIFtyaWdodENlbGxdKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2MjEwXHU1MjlGJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgbWVyZ2VEb3duKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVDMURcdThCRDVcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRVxyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgaXNFZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRjogJHtpc0VkaXRNb2RlID8gJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRicgOiAnXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGJ31gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEY3Rlx1NzUyOCBNYXJrZG93blNvdXJjZUVkaXRvciBcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy5wbHVnaW4ubWFya2Rvd25Tb3VyY2VFZGl0b3IubWVyZ2VDZWxscygnZG93bicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTVGNTNcdTUyNERcdTkwMDlcdTYyRTlcdUZGMENcdTU2RTBcdTRFM0FcdTZFOTBcdTc4MDFcdTVERjJcdTdFQ0ZcdTRGRUVcdTY1MzlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1OTFBXHU0RTJBXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2MEM1XHU1MUI1XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTU3MjhcdTU0MENcdTRFMDBcdTUyMTdcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRpY2VzID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiB0aGlzLnNlbGVjdGVkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kaWNlcy5hZGQoY29sSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kaWNlcy5zaXplICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1OTcwMFx1ODk4MVx1OTAwOVx1NjJFOVx1NTQwQ1x1NEUwMFx1NTIxN1x1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg0Q1x1N0QyMlx1NUYxNVx1NUU3Nlx1NjM5Mlx1NUU4RlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzV2l0aEluZGljZXMgPSB0aGlzLnNlbGVjdGVkQ2VsbHMubWFwKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEucm93SW5kZXggLSBiLnJvd0luZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdThGREVcdTdFRURcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxzV2l0aEluZGljZXNbaV0ucm93SW5kZXggIT09IGNlbGxzV2l0aEluZGljZXNbaS0xXS5yb3dJbmRleCArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OTcwMFx1ODk4MVx1OTAwOVx1NjJFOVx1OEZERVx1N0VFRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OEZEQlx1ODg0Q1x1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOFx1NjcwMFx1NEUwQVx1NjVCOVx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOVx1NTQ4Q1x1NTQwOFx1NUU3Nlx1NjU3MFx1OTFDRlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5DZWxsID0gY2VsbHNXaXRoSW5kaWNlc1swXS5jZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlQ291bnQgPSBjZWxsc1dpdGhJbmRpY2VzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5NzVFXHU3QTdBXHU1MTg1XHU1QkI5XHU5NzAwXHU4OTgxXHU3ODZFXHU4QkE0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbkVtcHR5Q2VsbHMgPSBjZWxsc1dpdGhJbmRpY2VzLnNsaWNlKDEpLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50ICE9PSAnJyAmJiBjb250ZW50ICE9PSAnPCcgJiYgY29udGVudCAhPT0gJ14nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub25FbXB0eUNlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50cyA9IG5vbkVtcHR5Q2VsbHMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXCIke2l0ZW0uY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcoXHU3QTdBKSd9XCJgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybU1lcmdlID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5JHtjZWxsQ29udGVudHN9XHVGRjBDXHU3ODZFXHU1QjlBXHU4OTgxXHU1NDA4XHU1RTc2XHU1NDE3XHVGRjFGYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybU1lcmdlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RTNBXHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjZWxsc1dpdGhJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1dpdGhJbmRpY2VzW2ldLmNlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OEZERVx1N0VFRFx1NzY4NCBeIFx1N0IyNlx1NTNGN1x1ODg2OFx1NzkzQVx1NTQwOFx1NUU3Nlx1NTkxQVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gJ14nLnJlcGVhdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlLWNvdW50JywgaS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseU1lcmdlZENlbGxTdHlsZXMobWFpbkNlbGwsIGNlbGxzV2l0aEluZGljZXMuc2xpY2UoMSkubWFwKGl0ZW0gPT4gaXRlbS5jZWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2JHttZXJnZUNvdW50fVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ2ApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzYke21lcmdlQ291bnR9XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU2MjEwXHU1MjlGYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTM1NVx1NEUyQVx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NjBDNVx1NTFCNVx1RkYwOFx1NTM5Rlx1NjcwOVx1OTAzQlx1OEY5MVx1RkYwOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuc2VsZWN0ZWRDZWxsc1swXTtcclxuICAgICAgICAgICAgICAgIGlmICghY2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg0Q1x1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkU6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUwQlx1NjVCOVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVsb3dDZWxsID0gdGhpcy5hY3RpdmVUYWJsZT8ucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7cm93SW5kZXggKyAxfVwiXVtjb2wtaW5kZXg9XCIke2NvbEluZGV4fVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFiZWxvd0NlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTRFMEJcdTY1QjlcdTZDQTFcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0NcdTUzRUZcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NEUwQlx1NjVCOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVsb3dDb250ZW50ID0gYmVsb3dDZWxsLnRleHRDb250ZW50Py50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgYmVsb3dDb250ZW50ICYmIGJlbG93Q29udGVudCAhPT0gJzwnICYmIGJlbG93Q29udGVudCAhPT0gJ14nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQlx1NTE4NVx1NUJCOVwiJHtiZWxvd0NvbnRlbnR9XCJcdUZGMENcdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTRFMEJcdTY1QjlcdTUzNTVcdTUxNDNcdTY4M0NcdTRFM0FcdTU3ODJcdTc2RjRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgIGJlbG93Q2VsbC50ZXh0Q29udGVudCA9ICdeJztcclxuICAgICAgICAgICAgICAgIGJlbG93Q2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgIGJlbG93Q2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ3VwJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseU1lcmdlZENlbGxTdHlsZXMoY2VsbCwgW2JlbG93Q2VsbF0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzcGxpdENlbGwoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTk3MDBcdTg5ODFcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdThGREJcdTg4NENcdTYyQzZcdTUyMDYnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1OEZEQlx1ODg0Q1x1NjJDNlx1NTIwNicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjAwXHU1OUNCXHU2MkM2XHU1MjA2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5zZWxlY3RlZENlbGxzWzBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTg4QUJcdTU0MDhcdTVFNzZcdUZGMDhcdTkwMUFcdThGQzcgY29sc3BhbiBcdTYyMTYgcm93c3BhbiBcdTVDNUVcdTYwMjdcdUZGMDlcclxuICAgICAgICAgICAgY29uc3QgY29sU3BhbiA9IGNlbGwuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd1NwYW4gPSBjZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1NDY4XHU1NkY0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gY2VsbC5jbG9zZXN0KCd0YWJsZScpO1xyXG4gICAgICAgICAgICBsZXQgaGFzTWVyZ2VNYXJrZXJzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGFibGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTNGM1x1NEZBN1x1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHRDZWxsID0gdGFibGUucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7cm93SW5kZXh9XCJdW2NvbC1pbmRleD1cIiR7Y29sSW5kZXggKyAxfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHJpZ2h0Q2VsbCAmJiByaWdodENlbGwudGV4dENvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodENvbnRlbnQgPSByaWdodENlbGwudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyaWdodENvbnRlbnQgPT09ICc8JyB8fCByaWdodENvbnRlbnQgPT09ICdeJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNZXJnZU1hcmtlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodENlbGwudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NURGMlx1NkUwNVx1OTY2NFx1NTNGM1x1NEZBN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU0RTBCXHU2NUI5XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWxvd0NlbGwgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHtyb3dJbmRleCArIDF9XCJdW2NvbC1pbmRleD1cIiR7Y29sSW5kZXh9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVsb3dDZWxsICYmIGJlbG93Q2VsbC50ZXh0Q29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlbG93Q29udGVudCA9IGJlbG93Q2VsbC50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlbG93Q29udGVudCA9PT0gJzwnIHx8IGJlbG93Q29udGVudCA9PT0gJ14nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01lcmdlTWFya2VycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlbG93Q2VsbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU2RTA1XHU5NjY0XHU0RTBCXHU2NUI5XHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTkwMTJcdTVGNTJcdTY4QzBcdTY3RTVcdTU0OENcdTZFMDVcdTk2NjRcdTUzRjNcdTRGQTdcdThGREVcdTdFRURcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBjb2xJbmRleCArIDE7IGkgPCBjb2xJbmRleCArIDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2VsbCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoYFtyb3ctaW5kZXg9XCIke3Jvd0luZGV4fVwiXVtjb2wtaW5kZXg9XCIke2l9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDZWxsICYmIG5leHRDZWxsLnRleHRDb250ZW50ICYmIG5leHRDZWxsLnRleHRDb250ZW50LnRyaW0oKSA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDZWxsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01lcmdlTWFya2VycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVERjJcdTZFMDVcdTk2NjRcdTRGNERcdTdGNkUgKCR7cm93SW5kZXh9LCAke2l9KSBcdTc2ODRcdTZDMzRcdTVFNzNcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OTAxMlx1NUY1Mlx1NjhDMFx1NjdFNVx1NTQ4Q1x1NkUwNVx1OTY2NFx1NEUwQlx1NjVCOVx1OEZERVx1N0VFRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJvd0luZGV4ICsgMTsgaSA8IHJvd0luZGV4ICsgMTA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDZWxsID0gdGFibGUucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7aX1cIl1bY29sLWluZGV4PVwiJHtjb2xJbmRleH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENlbGwgJiYgbmV4dENlbGwudGV4dENvbnRlbnQgJiYgbmV4dENlbGwudGV4dENvbnRlbnQudHJpbSgpID09PSAnXicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENlbGwudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWVyZ2VNYXJrZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NkUwNVx1OTY2NFx1NEY0RFx1N0Y2RSAoJHtpfSwgJHtjb2xJbmRleH0pIFx1NzY4NFx1NTc4Mlx1NzZGNFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb2xTcGFuICYmICFyb3dTcGFuICYmICFoYXNNZXJnZU1hcmtlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTZDQTFcdTY3MDlcdTU0MDhcdTVFNzZcdTVDNUVcdTYwMjdcdUZGMENcdTY1RTBcdTk3MDBcdTYyQzZcdTUyMDYnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NkNBMVx1NjcwOVx1NTQwOFx1NUU3Nlx1NUM1RVx1NjAyN1x1RkYwQ1x1NjVFMFx1OTcwMFx1NjJDNlx1NTIwNicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU3MjggSFRNTCBcdTk4ODRcdTg5QzhcdTRFMkRcdUZGMENcdTYyMTFcdTRFRUNcdTUzRUFcdTgwRkRcdTkwMUFcdThGQzdcdTRGRUVcdTY1MzkgRE9NIFx1Njc2NVx1NkEyMVx1NjJERlx1NjJDNlx1NTIwNlxyXG4gICAgICAgICAgICAvLyBcdTVCOUVcdTk2NDVcdTRFMEFcdTk3MDBcdTg5ODFcdTRGRUVcdTY1MzkgTWFya2Rvd24gXHU2RTkwXHU3ODAxXHU2MjREXHU4MEZEXHU3NzFGXHU2QjYzXHU2MkM2XHU1MjA2XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTU0MDhcdTVFNzZcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgaWYgKGNvbFNwYW4pIHtcclxuICAgICAgICAgICAgICAgIGNlbGwucmVtb3ZlQXR0cmlidXRlKCdjb2xzcGFuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJvd1NwYW4pIHtcclxuICAgICAgICAgICAgICAgIGNlbGwucmVtb3ZlQXR0cmlidXRlKCdyb3dzcGFuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NEU0Qlx1NTI0RFx1OTY5MFx1ODVDRlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBpZiAodGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhpZGRlbkNlbGxzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGRbc3R5bGUqPVwiZGlzcGxheTogbm9uZVwiXSwgdGhbc3R5bGUqPVwiZGlzcGxheTogbm9uZVwiXScpO1xyXG4gICAgICAgICAgICAgICAgaGlkZGVuQ2VsbHMuZm9yRWFjaChoaWRkZW5DZWxsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAoaGlkZGVuQ2VsbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NURGMlx1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1MzU1XHU1MTQzXHU2ODNDXHU2MkM2XHU1MjA2XHU1QjhDXHU2MjEwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTkwMDlcdTYyRTlcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU3NTFGXHU2MjEwXHU4ODY4XHU2ODNDSURcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhYmxlSWQoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICBjb25zdCBpc0VkaXRNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTRGN0ZcdTc1MjhcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDZcdThCRTJcdTk1RUVcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTg5ODFcdTUyMUJcdTVFRkFJRFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29uZmlybURpYWxvZygnXHU2NjJGXHU1NDI2XHU0RTNBXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHU1MjFCXHU1RUZBSURcdUZGMUZcdTUyMUJcdTVFRkFcdTU0MEVcdTVDMDZcdTU3MjhcdTg4NjhcdTY4M0NcdTUyNERcdTZERkJcdTUyQTBIVE1MXHU2Q0U4XHU5MUNBXHUzMDAyJykudGhlbihjb25maXJtZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1N0YxNlx1OEY5MVx1NTY2OFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGVJbmZvID0gdGhpcy5wbHVnaW4ubWFya2Rvd25Tb3VyY2VFZGl0b3IubG9jYXRlVGFibGVJbk1hcmtkb3duKGVkaXRvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU2NjJGXHU1NDI2XHU1REYyXHU2NzA5SURcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVJbmZvLnRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU4ODY4XHU2ODNDXHU1REYyXHU2NzA5SUQ6ICR7dGFibGVJbmZvLnRhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc1MUZcdTYyMTBcdTRFMDBcdTRFMkFcdTY1QjBJRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZCA9IHRoaXMuZ2VuZXJhdGVVbmlxdWVUYWJsZUlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHU4ODRDXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVTdGFydExpbmUgPSB0YWJsZUluZm8uc3RhcnRMaW5lO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTg4NjhcdTY4M0NcdTUyNERcdTYzRDJcdTUxNjVcdTdBN0FcdTg4NENcdTU0OENcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UG9zID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGA8IS0tIHRhYmxlLWlkOiAke25ld0lkfSAtLT5cXG5gLCB7IGxpbmU6IHRhYmxlU3RhcnRMaW5lLCBjaDogMCB9KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnJlbnRQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRDogJHtuZXdJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEOicsIG5ld0lkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHVGRjBDXHU4QkY3XHU3ODZFXHU0RkREXHU1MTQ5XHU2ODA3XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDZcdThCRTJcdTk1RUVcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTg5ODFcdTUyMUJcdTVFRkFJRFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29uZmlybURpYWxvZygnXHU2NjJGXHU1NDI2XHU0RTNBXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHU1MjFCXHU1RUZBSURcdUZGMUYnKS50aGVuKGNvbmZpcm1lZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhUYWJsZUlkTWFuYWdlclx1NzY4NGNvbmZpcm1BbmRDcmVhdGVUYWJsZUlkXHU2NUI5XHU2Q0Q1XHU1MjFCXHU1RUZBSURcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gdGhpcy5hY3RpdmVUYWJsZSA/IHRoaXMucGx1Z2luLnRhYmxlSWRNYW5hZ2VyLmNvbmZpcm1BbmRDcmVhdGVUYWJsZUlkKHRoaXMuYWN0aXZlVGFibGUpIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU5ODg0XHU4OUM4XHU0RUU1XHU2NjNFXHU3OTNBXHU2NUIwXHU2REZCXHU1MkEwXHU3Njg0SURcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVZpZXcucHJldmlld01vZGUucmVyZW5kZXIodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRDonLCB0YWJsZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NJRFx1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NJRFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1NjI0Qlx1NTJBOFx1NkRGQlx1NTJBMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU3NTFGXHU2MjEwXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTc1MUZcdTYyMTBcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDBcdTc2ODRcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHJldHVybnMgXHU2ODNDXHU1RjBGXHU0RTNBIHRibC1ZWVlZTU1ERC14eHh4eHh4eCBcdTc2ODRcdTU1MkZcdTRFMDBJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlVW5pcXVlVGFibGVJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjVFNVx1NjcxRlx1NUU3Nlx1NjgzQ1x1NUYwRlx1NTMxNlx1NEUzQVlZWVlNTUREXHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBgJHt5ZWFyfSR7bW9udGh9JHtkYXl9YDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc1MUZcdTYyMTA4XHU0RjREXHU5NjhGXHU2NzNBXHU1QjU3XHU3QjI2XHU0RTMyXHVGRjA4XHU1QjU3XHU2QkNEXHU1NDhDXHU2NTcwXHU1QjU3XHVGRjA5XHJcbiAgICAgICAgY29uc3QgcmFuZG9tQ2hhcnMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcclxuICAgICAgICBsZXQgcmFuZG9tU3RyID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuICAgICAgICAgICAgcmFuZG9tU3RyICs9IHJhbmRvbUNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByYW5kb21DaGFycy5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3RUM0XHU1NDA4SURcclxuICAgICAgICByZXR1cm4gYHRibC0ke2RhdGVTdHJ9LSR7cmFuZG9tU3RyfWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU2NjJGXHU1NDI2XHU1REYyXHU2NzA5SURcclxuICAgICAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcbiAgICAgKiBAcmV0dXJucyBcdTVERjJcdTY3MDlJRFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja0V4aXN0aW5nVGFibGVJZChlZGl0b3I6IEVkaXRvcik6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlx1NzY4NFx1ODg0Q1xyXG4gICAgICAgIGxldCB0YWJsZVN0YXJ0TGluZSA9IC0xO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGxpbmVzW2ldLnRyaW0oKS5zdGFydHNXaXRoKCd8JykgJiYgbGluZXNbaV0uaW5jbHVkZXMoJ3wnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU4ODY4XHU2ODNDXHU3Njg0XHU3QjJDXHU0RTAwXHU4ODRDXHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPCBsaW5lcy5sZW5ndGggJiYgbGluZXNbaSArIDFdLnRyaW0oKS5tYXRjaCgvXlxcfFstOlxcc3xdKlxcfCQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhcnRMaW5lID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGFibGVTdGFydExpbmUgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1MjREXHU2NjJGXHU1NDI2XHU1REYyXHU2NzA5SURcdTZDRThcdTkxQ0FcclxuICAgICAgICBsZXQgaWRDb21tZW50TGluZSA9IHRhYmxlU3RhcnRMaW5lIC0gMTtcclxuICAgICAgICB3aGlsZSAoaWRDb21tZW50TGluZSA+PSAwICYmIChsaW5lc1tpZENvbW1lbnRMaW5lXS50cmltKCkgPT09ICcnIHx8IGxpbmVzW2lkQ29tbWVudExpbmVdLnRyaW0oKS5zdGFydHNXaXRoKCc8IS0tJykpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpZENvbW1lbnRMaW5lXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCd0YWJsZS1pZDonKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2SURcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvdGFibGUtaWQ6XFxzKihbXlxccz5dKykvKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZENvbW1lbnRMaW5lLS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjNEMFx1NTNENlx1NUU3Nlx1NUI1OFx1NTBBOFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICogQHBhcmFtIHRhYmxlSWQgXHU4ODY4XHU2ODNDSURcclxuICAgICAqIEBwYXJhbSB0YWJsZUVsZW1lbnQgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gZmlsZVBhdGggXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHJcbiAgICAgKi9cclxuICAgIGV4dHJhY3RBbmRTdG9yZVRhYmxlSW5mbyh0YWJsZUlkOiBzdHJpbmcsIHRhYmxlRWxlbWVudDogSFRNTEVsZW1lbnQsIGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICBjb25zdCByb3dDb3VudCA9IHJvd3MubGVuZ3RoO1xyXG4gICAgICAgICAgICBsZXQgY29sQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBsZXQgaGFzSGVhZGVycyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU1MjE3XHU2NTcwXHU1NDhDXHU4ODY4XHU1OTM0XHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgIGlmIChyb3dDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1N0IyQ1x1NEUwMFx1ODg0Q1x1NjYyRlx1NTQyNlx1NjcwOXRoXHU1MTQzXHU3RDIwXHVGRjA4XHU4ODY4XHU1OTM0XHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvdyA9IHJvd3NbMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDZWxscyA9IGZpcnN0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XHJcbiAgICAgICAgICAgICAgICBoYXNIZWFkZXJzID0gaGVhZGVyQ2VsbHMubGVuZ3RoID4gMDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU4ODRDXHU3Njg0XHU2NzAwXHU1OTI3XHU1MjE3XHU2NTcwXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBBcnJheS5mcm9tKHJvd3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvdW50ID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBjb2xDb3VudCA9IE1hdGgubWF4KGNvbENvdW50LCBjZWxsQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2VJbmZvID0gdGhpcy5leHRyYWN0TWVyZ2VJbmZvKHRhYmxlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTRGRTFcdTYwNkY6YCwgbWVyZ2VJbmZvKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1N0I4MFx1NTMxNlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGFibGVJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZVBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIHN0cnVjdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50OiByb3dDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xDb3VudDogY29sQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogaGFzSGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN0eWxpbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzOiBBcnJheShyb3dDb3VudCkuZmlsbCgnYXV0bycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoczogQXJyYXkoY29sQ291bnQpLmZpbGwoJ2F1dG8nKSxcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFycmF5KGNvbENvdW50KS5maWxsKCdsZWZ0JylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkY6IElEPSR7dGFibGVJZH0sIFx1ODg0Q1x1NjU3MD0ke3Jvd0NvdW50fSwgXHU1MjE3XHU2NTcwPSR7Y29sQ291bnR9LCBcdTg4NjhcdTU5MzQ9JHtoYXNIZWFkZXJzfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVUYWJsZURhdGEodGFibGVJbmZvKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTc2ODRcdTU0MDhcdTVFNzZcdTRGRTFcdTYwNkZcclxuICAgICAqIEBwYXJhbSB0YWJsZUVsZW1lbnQgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcmV0dXJucyBcdTU0MDhcdTVFNzZcdTRGRTFcdTYwNkZcdTVCRjlcdThDNjFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBleHRyYWN0TWVyZ2VJbmZvKHRhYmxlRWxlbWVudDogSFRNTEVsZW1lbnQpOiBhbnkge1xyXG4gICAgICAgIGludGVyZmFjZSBNZXJnZUNlbGwge1xyXG4gICAgICAgICAgICByb3c6IG51bWJlcjtcclxuICAgICAgICAgICAgY29sOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGNvdW50OiBudW1iZXI7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbWVyZ2VJbmZvOiB7XHJcbiAgICAgICAgICAgIGhvcml6b250YWw6IE1lcmdlQ2VsbFtdO1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbDogTWVyZ2VDZWxsW107XHJcbiAgICAgICAgfSA9IHtcclxuICAgICAgICAgICAgaG9yaXpvbnRhbDogW10sXHJcbiAgICAgICAgICAgIHZlcnRpY2FsOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCByb3dzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd0luZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY2VsbHMubGVuZ3RoOyBjb2xJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKDwrKSQvKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0TWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGxlZnRNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VJbmZvLmhvcml6b250YWwucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdzogcm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbDogY29sSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcXispJC8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IHVwTWF0Y2hbMV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlSW5mby52ZXJ0aWNhbC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sOiBjb2xJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IGNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNWNvbHNwYW5cdTU0OENyb3dzcGFuXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xzcGFuID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSB8fCAnMScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93c3BhbiA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJykgfHwgJzEnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHNwYW4gPiAxIHx8IHJvd3NwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTNEMVx1NzNCMFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQzogXHU0RjREXHU3RjZFKCR7cm93SW5kZXh9LCR7Y29sSW5kZXh9KSwgY29sc3Bhbj0ke2NvbHNwYW59LCByb3dzcGFuPSR7cm93c3Bhbn1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbWVyZ2VJbmZvO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjYzRVx1NzkzQVx1NkRGQlx1NTJBMFx1ODg0Q1x1ODNEQ1x1NTM1NVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dSb3dBZGRNZW51KCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjVFMFx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1x1RkYwQ1x1NjVFMFx1NkNENVx1NkRGQlx1NTJBMFx1ODg0QycpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY2M0VcdTc5M0FcdTZERkJcdTUyQTBcdTg4NENcdTgzRENcdTUzNTUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1ODNEQ1x1NTM1NVxyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1ODNEQ1x1NTM1NVx1OTg3OVxyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKCdcdTU3MjhcdTRFMEFcdTY1QjlcdTZERkJcdTUyQTBcdTg4NEMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdhcnJvdy11cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5hZGRSb3coJ2Fib3ZlJykpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKCdcdTU3MjhcdTRFMEJcdTY1QjlcdTZERkJcdTUyQTBcdTg4NEMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdhcnJvdy1kb3duJylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmFkZFJvdygnYmVsb3cnKSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1ODNEQ1x1NTM1NVxyXG4gICAgICAgICAgICBjb25zdCB0b29sYmFyRWwgPSB0aGlzLnRvb2xiYXI7XHJcbiAgICAgICAgICAgIGlmICh0b29sYmFyRWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0b29sYmFyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogcmVjdC5sZWZ0LCB5OiByZWN0LmJvdHRvbSB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCBhcyBNb3VzZUV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjYzRVx1NzkzQVx1NkRGQlx1NTJBMFx1ODg0Q1x1ODNEQ1x1NTM1NVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NjYzRVx1NzkzQVx1NkRGQlx1NTJBMFx1ODg0Q1x1ODNEQ1x1NTM1NVx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTZERkJcdTUyQTBcdTg4NENcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBcdTRGNERcdTdGNkVcdUZGMENhYm92ZSBcdTYyMTYgYmVsb3dcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRSb3cocG9zaXRpb246ICdhYm92ZScgfCAnYmVsb3cnKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUUwXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHVGRjBDXHU2NUUwXHU2Q0Q1XHU2REZCXHU1MkEwXHU4ODRDJyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUYwMFx1NTlDQlx1NkRGQlx1NTJBMFx1ODg0QzonLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTZcdTdCMkNcdTRFMDBcdTg4NENcclxuICAgICAgICAgICAgbGV0IHRhcmdldFJvdzogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2MjQwXHU1NzI4XHU4ODRDXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRSb3cgPSB0aGlzLnNlbGVjdGVkQ2VsbHNbMF0uY2xvc2VzdCgndHInKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1ODg2OFx1NjgzQ1x1NzY4NFx1N0IyQ1x1NEUwMFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Um93ID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yKCd0cicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXRhcmdldFJvdykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2NUUwXHU2Q0Q1XHU2MjdFXHU1MjMwXHU3NkVFXHU2ODA3XHU4ODRDJyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTYyN0VcdTUyMzBcdTc2RUVcdTY4MDdcdTg4NEMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NTcwXHU5MUNGXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxDb3VudCA9IHRhcmdldFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgIG5ld1Jvdy5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2M0QyXHU1MTY1XHU2NUIwXHU4ODRDXHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2Fib3ZlJykge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Um93LnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShuZXdSb3csIHRhcmdldFJvdyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRSb3cucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKG5ld1JvdywgdGFyZ2V0Um93Lm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1NzI4JHtwb3NpdGlvbiA9PT0gJ2Fib3ZlJyA/ICdcdTRFMEFcdTY1QjknIDogJ1x1NEUwQlx1NjVCOSd9XHU2REZCXHU1MkEwXHU4ODRDYCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTZERkJcdTUyQTBcdTg4NENcdTVCOENcdTYyMTA6JywgcG9zaXRpb24pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NkRGQlx1NTJBMFx1ODg0Q1x1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NkRGQlx1NTJBMFx1ODg0Q1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2RjRcdTY1QjBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVSb3dJbmRpY2VzKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBjb2xJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcsIHJvd0luZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcsIGNvbEluZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEZcdTgzRENcdTUzNTVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaG93U3R5bGVNZW51KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogYW55KSA9PiBcclxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGJylcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdicnVzaCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2ODM3XHU1RjBGXHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2ODM3XHU1RjBGXHU4QkJFXHU3RjZFXHU1MjlGXHU4MEZEXHU2QjYzXHU1NzI4XHU1RjAwXHU1M0QxXHU0RTJEJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtOiBhbnkpID0+IFxyXG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdThCQkVcdTdGNkVcdTY3NjFcdTdFQjlcdTY4MzdcdTVGMEYnKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2xpbmVzJylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuYXBwbHlTdHJpcGVkU3R5bGUoKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogYW55KSA9PiBcclxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnXHU4QkJFXHU3RjZFXHU4RkI5XHU2ODQ2XHU2ODM3XHU1RjBGJylcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdib3gnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5hcHBseUJvcmRlcmVkU3R5bGUoKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1OUYyMFx1NjgwN1x1NEY0RFx1N0Y2RVx1NjYzRVx1NzkzQVx1ODNEQ1x1NTM1NVxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMudG9vbGJhci5xdWVyeVNlbGVjdG9yKCcudGFibGUtc3R5bGUnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCByZWN0ID0gYnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiByZWN0LmxlZnQsIHk6IHJlY3QuYm90dG9tIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1Njc2MVx1N0VCOVx1NjgzN1x1NUYwRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5U3RyaXBlZFN0eWxlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIHJvd3MuZm9yRWFjaCgocm93LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwICYmIGluZGV4ICUgMiA9PT0gMSkgeyAvLyBcdThERjNcdThGQzdcdTg4NjhcdTU5MzRcdTg4NENcdUZGMENcdTUzRUFcdThCQkVcdTdGNkVcdTU5NDdcdTY1NzBcdTg4NENcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIChjZWxsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1RTk0XHU3NTI4XHU2NzYxXHU3RUI5XHU2ODM3XHU1RjBGJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU4RkI5XHU2ODQ2XHU2ODM3XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlCb3JkZXJlZFN0eWxlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnN0eWxlLmJvcmRlckNvbGxhcHNlID0gJ2NvbGxhcHNlJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgKGNlbGwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcclxuICAgICAgICAgICAgKGNlbGwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnBhZGRpbmcgPSAnNHB4IDhweCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1RTk0XHU3NTI4XHU4RkI5XHU2ODQ2XHU2ODM3XHU1RjBGJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4QkJFXHU3RjZFXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBzZXRBY3RpdmVUYWJsZSh0YWJsZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU4QkJFXHU3RjZFXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQjBcdTVGNTVcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1ODg2OFx1NjgzQ0RPTVx1N0VEM1x1Njc4NDonLCB0YWJsZS5vdXRlckhUTUwuc3Vic3RyaW5nKDAsIDIwMCkgKyAnLi4uJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlJRFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gdGhpcy5wbHVnaW4udGFibGVJZE1hbmFnZXIuZ2V0VGFibGVJZGVudGlmaWVyKHRhYmxlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ0lEXHU2OEMwXHU2N0U1XHU3RUQzXHU2NzlDOiAke3RhYmxlSWQgfHwgJ1x1NjcyQVx1NjI3RVx1NTIzMCd9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTc2ODRcdTUyNERcdTdGNkVcdTgyODJcdTcwQjlcclxuICAgICAgICAgICAgbGV0IHByZXZOb2RlID0gdGFibGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICBsZXQgbm9kZUNvdW50ID0gMDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1ODg2OFx1NjgzQ1x1NTI0RFx1N0Y2RVx1ODI4Mlx1NzBCOVx1NjhDMFx1NjdFNTonKTtcclxuICAgICAgICAgICAgd2hpbGUgKHByZXZOb2RlICYmIG5vZGVDb3VudCA8IDUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZVR5cGUgPSBwcmV2Tm9kZS5ub2RlVHlwZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVUeXBlU3RyID0gbm9kZVR5cGUgPT09IE5vZGUuQ09NTUVOVF9OT0RFID8gJ0NPTU1FTlQnIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgPyAnVEVYVCcgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSA/ICdFTEVNRU5UJyA6ICdPVEhFUic7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICBcdTUyNERcdTdGNkVcdTgyODJcdTcwQjkjJHtub2RlQ291bnR9OiBcdTdDN0JcdTU3OEI9JHtub2RlVHlwZVN0cn0sIFx1NTE4NVx1NUJCOT1cIiR7cHJldk5vZGUudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJ31cImApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gcHJldk5vZGUudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICBcdTUyNERcdTdGNkVcdTgyODJcdTcwQjkjJHtub2RlQ291bnR9OiBcdTdDN0JcdTU3OEI9JHtub2RlVHlwZVN0cn0sIFx1NTE4NVx1NUJCOT1cIiR7dGV4dC5zdWJzdHJpbmcoMCwgMjApfSR7dGV4dC5sZW5ndGggPiAyMCA/ICcuLi4nIDogJyd9XCJgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgXHU1MjREXHU3RjZFXHU4MjgyXHU3MEI5IyR7bm9kZUNvdW50fTogXHU3QzdCXHU1NzhCPSR7bm9kZVR5cGVTdHJ9LCBcdTY4MDdcdTdCN0U9PCR7KHByZXZOb2RlIGFzIEVsZW1lbnQpLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmV2Tm9kZSA9IHByZXZOb2RlLnByZXZpb3VzU2libGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUgPSB0YWJsZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1x1OUFEOFx1NEVBRVxyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZW1vdmVBbGxUYWJsZUhpZ2hsaWdodHMoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OUFEOFx1NEVBRVx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5oaWdobGlnaHRTZWxlY3RlZFRhYmxlKHRhYmxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1ODg2OFx1NjgzQ1x1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICB0aGlzLnNldHVwQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1x1OEJCRVx1N0Y2RVx1NUI4Q1x1NjIxMCcpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEJCRVx1N0Y2RVx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqL1xyXG4gICAgc2V0QWN0aXZlRWRpdE1vZGVUYWJsZSh0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nIH0pOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTRFNEJcdTUyNERcdTc2ODRcdTkwMDlcdTYyRTlcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1ODg2OFx1NjgzQ1x1NzY4NFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQgPSAnZmFsc2UnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5zdHlsZS5vdXRsaW5lID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnN0eWxlLm91dGxpbmVPZmZzZXQgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTYyMTFcdTRFRUNcdTZDQTFcdTY3MDlcdTVCOUVcdTk2NDVcdTc2ODRcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgLy8gXHU0RjQ2XHU1M0VGXHU0RUU1XHU4QkIwXHU1RjU1XHU4ODY4XHU2ODNDXHU3Njg0XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZGVUYWJsZUluZm8gPSB0YWJsZUluZm87XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJCMFx1NUY1NVx1NjVFNVx1NUZEN1x1NEVFNVx1NEZCRlx1OEMwM1x1OEJENVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU5MDA5XHU2MkU5XHU0RTg2XHU4ODY4XHU2ODNDOicsIHRhYmxlSW5mbyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcclxuICAgICAqL1xyXG4gICAgaXNJbkVkaXRNb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZVZpZXcgPyBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZScgOiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQkVcdTdGNkVcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDlcdTYyRTlcdTUyOUZcdTgwRkRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXR1cENlbGxTZWxlY3Rpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NUM1RVx1NjAyN1x1NEVFNVx1NjgwN1x1OEJDNlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsRWwgPSBjZWxsIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgICAgIGNlbGxFbC5vbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB0aGlzLmhhbmRsZUNlbGxDbGljayhjZWxsRWwsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTUzNTVcdTUxNDNcdTY4M0NcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuICAgICAqIEBwYXJhbSBjZWxsIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICogQHBhcmFtIGV2ZW50IFx1NEU4Qlx1NEVGNlx1NUJGOVx1OEM2MVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUNlbGxDbGljayhjZWxsOiBIVE1MRWxlbWVudCwgZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcdUZGMENcdTc4NkVcdTRGRERcdTRFMERcdTRGMUFcdTg5RTZcdTUzRDFcdTg4NjhcdTY4M0NcdTc2ODRcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTYzMDlcdTRGNEZcdTRFODZDdHJsXHU5NTJFXHVGRjA4XHU1OTFBXHU5MDA5XHVGRjA5XHJcbiAgICAgICAgaWYgKCFldmVudC5jdHJsS2V5ICYmICFldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTNENlx1NkQ4OFx1NEU0Qlx1NTI0RFx1NzY4NFx1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMDdcdTYzNjJcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDlcdTYyRTlcdTcyQjZcdTYwMDFcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRDZWxscy5pbmRleE9mKGNlbGwpO1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENlbGxzLnB1c2goY2VsbCk7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQtY2VsbCcpO1xyXG4gICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS10ZXh0LXNlbGVjdGlvbiknO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU3QjgwXHU3N0VEXHU2M0QwXHU3OTNBXHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA+IDEgPyAnXHU1OTFBXHU5MDA5XHU2QTIxXHU1RjBGJyA6ICdcdTVERjJcdTkwMDlcdTYyRTlcdTUzNTVcdTUxNDNcdTY4M0MnO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGAke3Bvc2l0aW9ufSAoJHt0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RofSlgLCAxMDAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTUzRDZcdTZEODhcdTkwMDlcdTYyRTlcdTYzRDBcdTc5M0FcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTkwMDlcdTYyRTkgJHt0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RofSBcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NgLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQjBcdTVGNTVcdTkwMDlcdTYyRTlcdTcyQjZcdTYwMDFcdTRFRTVcdTRGQkZcdThDMDNcdThCRDVcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU5MDA5XHU2MkU5XHU1MzU1XHU1MTQzXHU2ODNDOicsIHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NkUwNVx1OTY2NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1NjJFOVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNsZWFyQ2VsbFNlbGVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZENlbGxzID0gW107XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcclxuICAgICAqIEByZXR1cm5zIFx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1Nzg2RVx1OEJBNFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dDb25maXJtRGlhbG9nKG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTRFMERcdTRGMUFcdTgxRUFcdTUyQThcdTZEODhcdTU5MzFcdTc2ODRcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShtZXNzYWdlLCAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxyXG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTNENlx1NkQ4OCc7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU3ODZFXHU4QkE0XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTc4NkVcdTVCOUEnO1xyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTBweCc7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1MjMwXHU1QkI5XHU1NjY4XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY29uZmlybUJ1dHRvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcdTUyMzBcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgbm90aWNlLm5vdGljZUVsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2ODM3XHU1RjBGXHJcbiAgICAgKiBAcGFyYW0gbWFpbkNlbGwgXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA4XHU0RkREXHU3NTU5XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA5XHJcbiAgICAgKiBAcGFyYW0gbWVyZ2VkQ2VsbHMgXHU4OEFCXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA4XHU1QzA2XHU4OEFCXHU5NjkwXHU4NUNGXHVGRjA5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlNZXJnZWRDZWxsU3R5bGVzKG1haW5DZWxsOiBIVE1MRWxlbWVudCwgbWVyZ2VkQ2VsbHM6IEhUTUxFbGVtZW50W10pOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTRFM0FcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcclxuICAgICAgICBtYWluQ2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwtbWFpbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OEJCRVx1N0Y2RVx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFx1RkYwQ1x1NTIxOVx1NUU5NFx1NzUyOFx1NUM0NVx1NEUyRFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMpIHtcclxuICAgICAgICAgICAgbWFpbkNlbGwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIG1haW5DZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU4OEFCXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIG1lcmdlZENlbGxzKSB7XHJcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2ODA3XHU4QkIwXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHU0RTNBXHU1REYyXHU1NDA4XHU1RTc2XHJcbiAgICAgICAgbWFpbkNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlZC1tYWluJywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NkUwNVx1OTY2NFx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVxyXG4gICAgICovXHJcbiAgICBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDlcdTYyRTlcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQgPSAnZmFsc2UnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5zdHlsZS5vdXRsaW5lID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnN0eWxlLm91dGxpbmVPZmZzZXQgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kZVRhYmxlSW5mbyA9IG51bGw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU2RTA1XHU5NjY0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5Jyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2RTA1XHU5NjY0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdThGQjlcdTc1NENcclxuICAgICAqIEByZXR1cm5zIFx1OEZCOVx1NzU0Q1x1NEZFMVx1NjA2RiB7bWluUm93LCBtYXhSb3csIG1pbkNvbCwgbWF4Q29sfVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFNlbGVjdGVkQ2VsbHNCb3VuZGFyeSgpOiB7IG1pblJvdzogbnVtYmVyLCBtYXhSb3c6IG51bWJlciwgbWluQ29sOiBudW1iZXIsIG1heENvbDogbnVtYmVyIH0gfCBudWxsIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRDZWxscyB8fCB0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWluUm93ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgbGV0IG1heFJvdyA9IDA7XHJcbiAgICAgICAgbGV0IG1pbkNvbCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgIGxldCBtYXhDb2wgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiB0aGlzLnNlbGVjdGVkQ2VsbHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1pblJvdyA9IE1hdGgubWluKG1pblJvdywgcm93SW5kZXgpO1xyXG4gICAgICAgICAgICBtYXhSb3cgPSBNYXRoLm1heChtYXhSb3csIHJvd0luZGV4KTtcclxuICAgICAgICAgICAgbWluQ29sID0gTWF0aC5taW4obWluQ29sLCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIG1heENvbCA9IE1hdGgubWF4KG1heENvbCwgY29sSW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBtaW5Sb3csIG1heFJvdywgbWluQ29sLCBtYXhDb2wgfTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE5vdGljZSwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIE1hcmtkb3duXHU2RTkwXHU3ODAxXHU3RjE2XHU4RjkxXHU1NjY4IC0gXHU4RDFGXHU4RDIzXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3NkY0XHU2M0E1XHU0RkVFXHU2NTM5TWFya2Rvd25cdTZFOTBcdTc4MDFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNYXJrZG93blNvdXJjZUVkaXRvciB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIFxyXG4gICAgLy8gXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU4M0I3XHU1M0Q2YXBwXHU1QkY5XHU4QzYxXHJcbiAgICBwcml2YXRlIGdldEFwcCgpOiBBcHAge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4pLmFwcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01hcmtkb3duU291cmNlRWRpdG9yIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTc2ODRcdTdGMTZcdThGOTFcdTU2NjhcclxuICAgICAqIEByZXR1cm5zIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4Qlx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgZ2V0QWN0aXZlRWRpdG9yKCk6IEVkaXRvciB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcgJiYgYWN0aXZlVmlldy5lZGl0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTcyOE1hcmtkb3duXHU2RTkwXHU3ODAxXHU0RTJEXHU1QjlBXHU0RjREXHU4ODY4XHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBsb2NhdGVUYWJsZUluTWFya2Rvd24oZWRpdG9yOiBFZGl0b3IpOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZywgdGFibGVJZD86IHN0cmluZyB9IHwgbnVsbCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxNDlcdTY4MDdcdTY2MkZcdTU0MjZcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODVcclxuICAgICAgICAgICAgY29uc3QgY3Vyc29yTGluZSA9IGxpbmVzW2N1cnNvci5saW5lXTtcclxuICAgICAgICAgICAgY29uc3QgaXNJblRhYmxlUm93ID0gY3Vyc29yTGluZSAmJiBjdXJzb3JMaW5lLnRyaW0oKS5zdGFydHNXaXRoKCd8JykgJiYgY3Vyc29yTGluZS50cmltKCkuZW5kc1dpdGgoJ3wnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTE0OVx1NjgwN1x1NEUwRFx1NTcyOFx1ODg2OFx1NjgzQ1x1ODg0Q1x1NTE4NVx1RkYwQ1x1OEZENFx1NTZERW51bGxcclxuICAgICAgICAgICAgaWYgKCFpc0luVGFibGVSb3cpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1NDExXHU0RTBBXHU2NDFDXHU3RDIyXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHJcbiAgICAgICAgICAgIGxldCBzdGFydExpbmUgPSBjdXJzb3IubGluZTtcclxuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0TGluZSA+IDAgJiYgbGluZXNbc3RhcnRMaW5lIC0gMV0udHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRMaW5lLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTQxMVx1NEUwQlx1NjQxQ1x1N0QyMlx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc1RlxyXG4gICAgICAgICAgICBsZXQgZW5kTGluZSA9IGN1cnNvci5saW5lO1xyXG4gICAgICAgICAgICB3aGlsZSAoZW5kTGluZSA8IGxpbmVzLmxlbmd0aCAtIDEgJiYgbGluZXNbZW5kTGluZSArIDFdLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgIGVuZExpbmUrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU2NjJGXHU1NDI2XHU2MjdFXHU1MjMwXHU2NzA5XHU2NTQ4XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkVGFibGUobGluZXMuc2xpY2Uoc3RhcnRMaW5lLCBlbmRMaW5lICsgMSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDSURcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJZCA9IHRoaXMuZmluZFRhYmxlSWRBYm92ZShlZGl0b3IsIHN0YXJ0TGluZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRMaW5lLFxyXG4gICAgICAgICAgICAgICAgZW5kTGluZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmVzLnNsaWNlKHN0YXJ0TGluZSwgZW5kTGluZSArIDEpLmpvaW4oJ1xcbicpLFxyXG4gICAgICAgICAgICAgICAgdGFibGVJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUI5QVx1NEY0RE1hcmtkb3duXHU4ODY4XHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTcyOFx1ODg2OFx1NjgzQ1x1NEUwQVx1NjVCOVx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlTGluZSBcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTg4NENcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU2MjE2dW5kZWZpbmVkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZmluZFRhYmxlSWRBYm92ZShlZGl0b3I6IEVkaXRvciwgdGFibGVMaW5lOiBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NJRDogXHU4ODY4XHU2ODNDXHU4RDc3XHU1OUNCXHU4ODRDPSR7dGFibGVMaW5lfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTQxMVx1NEUwQVx1NjcwMFx1NTkxQVx1NjdFNVx1NjI3RTEwXHU4ODRDXHJcbiAgICAgICAgY29uc3QgbWF4TGluZXNUb0NoZWNrID0gMTA7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRMaW5lID0gdGFibGVMaW5lIC0gMTtcclxuICAgICAgICBjb25zdCBtaW5MaW5lID0gTWF0aC5tYXgoMCwgdGFibGVMaW5lIC0gbWF4TGluZXNUb0NoZWNrKTtcclxuICAgICAgICBcclxuICAgICAgICB3aGlsZSAoY3VycmVudExpbmUgPj0gbWluTGluZSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3VycmVudExpbmUpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1ODg0QyAke2N1cnJlbnRMaW5lfTogXCIke2xpbmV9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTkxQVx1NzlDRFx1NTNFRlx1ODBGRFx1NzY4NElEXHU2Q0U4XHU5MUNBXHU2ODNDXHU1RjBGXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAxLiA8IS0tIHRhYmxlLWlkOiB4eHggLS0+XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YW5kYXJkSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqdGFibGUtaWQ6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKHN0YW5kYXJkSWRNYXRjaCAmJiBzdGFuZGFyZElkTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gc3RhbmRhcmRJZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTY4MDdcdTUxQzZcdTY4M0NcdTVGMEZcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMi4gPCEtLSB0YWJsZWlkOiB4eHggLS0+XHJcbiAgICAgICAgICAgIGNvbnN0IG5vSHlwaGVuSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqdGFibGVpZDpcXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAobm9IeXBoZW5JZE1hdGNoICYmIG5vSHlwaGVuSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBub0h5cGhlbklkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1NjVFMFx1OEZERVx1NUI1N1x1N0IyNlx1NjgzQ1x1NUYwRlx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLiA8IS0tIGlkOiB4eHggLS0+XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbXBsZUlkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKmlkOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChzaW1wbGVJZE1hdGNoICYmIHNpbXBsZUlkTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gc2ltcGxlSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU3QjgwXHU1MzE2XHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDQuIDwhLS0gdGFibGU6IHh4eCAtLT4gXHU2MjE2IDwhLS0gdGJsOiB4eHggLS0+XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlTmFtZUlkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKih0YWJsZXx0YmwpOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZU5hbWVJZE1hdGNoICYmIHRhYmxlTmFtZUlkTWF0Y2hbMl0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGFibGVOYW1lSWRNYXRjaFsyXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU1NDBEXHU3OUYwXHU2ODNDXHU1RjBGSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDUuIFx1NjhDMFx1NjdFNVx1NEUwRFx1NUUyNlx1N0E3QVx1NjgzQ1x1NzY4NFx1NjgzQ1x1NUYwRiA8IS0tdGFibGUtaWQ6eHh4LS0+XHJcbiAgICAgICAgICAgIGNvbnN0IG5vU3BhY2VJZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLXRhYmxlLWlkOihbYS16QS1aMC05X1xcLTouXSspLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAobm9TcGFjZUlkTWF0Y2ggJiYgbm9TcGFjZUlkTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gbm9TcGFjZUlkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1NjVFMFx1N0E3QVx1NjgzQ1x1NjgzQ1x1NUYwRlx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTkwNDdcdTUyMzBcdTk3NUVcdTdBN0FcdTg4NENcdTRFMTRcdTRFMERcdTY2MkZcdTZDRThcdTkxQ0FcdTg4NENcdUZGMENcdTUyMTlcdTUwNUNcdTZCNjJcdTY0MUNcdTdEMjJcclxuICAgICAgICAgICAgLy8gXHU0RjQ2XHU1MTQxXHU4QkI4XHU3QTdBXHU4ODRDXHU1NDhDXHU1MTc2XHU0RUQ2XHU2Q0U4XHU5MUNBXHU4ODRDXHJcbiAgICAgICAgICAgIGlmIChsaW5lLnRyaW0oKSAhPT0gJycgJiYgIWxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJzwhLS0nKSAmJiAhbGluZS50cmltKCkuc3RhcnRzV2l0aCgnLy8nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTkwNDdcdTUyMzBcdTk3NUVcdTdBN0FcdTk3NUVcdTZDRThcdTkxQ0FcdTg4NENcdUZGMENcdTUwNUNcdTZCNjJcdTY0MUNcdTdEMjJgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjdXJyZW50TGluZS0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQnKTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU5QThDXHU4QkMxTWFya2Rvd25cdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuICAgICAqIEBwYXJhbSBsaW5lcyBcdTg4NjhcdTY4M0NcdTg4NENcdTY1NzBcdTdFQzRcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NEUzQVx1NjcwOVx1NjU0OFx1ODg2OFx1NjgzQ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzVmFsaWRUYWJsZShsaW5lczogc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobGluZXMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1N0IyQ1x1NEUwMFx1ODg0Q1x1NjYyRlx1NTQyNlx1NjYyRlx1ODg2OFx1NTkzNFxyXG4gICAgICAgIGNvbnN0IGZpcnN0TGluZSA9IGxpbmVzWzBdLnRyaW0oKTtcclxuICAgICAgICBpZiAoIWZpcnN0TGluZS5zdGFydHNXaXRoKCd8JykgfHwgIWZpcnN0TGluZS5lbmRzV2l0aCgnfCcpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3QjJDXHU0RThDXHU4ODRDXHU2NjJGXHU1NDI2XHU2NjJGXHU1MjA2XHU5Njk0XHU4ODRDXHJcbiAgICAgICAgY29uc3Qgc2Vjb25kTGluZSA9IGxpbmVzWzFdLnRyaW0oKTtcclxuICAgICAgICBpZiAoIXNlY29uZExpbmUuc3RhcnRzV2l0aCgnfCcpIHx8ICFzZWNvbmRMaW5lLmVuZHNXaXRoKCd8JykpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMDZcdTk2OTRcdTg4NENcdTVGQzVcdTk4N0JcdTUzMDVcdTU0MkIgLSBcdTVCNTdcdTdCMjZcclxuICAgICAgICBjb25zdCBzZXBhcmF0b3JDZWxscyA9IHNlY29uZExpbmUuc3BsaXQoJ3wnKS5zbGljZSgxLCAtMSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHNlcGFyYXRvckNlbGxzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRDZWxsID0gY2VsbC50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghdHJpbW1lZENlbGwubWF0Y2goL146Py0rOj8kLykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNDBcdTY3MDlcdTg4NENcdTc2ODRcdTY4M0NcdTVGMEZcdTY2MkZcdTU0MjZcdTRFMDBcdTgxRjRcdUZGMDhcdTkwRkRcdTRFRTUgfCBcdTVGMDBcdTU5MzRcdTU0OENcdTdFRDNcdTVDM0VcdUZGMDlcclxuICAgICAgICBmb3IgKGxldCBpID0gMjsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCd8JykgfHwgIWxpbmUuZW5kc1dpdGgoJ3wnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RTNBTWFya2Rvd25cdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRFxyXG4gICAgICogQHJldHVybnMgXHU2REZCXHU1MkEwXHU3Njg0XHU4ODY4XHU2ODNDSURcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGFkZFRhYmxlSWRUb01hcmtkb3duKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTdGMTZcdThGOTFcdTU2NjgnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVCOUFcdTRGNERcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJbmZvID0gdGhpcy5sb2NhdGVUYWJsZUluTWFya2Rvd24oZWRpdG9yKTtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1RkYwQ1x1OEJGN1x1NUMwNlx1NTE0OVx1NjgwN1x1NjUzRVx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NTI0RFx1NjYyRlx1NTQyNlx1NURGMlx1NjcwOUlEXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSB0aGlzLmNoZWNrRXhpc3RpbmdUYWJsZUlkKGVkaXRvciwgdGFibGVJbmZvLnN0YXJ0TGluZSk7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTg4NjhcdTY4M0NcdTVERjJcdTY3MDlJRDogJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlSWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NjVCMFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1RhYmxlSWQgPSB0aGlzLmdlbmVyYXRlVW5pcXVlVGFibGVJZCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NjVCMElEOiAke25ld1RhYmxlSWR9LCBcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTg4NEM6ICR7dGFibGVJbmZvLnN0YXJ0TGluZX1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NTI0RFx1NjYyRlx1NTQyNlx1NjcwOVx1N0E3QVx1ODg0Q1xyXG4gICAgICAgICAgICBsZXQgaW5zZXJ0UG9zaXRpb24gPSB7IGxpbmU6IHRhYmxlSW5mby5zdGFydExpbmUsIGNoOiAwIH07XHJcbiAgICAgICAgICAgIGxldCBpbnNlcnRDb250ZW50ID0gYDwhLS0gdGFibGUtaWQ6ICR7bmV3VGFibGVJZH0gLS0+XFxuYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1ODg2OFx1NjgzQ1x1NTI0RFx1NkNBMVx1NjcwOVx1N0E3QVx1ODg0Q1x1RkYwQ1x1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1N0E3QVx1ODg0Q1xyXG4gICAgICAgICAgICBpZiAodGFibGVJbmZvLnN0YXJ0TGluZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZMaW5lID0gZWRpdG9yLmdldExpbmUodGFibGVJbmZvLnN0YXJ0TGluZSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZMaW5lICYmIHByZXZMaW5lLnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRDb250ZW50ID0gYFxcbjwhLS0gdGFibGUtaWQ6ICR7bmV3VGFibGVJZH0gLS0+XFxuYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1NzI4XHU4ODY4XHU2ODNDXHU1MjREXHU2M0QyXHU1MTY1SURcdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShpbnNlcnRDb250ZW50LCBpbnNlcnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcdTUyMzBcdTYzRDJcdTRFRjZcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgdGhpcy5zYXZlVGFibGVJbmZvKG5ld1RhYmxlSWQsIHRhYmxlSW5mbyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQ6ICR7bmV3VGFibGVJZH1gKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQ6ICR7bmV3VGFibGVJZH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld1RhYmxlSWQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHU1MjMwXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJZCBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzYXZlVGFibGVJbmZvKHRhYmxlSWQ6IHN0cmluZywgdGFibGVJbmZvOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZyB9KTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlVmlldyB8fCAhYWN0aXZlVmlldy5maWxlKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGFjdGl2ZVZpZXcuZmlsZS5wYXRoO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3RUQzXHU2Nzg0XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcm93cywgaGFzSGVhZGVyIH0gPSB0aGlzLnBhcnNlVGFibGVTdHJ1Y3R1cmUodGFibGVJbmZvLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgc3RydWN0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ6IHJvd3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbENvdW50OiByb3dzLmxlbmd0aCA+IDAgPyByb3dzWzBdLmxlbmd0aCA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogaGFzSGVhZGVyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3R5bGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IEFycmF5KHJvd3MubGVuZ3RoKS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzOiByb3dzLmxlbmd0aCA+IDAgPyBBcnJheShyb3dzWzBdLmxlbmd0aCkuZmlsbCgnYXV0bycpIDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50OiByb3dzLmxlbmd0aCA+IDAgPyBBcnJheShyb3dzWzBdLmxlbmd0aCkuZmlsbCgnbGVmdCcpIDogW11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlVGFibGVEYXRhKHRhYmxlRGF0YSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRFxyXG4gICAgICogQHBhcmFtIGVkaXRvciBcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdTRGOEJcclxuICAgICAqIEBwYXJhbSB0YWJsZUxpbmUgXHU4ODY4XHU2ODNDXHU4RDc3XHU1OUNCXHU4ODRDXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja0V4aXN0aW5nVGFibGVJZChlZGl0b3I6IEVkaXRvciwgdGFibGVMaW5lOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICBpZiAodGFibGVMaW5lIDw9IDApIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRDogXHU4ODY4XHU2ODNDXHU4RDc3XHU1OUNCXHU4ODRDPSR7dGFibGVMaW5lfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTQxMVx1NEUwQVx1NjdFNVx1NjI3RVx1NjcwMFx1NTkxQTEwXHU4ODRDXHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5SURcdTZDRThcdTkxQ0FcclxuICAgICAgICBjb25zdCBtYXhMaW5lc1RvQ2hlY2sgPSAxMDtcclxuICAgICAgICBsZXQgY3VycmVudExpbmUgPSB0YWJsZUxpbmUgLSAxO1xyXG4gICAgICAgIGNvbnN0IG1pbkxpbmUgPSBNYXRoLm1heCgwLCB0YWJsZUxpbmUgLSBtYXhMaW5lc1RvQ2hlY2spO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50TGluZSA+PSBtaW5MaW5lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50TGluZSk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2OEMwXHU2N0U1XHU4ODRDICR7Y3VycmVudExpbmV9OiBcIiR7bGluZX1cImApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1OTFBXHU3OUNEXHU1M0VGXHU4MEZEXHU3Njg0SURcdTZDRThcdTkxQ0FcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIDwhLS0gdGFibGUtaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgc3RhbmRhcmRJZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyp0YWJsZS1pZDpcXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAoc3RhbmRhcmRJZE1hdGNoICYmIHN0YW5kYXJkSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBzdGFuZGFyZElkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1NjgwN1x1NTFDNlx1NjgzQ1x1NUYwRlx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiA8IS0tIHRhYmxlaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgbm9IeXBoZW5JZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyp0YWJsZWlkOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChub0h5cGhlbklkTWF0Y2ggJiYgbm9IeXBoZW5JZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG5vSHlwaGVuSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU2NUUwXHU4RkRFXHU1QjU3XHU3QjI2XHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIDwhLS0gaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgc2ltcGxlSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqaWQ6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKHNpbXBsZUlkTWF0Y2ggJiYgc2ltcGxlSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBzaW1wbGVJZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTdCODBcdTUzMTZcdTY4M0NcdTVGMEZcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNC4gPCEtLSB0YWJsZTogeHh4IC0tPiBcdTYyMTYgPCEtLSB0Ymw6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3QgdGFibGVOYW1lSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqKHRhYmxlfHRibCk6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlTmFtZUlkTWF0Y2ggJiYgdGFibGVOYW1lSWRNYXRjaFsyXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0YWJsZU5hbWVJZE1hdGNoWzJdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTU0MERcdTc5RjBcdTY4M0NcdTVGMEZJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNS4gXHU2OEMwXHU2N0U1XHU0RTBEXHU1RTI2XHU3QTdBXHU2ODNDXHU3Njg0XHU2ODNDXHU1RjBGIDwhLS10YWJsZS1pZDp4eHgtLT5cclxuICAgICAgICAgICAgY29uc3Qgbm9TcGFjZUlkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tdGFibGUtaWQ6KFthLXpBLVowLTlfXFwtOi5dKyktLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChub1NwYWNlSWRNYXRjaCAmJiBub1NwYWNlSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBub1NwYWNlSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU2NUUwXHU3QTdBXHU2ODNDXHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTA0N1x1NTIzMFx1OTc1RVx1N0E3QVx1ODg0Q1x1NEUxNFx1NEUwRFx1NjYyRlx1NkNFOFx1OTFDQVx1ODg0Q1x1RkYwQ1x1NTIxOVx1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMlxyXG4gICAgICAgICAgICAvLyBcdTRGNDZcdTUxNDFcdThCQjhcdTdBN0FcdTg4NENcdTU0OENcdTUxNzZcdTRFRDZcdTZDRThcdTkxQ0FcdTg4NENcclxuICAgICAgICAgICAgaWYgKGxpbmUudHJpbSgpICE9PSAnJyAmJiAhbGluZS50cmltKCkuc3RhcnRzV2l0aCgnPCEtLScpICYmICFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCcvLycpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1OTA0N1x1NTIzMFx1OTc1RVx1N0E3QVx1OTc1RVx1NkNFOFx1OTFDQVx1ODg0Q1x1RkYwQ1x1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMmApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGN1cnJlbnRMaW5lLS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRCcpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwXHU3Njg0XHU4ODY4XHU2ODNDSURcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVVbmlxdWVUYWJsZUlkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcHJlZml4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWRQcmVmaXggfHwgJ3RibCc7XHJcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKS5yZXBsYWNlKC8tL2csICcnKTtcclxuICAgICAgICBjb25zdCByYW5kb21JZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KTtcclxuICAgICAgICByZXR1cm4gYCR7cHJlZml4fS0ke3RpbWVzdGFtcH0tJHtyYW5kb21JZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3RUQzXHU2Nzg0XHJcbiAgICAgKiBAcGFyYW0gdGFibGVDb250ZW50IFx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICogQHJldHVybnMgXHU4OUUzXHU2NzkwXHU1NDBFXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgKi9cclxuICAgIHBhcnNlVGFibGVTdHJ1Y3R1cmUodGFibGVDb250ZW50OiBzdHJpbmcpOiB7IHJvd3M6IHN0cmluZ1tdW10sIGhhc0hlYWRlcjogYm9vbGVhbiB9IHtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHRhYmxlQ29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgY29uc3Qgcm93czogc3RyaW5nW11bXSA9IFtdO1xyXG4gICAgICAgIGxldCBoYXNIZWFkZXIgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCd8JykpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjA2XHU5Njk0XHU4ODRDXHU1OTA0XHU3NDA2XHJcbiAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCctJykgJiYgaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaGFzSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTg5RTNcdTY3OTBcdTg4NENcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8JylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGNlbGwsIGluZGV4LCBhcnJheSkgPT4gaW5kZXggPiAwICYmIGluZGV4IDwgYXJyYXkubGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIC5tYXAoY2VsbCA9PiBjZWxsLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByb3dzLnB1c2goY2VsbHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyByb3dzLCBoYXNIZWFkZXIgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICogQHBhcmFtIHRhYmxlUm93cyBcdTg4NjhcdTY4M0NcdTg4NENcdTY1NzBcdTdFQzRcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEByZXR1cm5zIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICovXHJcbiAgICBnZXRDZWxsQ29udGVudCh0YWJsZVJvd3M6IHN0cmluZ1tdW10sIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChyb3dJbmRleCA+PSAwICYmIHJvd0luZGV4IDwgdGFibGVSb3dzLmxlbmd0aCAmJiBcclxuICAgICAgICAgICAgY29sSW5kZXggPj0gMCAmJiBjb2xJbmRleCA8IHRhYmxlUm93c1tyb3dJbmRleF0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJsZVJvd3Nbcm93SW5kZXhdW2NvbEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4QkJFXHU3RjZFXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb250ZW50IFx1NjVCMFx1NTE4NVx1NUJCOVxyXG4gICAgICovXHJcbiAgICBzZXRDZWxsQ29udGVudChlZGl0b3I6IEVkaXRvciwgdGFibGVJbmZvOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIgfSwgXHJcbiAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSW5kZXggPSB0YWJsZUluZm8uc3RhcnRMaW5lICsgcm93SW5kZXg7XHJcbiAgICAgICAgICAgIGlmIChsaW5lSW5kZXggPiB0YWJsZUluZm8uZW5kTGluZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjA2XHU1MjcyXHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggKyAxID49IGNlbGxzLmxlbmd0aCAtIDEpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjZWxsc1tjb2xJbmRleCArIDFdID0gYCAke2NvbnRlbnR9IGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTY1NzRcdTg4NENcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgIGNlbGxzLmpvaW4oJ3wnKSxcclxuICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gXHU1NDA4XHU1RTc2XHU2NUI5XHU1NDExICgncmlnaHQnIFx1NjIxNiAnZG93bicpXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG1lcmdlQ2VsbHMoZGlyZWN0aW9uOiAncmlnaHQnIHwgJ2Rvd24nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUMxRFx1OEJENSR7ZGlyZWN0aW9uID09PSAncmlnaHQnID8gJ1x1NTQxMVx1NTNGMycgOiAnXHU1NDExXHU0RTBCJ31cdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU3RjE2XHU4RjkxXHU1NjY4Jyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTdGMTZcdThGOTFcdTU2NjgnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxQb3NpdGlvbiA9IHRoaXMuZ2V0Q2VsbFBvc2l0aW9uKGVkaXRvcik7XHJcbiAgICAgICAgICAgIGlmICghY2VsbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU2MjE2XHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFJyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTYyMTZcdTY1RTBcdTZDRDVcdTc4NkVcdTVCOUFcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkVcdUZGMENcdThCRjdcdTVDMDZcdTUxNDlcdTY4MDdcdTY1M0VcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgeyB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCB9ID0gY2VsbFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MUM2XHU1OTA3JHtkaXJlY3Rpb24gPT09ICdyaWdodCcgPyAnXHU1NDExXHU1M0YzJyA6ICdcdTU0MTFcdTRFMEInfVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQzogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1NjVCOVx1NTQxMVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMubWVyZ2VDZWxsc1JpZ2h0KGVkaXRvciwgdGFibGVJbmZvLCByb3dJbmRleCwgY29sSW5kZXgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLm1lcmdlQ2VsbHNEb3duKGVkaXRvciwgdGFibGVJbmZvLCByb3dJbmRleCwgY29sSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtkaXJlY3Rpb24gPT09ICdyaWdodCcgPyAnXHU1NDExXHU1M0YzJyA6ICdcdTU0MTFcdTRFMEInfVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RmApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7ZGlyZWN0aW9uID09PSAncmlnaHQnID8gJ1x1NTQxMVx1NTNGMycgOiAnXHU1NDExXHU0RTBCJ31cdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTkoJHtkaXJlY3Rpb259KTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU3Njg0XHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gbGluZSBcdTg4NENcdTY1ODdcdTY3MkNcclxuICAgICAqIEBwYXJhbSBjdXJzb3JDaCBcdTUxNDlcdTY4MDdcdTVCNTdcdTdCMjZcdTRGNERcdTdGNkVcclxuICAgICAqIEByZXR1cm5zIFx1NTIxN1x1N0QyMlx1NUYxNVx1NjIxNi0xXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Q3Vyc29yQ29sdW1uSW5kZXgobGluZTogc3RyaW5nLCBjdXJzb3JDaDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTg4NENcdTY2MkZcdTg4NjhcdTY4M0NcdTg4NENcclxuICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCd8JykgfHwgIWxpbmUudHJpbSgpLmVuZHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTg4NENcdTRFMERcdTY2MkZcdTY3MDlcdTY1NDhcdTc2ODRcdTg4NjhcdTY4M0NcdTg4NEM6JywgbGluZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIwNlx1NTI3Mlx1ODg0Q1x1NEUzQVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1OTk5Nlx1NUMzRVx1N0E3QVx1NTE0M1x1N0QyMFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NjcwOVx1RkYwOVxyXG4gICAgICAgICAgICBpZiAoY2VsbHNbMF0udHJpbSgpID09PSAnJykgY2VsbHMuc2hpZnQoKTtcclxuICAgICAgICAgICAgaWYgKGNlbGxzW2NlbGxzLmxlbmd0aCAtIDFdLnRyaW0oKSA9PT0gJycpIGNlbGxzLnBvcCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2QkNGXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU4RDc3XHU1OUNCXHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UG9zID0gbGluZS5pbmRleE9mKCd8Jyk7IC8vIFx1N0IyQ1x1NEUwMFx1NEUyQVx1NTIwNlx1OTY5NFx1N0IyNlx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5MDREXHU1Mzg2XHU2QkNGXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU2MjdFXHU1MjMwXHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxXaWR0aCA9IGNlbGxzW2ldLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgJ3wnIGNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFBvcyA9IGN1cnJlbnRQb3MgKyBjZWxsV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY4QzBcdTY3RTVcdTUzNTVcdTUxNDNcdTY4M0MgJHtpfTogXHU4MzAzXHU1NkY0PSR7Y3VycmVudFBvc30tJHtuZXh0UG9zfSwgXHU1MTg1XHU1QkI5PVwiJHtjZWxsc1tpXX1cImApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yQ2ggPiBjdXJyZW50UG9zICYmIGN1cnNvckNoIDw9IG5leHRQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MTQ5XHU2ODA3XHU1NzI4XHU1MzU1XHU1MTQzXHU2ODNDICR7aX0gXHU1MTg1OiBcdTRGNERcdTdGNkU9JHtjdXJzb3JDaH1gKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3VycmVudFBvcyA9IG5leHRQb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY3MkFcdTYyN0VcdTUyMzBcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTUzNTVcdTUxNDNcdTY4M0M6IGN1cnNvckNoPSR7Y3Vyc29yQ2h9LCBsaW5lPVwiJHtsaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTUyMTdcdTdEMjJcdTVGMTVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG4gICAgICogQHBhcmFtIGVkaXRvciBcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdTRGOEJcclxuICAgICAqIEByZXR1cm5zIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgZ2V0Q2VsbFBvc2l0aW9uKGVkaXRvcjogRWRpdG9yKTogeyB0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nLCB0YWJsZUlkPzogc3RyaW5nIH0sIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIgfSB8IG51bGwge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUluZm8gPSB0aGlzLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gY3Vyc29yLmxpbmUgLSB0YWJsZUluZm8uc3RhcnRMaW5lO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODRDXHU3RDIyXHU1RjE1XHU2NjJGXHU1NDI2XHU2NzA5XHU2NTQ4XHJcbiAgICAgICAgICAgIGlmIChyb3dJbmRleCA8IDAgfHwgcm93SW5kZXggPiB0YWJsZUluZm8uZW5kTGluZSAtIHRhYmxlSW5mby5zdGFydExpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NENcdTdEMjJcdTVGMTVcdThEODVcdTUxRkFcdTgzMDNcdTU2RjQ6IHJvd0luZGV4PSR7cm93SW5kZXh9LCB0YWJsZVJhbmdlPSR7dGFibGVJbmZvLnN0YXJ0TGluZX0tJHt0YWJsZUluZm8uZW5kTGluZX1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU4ODRDXHU1MTg1XHU1QkI5Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODRDXHU2NjJGXHU1NDI2XHU2NjJGXHU2NzA5XHU2NTQ4XHU3Njg0XHU4ODY4XHU2ODNDXHU4ODRDXHJcbiAgICAgICAgICAgIGlmICghbGluZS50cmltKCkuc3RhcnRzV2l0aCgnfCcpIHx8ICFsaW5lLnRyaW0oKS5lbmRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjUzXHU1MjREXHU4ODRDXHU0RTBEXHU2NjJGXHU2NzA5XHU2NTQ4XHU3Njg0XHU4ODY4XHU2ODNDXHU4ODRDJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU3Njg0XHU1MjE3XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gdGhpcy5nZXRDdXJzb3JDb2x1bW5JbmRleChsaW5lLCBjdXJzb3IuY2gpO1xyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU1MjE3Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjIxMFx1NTI5Rlx1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RTogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1ODg2OFx1NjgzQ1x1ODMwM1x1NTZGND0ke3RhYmxlSW5mby5zdGFydExpbmV9LSR7dGFibGVJbmZvLmVuZExpbmV9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGFibGVJbmZvLFxyXG4gICAgICAgICAgICAgICAgcm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICBjb2xJbmRleFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICogQHBhcmFtIGVkaXRvciBcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdTRGOEJcclxuICAgICAqIEBwYXJhbSB0YWJsZUluZm8gXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcbiAgICAgKiBAcGFyYW0gcm93SW5kZXggXHU4ODRDXHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gY29sSW5kZXggXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gbWVyZ2VDb3VudCBcdTVERjJcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY1NzBcdTkxQ0ZcdUZGMENcdTlFRDhcdThCQTRcdTRFM0EwXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBtZXJnZUNlbGxzUmlnaHQoZWRpdG9yOiBFZGl0b3IsIHRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIHRhYmxlSWQ/OiBzdHJpbmcgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIsIG1lcmdlQ291bnQ6IG51bWJlciA9IDApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSW5kZXggPSB0YWJsZUluZm8uc3RhcnRMaW5lICsgcm93SW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShsaW5lSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTg4NENcdTUxODVcdTVCQjk6IGxpbmVJbmRleD0ke2xpbmVJbmRleH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUMxRFx1OEJENVx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQzogXHU4ODRDPSR7bGluZUluZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTVERjJcdTU0MDhcdTVFNzY9JHttZXJnZUNvdW50fSwgXHU4ODRDXHU1MTg1XHU1QkI5PVwiJHtsaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMDZcdTUyNzJcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDIgPj0gY2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MjE3XHU3RDIyXHU1RjE1XHU4RDg1XHU1MUZBXHU4MzAzXHU1NkY0OiBjb2xJbmRleD0ke2NvbEluZGV4fSwgY2VsbHMubGVuZ3RoPSR7Y2VsbHMubGVuZ3RofWApO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1M0YzXHU0RkE3XHU2Q0ExXHU2NzA5XHU1MzU1XHU1MTQzXHU2ODNDXHU1M0VGXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjb25zdCBtYWluQ29udGVudCA9IGNlbGxzW2NvbEluZGV4ICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRDb250ZW50ID0gY2VsbHNbY29sSW5kZXggKyAyXS50cmltKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5PVwiJHttYWluQ29udGVudH1cIiwgXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5PVwiJHt0YXJnZXRDb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY2MkZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgY29uc3QgaXNNZXJnZU1hcmtlciA9IC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdCh0YXJnZXRDb250ZW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogJHtpc01lcmdlTWFya2VyfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IG1lcmdlQWN0aW9uID0gJ3JlcGxhY2UnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU4QkE0XHU1NDA4XHU1RTc2XHU5NzVFXHU3QTdBXHU0RTE0XHU5NzVFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRDb250ZW50ICYmICFpc01lcmdlTWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTkwMDlcdTk4NzlcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZUFjdGlvbiA9IGF3YWl0IHRoaXMuc2hvd01lcmdlQ2VsbE9wdGlvbnNEaWFsb2cobWFpbkNvbnRlbnQsIHRhcmdldENvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTc1MjhcdTYyMzdcdTkwMDlcdTYyRTlcdTc2ODRcdTU0MDhcdTVFNzZcdTY0Q0RcdTRGNUM6ICR7bWVyZ2VBY3Rpb259YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcmdlQWN0aW9uID09PSAnY2FuY2VsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU3NTI4XHU2MjM3XHU1M0Q2XHU2RDg4XHU0RTg2XHU1NDA4XHU1RTc2XHU2NENEXHU0RjVDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1OTAwOVx1NjJFOVx1NzY4NFx1NjRDRFx1NEY1Q1x1NTkwNFx1NzQwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBpZiAobWVyZ2VBY3Rpb24gPT09ICdtZXJnZScgJiYgbWFpbkNvbnRlbnQgJiYgdGFyZ2V0Q29udGVudCAmJiAhaXNNZXJnZU1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1NDA4XHU1RTc2XHU0RTI0XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU1MTg1XHU1QkI5XHU1MjMwXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjZWxsc1tjb2xJbmRleCArIDFdID0gYCAke21haW5Db250ZW50fSAke3RhcmdldENvbnRlbnR9IGA7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NDA4XHU1RTc2XHU1MTg1XHU1QkI5OiBcdTY1QjBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke2NlbGxzW2NvbEluZGV4ICsgMV19XCJgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2NTcwXHU5MUNGIC0gXHU0RUNFXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHU1MjMwXHU1RjUzXHU1MjREXHU1MjE3XHU3Njg0XHU4REREXHU3OUJCXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NzZGNFx1NjNBNVx1NzZGOFx1OTBCQlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOFx1NTM1NVx1NEUyQSA8XHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1N0IyQ1x1NEUwOVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOCA8PFxyXG4gICAgICAgICAgICAvLyBcdTVCRjlcdTRFOEVcdTdCMkNcdTU2REJcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTRGN0ZcdTc1MjggPDw8IFx1NEVFNVx1NkI2NFx1N0M3Qlx1NjNBOFxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZURpc3RhbmNlID0gbWVyZ2VDb3VudCArIDE7IC8vIFx1NUY1M1x1NTI0RFx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OERERFx1NzlCQlxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZU1hcmtlciA9ICc8Jy5yZXBlYXQobWVyZ2VEaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTc1MUZcdTYyMTBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1OERERFx1NzlCQj0ke21lcmdlRGlzdGFuY2V9LCBcdTY4MDdcdThCQjA9XCIke21lcmdlTWFya2VyfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjkgLSBcdTRGN0ZcdTc1MjhcdTY4MDdcdTUxQzZcdTUzMTZcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgY2VsbHNbY29sSW5kZXggKyAyXSA9IGAgJHttZXJnZU1hcmtlcn0gYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NjVCMFx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBuZXdMaW5lID0gY2VsbHMuam9pbignfCcpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NUIwXHU4ODRDXHU1MTg1XHU1QkI5PVwiJHtuZXdMaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTY1NzRcdTg4NENcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgIG5ld0xpbmUsXHJcbiAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogbGluZS5sZW5ndGggfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU3RUU3XHU3RUVEXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHVGRjA4XHU1OTA0XHU3NDA2XHU1OTFBXHU1MjE3XHU1NDA4XHU1RTc2XHU3Njg0XHU2MEM1XHU1MUI1XHVGRjA5XHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDMgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDZWxsQ29udGVudCA9IGNlbGxzW2NvbEluZGV4ICsgM10udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1NEUwQlx1NEUwMFx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU1MTg1XHU1QkI5PVwiJHtuZXh0Q2VsbENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgaWYgKC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdChuZXh0Q2VsbENvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjhDMFx1NkQ0Qlx1NTIzMFx1NTNGM1x1NEZBN1x1NjcwOVx1OEZERVx1N0VFRFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1N0VFN1x1N0VFRFx1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWVyZ2VDZWxsc1JpZ2h0KGVkaXRvciwgdGFibGVJbmZvLCByb3dJbmRleCwgY29sSW5kZXggKyAxLCBtZXJnZURpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBtZXJnZUNvdW50IFx1NURGMlx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjU3MFx1OTFDRlx1RkYwQ1x1OUVEOFx1OEJBNFx1NEUzQTBcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG1lcmdlQ2VsbHNEb3duKGVkaXRvcjogRWRpdG9yLCB0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nLCB0YWJsZUlkPzogc3RyaW5nIH0sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciwgbWVyZ2VDb3VudDogbnVtYmVyID0gMCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lSW5kZXggPSB0YWJsZUluZm8uc3RhcnRMaW5lICsgcm93SW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRMaW5lSW5kZXggPSBjdXJyZW50TGluZUluZGV4ICsgMTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChuZXh0TGluZUluZGV4ID4gdGFibGVJbmZvLmVuZExpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFMEJcdTRFMDBcdTg4NENcdThEODVcdTUxRkFcdTg4NjhcdTY4M0NcdTgzMDNcdTU2RjQ6IG5leHRMaW5lSW5kZXg9JHtuZXh0TGluZUluZGV4fSwgdGFibGVFbmRMaW5lPSR7dGFibGVJbmZvLmVuZExpbmV9YCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTRFMEJcdTY1QjlcdTZDQTFcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0NcdTUzRUZcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50TGluZUluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dExpbmUgPSBlZGl0b3IuZ2V0TGluZShuZXh0TGluZUluZGV4KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghY3VycmVudExpbmUgfHwgIW5leHRMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU4ODRDXHU1MTg1XHU1QkI5OiBjdXJyZW50TGluZT0keyEhY3VycmVudExpbmV9LCBuZXh0TGluZT0keyEhbmV4dExpbmV9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVDMURcdThCRDVcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0M6IFx1NUY1M1x1NTI0RFx1ODg0Qz0ke2N1cnJlbnRMaW5lSW5kZXh9LCBcdTRFMEJcdTRFMDBcdTg4NEM9JHtuZXh0TGluZUluZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTVERjJcdTU0MDhcdTVFNzY9JHttZXJnZUNvdW50fWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RjUzXHU1MjREXHU4ODRDXHU1MTg1XHU1QkI5PVwiJHtjdXJyZW50TGluZX1cImApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RTBCXHU0RTAwXHU4ODRDXHU1MTg1XHU1QkI5PVwiJHtuZXh0TGluZX1cImApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjA2XHU1MjcyXHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDZWxscyA9IGN1cnJlbnRMaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRDZWxscyA9IG5leHRMaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggKyAxID49IGN1cnJlbnRDZWxscy5sZW5ndGggfHwgY29sSW5kZXggKyAxID49IG5leHRDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUyMTdcdTdEMjJcdTVGMTVcdThEODVcdTUxRkFcdTgzMDNcdTU2RjQ6IGNvbEluZGV4PSR7Y29sSW5kZXh9LCBjdXJyZW50Q2VsbHMubGVuZ3RoPSR7Y3VycmVudENlbGxzLmxlbmd0aH0sIG5leHRDZWxscy5sZW5ndGg9JHtuZXh0Q2VsbHMubGVuZ3RofWApO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU1MjE3XHU3RDIyXHU1RjE1XHU4RDg1XHU1MUZBXHU4MzAzXHU1NkY0Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjb25zdCBtYWluQ29udGVudCA9IGN1cnJlbnRDZWxsc1tjb2xJbmRleCArIDFdLnRyaW0oKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q29udGVudCA9IG5leHRDZWxsc1tjb2xJbmRleCArIDFdLnRyaW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke21haW5Db250ZW50fVwiLCBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke3RhcmdldENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NjYyRlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBjb25zdCBpc01lcmdlTWFya2VyID0gL14oPCt8XFxeK3xcXFxcPHxcXFxcXnxcXHMqPCtcXHMqfFxccypcXF4rXFxzKikkLy50ZXN0KHRhcmdldENvbnRlbnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiAke2lzTWVyZ2VNYXJrZXJ9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgbWVyZ2VBY3Rpb24gPSAncmVwbGFjZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdThCQTRcdTU0MDhcdTVFNzZcdTk3NUVcdTdBN0FcdTRFMTRcdTk3NUVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgaWYgKHRhcmdldENvbnRlbnQgJiYgIWlzTWVyZ2VNYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTAwOVx1OTg3OVx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlQWN0aW9uID0gYXdhaXQgdGhpcy5zaG93TWVyZ2VDZWxsT3B0aW9uc0RpYWxvZyhtYWluQ29udGVudCwgdGFyZ2V0Q29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzUyOFx1NjIzN1x1OTAwOVx1NjJFOVx1NzY4NFx1NTQwOFx1NUU3Nlx1NjRDRFx1NEY1QzogJHttZXJnZUFjdGlvbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VBY3Rpb24gPT09ICdjYW5jZWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTc1MjhcdTYyMzdcdTUzRDZcdTZEODhcdTRFODZcdTU0MDhcdTVFNzZcdTY0Q0RcdTRGNUMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU5MDA5XHU2MkU5XHU3Njg0XHU2NENEXHU0RjVDXHU1OTA0XHU3NDA2XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGlmIChtZXJnZUFjdGlvbiA9PT0gJ21lcmdlJyAmJiBtYWluQ29udGVudCAmJiB0YXJnZXRDb250ZW50ICYmICFpc01lcmdlTWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTRFMjRcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTUxODVcdTVCQjlcdTUyMzBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsc1tjb2xJbmRleCArIDFdID0gYCAke21haW5Db250ZW50fSAke3RhcmdldENvbnRlbnR9IGA7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NDA4XHU1RTc2XHU1MTg1XHU1QkI5OiBcdTY1QjBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke2N1cnJlbnRDZWxsc1tjb2xJbmRleCArIDFdfVwiYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjI0MFx1NTcyOFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbHMuam9pbignfCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgbGluZTogY3VycmVudExpbmVJbmRleCwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGN1cnJlbnRMaW5lSW5kZXgsIGNoOiBjdXJyZW50TGluZS5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2NTcwXHU5MUNGIC0gXHU0RUNFXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHU1MjMwXHU1RjUzXHU1MjREXHU4ODRDXHU3Njg0XHU4REREXHU3OUJCXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NzZGNFx1NjNBNVx1NzZGOFx1OTBCQlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOFx1NTM1NVx1NEUyQSBeXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1N0IyQ1x1NEUwOVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOCBeXlxyXG4gICAgICAgICAgICAvLyBcdTVCRjlcdTRFOEVcdTdCMkNcdTU2REJcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTRGN0ZcdTc1MjggXl5eIFx1NEVFNVx1NkI2NFx1N0M3Qlx1NjNBOFxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZURpc3RhbmNlID0gbWVyZ2VDb3VudCArIDE7IC8vIFx1NUY1M1x1NTI0RFx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OERERFx1NzlCQlxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZU1hcmtlciA9ICdeJy5yZXBlYXQobWVyZ2VEaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTc1MUZcdTYyMTBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1OERERFx1NzlCQj0ke21lcmdlRGlzdGFuY2V9LCBcdTY4MDdcdThCQjA9XCIke21lcmdlTWFya2VyfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjkgLSBcdTRGN0ZcdTc1MjhcdTY4MDdcdTUxQzZcdTUzMTZcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgbmV4dENlbGxzW2NvbEluZGV4ICsgMV0gPSBgICR7bWVyZ2VNYXJrZXJ9IGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY3ODRcdTVFRkFcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgbmV3TmV4dExpbmUgPSBuZXh0Q2VsbHMuam9pbignfCcpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NUIwXHU0RTBCXHU0RTAwXHU4ODRDXHU1MTg1XHU1QkI5PVwiJHtuZXdOZXh0TGluZX1cImApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3NkVFXHU2ODA3XHU4ODRDXHJcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICBuZXdOZXh0TGluZSxcclxuICAgICAgICAgICAgICAgIHsgbGluZTogbmV4dExpbmVJbmRleCwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgIHsgbGluZTogbmV4dExpbmVJbmRleCwgY2g6IG5leHRMaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTk3MDBcdTg5ODFcdTdFRTdcdTdFRURcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdUZGMDhcdTU5MDRcdTc0MDZcdTU5MUFcdTg4NENcdTU0MDhcdTVFNzZcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMDlcclxuICAgICAgICAgICAgaWYgKG5leHRMaW5lSW5kZXggKyAxIDw9IHRhYmxlSW5mby5lbmRMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0TmV4dExpbmUgPSBlZGl0b3IuZ2V0TGluZShuZXh0TGluZUluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dE5leHRMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dE5leHRDZWxscyA9IG5leHROZXh0TGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPCBuZXh0TmV4dENlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0TmV4dENlbGxDb250ZW50ID0gbmV4dE5leHRDZWxsc1tjb2xJbmRleCArIDFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1NEUwQlx1NEUwMFx1ODg0Q1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU1MTg1XHU1QkI5PVwiJHtuZXh0TmV4dENlbGxDb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL14oPCt8XFxeK3xcXFxcPHxcXFxcXnxcXHMqPCtcXHMqfFxccypcXF4rXFxzKikkLy50ZXN0KG5leHROZXh0Q2VsbENvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2OEMwXHU2RDRCXHU1MjMwXHU0RTBCXHU2NUI5XHU2NzA5XHU4RkRFXHU3RUVEXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU3RUU3XHU3RUVEXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1lcmdlQ2VsbHNEb3duKGVkaXRvciwgdGFibGVJbmZvLCByb3dJbmRleCArIDEsIGNvbEluZGV4LCBtZXJnZURpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcclxuICAgICAqIEByZXR1cm5zIFx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1Nzg2RVx1OEJBNFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dDb25maXJtRGlhbG9nKG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTRFMERcdTRGMUFcdTgxRUFcdTUyQThcdTZEODhcdTU5MzFcdTc2ODRcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShtZXNzYWdlLCAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxyXG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTNENlx1NkQ4OCc7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU3ODZFXHU4QkE0XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTc4NkVcdTVCOUEnO1xyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTBweCc7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1MjMwXHU1QkI5XHU1NjY4XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY29uZmlybUJ1dHRvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcdTUyMzBcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgbm90aWNlLm5vdGljZUVsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2M0VcdTc5M0FcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDlcdTk4NzlcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAqIEBwYXJhbSBtYWluQ29udGVudCBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAqIEBwYXJhbSB0YXJnZXRDb250ZW50IFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICogQHJldHVybnMgXHU5MDA5XHU2MkU5XHU3Njg0XHU2NENEXHU0RjVDXHVGRjFBJ21lcmdlJz1cdTU0MDhcdTVFNzZcdTVFNzZcdTRGRERcdTc1NTlcdTRFMjRcdTRFMkFcdTUxODVcdTVCQjksICdyZXBsYWNlJz1cdTRFQzVcdTRGN0ZcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAsICdjYW5jZWwnPVx1NTNENlx1NkQ4OFx1NjRDRFx1NEY1Q1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dNZXJnZUNlbGxPcHRpb25zRGlhbG9nKG1haW5Db250ZW50OiBzdHJpbmcsIHRhcmdldENvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8J21lcmdlJ3wncmVwbGFjZSd8J2NhbmNlbCc+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU0RTBEXHU0RjFBXHU4MUVBXHU1MkE4XHU2RDg4XHU1OTMxXHU3Njg0XHU5MDFBXHU3N0U1XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1OTg3OScsIDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MTg1XHU1QkI5XHU1QkI5XHU1NjY4XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XHJcbiAgICAgICAgICAgIGNvbnRlbnRDb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPHA+XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XHVGRjFBXCIke3RhcmdldENvbnRlbnR9XCI8L3A+XHJcbiAgICAgICAgICAgICAgICA8cD5cdThCRjdcdTkwMDlcdTYyRTlcdTU0MDhcdTVFNzZcdTY1QjlcdTVGMEZcdUZGMUE8L3A+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzVweCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTVFNzZcdTRGRERcdTc1NTlcdTUxODVcdTVCQjlcdTYzMDlcdTk0QUVcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgbWVyZ2VCdXR0b24udGV4dENvbnRlbnQgPSAnXHU1NDA4XHU1RTc2XHU1RTc2XHU0RkREXHU3NTU5XHU1MTg1XHU1QkI5JztcclxuICAgICAgICAgICAgbWVyZ2VCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCdtZXJnZScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RUM1XHU0RjdGXHU3NTI4XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgcmVwbGFjZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTRFQzVcdTRGN0ZcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAnO1xyXG4gICAgICAgICAgICByZXBsYWNlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub3RpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgncmVwbGFjZScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSAnXHU1M0Q2XHU2RDg4JztcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub3RpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgnY2FuY2VsJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTUyMzBcdTVCQjlcdTU2NjhcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lcmdlQnV0dG9uKTtcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlcGxhY2VCdXR0b24pO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUJCOVx1NTY2OFx1NTIzMFx1OTAxQVx1NzdFNVxyXG4gICAgICAgICAgICBub3RpY2Uubm90aWNlRWwuYXBwZW5kQ2hpbGQoY29udGVudENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIG5vdGljZS5ub3RpY2VFbC5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2RDRCXHU1RTc2XHU0RkVFXHU1OTBEXHU4ODY4XHU2ODNDXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdThGREJcdTg4NENcdTRFODZcdTRGRUVcdTU5MERcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZGV0ZWN0QW5kRml4TWVyZ2VNYXJrZXJzKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTdGMTZcdThGOTFcdTU2NjgnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1QjlBXHU0RjREXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IHRoaXMubG9jYXRlVGFibGVJbk1hcmtkb3duKGVkaXRvcik7XHJcbiAgICAgICAgICAgIGlmICghdGFibGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdUZGMENcdThCRjdcdTVDMDZcdTUxNDlcdTY4MDdcdTY1M0VcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGhhc0ZpeGVkTWFya2VycyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5MDREXHU1Mzg2XHU4ODY4XHU2ODNDXHU3Njg0XHU2QkNGXHU0RTAwXHU4ODRDXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0YWJsZUluZm8uc3RhcnRMaW5lOyBpIDw9IHRhYmxlSW5mby5lbmRMaW5lOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShpKTtcclxuICAgICAgICAgICAgICAgIGlmICghbGluZSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIwNlx1NTI3Mlx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTZCQ0ZcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgY2VsbHMubGVuZ3RoIC0gMTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRDZWxsID0gY2VsbC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RTc2XHU3RURGXHU0RTAwXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2ODNDXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRDZWxsID09PSAnXFxcXDwnIHx8IHRyaW1tZWRDZWxsID09PSAnPCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3RURGXHU0RTAwXHU0RjdGXHU3NTI4XHU0RTBEXHU1RTI2XHU4RjZDXHU0RTQ5XHU3Njg0XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2pdID0gJyA8ICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZENlbGwgPT09ICdcXFxcXicgfHwgdHJpbW1lZENlbGwgPT09ICdeJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdFREZcdTRFMDBcdTRGN0ZcdTc1MjhcdTRFMERcdTVFMjZcdThGNkNcdTRFNDlcdTc2ODRcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNbal0gPSAnIF4gJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTRGRUVcdTY1MzlcdUZGMENcdTY2RjRcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZExpbmUgPSBjZWxscy5qb2luKCd8Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZExpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbGluZTogaSwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBpLCBjaDogbGluZS5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzRml4ZWRNYXJrZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGhhc0ZpeGVkTWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU3RURGXHU0RTAwXHU4ODY4XHU2ODNDXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2ODNDXHU1RjBGJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTUzRDFcdTczQjBcdTk3MDBcdTg5ODFcdTRGRUVcdTU5MERcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGhhc0ZpeGVkTWFya2VycztcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTY4QzBcdTZENEJcdTU0OENcdTRGRUVcdTU5MERcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2MkM2XHU1MjA2XHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTYyMTBcdTUyOUZcclxuICAgICAqL1xyXG4gICAgYXN5bmMgc3BsaXRNZXJnZWRDZWxscygpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmdldEFjdGl2ZUVkaXRvcigpO1xyXG4gICAgICAgICAgICBpZiAoIWVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU3RjE2XHU4RjkxXHU1NjY4Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zdCBjZWxsUG9zaXRpb24gPSB0aGlzLmdldENlbGxQb3NpdGlvbihlZGl0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIWNlbGxQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU2MjE2XHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHVGRjBDXHU4QkY3XHU1QzA2XHU1MTQ5XHU2ODA3XHU2NTNFXHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgdGFibGVJbmZvLCByb3dJbmRleCwgY29sSW5kZXggfSA9IGNlbGxQb3NpdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgbGluZUluZGV4ID0gdGFibGVJbmZvLnN0YXJ0TGluZSArIHJvd0luZGV4O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUMxRFx1OEJENVx1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQzogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1ODg2OFx1NjgzQ1x1ODMwM1x1NTZGND0ke3RhYmxlSW5mby5zdGFydExpbmV9LSR7dGFibGVJbmZvLmVuZExpbmV9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGhhc1NwbGl0Q2VsbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTNGM1x1NEZBN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggKyAxIDwgbGluZS5zcGxpdCgnfCcpLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHRDZWxsID0gY2VsbHNbY29sSW5kZXggKyAyXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q2VsbFRyaW1tZWQgPSByaWdodENlbGwudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5OiBcIiR7cmlnaHRDZWxsVHJpbW1lZH1cImApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MDRcdTc5Q0RcdTUzRUZcdTgwRkRcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgICAgIGlmICgvXig8K3xcXF4rfFxcXFw8fFxcXFxefFxccyo8K1xccyp8XFxzKlxcXitcXHMqKSQvLnRlc3QocmlnaHRDZWxsVHJpbW1lZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTYyQzZcdTUyMDZcdTUzRjNcdTRGQTdcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICBjZWxsc1tjb2xJbmRleCArIDJdID0gJyAgJzsgLy8gXHU2NkZGXHU2MzYyXHU0RTNBXHU3QTdBXHU3NjdEXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU4ODRDXHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMuam9pbignfCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU2MkM2XHU1MjA2XHU1M0YzXHU0RkE3XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzU3BsaXRDZWxscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NEUwQlx1NjVCOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBpZiAobGluZUluZGV4IDwgdGFibGVJbmZvLmVuZExpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlbG93TGluZSA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlbG93TGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlbG93Q2VsbHMgPSBiZWxvd0xpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggKyAxIDwgYmVsb3dDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVsb3dDZWxsID0gYmVsb3dDZWxsc1tjb2xJbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZWxvd0NlbGxUcmltbWVkID0gYmVsb3dDZWxsLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFMEJcdTY1QjlcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk6IFwiJHtiZWxvd0NlbGxUcmltbWVkfVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MDRcdTc5Q0RcdTUzRUZcdTgwRkRcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdChiZWxvd0NlbGxUcmltbWVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2MkM2XHU1MjA2XHU0RTBCXHU2NUI5XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWxvd0NlbGxzW2NvbEluZGV4ICsgMV0gPSAnICAnOyAvLyBcdTY2RkZcdTYzNjJcdTRFM0FcdTdBN0FcdTc2N0RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU4ODRDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlbG93Q2VsbHMuam9pbignfCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4ICsgMSwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCArIDEsIGNoOiBiZWxvd0xpbmUubGVuZ3RoIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTYyQzZcdTUyMDZcdTRFMEJcdTY1QjlcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1NwbGl0Q2VsbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY2MkZcdTU0MDhcdTVFNzZcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDhcdTUzNzNcdTUzRjNcdTRGQTdcdTYyMTZcdTRFMEJcdTY1QjlcdTY3MDlcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdUZGMDlcclxuICAgICAgICAgICAgLy8gXHU4RkQ5XHU3OUNEXHU2MEM1XHU1MUI1XHU0RTBCXHU2MjExXHU0RUVDXHU5NzAwXHU4OTgxXHU5MDEyXHU1RjUyXHU2N0U1XHU2MjdFXHU2MjQwXHU2NzA5XHU1MTczXHU4MDU0XHU3Njg0XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IHJlY3Vyc2l2ZVNwbGl0ID0gYXdhaXQgdGhpcy5yZWN1cnNpdmVTcGxpdE1lcmdlZENlbGxzKGVkaXRvciwgdGFibGVJbmZvLCByb3dJbmRleCwgY29sSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAocmVjdXJzaXZlU3BsaXQpIHtcclxuICAgICAgICAgICAgICAgIGhhc1NwbGl0Q2VsbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaGFzU3BsaXRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU2MjEwXHU1MjlGXHU2MkM2XHU1MjA2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NTNFRlx1NjJDNlx1NTIwNlx1NzY4NFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1OEJGN1x1Nzg2RVx1NEZERFx1NTE0OVx1NjgwN1x1NEY0RFx1NEU4RVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2MkM2XHU1MjA2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2MkM2XHU1MjA2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTkwMTJcdTVGNTJcdTYyQzZcdTUyMDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIFx1NjdFNVx1NjI3RVx1NEUwRVx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzZGOFx1NTE3M1x1NzY4NFx1NjI0MFx1NjcwOVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NUU3Nlx1NjJDNlx1NTIwNlx1NUI4M1x1NEVFQ1xyXG4gICAgICogQHBhcmFtIGVkaXRvciBcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdTRGOEJcclxuICAgICAqIEBwYXJhbSB0YWJsZUluZm8gXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcbiAgICAgKiBAcGFyYW0gcm93SW5kZXggXHU4ODRDXHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gY29sSW5kZXggXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdThGREJcdTg4NENcdTRFODZcdTYyQzZcdTUyMDZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyByZWN1cnNpdmVTcGxpdE1lcmdlZENlbGxzKFxyXG4gICAgICAgIGVkaXRvcjogRWRpdG9yLCBcclxuICAgICAgICB0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nLCB0YWJsZUlkPzogc3RyaW5nIH0sXHJcbiAgICAgICAgcm93SW5kZXg6IG51bWJlciwgXHJcbiAgICAgICAgY29sSW5kZXg6IG51bWJlclxyXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IGhhc1NwbGl0Q2VsbHMgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBtYXhTZWFyY2hEZXB0aCA9IDEwOyAvLyBcdTk2MzJcdTZCNjJcdTY1RTBcdTk2NTBcdTkwMTJcdTVGNTJcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU0MTFcdTUzRjNcdTY0MUNcdTdEMjJcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICBmb3IgKGxldCBjb2wgPSBjb2xJbmRleCArIDE7IGNvbCA8IGNvbEluZGV4ICsgbWF4U2VhcmNoRGVwdGg7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVJbmRleCA9IHRhYmxlSW5mby5zdGFydExpbmUgKyByb3dJbmRleDtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgaWYgKGNvbCArIDEgPj0gY2VsbHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gY2VsbHNbY29sICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdUZGMDhcdTY1MkZcdTYzMDFcdTU5MUFcdTRFMkFcdThGREVcdTdFRURcdTc2ODQ8XHU2ODA3XHU4QkIwXHVGRjA5XHJcbiAgICAgICAgICAgIGlmICgvXig8K3xcXF4rfFxcXFw8fFxcXFxefFxccyo8K1xccyp8XFxzKlxcXitcXHMqKSQvLnRlc3QoY2VsbENvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTYyQzZcdTUyMDZcdThCRTVcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNlbGxzW2NvbCArIDFdID0gJyAgJztcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMuam9pbignfCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogbGluZS5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGhhc1NwbGl0Q2VsbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NjJDNlx1NTIwNlx1NEY0RFx1NEU4RSAoJHtyb3dJbmRleH0sICR7Y29sfSkgXHU3Njg0XHU2QzM0XHU1RTczXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDYCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTkwNDdcdTUyMzBcdTk3NUVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdUZGMENcdTUwNUNcdTZCNjJcdTY0MUNcdTdEMjJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTQxMVx1NEUwQlx1NjQxQ1x1N0QyMlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgIGZvciAobGV0IHJvdyA9IHJvd0luZGV4ICsgMTsgcm93IDwgcm93SW5kZXggKyBtYXhTZWFyY2hEZXB0aCAmJiByb3cgKyB0YWJsZUluZm8uc3RhcnRMaW5lIDw9IHRhYmxlSW5mby5lbmRMaW5lOyByb3crKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSW5kZXggPSB0YWJsZUluZm8uc3RhcnRMaW5lICsgcm93O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggKyAxID49IGNlbGxzLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjZWxsQ29udGVudCA9IGNlbGxzW2NvbEluZGV4ICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdUZGMDhcdTY1MkZcdTYzMDFcdTU5MUFcdTRFMkFcdThGREVcdTdFRURcdTc2ODReXHU2ODA3XHU4QkIwXHVGRjA5XHJcbiAgICAgICAgICAgIGlmICgvXig8K3xcXF4rfFxcXFw8fFxcXFxefFxccyo8K1xccyp8XFxzKlxcXitcXHMqKSQvLnRlc3QoY2VsbENvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTYyQzZcdTUyMDZcdThCRTVcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNlbGxzW2NvbEluZGV4ICsgMV0gPSAnICAnO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICBjZWxscy5qb2luKCd8JyksXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaGFzU3BsaXRDZWxscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU2MkM2XHU1MjA2XHU0RjREXHU0RThFICgke3Jvd30sICR7Y29sSW5kZXh9KSBcdTc2ODRcdTU3ODJcdTc2RjRcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTA0N1x1NTIzMFx1OTc1RVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwQ1x1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGhhc1NwbGl0Q2VsbHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTg4NjhcdTY4M0NcdTc2ODRJRFxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEN1cnJlbnRUYWJsZUlkKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1N0YxNlx1OEY5MVx1NTY2OCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUluZm8gPSB0aGlzLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdUZGMENcdThCRjdcdTVDMDZcdTUxNDlcdTY4MDdcdTY1M0VcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NJRFxyXG4gICAgICAgICAgICBsZXQgdGFibGVJZCA9IHRhYmxlSW5mby50YWJsZUlkO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDdGFibGVJbmZvXHU0RTJEXHU2Q0ExXHU2NzA5SURcdUZGMENcdTVDMURcdThCRDVcdTRGN0ZcdTc1MjhjaGVja0V4aXN0aW5nVGFibGVJZFx1NjdFNVx1NjI3RVxyXG4gICAgICAgICAgICBpZiAoIXRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU3Mjh0YWJsZUluZm9cdTRFMkRcdTY3MkFcdTYyN0VcdTUyMzBJRFx1RkYwQ1x1NUMxRFx1OEJENVx1NEY3Rlx1NzUyOGNoZWNrRXhpc3RpbmdUYWJsZUlkXHU2N0U1XHU2MjdFJyk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZUlkID0gdGhpcy5jaGVja0V4aXN0aW5nVGFibGVJZChlZGl0b3IsIHRhYmxlSW5mby5zdGFydExpbmUpIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlSWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgYWRkSWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkSWNvbnMoKSB7XHJcbiAgICAvLyBcdTUyQTBcdThGN0RcdTgxRUFcdTVCOUFcdTRFNDlcdTU2RkVcdTY4MDdcclxuICAgIGFkZEljb24oJ2FsaWduLWxlZnQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMTVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2Utb3BhY2l0eT1cIjAuM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTI1LDMwIEw3NSwzMCBNMjUsNTAgTDYwLDUwIE0yNSw3MCBMNzAsNzBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ2FsaWduLWNlbnRlcicsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1vcGFjaXR5PVwiMC4zXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjUsMzAgTDc1LDMwIE0zNSw1MCBMNjUsNTAgTTMwLDcwIEw3MCw3MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignYWxpZ24tcmlnaHQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMTVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2Utb3BhY2l0eT1cIjAuM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTI1LDMwIEw3NSwzMCBNNDAsNTAgTDc1LDUwIE0zMCw3MCBMNzUsNzBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ2FsaWduLXRvcCcsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1vcGFjaXR5PVwiMC4zXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMzAsMjUgTDMwLDc1IE01MCwyNSBMNTAsNjAgTTcwLDI1IEw3MCw3MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignYWxpZ24tbWlkZGxlJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjE1XCIgeT1cIjE1XCIgd2lkdGg9XCI3MFwiIGhlaWdodD1cIjcwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLW9wYWNpdHk9XCIwLjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0zMCwyNSBMMzAsNzUgTTUwLDM1IEw1MCw2NSBNNzAsMzAgTDcwLDcwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICBhZGRJY29uKCdhbGlnbi1ib3R0b20nLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMTVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2Utb3BhY2l0eT1cIjAuM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTMwLDI1IEwzMCw3NSBNNTAsNDAgTDUwLDc1IE03MCwzMCBMNzAsNzVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ2FsaWduLWFsbCcsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIyMFwiIHk9XCIyMFwiIHdpZHRoPVwiNjBcIiBoZWlnaHQ9XCI2MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8Y2lyY2xlIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjE1XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ21lcmdlLWNlbGxzJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjEwXCIgeT1cIjEwXCIgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjMwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCI2MFwiIHk9XCIxMFwiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCIzMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cmVjdCB4PVwiMTBcIiB5PVwiNjBcIiB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiMzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjYwXCIgeT1cIjYwXCIgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjMwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNTAsNDUgTDUwLDU1IE00NSw1MCBMNTUsNTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ21lcmdlLXJpZ2h0JywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjE1XCIgeT1cIjMwXCIgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjQwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCI1NVwiIHk9XCIzMFwiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCI0MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTQ1LDUwIEw1NSw1MCBNNTAsNDUgTDU1LDUwIEw1MCw1NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignbWVyZ2UtZG93bicsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIzMFwiIHk9XCIxNVwiIHdpZHRoPVwiNDBcIiBoZWlnaHQ9XCIzMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cmVjdCB4PVwiMzBcIiB5PVwiNTVcIiB3aWR0aD1cIjQwXCIgaGVpZ2h0PVwiMzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk01MCw0NSBMNTAsNTUgTTQ1LDUwIEw1MCw1NSBMNTUsNTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ3NwbGl0JywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjIwXCIgeT1cIjIwXCIgd2lkdGg9XCI2MFwiIGhlaWdodD1cIjYwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNTAsMjAgTDUwLDgwIE0yMCw1MCBMODAsNTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ3RhYmxlLWlkJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjIwXCIgeT1cIjMwXCIgd2lkdGg9XCI2MFwiIGhlaWdodD1cIjUwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjAsMzAgTDgwLDMwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiNVwiLz5cclxuICAgICAgICA8cmVjdCB4PVwiMzVcIiB5PVwiMTVcIiB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiMTVcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk00NSw0NSBMNDUsNjUgTTU1LDQ1IEw1NSw2NSBNNDUsNTUgTDU1LDU1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICBhZGRJY29uKCd0YWJsZS1yb3ctYWRkJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjIwXCIgeT1cIjIwXCIgd2lkdGg9XCI2MFwiIGhlaWdodD1cIjYwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjAsNTAgTDgwLDUwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8Y2lyY2xlIGN4PVwiODVcIiBjeT1cIjUwXCIgcj1cIjEwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNODUsNDUgTDg1LDU1IE04MCw1MCBMOTAsNTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ3RhYmxlLXN0eWxlJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjIwXCIgeT1cIjIwXCIgd2lkdGg9XCI2MFwiIGhlaWdodD1cIjYwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjAsNDAgTDgwLDQwIE0yMCw2MCBMODAsNjAgTTQwLDIwIEw0MCw4MCBNNjAsMjAgTDYwLDgwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTY1LDI1IEw3NSwzNSBNNjUsMzUgTDc1LDI1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTI1LDQ1IEwzNSw1NSBNMzUsNDUgTDI1LDU1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8Y2lyY2xlIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRlx1NTIwN1x1NjM2Mlx1NTZGRVx1NjgwN1xyXG4gICAgYWRkSWNvbigndGFibGUtdG9vbGJhci10b2dnbGUnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMTVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0xNSwzNSBMODUsMzUgTTE1LDY1IEw4NSw2NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0zNSwxNSBMMzUsODUgTTY1LDE1IEw2NSw4NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjQwXCIgeT1cIjVcIiB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMTBcIiBmaWxsPVwiY3VycmVudENvbG9yXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCI0MFwiIHk9XCI4NVwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIxMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjVcIiB5PVwiNDBcIiB3aWR0aD1cIjEwXCIgaGVpZ2h0PVwiMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCI4NVwiIHk9XCI0MFwiIHdpZHRoPVwiMTBcIiBoZWlnaHQ9XCIyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDXHU1NkZFXHU2ODA3XHJcbiAgICBhZGRJY29uKCd0YWJsZS1lZGl0LW1vZGUnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMjVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0xNSw0NSBMODUsNDVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMzUsMjUgTDM1LDc1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTU1LDI1IEw1NSw3NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk03NSwxMCBMOTAsMjUgTDgwLDM1IEw2NSwyMCBaXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNjUsMjAgTDgwLDM1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgIDwvc3ZnPmApO1xyXG59ICIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duUmVuZGVyQ2hpbGQsIE1hcmtkb3duVmlldywgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTZFMzJcdTY3RDNcdTU2NjhcclxuICogXHU3RUU3XHU2MjdGXHU4MUVBTWFya2Rvd25SZW5kZXJDaGlsZFx1NEVFNVx1OTZDNlx1NjIxMFx1NTIzME9ic2lkaWFuXHU2RTMyXHU2N0QzXHU3Q0ZCXHU3RURGXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGFibGVTdHlsZVJlbmRlcmVyIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XHJcbiAgICBwcml2YXRlIHRhYmxlSWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgc3R5bGluZzogYW55O1xyXG4gICAgcHJpdmF0ZSBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQ7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU4M0I3XHU1M0Q2YXBwXHU1QkY5XHU4QzYxXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2Nzg0XHU5MDIwXHU1MUZEXHU2NTcwXHJcbiAgICAgKiBAcGFyYW0gZWwgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJZCBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHN0eWxpbmcgXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAgICAgKiBAcGFyYW0gcGx1Z2luIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIHRhYmxlSWQ6IHN0cmluZywgc3R5bGluZzogYW55LCBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIHtcclxuICAgICAgICBzdXBlcihlbCk7XHJcbiAgICAgICAgdGhpcy50YWJsZUlkID0gdGFibGVJZDtcclxuICAgICAgICB0aGlzLnN0eWxpbmcgPSBzdHlsaW5nO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MkEwXHU4RjdEXHU2NUY2XHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIG9ubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU2RTMyXHU2N0QzXHU1NjY4XHU1MkEwXHU4RjdEOiBcdTg4NjhcdTY4M0NJRD0ke3RoaXMudGFibGVJZH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICB0aGlzLmFwcGx5U3R5bGVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5XHU3QzdCXHU1NDBEXHU0RUU1XHU0RkJGQ1NTXHU5MDA5XHU2MkU5XHU1NjY4XHU0RjdGXHU3NTI4XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKGB0YWJsZS0ke3RoaXMudGFibGVJZH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4MDdcdThCQjBcdTg4NjhcdTY4M0NcdTVERjJcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1zdHlsZXMtYXBwbGllZCcsICd0cnVlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTYyNDBcdTY3MDlcdTY4MzdcdTVGMEZcclxuICAgICAqL1xyXG4gICAgYXBwbHlTdHlsZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0eWxpbmcpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCRjlcdTlGNTBcdTY4MzdcdTVGMEZcclxuICAgICAgICBpZiAodGhpcy5zdHlsaW5nLmFsaWdubWVudCAmJiBBcnJheS5pc0FycmF5KHRoaXMuc3R5bGluZy5hbGlnbm1lbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDb2x1bW5BbGlnbm1lbnQodGhpcy5zdHlsaW5nLmFsaWdubWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgzN1x1NUYwRlxyXG4gICAgICAgIGlmICh0aGlzLnN0eWxpbmcuY2VsbFN0eWxlcyAmJiBBcnJheS5pc0FycmF5KHRoaXMuc3R5bGluZy5jZWxsU3R5bGVzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Q2VsbFN0eWxlcyh0aGlzLnN0eWxpbmcuY2VsbFN0eWxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEOFxyXG4gICAgICAgIGlmICh0aGlzLnN0eWxpbmcucm93SGVpZ2h0cyAmJiBBcnJheS5pc0FycmF5KHRoaXMuc3R5bGluZy5yb3dIZWlnaHRzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Um93SGVpZ2h0cyh0aGlzLnN0eWxpbmcucm93SGVpZ2h0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRFxyXG4gICAgICAgIGlmICh0aGlzLnN0eWxpbmcuY29sV2lkdGhzICYmIEFycmF5LmlzQXJyYXkodGhpcy5zdHlsaW5nLmNvbFdpZHRocykpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUNvbHVtbldpZHRocyh0aGlzLnN0eWxpbmcuY29sV2lkdGhzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCRjlcdTlGNTBcdTY4MzdcdTVGMEZcclxuICAgICAqIEBwYXJhbSBhbGlnbm1lbnRzIFx1NTIxN1x1NUJGOVx1OUY1MFx1NjU3MFx1NjM2RVxyXG4gICAgICovXHJcbiAgICBhcHBseUNvbHVtbkFsaWdubWVudChhbGlnbm1lbnRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCwgY29sSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhbGlnbm1lbnRzW2NvbEluZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIChjZWxsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbm1lbnRzW2NvbEluZGV4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAqIEBwYXJhbSBjZWxsU3R5bGVzIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RVxyXG4gICAgICovXHJcbiAgICBhcHBseUNlbGxTdHlsZXMoY2VsbFN0eWxlczogYW55W10pIHtcclxuICAgICAgICBjZWxsU3R5bGVzLmZvckVhY2goc3R5bGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlLnJvdyAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHN0eWxlLmNvbCAhPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZmluZENlbGwoc3R5bGUucm93LCBzdHlsZS5jb2wpO1xyXG4gICAgICAgICAgICBpZiAoIWNlbGwpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUudGV4dEFsaWduKSBjZWxsLnN0eWxlLnRleHRBbGlnbiA9IHN0eWxlLnRleHRBbGlnbjtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLnZlcnRpY2FsQWxpZ24pIGNlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9IHN0eWxlLnZlcnRpY2FsQWxpZ247XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5iYWNrZ3JvdW5kQ29sb3IpIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuY29sb3IpIGNlbGwuc3R5bGUuY29sb3IgPSBzdHlsZS5jb2xvcjtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmZvbnRXZWlnaHQpIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9IHN0eWxlLmZvbnRXZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5mb250U3R5bGUpIGNlbGwuc3R5bGUuZm9udFN0eWxlID0gc3R5bGUuZm9udFN0eWxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICAgKiBAcGFyYW0gaGVpZ2h0cyBcdTg4NENcdTlBRDhcdTY1NzBcdTYzNkVcclxuICAgICAqL1xyXG4gICAgYXBwbHlSb3dIZWlnaHRzKGhlaWdodHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEODogJHtKU09OLnN0cmluZ2lmeShoZWlnaHRzKX1gKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd3MuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocm93SW5kZXggPCBoZWlnaHRzLmxlbmd0aCAmJiBoZWlnaHRzW3Jvd0luZGV4XSAmJiBoZWlnaHRzW3Jvd0luZGV4XSAhPT0gJ2F1dG8nKSB7XHJcbiAgICAgICAgICAgICAgICAocm93IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5oZWlnaHQgPSBoZWlnaHRzW3Jvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVcdTdCMkMke3Jvd0luZGV4KzF9XHU4ODRDXHU5QUQ4XHU1RUE2OiAke2hlaWdodHNbcm93SW5kZXhdfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkRcclxuICAgICAqIEBwYXJhbSB3aWR0aHMgXHU1MjE3XHU1QkJEXHU2NTcwXHU2MzZFXHJcbiAgICAgKi9cclxuICAgIGFwcGx5Q29sdW1uV2lkdGhzKHdpZHRoczogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEOiAke0pTT04uc3RyaW5naWZ5KHdpZHRocyl9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwY29sZ3JvdXBcdTU0OENjb2xcdTUxNDNcdTdEMjBcclxuICAgICAgICBsZXQgY29sZ3JvdXAgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgaWYgKCFjb2xncm91cCkge1xyXG4gICAgICAgICAgICBjb2xncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwucHJlcGVuZChjb2xncm91cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29sZ3JvdXAuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQWNvbFx1NTE0M1x1N0QyMFx1NUU3Nlx1OEJCRVx1N0Y2RVx1NUJCRFx1NUVBNlxyXG4gICAgICAgIHdpZHRocy5mb3JFYWNoKCh3aWR0aCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29sJyk7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aCAmJiB3aWR0aCAhPT0gJ2F1dG8nKSB7XHJcbiAgICAgICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVcdTdCMkMke2luZGV4KzF9XHU1MjE3XHU1QkJEXHU1RUE2OiAke3dpZHRofWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NTkwRDogXHU3ODZFXHU0RkREY29sZ3JvdXBcdTRFMERcdTRFM0FudWxsXHJcbiAgICAgICAgICAgIGlmIChjb2xncm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29sZ3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2N0U1XHU2MjdFXHU3Mjc5XHU1QjlBXHU0RjREXHU3RjZFXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gcm93SW5kZXggXHU4ODRDXHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gY29sSW5kZXggXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcmV0dXJucyBcdTUzNTVcdTUxNDNcdTY4M0NcdTUxNDNcdTdEMjBcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIGZpbmRDZWxsKHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoIDw9IHJvd0luZGV4KSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjZWxscyA9IHJvd3Nbcm93SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgIGlmICghY2VsbHMgfHwgY2VsbHMubGVuZ3RoIDw9IGNvbEluZGV4KSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2VsbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1Mzc4XHU4RjdEXHU2NUY2XHU3Njg0XHU2RTA1XHU3NDA2XHU1REU1XHU0RjVDXHJcbiAgICAgKi9cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0aGlzLnRhYmxlSWR9IFx1NzY4NFx1NjgzN1x1NUYwRlx1NkUzMlx1NjdEM1x1NTY2OFx1NURGMlx1NTM3OFx1OEY3RGApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBhcHBseVRhYmxlU3R5bGVzKHRhYmxlRWxlbWVudDogSFRNTEVsZW1lbnQsIHRhYmxlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICBpZiAodGFibGVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1zdHlsZXMtYXBwbGllZCcpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RkREXHU1QjU4XHU3Njg0XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSBkYXRhPy50YWJsZXM/Llt0YWJsZUlkXTtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEgfHwgIXRhYmxlRGF0YS5zdHlsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwXHU1MzM5XHU5MTREXHU3Njg0XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHVGRjFBJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RTk0XHU3NTI4XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGIC0gSUQ9JHt0YWJsZUlkfWAsIHRhYmxlRGF0YS5zdHlsaW5nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEOFxyXG4gICAgICAgICAgICBpZiAodGFibGVEYXRhLnN0eWxpbmcucm93SGVpZ2h0cyAmJiB0YWJsZURhdGEuc3R5bGluZy5yb3dIZWlnaHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLnJvd0hlaWdodHMuZm9yRWFjaCgoaGVpZ2h0OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCByb3dzLmxlbmd0aCAmJiBoZWlnaHQgJiYgaGVpZ2h0ICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJvd3NbaW5kZXhdIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVFOTRcdTc1MjhcdTg4NENcdTlBRDggLSBcdTdEMjJcdTVGMTU9JHtpbmRleH0sIFx1OUFEOFx1NUVBNj0ke2hlaWdodH1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEXHJcbiAgICAgICAgICAgIGlmICh0YWJsZURhdGEuc3R5bGluZy5jb2xXaWR0aHMgJiYgdGFibGVEYXRhLnN0eWxpbmcuY29sV2lkdGhzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjIxNlx1ODNCN1x1NTNENmNvbGdyb3VwXHU1MTQzXHU3RDIwXHJcbiAgICAgICAgICAgICAgICBsZXQgY29sZ3JvdXAgPSB0YWJsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgIGlmICghY29sZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVFbGVtZW50Lmluc2VydEJlZm9yZShjb2xncm91cCwgdGFibGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTczQjBcdTY3MDlcdTc2ODRjb2xcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgICAgICAgICBjb2xncm91cC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFjb2xcdTUxNDNcdTdEMjBcdTVFNzZcdThCQkVcdTdGNkVcdTVCQkRcdTVFQTZcclxuICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmNvbFdpZHRocy5mb3JFYWNoKCh3aWR0aDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29sJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoICYmIHdpZHRoICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkQgLSBcdTdEMjJcdTVGMTU9JHtpbmRleH0sIFx1NUJCRFx1NUVBNj0ke3dpZHRofWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRGRUVcdTU5MEQ6IFx1Nzg2RVx1NEZERGNvbGdyb3VwXHU0RTBEXHU0RTNBbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xncm91cC5hcHBlbmRDaGlsZChjb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTVCRjlcdTlGNTBcdTY1QjlcdTVGMEZcclxuICAgICAgICAgICAgaWYgKHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudCAmJiB0YWJsZURhdGEuc3R5bGluZy5hbGlnbm1lbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCwgY2VsbEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsSW5kZXggPCB0YWJsZURhdGEuc3R5bGluZy5hbGlnbm1lbnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlnbm1lbnQgPSB0YWJsZURhdGEuc3R5bGluZy5hbGlnbm1lbnRbY2VsbEluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2VsbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUudGV4dEFsaWduID0gYWxpZ25tZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGlmICh0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzICYmIHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlcy5mb3JFYWNoKChjZWxsU3R5bGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsU3R5bGUucm93ICE9PSB1bmRlZmluZWQgJiYgY2VsbFN0eWxlLmNvbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZS5yb3cgPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tjZWxsU3R5bGUucm93XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLCB0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZS5jb2wgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbY2VsbFN0eWxlLmNvbF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4MENDXHU2NjZGXHU5ODlDXHU4MjcyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZS5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjZWxsU3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY1ODdcdTY3MkNcdTk4OUNcdTgyNzJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLnRleHRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmNvbG9yID0gY2VsbFN0eWxlLnRleHRDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1QjU3XHU0RjUzXHU3Qzk3XHU3RUM2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZS5mb250V2VpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9IGNlbGxTdHlsZS5mb250V2VpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTVCNTdcdTRGNTNcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLmZvbnRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmZvbnRTdHlsZSA9IGNlbGxTdHlsZS5mb250U3R5bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1ODg2OFx1NjgzQ1x1NURGMlx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICB0YWJsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXN0eWxlcy1hcHBsaWVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUI5QVx1NzY4NENTU1x1N0M3QlxyXG4gICAgICAgICAgICB0YWJsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChgdGFibGUtJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFx1NUI4Q1x1NjIxMCAtIElEPSR7dGFibGVJZH1gKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTVFOTRcdTc1MjhcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgYXBwbHlQcmV2aWV3TW9kZVN0eWxlcyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU2RkMwXHU2RDNCXHVGRjBDXHU1RjAwXHU1OUNCXHU1RTk0XHU3NTI4XHU0RkREXHU1QjU4XHU3Njg0XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgY29uc3QgdGFibGVzID0gY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjI3RVx1NTIzMCAke3RhYmxlcy5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ1x1OTcwMFx1ODk4MVx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRmApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCF0YWJsZXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRFM0FcdTZCQ0ZcdTRFMkFcdTg4NjhcdTY4M0NcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhYmxlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRWxlbWVudCA9IHRhYmxlc1tpbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVJZCA9IHRhYmxlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCF0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4ODY4XHU2ODNDXHU2Q0ExXHU2NzA5SURcdUZGMENcdTVDMURcdThCRDVcdTRFQ0VcdTUxNzZcdTRFRDZcdTY1QjlcdTVGMEZcdTgzQjdcdTUzRDZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1NEVDRVx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NTQ4Q1x1ODg2OFx1NjgzQ1x1N0QyMlx1NUYxNVx1ODNCN1x1NTNENklEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlSWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5yZWFkVGFibGVJZEZyb21NYXJrZG93bih0YWJsZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RTNBXHU4ODY4XHU2ODNDXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGIC0gXHU3RDIyXHU1RjE1PSR7aW5kZXh9LCBJRD0ke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHBseVRhYmxlU3R5bGVzKHRhYmxlRWxlbWVudCwgdGFibGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1RTBcdTZDRDVcdTRFM0FcdTg4NjhcdTY4M0NcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEYgLSBcdTdEMjJcdTVGMTU9JHtpbmRleH0sIFx1NjcyQVx1NjI3RVx1NTIzMElEYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTVFOTRcdTc1MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NkUzMlx1NjdEM1x1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1x1NzY4NFx1NUI1OFx1NTBBOFx1NjgzN1x1NUYwRlxyXG4gKiBAcGFyYW0gcGx1Z2luIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlclRhYmxlc1dpdGhTdG9yZWRTdHlsZXMocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTUxRkRcdTY1NzBcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIGZ1bmN0aW9uIGdldEFwcCgpOiBBcHAge1xyXG4gICAgICAgIHJldHVybiAocGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luKS5hcHA7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTVGMDBcdTU5Q0JcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEYnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcclxuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRVx1RkYwQ1x1NjVFMFx1NkNENVx1NkUzMlx1NjdEM1x1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhY3RpdmVWaWV3LmZpbGU7XHJcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTY1ODdcdTRFRjZcdUZGMENcdTY1RTBcdTZDRDVcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEYnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGFjdGl2ZUZpbGUucGF0aDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0OiAke2ZpbGVQYXRofWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTk5Nlx1NTE0OFx1NUMxRFx1OEJENVx1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgbGV0IHRhYmxlczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NTIxRFx1NTlDQlx1NTMxNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjNEMFx1NTNENlx1NTY2OFx1RkYwQ1x1NTIxOVx1NEY3Rlx1NzUyOFx1NUI4M1x1NEVDRVx1NjU4N1x1NEVGNlx1NEUyRFx1NjNEMFx1NTNENlx1NjU3MFx1NjM2RVxyXG4gICAgICAgIGlmIChwbHVnaW4udGFibGVEYXRhRXh0cmFjdG9yKSB7XHJcbiAgICAgICAgICAgIHRhYmxlcyA9IGF3YWl0IHBsdWdpbi50YWJsZURhdGFFeHRyYWN0b3IuZXh0cmFjdFRhYmxlRGF0YUZyb21GaWxlKGFjdGl2ZUZpbGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdTYzRDBcdTUzRDZcdTUyMzAgJHtPYmplY3Qua2V5cyh0YWJsZXMpLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU2Q0ExXHU2NzA5XHU2M0QwXHU1M0Q2XHU1MjMwXHU2NTcwXHU2MzZFXHVGRjBDXHU1MjE5XHU1QzFEXHU4QkQ1XHU0RUNFZGF0YS5qc29uXHU0RTJEXHU4M0I3XHU1M0Q2XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRhYmxlcykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1NjcyQVx1NjNEMFx1NTNENlx1NTIzMFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1RkYwQ1x1NUMxRFx1OEJENVx1NEVDRWRhdGEuanNvblx1ODNCN1x1NTNENicpO1xyXG4gICAgICAgICAgICBjb25zdCBwbHVnaW5EYXRhID0gYXdhaXQgcGx1Z2luLmxvYWREYXRhKCkgfHwge307XHJcbiAgICAgICAgICAgIHRhYmxlcyA9IHBsdWdpbkRhdGEudGFibGVzIHx8IHt9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU1QjU4XHU1MEE4XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGlmICghdGFibGVzIHx8IE9iamVjdC5rZXlzKHRhYmxlcykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2Q0ExXHU2NzA5XHU1QjU4XHU1MEE4XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU0RTJEXHU3Njg0XHU2MjQwXHU2NzA5XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgY29uc3QgYWxsVGFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKTtcclxuICAgICAgICBpZiAoIWFsbFRhYmxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1NEUyRFx1NkNBMVx1NjcwOVx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdTRFMkRcdTY3MDkgJHthbGxUYWJsZXMubGVuZ3RofSBcdTRFMkFcdTg4NjhcdTY4M0NgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTZFMzJcdTY3RDNcdTk2MUZcdTUyMTdcclxuICAgICAgICBjb25zdCByZW5kZXJRdWV1ZSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1RkYwQ1x1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlSW5mb3MgPSBwbHVnaW4udGFibGVJZE1hbmFnZXIuZXh0cmFjdFRhYmxlSWRzRnJvbU1hcmtkb3duKGZpbGVDb250ZW50KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU0RTJEXHU2M0QwXHU1M0Q2XHU1MjMwICR7dGFibGVJbmZvcy5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RmApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NkJDRlx1NEUyQVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsVGFibGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gYWxsVGFibGVzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMS4gXHU5OTk2XHU1MTQ4XHU1QzFEXHU4QkQ1XHU0RUNFXHU4ODY4XHU2ODNDXHU1QzVFXHU2MDI3XHU0RTJEXHU4M0I3XHU1M0Q2SURcclxuICAgICAgICAgICAgbGV0IHRhYmxlSWQgPSB0YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDIuIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOUlEXHU1QzVFXHU2MDI3XHVGRjBDXHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHJcbiAgICAgICAgICAgIGlmICghdGFibGVJZCAmJiBpIDwgdGFibGVJbmZvcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlSWQgPSB0YWJsZUluZm9zW2ldLmlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU5MDFBXHU4RkM3XHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQ6ICR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVJRFx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIHRhYmxlSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLiBcdTU5ODJcdTY3OUNcdThGRDhcdTZDQTFcdTY3MDlJRFx1RkYwQ1x1NUMxRFx1OEJENVx1OTAxQVx1OEZDN1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFxyXG4gICAgICAgICAgICBpZiAoIXRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRmVhdHVyZSA9IHBsdWdpbi50YWJsZUlkTWFuYWdlci5leHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGJlc3RNYXRjaElkID0gJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmVzdE1hdGNoU2NvcmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgaWQsIGZlYXR1cmUgfSBvZiB0YWJsZUluZm9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NvcmUgPSBwbHVnaW4udGFibGVJZE1hbmFnZXIuY2FsY3VsYXRlRmVhdHVyZVNpbWlsYXJpdHkodGFibGVGZWF0dXJlLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0TWF0Y2hTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2hTY29yZSA9IHNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2hJZCA9IGlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGJlc3RNYXRjaElkICYmIGJlc3RNYXRjaFNjb3JlID4gMC43KSB7IC8vIDcwJVx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTZcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtiZXN0TWF0Y2hJZH1cdUZGMDhcdTc2RjhcdTRGM0NcdTVFQTY6ICR7YmVzdE1hdGNoU2NvcmUudG9GaXhlZCgyKX1cdUZGMDlgKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUlkID0gYmVzdE1hdGNoSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFSURcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCB0YWJsZUlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU1MjMwXHU0RTg2SURcdUZGMENcdTY3RTVcdTYyN0VcdTVCRjlcdTVFOTRcdTc2ODRcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgaWYgKHRhYmxlSWQgJiYgdGFibGVzW3RhYmxlSWRdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSB0YWJsZXNbdGFibGVJZF07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NUM1RVx1NEU4RVx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbkN1cnJlbnRGaWxlID0gdGFibGVEYXRhLmxvY2F0aW9ucz8uc29tZSgobG9jOiB7cGF0aDogc3RyaW5nfSkgPT4gbG9jLnBhdGggPT09IGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzSW5DdXJyZW50RmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFM0FcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTZERkJcdTUyQTBcdTZFMzJcdTY3RDNcdTRFRkJcdTUyQTFgKTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJRdWV1ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NkUzMlx1NjdEM1x1OTYxRlx1NTIxN1xyXG4gICAgICAgIGlmIChyZW5kZXJRdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVGMDBcdTU5Q0JcdTU5MDRcdTc0MDYgJHtyZW5kZXJRdWV1ZS5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ1x1NkUzMlx1NjdEM1x1NEVGQlx1NTJBMWApO1xyXG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzUmVuZGVyUXVldWUocmVuZGVyUXVldWUsIHBsdWdpbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NkNBMVx1NjcwOVx1OTcwMFx1ODk4MVx1NkUzMlx1NjdEM1x1NzY4NFx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU2RTMyXHU2N0QzXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NjI3OVx1OTFDRlx1NTkwNFx1NzQwNlx1NkUzMlx1NjdEM1x1OTYxRlx1NTIxN1xyXG4gKiBAcGFyYW0gcXVldWUgXHU2RTMyXHU2N0QzXHU5NjFGXHU1MjE3XHJcbiAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzUmVuZGVyUXVldWUocXVldWU6IGFueVtdLCBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjI3OVx1NTkwNFx1NzQwNlx1NTkyN1x1NUMwRlxyXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMzsgLy8gXHU1MUNGXHU1QzBGXHU2Mjc5XHU1OTA0XHU3NDA2XHU1OTI3XHU1QzBGXHVGRjBDXHU5MDdGXHU1MTREXHU2MDI3XHU4MEZEXHU5NUVFXHU5ODk4XHJcbiAgICBsZXQgcHJvY2Vzc2VkQ291bnQgPSAwO1xyXG4gICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBcdTVGMDBcdTU5Q0JcdTU5MDRcdTc0MDZcdTZFMzJcdTY3RDNcdTk2MUZcdTUyMTdcdUZGMENcdTUxNzEgJHtxdWV1ZS5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ2ApO1xyXG4gICAgXHJcbiAgICAvLyBcdTUyMUJcdTVFRkFcdTU5MDRcdTc0MDZcdTUxRkRcdTY1NzBcclxuICAgIGNvbnN0IHByb2Nlc3NCYXRjaCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTVGNTNcdTUyNERcdTYyNzlcdTZCMjFcdTc2ODRcdTdFRDNcdTY3NUZcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1pbihwcm9jZXNzZWRDb3VudCArIGJhdGNoU2l6ZSwgcXVldWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NUY1M1x1NTI0RFx1NjI3OVx1NkIyMVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcHJvY2Vzc2VkQ291bnQ7IGkgPCBlbmRJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRhYmxlLCB0YWJsZUlkLCB0YWJsZURhdGEgfSA9IHF1ZXVlW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTkwNFx1NzQwNlx1OTYxRlx1NTIxN1x1NEUyRFx1NzY4NFx1ODg2OFx1NjgzQyAke2krMX0vJHtxdWV1ZS5sZW5ndGh9IC0gSUQ9JHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCByZW5kZXJUYWJsZVdpdGhTdHlsZXModGFibGUgYXMgSFRNTEVsZW1lbnQsIHRhYmxlSWQsIHRhYmxlRGF0YSwgcGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQyAke3RhYmxlSWR9IFx1NjVGNlx1NTFGQVx1OTUxOTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NTkwNFx1NzQwNlx1OEJBMVx1NjU3MFxyXG4gICAgICAgICAgICBwcm9jZXNzZWRDb3VudCA9IGVuZEluZGV4O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4RkQ4XHU2NzA5XHU2NzJBXHU1OTA0XHU3NDA2XHU3Njg0XHU4ODY4XHU2ODNDXHVGRjBDXHU1Qjg5XHU2MzkyXHU0RTBCXHU0RTAwXHU2Mjc5XHJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzZWRDb3VudCA8IHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4cmVxdWVzdEFuaW1hdGlvbkZyYW1lXHU3ODZFXHU0RkREVUlcdTU0Q0RcdTVFOTRcdTYwMjdcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0JhdGNoKCkudGhlbihyZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1NjI3OVx1NkIyMVx1NjVGNlx1NTFGQVx1OTUxOTpcIiwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFx1NUYwMFx1NTlDQlx1NTkwNFx1NzQwNlx1N0IyQ1x1NEUwMFx1NjI3OVxyXG4gICAgYXdhaXQgcHJvY2Vzc0JhdGNoKCk7XHJcbiAgICBjb25zb2xlLmxvZyhgXHU1QjhDXHU2MjEwXHU0RTg2ICR7cHJvY2Vzc2VkQ291bnR9IFx1NEUyQVx1ODg2OFx1NjgzQ1x1NzY4NFx1NTkwNFx1NzQwNlx1RkYwQ1x1NjIxMFx1NTI5Rlx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRjogJHtzdWNjZXNzQ291bnR9YCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTRFM0FcdTUzNTVcdTRFMkFcdTg4NjhcdTY4M0NcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gKiBAcGFyYW0gdGFibGVJZCBcdTg4NjhcdTY4M0NJRFxyXG4gKiBAcGFyYW0gdGFibGVEYXRhIFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RVxyXG4gKiBAcGFyYW0gcGx1Z2luIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVuZGVyVGFibGVXaXRoU3R5bGVzKFxyXG4gICAgdGFibGU6IEhUTUxFbGVtZW50LCBcclxuICAgIHRhYmxlSWQ6IHN0cmluZywgXHJcbiAgICB0YWJsZURhdGE6IGFueSwgXHJcbiAgICBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXRcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTVGMDBcdTU5Q0JcdTRFM0FcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTVFOTRcdTc1MjhcdTRFODZcdTY4MzdcdTVGMEZcclxuICAgICAgICBpZiAodGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXN0eWxlcy1hcHBsaWVkJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU1REYyXHU3RUNGXHU1RTk0XHU3NTI4XHU0RTg2XHU2ODM3XHU1RjBGXHVGRjBDXHU4REYzXHU4RkM3YCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuICAgICAgICBpZiAoIXRhYmxlRGF0YS5zdHlsaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTZDQTFcdTY3MDlcdTY3MDlcdTY1NDhcdTc2ODRcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcclxuICAgICAgICBjb25zdCBjdHggPSBnZXRDb250ZXh0Rm9yVGFibGUodGFibGUsIHBsdWdpbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU1MjMwXHU0RTBBXHU0RTBCXHU2NTg3XHVGRjBDXHU0RjdGXHU3NTI4TWFya2Rvd25SZW5kZXJDaGlsZFxyXG4gICAgICAgIGlmIChjdHgpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGN0eC5hZGRDaGlsZChuZXcgVGFibGVTdHlsZVJlbmRlcmVyKHRhYmxlLCB0YWJsZUlkLCB0YWJsZURhdGEuc3R5bGluZywgcGx1Z2luKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU1REYyXHU0RjdGXHU3NTI4UmVuZGVyQ2hpbGRcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZgKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NEY3Rlx1NzUyOFJlbmRlckNoaWxkXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHU2NUY2XHU1MUZBXHU5NTE5OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1JlbmRlckNoaWxkXHU1OTMxXHU4RDI1XHVGRjBDXHU1NkRFXHU5MDAwXHU1MjMwXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHJcbiAgICAgICAgICAgICAgICBhcHBseVN0eWxlc0RpcmVjdGx5KHRhYmxlLCB0YWJsZURhdGEuc3R5bGluZyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU1NkRFXHU5MDAwXHU1MjMwXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTRFMEFcdTRFMEJcdTY1ODdcdUZGMENcdTc2RjRcdTYzQTVcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgYXBwbHlTdHlsZXNEaXJlY3RseSh0YWJsZSwgdGFibGVEYXRhLnN0eWxpbmcpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU1REYyXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1ODg2OFx1NjgzQ1x1NURGMlx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1zdHlsZXMtYXBwbGllZCcsICd0cnVlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU3Mjc5XHU1QjlBXHU3Njg0Q1NTXHU3QzdCXHJcbiAgICAgICAgaWYgKCF0YWJsZS5jbGFzc0xpc3QuY29udGFpbnMoYHRhYmxlLSR7dGFibGVJZH1gKSkge1xyXG4gICAgICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKGB0YWJsZS0ke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTY4MzdcdTVGMEZcdTVFOTRcdTc1MjhcdTVCOENcdTYyMTBgKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgXHU0RTNBXHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHU2NUY2XHU1MUZBXHU5NTE5OmAsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTc2ODRcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcclxuICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gKiBAcGFyYW0gcGx1Z2luIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gKiBAcmV0dXJucyBcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcdTYyMTZudWxsXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDb250ZXh0Rm9yVGFibGUodGFibGU6IEhUTUxFbGVtZW50LCBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpOiBhbnkge1xyXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHJcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgaWYgKCFhY3RpdmVWaWV3IHx8IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpICE9PSAncHJldmlldycpIHJldHVybiBudWxsO1xyXG4gICAgXHJcbiAgICAvLyBcdTVDMURcdThCRDVcdTgzQjdcdTUzRDZcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gXHU2NUI5XHU2Q0Q1MTogXHU5MDFBXHU4RkM3c2VjdGlvbi1pZFx1NUM1RVx1NjAyN1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25FbCA9IHRhYmxlLmNsb3Nlc3QoJ1tkYXRhLXNlY3Rpb24taWRdJyk7XHJcbiAgICAgICAgaWYgKHNlY3Rpb25FbCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBzZWN0aW9uRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNlY3Rpb24taWQnKTtcclxuICAgICAgICAgICAgaWYgKHNlY3Rpb25JZCAmJiBhY3RpdmVWaWV3LnByZXZpZXdNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gT2JzaWRpYW4gQVBJXHU1M0VGXHU4MEZEXHU2Q0ExXHU2NzA5XHU1QjhDXHU1MTY4XHU3QzdCXHU1NzhCXHU1MzE2XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9ucyA9IGFjdGl2ZVZpZXcucHJldmlld01vZGUucmVuZGVyZXI/LnNlY3Rpb25zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rpb25zICYmIHNlY3Rpb25zW3NlY3Rpb25JZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VjdGlvbnNbc2VjdGlvbklkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY1QjlcdTZDRDUyOiBcdTkwMUFcdThGQzdnZXRTZWN0aW9uSW5mbyBBUElcclxuICAgICAgICBpZiAoYWN0aXZlVmlldy5wcmV2aWV3TW9kZSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gT2JzaWRpYW4gQVBJXHU1M0VGXHU4MEZEXHU2Q0ExXHU2NzA5XHU1QjhDXHU1MTY4XHU3QzdCXHU1NzhCXHU1MzE2XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmZvID0gYWN0aXZlVmlldy5wcmV2aWV3TW9kZS5yZW5kZXJlcj8uZ2V0U2VjdGlvbkluZm8/Lih0YWJsZSk7XHJcbiAgICAgICAgICAgIGlmIChzZWN0aW9uSW5mbyAmJiBzZWN0aW9uSW5mby5zZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VjdGlvbkluZm8uc2VjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcdTU5MzFcdThEMjU6XCIsIGUpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHVGRjA4XHU1RjUzXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU2RTMyXHU2N0QzXHU0RTBBXHU0RTBCXHU2NTg3XHU2NUY2XHU3Njg0XHU1OTA3XHU3NTI4XHU2NUI5XHU2Q0Q1XHVGRjA5XHJcbiAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICogQHBhcmFtIHN0eWxpbmcgXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBseVN0eWxlc0RpcmVjdGx5KHRhYmxlOiBIVE1MRWxlbWVudCwgc3R5bGluZzogYW55KTogdm9pZCB7XHJcbiAgICBpZiAoIXN0eWxpbmcpIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8gXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICBpZiAoc3R5bGluZy5yb3dIZWlnaHRzICYmIEFycmF5LmlzQXJyYXkoc3R5bGluZy5yb3dIZWlnaHRzKSkge1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIHN0eWxpbmcucm93SGVpZ2h0cy5mb3JFYWNoKChoZWlnaHQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCByb3dzLmxlbmd0aCAmJiBoZWlnaHQgJiYgaGVpZ2h0ICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgIChyb3dzW2luZGV4XSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzZGNFx1NjNBNVx1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEOCAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU5QUQ4XHU1RUE2PSR7aGVpZ2h0fWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRFxyXG4gICAgaWYgKHN0eWxpbmcuY29sV2lkdGhzICYmIEFycmF5LmlzQXJyYXkoc3R5bGluZy5jb2xXaWR0aHMpKSB7XHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2MjE2XHU4M0I3XHU1M0Q2Y29sZ3JvdXBcdTUxNDNcdTdEMjBcclxuICAgICAgICBsZXQgY29sZ3JvdXAgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpO1xyXG4gICAgICAgIGlmICghY29sZ3JvdXApIHtcclxuICAgICAgICAgICAgY29sZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2xncm91cCcpO1xyXG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUoY29sZ3JvdXAsIHRhYmxlLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NzNCMFx1NjcwOVx1NzY4NGNvbFx1NTE0M1x1N0QyMFxyXG4gICAgICAgICAgICBjb2xncm91cC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBY29sXHU1MTQzXHU3RDIwXHU1RTc2XHU4QkJFXHU3RjZFXHU1QkJEXHU1RUE2XHJcbiAgICAgICAgc3R5bGluZy5jb2xXaWR0aHMuZm9yRWFjaCgod2lkdGg6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2wnKTtcclxuICAgICAgICAgICAgaWYgKHdpZHRoICYmIHdpZHRoICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgIGNvbC5zdHlsZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzZGNFx1NjNBNVx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRCAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU1QkJEXHU1RUE2PSR7d2lkdGh9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gXHU0RkVFXHU1OTBEOiBcdTc4NkVcdTRGRERjb2xncm91cFx1NEUwRFx1NEUzQW51bGxcclxuICAgICAgICAgICAgaWYgKGNvbGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xncm91cC5hcHBlbmRDaGlsZChjb2wpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJGOVx1OUY1MFxyXG4gICAgaWYgKHN0eWxpbmcuYWxpZ25tZW50ICYmIEFycmF5LmlzQXJyYXkoc3R5bGluZy5hbGlnbm1lbnQpKSB7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCwgY29sSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHlsaW5nLmFsaWdubWVudFtjb2xJbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAoY2VsbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUudGV4dEFsaWduID0gc3R5bGluZy5hbGlnbm1lbnRbY29sSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1RTk0XHU3NTI4XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICBpZiAoc3R5bGluZy5jZWxsU3R5bGVzICYmIEFycmF5LmlzQXJyYXkoc3R5bGluZy5jZWxsU3R5bGVzKSkge1xyXG4gICAgICAgIHN0eWxpbmcuY2VsbFN0eWxlcy5mb3JFYWNoKChzdHlsZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGUucm93ICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc3R5bGUuY29sICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIGlmICghcm93cyB8fCByb3dzLmxlbmd0aCA8PSBzdHlsZS5yb3cpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tzdHlsZS5yb3ddLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBpZiAoIWNlbGxzIHx8IGNlbGxzLmxlbmd0aCA8PSBzdHlsZS5jb2wpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tzdHlsZS5jb2xdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGlmIChzdHlsZS50ZXh0QWxpZ24pIGNlbGwuc3R5bGUudGV4dEFsaWduID0gc3R5bGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUudmVydGljYWxBbGlnbikgY2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gc3R5bGUudmVydGljYWxBbGlnbjtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmJhY2tncm91bmRDb2xvcikgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5jb2xvcikgY2VsbC5zdHlsZS5jb2xvciA9IHN0eWxlLmNvbG9yO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuZm9udFdlaWdodCkgY2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gc3R5bGUuZm9udFdlaWdodDtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmZvbnRTdHlsZSkgY2VsbC5zdHlsZS5mb250U3R5bGUgPSBzdHlsZS5mb250U3R5bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1N0M3Qlx1NTQwRFxyXG4gICAgY29uc3QgdGFibGVJZCA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKGB0YWJsZS0ke3RhYmxlSWR9YCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcmVuZGVyVGFibGVzV2l0aFN0b3JlZFN0eWxlcyB9IGZyb20gJy4vdGFibGVTdHlsZVJlbmRlcmVyJztcclxuXHJcbi8qKlxyXG4gKiBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTRFMkRcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICogQHJldHVybnMgXHU2NjJGXHU1NDI2XHU2MjdFXHU1MjMwXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kTWVyZ2VNYXJrZXJzKHRhYmxlOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgY2VsbHMgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgIGZvciAoY29uc3QgY2VsbCBvZiBBcnJheS5mcm9tKGNlbGxzKSkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQgPT09ICdeJyB8fCBjb250ZW50ID09PSAnPCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogXHU4QkJFXHU3RjZFXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU1NDhDXHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2XHU2RTMyXHU2N0QzXHJcbiAqIFx1OEZEOVx1NEUyQVx1NjU4N1x1NEVGNlx1NTMwNVx1NTQyQlx1NEU4Nlx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1ODg2OFx1NjgzQ1x1NTkwNFx1NzQwNlx1NzY4NFx1NjgzOFx1NUZDM1x1OTAzQlx1OEY5MVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUHJldmlld01vZGVUYWJsZVNlbGVjdGlvbihwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU1RjUzXHU1MjREXHU3RjE2XHU4RjkxXHU4ODY4XHU2ODNDXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgcGx1Z2luLmN1cnJlbnRFZGl0aW5nVGFibGUgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgIGNvbnN0IHRhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJyk7XHJcbiAgICAgICAgaWYgKCF0YWJsZXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NjI3RVx1NTIzMCAke3RhYmxlcy5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NEUzQVx1NkJDRlx1NEUyQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1NTQ4Q1x1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgIHRhYmxlcy5mb3JFYWNoKCh0YWJsZTogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2NUU3XHU3Njg0XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XHJcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGx1Z2luLmhhbmRsZVRhYmxlQ2xpY2spO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgICAgIHRhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGx1Z2luLmhhbmRsZVRhYmxlQ2xpY2spO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgIHBsdWdpbi50YWJsZURldGVjdG9yLnNldHVwVGFibGVJbmRpY2VzKHRhYmxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaW5kZXgnLCBpbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NUU3Nlx1NUI1OFx1NTBBOFx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NEUwQVxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUZlYXR1cmUgPSBwbHVnaW4udGFibGVJZE1hbmFnZXIuZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZSk7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NUMwNlx1NzI3OVx1NUY4MVx1NEZFMVx1NjA2Rlx1NUI1OFx1NTBBOFx1NEUzQUpTT05cdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1mZWF0dXJlJywgSlNPTi5zdHJpbmdpZnkodGFibGVGZWF0dXJlKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUI1OFx1NTBBOFx1ODg0Q1x1NTIxN1x1NjU3MFx1NEY1Q1x1NEUzQVx1NTM1NVx1NzJFQ1x1NzY4NFx1NUM1RVx1NjAyN1x1RkYwQ1x1NEZCRlx1NEU4RVx1NUZFQlx1OTAxRlx1OEJCRlx1OTVFRVxyXG4gICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXJvd3MnLCB0YWJsZUZlYXR1cmUucm93cy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xzJywgdGFibGVGZWF0dXJlLmNvbHMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUI1OFx1NTBBOFx1ODg2OFx1NjgzQ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlRmVhdHVyZS5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1wb3NpdGlvbicsIEpTT04uc3RyaW5naWZ5KHRhYmxlRmVhdHVyZS5wb3NpdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1OEJGQlx1NTNENlx1ODg2OFx1NjgzQ0lEXHU1RTc2XHU4QkJFXHU3RjZFXHU1MjMwXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWFkVGFibGVJZEZyb21NYXJrZG93bih0YWJsZSkudGhlbih0YWJsZUlkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgdGFibGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ0lEXHU1REYyXHU4QkJFXHU3RjZFOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzA2SURcdTU0OENcdTcyNzlcdTVGODFcdTRGRTFcdTYwNkZcdTUxNzNcdTgwNTRcdThENzdcdTY3NjVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1RkYwQ1x1NkRGQlx1NTJBMElEXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRmVhdHVyZS5pZCA9IHRhYmxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1mZWF0dXJlJywgSlNPTi5zdHJpbmdpZnkodGFibGVGZWF0dXJlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCRkJcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODA3XHU4QkIwXHVGRjA4XHU1OTgyXHU2NzlDXHU1NDJGXHU3NTI4XHU0RTg2XHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2XHU1MjlGXHU4MEZEXHVGRjA5XHJcbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTU5MDRcdTc0MDZcdThGQzdcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZS5kYXRhc2V0LnRhYmxlTWVyZ2VQcm9jZXNzZWQgIT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NEUyRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc01lcmdlTWFya2VycyA9IGZpbmRNZXJnZU1hcmtlcnModGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNNZXJnZU1hcmtlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NTMwNVx1NTQyQlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwQ1x1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NkUzMlx1NjdEM2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4udGFibGVEZXRlY3Rvci5hcHBseU1lcmdlQ2VsbHNNYXJrZXJzKHRhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTVCNThcdTUwQThcdTc2ODRcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAgICByZW5kZXJUYWJsZXNXaXRoU3RvcmVkU3R5bGVzKHBsdWdpbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1OEJCRVx1N0Y2RVx1NEU4Nlx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCQkVcdTdGNkVcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcblxyXG4vKipcclxuICogXHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1NjY4XHU3QzdCXHJcbiAqIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1ODg0Q1x1OUFEOFx1NTQ4Q1x1NTIxN1x1NUJCRFx1NzY4NFx1NjJENlx1NjJGRFx1OEMwM1x1NjU3NFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRhYmxlUmVzaXplciB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIHByaXZhdGUgYWN0aXZlVGFibGU6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHJlc2l6ZUhhbmRsZXM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuICAgIHByaXZhdGUgaXNSZXNpemluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50SGFuZGxlOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBzdGFydFg6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXJ0WTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhcnRXaWR0aDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhcnRIZWlnaHQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGNvbHVtbkluZGV4OiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgdGFibGVXaWR0aDogbnVtYmVyID0gMDtcclxuICAgIFxyXG4gICAgLy8gXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU4M0I3XHU1M0Q2YXBwXHU1QkY5XHU4QzYxXHJcbiAgICBwcml2YXRlIGdldEFwcCgpOiBBcHAge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4pLmFwcDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdGFyZ2V0SW5kZXg6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSByZXNpemVUeXBlOiAnY29sdW1uJyB8ICdyb3cnID0gJ2NvbHVtbic7XHJcbiAgICBwcml2YXRlIHJlc2l6ZUd1aWRlOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2Nzg0XHU5MDIwXHU1MUZEXHU2NTcwXHJcbiAgICAgKiBAcGFyYW0gcGx1Z2luIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTUyMURcdTU5Q0JcdTUzMTZcdTg4NjhcdTY4M0NcdTU5MjdcdTVDMEZcdThDMDNcdTY1NzRcdTU2NjgnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NjJENlx1NjJGRFx1OEMwM1x1NjU3NFx1NTkyN1x1NUMwRlx1NzY4NFx1NTI5Rlx1ODBGRFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBzZXR1cFRhYmxlUmVzaXplKHRhYmxlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1NEUzQVx1ODg2OFx1NjgzQ1x1OEJCRVx1N0Y2RVx1NTkyN1x1NUMwRlx1OEMwM1x1NjU3NFx1NTI5Rlx1ODBGRCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2NUU3XHU3Njg0XHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVzaXplSGFuZGxlcygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUgPSB0YWJsZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFxyXG4gICAgICAgICAgICB0aGlzLmFkZFJlc2l6ZUhhbmRsZXModGFibGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1MjlGXHU4MEZEXHU4QkJFXHU3RjZFXHU1QjhDXHU2MjEwJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGFibGVSZXNpemVyOiBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTU5MjdcdTVDMEZcdThDMDNcdTY1NzRcdTUyOUZcdTgwRkRcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMFx1NjJENlx1NjJGRFx1OEMwM1x1NjU3NFx1NTkyN1x1NUMwRlx1NzY4NFx1NTNFNVx1NjdDNFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFkZFJlc2l6ZUhhbmRsZXModGFibGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU2REZCXHU1MkEwXHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU4ODY4XHU2ODNDXHU2NzA5XHU3NkY4XHU1QkY5XHU1QjlBXHU0RjREXHVGRjBDXHU0RUU1XHU0RkJGXHU2QjYzXHU3ODZFXHU1QjlBXHU0RjREXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgdGFibGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NFx1NjI0MFx1NjcwOVx1ODg0Q1x1NTQ4Q1x1NTIxN1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RhYmxlUmVzaXplcjogXHU4ODY4XHU2ODNDXHU2Q0ExXHU2NzA5XHU4ODRDJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmlyc3RSb3dDZWxscyA9IHJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJyk7XHJcbiAgICAgICAgaWYgKGZpcnN0Um93Q2VsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGFibGVSZXNpemVyOiBcdTg4NjhcdTY4M0NcdTdCMkNcdTRFMDBcdTg4NENcdTZDQTFcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTg4NjhcdTY4M0NcdTY3MDkgJHtyb3dzLmxlbmd0aH0gXHU4ODRDLCAke2ZpcnN0Um93Q2VsbHMubGVuZ3RofSBcdTUyMTdgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUyMTdcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpcnN0Um93Q2VsbHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBmaXJzdFJvd0NlbGxzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q2VsbCA9IGZpcnN0Um93Q2VsbHNbaSArIDFdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsUmVjdCA9IGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlUmVjdCA9IHRhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU1M0U1XHU2N0M0XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUxlZnQgPSBjZWxsLm9mZnNldExlZnQgKyBjZWxsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1MjE3XHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuY2xhc3NOYW1lID0gJ3RhYmxlLXJlc2l6ZS1oYW5kbGUtY29sJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLnRvcCA9ICcwJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLmxlZnQgPSBgJHtoYW5kbGVMZWZ0fXB4YDtcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLndpZHRoID0gJzVweCc7XHJcbiAgICAgICAgICAgIGNvbEhhbmRsZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIGNvbEhhbmRsZS5zdHlsZS5jdXJzb3IgPSAnY29sLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgIGNvbEhhbmRsZS5zdHlsZS56SW5kZXggPSAnMTAwJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLmRhdGFzZXQuaW5kZXggPSBpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbEhhbmRsZS5kYXRhc2V0LnR5cGUgPSAnY29sdW1uJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTZERkJcdTUyQTBcdTUyMTdcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzQgLSBcdTdEMjJcdTVGMTU9JHtpfSwgXHU0RjREXHU3RjZFPSR7aGFuZGxlTGVmdH1weGApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSGFuZGxlRXZlbnRMaXN0ZW5lcnMoY29sSGFuZGxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChjb2xIYW5kbGUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXMucHVzaChjb2xIYW5kbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTg4NENcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRSb3cgPSByb3dzW2kgKyAxXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3Qgcm93UmVjdCA9IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgdGFibGVSZWN0ID0gdGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTUzRTVcdTY3QzRcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlVG9wID0gcm93Lm9mZnNldFRvcCArIHJvdy5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTg4NENcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICAgICAgY29uc3Qgcm93SGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5jbGFzc05hbWUgPSAndGFibGUtcmVzaXplLWhhbmRsZS1yb3cnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUubGVmdCA9ICcwJztcclxuICAgICAgICAgICAgcm93SGFuZGxlLnN0eWxlLnRvcCA9IGAke2hhbmRsZVRvcH1weGA7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5zdHlsZS5oZWlnaHQgPSAnNXB4JztcclxuICAgICAgICAgICAgcm93SGFuZGxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUuY3Vyc29yID0gJ3Jvdy1yZXNpemUnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUuekluZGV4ID0gJzEwMCc7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5kYXRhc2V0LmluZGV4ID0gaS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuZGF0YXNldC50eXBlID0gJ3Jvdyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU2REZCXHU1MkEwXHU4ODRDXHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0IC0gXHU3RDIyXHU1RjE1PSR7aX0sIFx1NEY0RFx1N0Y2RT0ke2hhbmRsZVRvcH1weGApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSGFuZGxlRXZlbnRMaXN0ZW5lcnMocm93SGFuZGxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3dIYW5kbGUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXMucHVzaChyb3dIYW5kbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEUzQVx1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxyXG4gICAgICogQHBhcmFtIGhhbmRsZSBcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcdTUxNDNcdTdEMjBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRIYW5kbGVFdmVudExpc3RlbmVycyhoYW5kbGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlTW91c2VEb3duLmJpbmQodGhpcykpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjBBQ1x1NTA1Q1x1NjU0OFx1Njc5Q1xyXG4gICAgICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSZXNpemluZyB8fCB0aGlzLmN1cnJlbnRIYW5kbGUgIT09IGhhbmRsZSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTkwNFx1NzQwNlx1OUYyMFx1NjgwN1x1NjMwOVx1NEUwQlx1NEU4Qlx1NEVGNlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFx1OUYyMFx1NjgwN1x1NEU4Qlx1NEVGNlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZU1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVx1NTQ4Q1x1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgY29uc3QgaGFuZGxlID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY3VycmVudEhhbmRsZSA9IGhhbmRsZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyRDZcdTYyRkRcdTdDN0JcdTU3OEJcdTU0OENcdTc2RUVcdTY4MDdcdTdEMjJcdTVGMTVcclxuICAgICAgICB0aGlzLnJlc2l6ZVR5cGUgPSBoYW5kbGUuZGF0YXNldC50eXBlIGFzICdjb2x1bW4nIHwgJ3Jvdyc7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IHBhcnNlSW50KGhhbmRsZS5kYXRhc2V0LmluZGV4IHx8ICctMScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NUYwMFx1NTlDQlx1NjJENlx1NjJGRCAtIFx1N0M3Qlx1NTc4Qj0ke3RoaXMucmVzaXplVHlwZX0sIFx1N0QyMlx1NUYxNT0ke3RoaXMudGFyZ2V0SW5kZXh9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkIwXHU1RjU1XHU4RDc3XHU1OUNCXHU0RjREXHU3RjZFXHU1NDhDXHU1QzNBXHU1QkY4XHJcbiAgICAgICAgdGhpcy5zdGFydFggPSBldmVudC5jbGllbnRYO1xyXG4gICAgICAgIHRoaXMuc3RhcnRZID0gZXZlbnQuY2xpZW50WTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVUeXBlID09PSAnY29sdW1uJykge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbChgdHI6Zmlyc3QtY2hpbGQgPiAqOm50aC1jaGlsZCgke3RoaXMudGFyZ2V0SW5kZXggKyAxfSlgKTtcclxuICAgICAgICAgICAgaWYgKGNlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1swXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRXaWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTUyMTdcdTUyMURcdTU5Q0JcdTVCQkRcdTVFQTY9JHt0aGlzLnN0YXJ0V2lkdGh9cHhgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoYHRyOm50aC1jaGlsZCgke3RoaXMudGFyZ2V0SW5kZXggKyAxfSlgKTtcclxuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1swXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRIZWlnaHQgPSByb3cub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU4ODRDXHU1MjFEXHU1OUNCXHU5QUQ4XHU1RUE2PSR7dGhpcy5zdGFydEhlaWdodH1weGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OEMwM1x1NjU3NFx1NTkyN1x1NUMwRlx1NzY4NFx1OEY4NVx1NTJBOVx1N0VCRlxyXG4gICAgICAgIHRoaXMuY3JlYXRlUmVzaXplR3VpZGUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdThDMDNcdTY1NzRcdTcyQjZcdTYwMDFcclxuICAgICAgICB0aGlzLmlzUmVzaXppbmcgPSB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OUYyMFx1NjgwN1x1NzlGQlx1NTJBOFx1NTQ4Q1x1Njc3RVx1NUYwMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW91c2VNb3ZlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXAuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMUJcdTVFRkFcdThDMDNcdTY1NzRcdTU5MjdcdTVDMEZcdTc2ODRcdThGODVcdTUyQTlcdTdFQkZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXNpemVHdWlkZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUgfHwgIXRoaXMuY3VycmVudEhhbmRsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OEY4NVx1NTJBOVx1N0VCRlx1NTE0M1x1N0QyMFxyXG4gICAgICAgIGNvbnN0IGd1aWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZ3VpZGUuY2xhc3NOYW1lID0gYHRhYmxlLXJlc2l6ZS1ndWlkZSB0YWJsZS1yZXNpemUtZ3VpZGUtJHt0aGlzLnJlc2l6ZVR5cGV9YDtcclxuICAgICAgICBndWlkZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgZ3VpZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xyXG4gICAgICAgIGd1aWRlLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVUeXBlID09PSAnY29sdW1uJykge1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS53aWR0aCA9ICcycHgnO1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIGd1aWRlLnN0eWxlLnRvcCA9ICcwJztcclxuICAgICAgICAgICAgZ3VpZGUuc3R5bGUubGVmdCA9IHRoaXMuY3VycmVudEhhbmRsZS5zdHlsZS5sZWZ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd1aWRlLnN0eWxlLmhlaWdodCA9ICcycHgnO1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgZ3VpZGUuc3R5bGUubGVmdCA9ICcwJztcclxuICAgICAgICAgICAgZ3VpZGUuc3R5bGUudG9wID0gdGhpcy5jdXJyZW50SGFuZGxlLnN0eWxlLnRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5hcHBlbmRDaGlsZChndWlkZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVHdWlkZSA9IGd1aWRlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1NTIxQlx1NUVGQVx1OEMwM1x1NjU3NFx1NTkyN1x1NUMwRlx1OEY4NVx1NTJBOVx1N0VCRicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1OTA0XHU3NDA2XHU5RjIwXHU2ODA3XHU3OUZCXHU1MkE4XHU0RThCXHU0RUY2XHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgXHU5RjIwXHU2ODA3XHU0RThCXHU0RUY2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVzaXppbmcgfHwgIXRoaXMuYWN0aXZlVGFibGUgfHwgIXRoaXMuY3VycmVudEhhbmRsZSB8fCAhdGhpcy5yZXNpemVHdWlkZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1OUYyMFx1NjgwN1x1NzlGQlx1NTJBOFx1OERERFx1NzlCQlxyXG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLnN0YXJ0WDtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5zdGFydFk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU4Rjg1XHU1MkE5XHU3RUJGXHU0RjREXHU3RjZFXHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplVHlwZSA9PT0gJ2NvbHVtbicpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGVmdCA9IHBhcnNlSW50KHRoaXMuY3VycmVudEhhbmRsZS5zdHlsZS5sZWZ0KSArIGRlbHRhWDtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZS5zdHlsZS5sZWZ0ID0gYCR7bmV3TGVmdH1weGA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1OEMwM1x1NjU3NFx1NTIxN1x1OEY4NVx1NTJBOVx1N0VCRiAtIFx1NEY0RFx1N0Y2RT0ke25ld0xlZnR9cHhgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdUb3AgPSBwYXJzZUludCh0aGlzLmN1cnJlbnRIYW5kbGUuc3R5bGUudG9wKSArIGRlbHRhWTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZS5zdHlsZS50b3AgPSBgJHtuZXdUb3B9cHhgO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdThDMDNcdTY1NzRcdTg4NENcdThGODVcdTUyQTlcdTdFQkYgLSBcdTRGNERcdTdGNkU9JHtuZXdUb3B9cHhgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTlGMjBcdTY4MDdcdTY3N0VcdTVGMDBcdTRFOEJcdTRFRjZcclxuICAgICAqIEBwYXJhbSBldmVudCBcdTlGMjBcdTY4MDdcdTRFOEJcdTRFRjZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVNb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVzaXppbmcgfHwgIXRoaXMuYWN0aXZlVGFibGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTdFRDNcdTY3NUZcdTYyRDZcdTYyRkQnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdThERERcdTc5QkJcclxuICAgICAgICBjb25zdCBkZWx0YVggPSBldmVudC5jbGllbnRYIC0gdGhpcy5zdGFydFg7XHJcbiAgICAgICAgY29uc3QgZGVsdGFZID0gZXZlbnQuY2xpZW50WSAtIHRoaXMuc3RhcnRZO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjVCMFx1NzY4NFx1NUMzQVx1NUJGOFxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVR5cGUgPT09ICdjb2x1bW4nICYmIHRoaXMudGFyZ2V0SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdXaWR0aCA9IE1hdGgubWF4KDIwLCB0aGlzLnN0YXJ0V2lkdGggKyBkZWx0YVgpOyAvLyBcdTY3MDBcdTVDMEZcdTVCQkRcdTVFQTYyMHB4XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDb2x1bW5XaWR0aCh0aGlzLnRhcmdldEluZGV4LCBuZXdXaWR0aCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NUU5NFx1NzUyOFx1NjVCMFx1NTIxN1x1NUJCRCAtIFx1N0QyMlx1NUYxNT0ke3RoaXMudGFyZ2V0SW5kZXh9LCBcdTVCQkRcdTVFQTY9JHtuZXdXaWR0aH1weGApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemVUeXBlID09PSAncm93JyAmJiB0aGlzLnRhcmdldEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC5tYXgoMjAsIHRoaXMuc3RhcnRIZWlnaHQgKyBkZWx0YVkpOyAvLyBcdTY3MDBcdTVDMEZcdTlBRDhcdTVFQTYyMHB4XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSb3dIZWlnaHQodGhpcy50YXJnZXRJbmRleCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU1RTk0XHU3NTI4XHU2NUIwXHU4ODRDXHU5QUQ4IC0gXHU3RDIyXHU1RjE1PSR7dGhpcy50YXJnZXRJbmRleH0sIFx1OUFEOFx1NUVBNj0ke25ld0hlaWdodH1weGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTVDM0FcdTVCRjhcdTY1NzBcdTYzNkVcclxuICAgICAgICB0aGlzLnNhdmVUYWJsZVNpemVEYXRhKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU4Rjg1XHU1MkE5XHU3RUJGXHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplR3VpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTFDRFx1N0Y2RVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIHRoaXMuaXNSZXNpemluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRFxyXG4gICAgICogQHBhcmFtIGNvbEluZGV4IFx1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIHdpZHRoIFx1NUJCRFx1NUVBNlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5Q29sdW1uV2lkdGgoY29sSW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NGNvbGdyb3VwXHJcbiAgICAgICAgbGV0IGNvbGdyb3VwID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpO1xyXG4gICAgICAgIGlmICghY29sZ3JvdXApIHtcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5Y29sZ3JvdXBcdUZGMENcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcclxuICAgICAgICAgICAgY29sZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2xncm91cCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU2QkNGXHU0RTAwXHU1MjE3XHU1MjFCXHU1RUZBY29sXHU1MTQzXHU3RDIwXHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yKCd0cicpO1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RSb3cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxDb3VudCA9IGZpcnN0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLCB0ZCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2wnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xncm91cC5hcHBlbmRDaGlsZChjb2wpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMzBcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZS5wcmVwZW5kKGNvbGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1QkY5XHU1RTk0XHU3Njg0Y29sXHU1MTQzXHU3RDIwXHJcbiAgICAgICAgY29uc3QgY29scyA9IGNvbGdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvbCcpO1xyXG4gICAgICAgIGlmIChjb2xJbmRleCA8IGNvbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGNvbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICAgKiBAcGFyYW0gcm93SW5kZXggXHU4ODRDXHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IFx1OUFEOFx1NUVBNlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5Um93SGVpZ2h0KHJvd0luZGV4OiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1QkY5XHU1RTk0XHU3Njg0XHU4ODRDXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICBpZiAocm93SW5kZXggPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd0luZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgcm93LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU1QzNBXHU1QkY4XHU2NTcwXHU2MzZFXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVRhYmxlU2l6ZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJZCA9IHRoaXMuYWN0aXZlVGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICAgICAgICAgIGlmICghdGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUYWJsZVJlc2l6ZXI6IFx1NjVFMFx1NkNENVx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RVx1RkYwQ1x1ODg2OFx1NjgzQ1x1NkNBMVx1NjcwOUlEJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RSAtIFx1ODg2OFx1NjgzQ0lEPSR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1NTIxN1x1NUJCRFx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBjb25zdCBjb2xXaWR0aHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGdyb3VwID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpO1xyXG4gICAgICAgICAgICBpZiAoY29sZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBjb2xncm91cC5xdWVyeVNlbGVjdG9yQWxsKCdjb2wnKTtcclxuICAgICAgICAgICAgICAgIGNvbHMuZm9yRWFjaChjb2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gKGNvbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUud2lkdGggfHwgJ2F1dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRocy5wdXNoKHdpZHRoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDljb2xncm91cFx1NjIxNmNvbHNcdUZGMENcdTRFQ0VcdTg4NjhcdTY4M0NcdTdCMkNcdTRFMDBcdTg4NENcdTgzQjdcdTUzRDZcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgaWYgKGNvbFdpZHRocy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Um93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvdW50ID0gZmlyc3RSb3cucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzLnB1c2goJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1ODg0Q1x1OUFEOFx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBjb25zdCByb3dIZWlnaHRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChyb3cgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmhlaWdodCB8fCAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICByb3dIZWlnaHRzLnB1c2goaGVpZ2h0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTY1MzZcdTk2QzZcdTc2ODRcdTVDM0FcdTVCRjhcdTY1NzBcdTYzNkUnLCB7IGNvbFdpZHRocywgcm93SGVpZ2h0cyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBsZXQgYWxsRGF0YSA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCkgfHwge307XHJcbiAgICAgICAgICAgIGlmICghYWxsRGF0YS50YWJsZXMpIHtcclxuICAgICAgICAgICAgICAgIGFsbERhdGEudGFibGVzID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGFibGVSZXNpemVyOiBcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdThERUZcdTVGODQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGlmICghYWxsRGF0YS50YWJsZXNbdGFibGVJZF0pIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRhYmxlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RydWN0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0NvdW50OiByb3dzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sQ291bnQ6IGNvbFdpZHRocy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0hlYWRlcnM6IHJvd3MubGVuZ3RoID4gMCAmJiByb3dzWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzOiByb3dIZWlnaHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aHM6IGNvbFdpZHRocyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBcnJheShjb2xXaWR0aHMubGVuZ3RoKS5maWxsKCdsZWZ0JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxTdHlsZXM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU1MjFCXHU1RUZBXHU0RTg2XHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFIC0gSUQ9JHt0YWJsZUlkfWAsIGFsbERhdGEudGFibGVzW3RhYmxlSWRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NzNCMFx1NjcwOVx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5zdHlsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0uc3R5bGluZyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERsb2NhdGlvbnNcdTUzMDVcdTU0MkJcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgIGlmICghYWxsRGF0YS50YWJsZXNbdGFibGVJZF0ubG9jYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0ubG9jYXRpb25zID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogYWN0aXZlRmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdTY2MkZcdTU0MjZcdTVERjJcdTU3Mjhsb2NhdGlvbnNcdTRFMkRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aEV4aXN0cyA9IGFsbERhdGEudGFibGVzW3RhYmxlSWRdLmxvY2F0aW9ucy5zb21lKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobG9jOiB7cGF0aDogc3RyaW5nfSkgPT4gbG9jLnBhdGggPT09IGFjdGl2ZUZpbGUucGF0aFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWxlUGF0aEV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5sb2NhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0uc3R5bGluZy5yb3dIZWlnaHRzID0gcm93SGVpZ2h0cztcclxuICAgICAgICAgICAgICAgIGFsbERhdGEudGFibGVzW3RhYmxlSWRdLnN0eWxpbmcuY29sV2lkdGhzID0gY29sV2lkdGhzO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTUxNzZcdTRFRDZcdTdFRDNcdTY3ODRcdTY1NzBcdTYzNkVcdTZCNjNcdTc4NkVcclxuICAgICAgICAgICAgICAgIGFsbERhdGEudGFibGVzW3RhYmxlSWRdLnN0cnVjdHVyZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICByb3dDb3VudDogcm93cy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sQ291bnQ6IGNvbFdpZHRocy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogcm93cy5sZW5ndGggPiAwICYmIHJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgnKS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTY2RjRcdTY1QjBcdTRFODZcdTczQjBcdTY3MDlcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkUgLSBJRD0ke3RhYmxlSWR9YCwgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEoYWxsRGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1ODg2OFx1NjgzQ1x1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3QUNCXHU1MzczXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHU1MjMwXHU4ODY4XHU2ODNDXHVGRjBDXHU3ODZFXHU0RkREXHU4OUM2XHU4OUM5XHU1M0NEXHU5OTg4XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDdXJyZW50U2l6ZXMoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUYWJsZVJlc2l6ZXI6IFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1N0FDQlx1NTM3M1x1NUU5NFx1NzUyOFx1NUY1M1x1NTI0RFx1NUMzQVx1NUJGOFx1NTIzMFx1ODg2OFx1NjgzQ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5Q3VycmVudFNpemVzKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRFxyXG4gICAgICAgICAgICBjb25zdCBjb2xncm91cCA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKTtcclxuICAgICAgICAgICAgaWYgKGNvbGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gY29sZ3JvdXAucXVlcnlTZWxlY3RvckFsbCgnY29sJyk7XHJcbiAgICAgICAgICAgICAgICBjb2xzLmZvckVhY2goKGNvbCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IChjb2wgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTdBQ0JcdTUzNzNcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkQgLSBcdTdEMjJcdTVGMTU9JHtpbmRleH0sIFx1NUJCRFx1NUVBNj0ke3dpZHRofWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTg4NENcdTlBRDhcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3csIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSAocm93IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU3QUNCXHU1MzczXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4IC0gXHU3RDIyXHU1RjE1PSR7aW5kZXh9LCBcdTlBRDhcdTVFQTY9JHtoZWlnaHR9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RhYmxlUmVzaXplcjogXHU1RTk0XHU3NTI4XHU1RjUzXHU1MjREXHU1QzNBXHU1QkY4XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlUmVzaXplSGFuZGxlcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTc5RkJcdTk2NjRcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzQnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTUzRTVcdTY3QzRcclxuICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXMuZm9yRWFjaChoYW5kbGUgPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGUucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU1M0U1XHU2N0M0XHU2NTcwXHU3RUM0XHJcbiAgICAgICAgdGhpcy5yZXNpemVIYW5kbGVzID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU4Rjg1XHU1MkE5XHU3RUJGXHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplR3VpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHdWlkZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2RTA1XHU3NDA2XHU4RDQ0XHU2RTkwXHJcbiAgICAgKi9cclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU2RTA1XHU3NDA2XHU4RDQ0XHU2RTkwJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgdGhpcy5yZW1vdmVSZXNpemVIYW5kbGVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5MUNEXHU3RjZFXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SGFuZGxlID0gbnVsbDtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYmxlRGF0YSwgVGFibGVMb2NhdGlvbiwgVGFibGVTdHJ1Y3R1cmUsIFRhYmxlU3R5bGluZywgVGFibGVGZWF0dXJlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcblxuLyoqXG4gKiBcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTYzRDBcdTUzRDZcdTU2NjhcbiAqIFx1NzUyOFx1NEU4RVx1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXG4gKi9cbmV4cG9ydCBjbGFzcyBUYWJsZURhdGFFeHRyYWN0b3Ige1xuICAgIHByaXZhdGUgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcbiAgICBwcml2YXRlIGdldEFwcCgpOiBBcHAge1xuICAgICAgICByZXR1cm4gKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luKS5hcHA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU0RUNFXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXG4gICAgICogQHBhcmFtIGZpbGUgXHU2NTg3XHU0RUY2XHU1QkY5XHU4QzYxXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkY5XHU4QzYxXHVGRjBDXHU5NTJFXHU0RTNBXHU4ODY4XHU2ODNDSURcbiAgICAgKi9cbiAgICBhc3luYyBleHRyYWN0VGFibGVEYXRhRnJvbUZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIFRhYmxlRGF0YT4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmdldEFwcCgpLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NUI1OFx1NTBBOFx1NjNEMFx1NTNENlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBUYWJsZURhdGE+ID0ge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTMzOVx1OTE0REpTT05cdTY4M0NcdTVGMEZcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcbiAgICAgICAgICAgIGNvbnN0IGpzb25Db2RlQmxvY2tSZWdleCA9IC9gYGBqc29uOnRhYmxlLWRhdGFcXHMqXFxuKFtcXHNcXFNdKj8pXFxuYGBgL2c7XG4gICAgICAgICAgICBsZXQganNvbk1hdGNoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoKGpzb25NYXRjaCA9IGpzb25Db2RlQmxvY2tSZWdleC5leGVjKGZpbGVDb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uU3RyID0ganNvbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2NTcwXHU3RUM0XHU2MjE2XHU1MzU1XHU0RTJBXHU1QkY5XHU4QzYxXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb25EYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2NTcwXHU3RUM0XHU1RjYyXHU1RjBGXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhYmxlRGF0YSBvZiBqc29uRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZURhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGFibGVEYXRhT2JqZWN0KHRhYmxlRGF0YSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvbkRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTM1NVx1NEUyQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGFibGVEYXRhT2JqZWN0KGpzb25EYXRhLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwSlNPTlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUzMzlcdTkxNERDU1ZcdTY4M0NcdTVGMEZcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcbiAgICAgICAgICAgIGNvbnN0IGNzdkNvZGVCbG9ja1JlZ2V4ID0gL2BgYGNzdjp0YWJsZS1kYXRhXFxzKlxcbihbXFxzXFxTXSo/KVxcbmBgYC9nO1xuICAgICAgICAgICAgbGV0IGNzdk1hdGNoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoKGNzdk1hdGNoID0gY3N2Q29kZUJsb2NrUmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3N2U3RyID0gY3N2TWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjc3ZMaW5lcyA9IGNzdlN0ci5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoY3N2TGluZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3QjJDXHU0RTAwXHU4ODRDXHU0RjVDXHU0RTNBXHU4ODY4XHU1OTM0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gY3N2TGluZXNbMF0uc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2QkNGXHU0RTAwXHU4ODRDXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNzdkxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gY3N2TGluZXNbaV0uc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZURhdGE6IGFueSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUMwNkNTVlx1ODg0Q1x1OEY2Q1x1NjM2Mlx1NEUzQVx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaGVhZGVycy5sZW5ndGggJiYgaiA8IHZhbHVlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1ODlFM1x1Njc5MEpTT05cdTVCNTdcdTZCQjVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGFbaGVhZGVyc1tqXV0gPSBKU09OLnBhcnNlKHZhbHVlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTRFMERcdTY2MkZKU09OXHVGRjBDXHU1MjE5XHU0RjVDXHU0RTNBXHU1QjU3XHU3QjI2XHU0RTMyXHU1OTA0XHU3NDA2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhW2hlYWRlcnNbal1dID0gdmFsdWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZURhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGFibGVEYXRhT2JqZWN0KHRhYmxlRGF0YSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBDU1ZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MzM5XHU5MTREXHU4MUVBXHU1QjlBXHU0RTQ5XHU2ODNDXHU1RjBGIGBgYHRhYmxlLWRhdGEgXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICBjb25zdCBjdXN0b21Db2RlQmxvY2tSZWdleCA9IC9gYGB0YWJsZS1kYXRhXFxzKlxcbihbXFxzXFxTXSo/KVxcbmBgYC9nO1xuICAgICAgICAgICAgbGV0IGN1c3RvbU1hdGNoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoKGN1c3RvbU1hdGNoID0gY3VzdG9tQ29kZUJsb2NrUmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tU3RyID0gY3VzdG9tTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21MaW5lcyA9IGN1c3RvbVN0ci5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTZCQ0ZcdTRFMDBcdTg4NENcdTgxRUFcdTVCOUFcdTRFNDlcdTY4M0NcdTVGMEZcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGN1c3RvbUxpbmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSB0aGlzLnBhcnNlQ3VzdG9tVGFibGVEYXRhRm9ybWF0KGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlRGF0YSAmJiB0YWJsZURhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbdGFibGVEYXRhLmlkXSA9IHRhYmxlRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODlFM1x1Njc5MFx1ODFFQVx1NUI5QVx1NEU0OVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDSURcdTU0OENcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdFRhYmxlRGF0YUZyb21Db21tZW50cyhmaWxlQ29udGVudCwgcmVzdWx0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogXHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ0lEXHU1NDhDXHU2NTcwXHU2MzZFXG4gICAgICogQHBhcmFtIGZpbGVDb250ZW50IFx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxuICAgICAqIEBwYXJhbSByZXN1bHQgXHU3RUQzXHU2NzlDXHU1QkY5XHU4QzYxXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0VGFibGVEYXRhRnJvbUNvbW1lbnRzKGZpbGVDb250ZW50OiBzdHJpbmcsIHJlc3VsdDogUmVjb3JkPHN0cmluZywgVGFibGVEYXRhPik6IHZvaWQge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gXHU1MzM5XHU5MTRESFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHU1NDhDXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICAvLyBcdTY4M0NcdTVGMEY6IDwhLS0gdGFibGUtaWQ6IElEIHwga2V5MTogdmFsdWUxIHwga2V5MjogdmFsdWUyIC0tPlxuICAgICAgICAgICAgY29uc3QgY29tbWVudFJlZ2V4ID0gLzwhLS1cXHMqdGFibGUtaWQ6XFxzKihbXFx3LV0rKSg/OlxccypcXHxcXHMqKFtePl0qKSk/XFxzKi0tPi9nO1xuICAgICAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gY29tbWVudFJlZ2V4LmV4ZWMoZmlsZUNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVN0cmluZyA9IG1hdGNoWzJdID8gbWF0Y2hbMl0udHJpbSgpIDogbnVsbDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGFibGVJZCAmJiBkYXRhU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODlFM1x1Njc5MFx1NkNFOFx1OTFDQVx1NEUyRFx1NzY4NFx1NjU3MFx1NjM2RVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSB0aGlzLnBhcnNlQ3VzdG9tVGFibGVEYXRhRm9ybWF0KGAke3RhYmxlSWR9fCR7ZGF0YVN0cmluZ31gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlRGF0YSAmJiB0YWJsZURhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFt0YWJsZURhdGEuaWRdID0gdGFibGVEYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJsZUlkICYmICFyZXN1bHRbdGFibGVJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1M0VBXHU2NzA5SURcdTZDQTFcdTY3MDlcdTY1NzBcdTYzNkVcdUZGMENcdTRFMTRcdTdFRDNcdTY3OUNcdTRFMkRcdThGRDhcdTZDQTFcdTY3MDlcdThGRDlcdTRFMkFJRFx1NzY4NFx1NjU3MFx1NjM2RVx1RkYwQ1x1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1N0E3QVx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbdGFibGVJZF0gPSB0aGlzLmNyZWF0ZUVtcHR5VGFibGVEYXRhKHRhYmxlSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1NTIxQlx1NUVGQVx1N0E3QVx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFxuICAgICAqIEBwYXJhbSB0YWJsZUlkIFx1ODg2OFx1NjgzQ0lEXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkY5XHU4QzYxXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVFbXB0eVRhYmxlRGF0YSh0YWJsZUlkOiBzdHJpbmcpOiBUYWJsZURhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRhYmxlSWQsXG4gICAgICAgICAgICBsb2NhdGlvbnM6IFtdLFxuICAgICAgICAgICAgc3RydWN0dXJlOiB7XG4gICAgICAgICAgICAgICAgcm93Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgY29sQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgaGFzSGVhZGVyczogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHlsaW5nOiB7XG4gICAgICAgICAgICAgICAgcm93SGVpZ2h0czogW10sXG4gICAgICAgICAgICAgICAgY29sV2lkdGhzOiBbXSxcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAqIEBwYXJhbSB0YWJsZURhdGEgXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkY5XHU4QzYxXG4gICAgICogQHBhcmFtIHJlc3VsdCBcdTdFRDNcdTY3OUNcdTVCRjlcdThDNjFcbiAgICAgKi9cbiAgICBwcml2YXRlIHByb2Nlc3NUYWJsZURhdGFPYmplY3QodGFibGVEYXRhOiBhbnksIHJlc3VsdDogUmVjb3JkPHN0cmluZywgVGFibGVEYXRhPik6IHZvaWQge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU2NTcwXHU2MzZFXHU3RUQzXHU2Nzg0XHU1QjhDXHU2NTc0XG4gICAgICAgICAgICBpZiAoIXRhYmxlRGF0YS5zdHJ1Y3R1cmUpIHtcbiAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3RydWN0dXJlID0ge1xuICAgICAgICAgICAgICAgICAgICByb3dDb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgY29sQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGhhc0hlYWRlcnM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEuc3R5bGluZykge1xuICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nID0ge1xuICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50OiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGFibGVEYXRhLmxvY2F0aW9ucykge1xuICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5sb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU3RUQzXHU2NzlDXHU1QkY5XHU4QzYxXG4gICAgICAgICAgICByZXN1bHRbdGFibGVEYXRhLmlkXSA9IHRhYmxlRGF0YTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogXHU4OUUzXHU2NzkwXHU4MUVBXHU1QjlBXHU0RTQ5XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2ODNDXHU1RjBGXG4gICAgICogXHU2ODNDXHU1RjBGOiB0YWJsZUlkfGtleTE6dmFsdWUxfGtleTI6dmFsdWUyLC4uLlxuICAgICAqIEBwYXJhbSBsaW5lIFx1ODFFQVx1NUI5QVx1NEU0OVx1NjgzQ1x1NUYwRlx1NjU3MFx1NjM2RVx1ODg0Q1xuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAqL1xuICAgIHBhcnNlQ3VzdG9tVGFibGVEYXRhRm9ybWF0KGxpbmU6IHN0cmluZyk6IFRhYmxlRGF0YSB8IG51bGwge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7XG4gICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1N0IyQ1x1NEUwMFx1OTBFOFx1NTIwNlx1NjYyRlx1ODg2OFx1NjgzQ0lEXG4gICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gcGFydHNbMF0udHJpbSgpO1xuICAgICAgICAgICAgaWYgKCF0YWJsZUlkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkY5XHU4QzYxXG4gICAgICAgICAgICBjb25zdCB0YWJsZURhdGE6IFRhYmxlRGF0YSA9IHRoaXMuY3JlYXRlRW1wdHlUYWJsZURhdGEodGFibGVJZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1ODlFM1x1Njc5MFx1NTE3Nlx1NEY1OVx1OTBFOFx1NTIwNlx1NEY1Q1x1NEUzQVx1OTUyRVx1NTAzQ1x1NUJGOVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleVZhbHVlID0gcGFydHNbaV0uc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5VmFsdWUubGVuZ3RoICE9PSAyKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlWYWx1ZVswXS50cmltKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBrZXlWYWx1ZVsxXS50cmltKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU5NTJFXHU1NDBEXHU1OTA0XHU3NDA2XHU0RTBEXHU1NDBDXHU3QzdCXHU1NzhCXHU3Njg0XHU1MDNDXG4gICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd3JhcHBlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTg4NjhcdTY4M0NcdTUzMDVcdTg4QzVcdTU2NjhcdThCQkVcdTdGNkVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHJ1Y3R1cmUudXNlVGFibGVXcmFwcGVyID0gdmFsdWUgPT09ICd0cnVlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjE3XHU1QkJEXHU4QkJFXHU3RjZFXHVGRjBDXHU2ODNDXHU1RjBGOiB3aWR0aDpjb2wxLGNvbDIsY29sMywuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmNvbFdpZHRocyA9IHZhbHVlLnNwbGl0KCcsJykubWFwKHcgPT4gdy50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGlnbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVCRjlcdTlGNTBcdTY1QjlcdTVGMEZcdThCQkVcdTdGNkVcdUZGMENcdTY4M0NcdTVGMEY6IGFsaWduOmxlZnQsY2VudGVyLHJpZ2h0LC4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50ID0gdmFsdWUuc3BsaXQoJywnKS5tYXAoYSA9PiBhLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTg4NENcdTlBRDhcdThCQkVcdTdGNkVcdUZGMENcdTY4M0NcdTVGMEY6IGhlaWdodDpyb3cxLHJvdzIscm93MywuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLnJvd0hlaWdodHMgPSB2YWx1ZS5zcGxpdCgnLCcpLm1hcChoID0+IGgudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1M0VGXHU0RUU1XHU2REZCXHU1MkEwXHU2NkY0XHU1OTFBXHU4MUVBXHU1QjlBXHU0RTQ5XHU1QzVFXHU2MDI3XHU3Njg0XHU1OTA0XHU3NDA2XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGFibGVEYXRhO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU4MUVBXHU1QjlBXHU0RTQ5XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2ODNDXHU1RjBGXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1NUI4Q1x1NTU4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1RkYwQ1x1NjgzOVx1NjM2RVx1NUI5RVx1OTY0NVx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVx1ODFFQVx1NTJBOFx1NTg2Qlx1NTE0NVx1N0YzQVx1NTkzMVx1NzY4NFx1N0VEM1x1Njc4NFx1NEZFMVx1NjA2RlxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcbiAgICAgKiBAcGFyYW0gdGFibGVEYXRhIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAqIEByZXR1cm5zIFx1NUI4Q1x1NTU4NFx1NTQwRVx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAqL1xuICAgIGVuaGFuY2VUYWJsZURhdGEodGFibGU6IEhUTUxFbGVtZW50LCB0YWJsZURhdGE6IFRhYmxlRGF0YSk6IFRhYmxlRGF0YSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1NjVCMFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVx1RkYwQ1x1OTA3Rlx1NTE0RFx1NEZFRVx1NjUzOVx1NTM5Rlx1NTlDQlx1NUJGOVx1OEM2MVxuICAgICAgICBjb25zdCBlbmhhbmNlZERhdGE6IFRhYmxlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGFibGVEYXRhKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTc2ODRcdTg4NENcdTU0OENcdTUyMTdcdTY1NzBcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XG4gICAgICAgIGNvbnN0IHJvd0NvdW50ID0gcm93cy5sZW5ndGg7XG4gICAgICAgIGxldCBjb2xDb3VudCA9IDA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTg4NjhcdTU5MzRcbiAgICAgICAgY29uc3QgaGFzSGVhZGVyUm93ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQnKSAhPT0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NjcwMFx1NTkyN1x1NTIxN1x1NjU3MFxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxDb3VudCA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKS5sZW5ndGg7XG4gICAgICAgICAgICBjb2xDb3VudCA9IE1hdGgubWF4KGNvbENvdW50LCBjZWxsQ291bnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1N0VEM1x1Njc4NFx1NEZFMVx1NjA2RlxuICAgICAgICBpZiAoIWVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUucm93Q291bnQgfHwgZW5oYW5jZWREYXRhLnN0cnVjdHVyZS5yb3dDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZW5oYW5jZWREYXRhLnN0cnVjdHVyZS5yb3dDb3VudCA9IHJvd0NvdW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUuY29sQ291bnQgfHwgZW5oYW5jZWREYXRhLnN0cnVjdHVyZS5jb2xDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZW5oYW5jZWREYXRhLnN0cnVjdHVyZS5jb2xDb3VudCA9IGNvbENvdW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZW5oYW5jZWREYXRhLnN0cnVjdHVyZS5oYXNIZWFkZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUuaGFzSGVhZGVycyA9IGhhc0hlYWRlclJvdztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU2ODM3XHU1RjBGXHU2NTcwXHU3RUM0XHU5NTdGXHU1RUE2XHU1MzM5XHU5MTREXG4gICAgICAgIGlmICghZW5oYW5jZWREYXRhLnN0eWxpbmcucm93SGVpZ2h0cyB8fCBlbmhhbmNlZERhdGEuc3R5bGluZy5yb3dIZWlnaHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZW5oYW5jZWREYXRhLnN0eWxpbmcucm93SGVpZ2h0cyA9IEFycmF5KHJvd0NvdW50KS5maWxsKCdhdXRvJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghZW5oYW5jZWREYXRhLnN0eWxpbmcuY29sV2lkdGhzIHx8IGVuaGFuY2VkRGF0YS5zdHlsaW5nLmNvbFdpZHRocy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHlsaW5nLmNvbFdpZHRocyA9IEFycmF5KGNvbENvdW50KS5maWxsKCdhdXRvJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghZW5oYW5jZWREYXRhLnN0eWxpbmcuYWxpZ25tZW50IHx8IGVuaGFuY2VkRGF0YS5zdHlsaW5nLmFsaWdubWVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIFx1OUVEOFx1OEJBNFx1N0IyQ1x1NEUwMFx1NTIxN1x1NURFNlx1NUJGOVx1OUY1MFx1RkYwQ1x1NTE3Nlx1NEY1OVx1NTNGM1x1NUJGOVx1OUY1MFxuICAgICAgICAgICAgZW5oYW5jZWREYXRhLnN0eWxpbmcuYWxpZ25tZW50ID0gQXJyYXkoY29sQ291bnQpLmZpbGwoJ3JpZ2h0Jyk7XG4gICAgICAgICAgICBpZiAoY29sQ291bnQgPiAwKSBlbmhhbmNlZERhdGEuc3R5bGluZy5hbGlnbm1lbnRbMF0gPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBlbmhhbmNlZERhdGE7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1NUMwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGQ1x1NTFGQVx1NTIzME1hcmtkb3duXHU2NTg3XHU0RUY2XG4gICAgICogQHBhcmFtIGZpbGUgXHU2NTg3XHU0RUY2XHU1QkY5XHU4QzYxXG4gICAgICogQHBhcmFtIHRhYmxlSWQgXHU4ODY4XHU2ODNDSURcbiAgICAgKiBAcGFyYW0gdGFibGVEYXRhIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAqL1xuICAgIGFzeW5jIGV4cG9ydFRhYmxlRGF0YVRvRmlsZShmaWxlOiBURmlsZSwgdGFibGVJZDogc3RyaW5nLCB0YWJsZURhdGE6IFRhYmxlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFmaWxlIHx8ICF0YWJsZUlkIHx8ICF0YWJsZURhdGEpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU4QkZCXHU1M0Q2XHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmdldEFwcCgpLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTFDNlx1NTkwN1x1ODk4MVx1NUJGQ1x1NTFGQVx1NzY4NFx1NjU3MFx1NjM2RVxuICAgICAgICAgICAgY29uc3QgZGF0YVRvRXhwb3J0ID0gSlNPTi5zdHJpbmdpZnkodGFibGVEYXRhLCBudWxsLCAyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NTg3XHU0RUY2XHU0RTJEXHU2NjJGXHU1NDI2XHU1REYyXHU1QjU4XHU1NzI4XHU4QkU1XHU4ODY4XHU2ODNDXHU3Njg0XHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICBjb25zdCBqc29uQmxvY2tSZWdleCA9IG5ldyBSZWdFeHAoJ2BgYGpzb246dGFibGUtZGF0YVxccypcXG4oW1xcc1xcU10qPylcXG5gYGAnLCAnZycpO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjZGRlx1NjM2Mlx1NzNCMFx1NjcwOVx1NzY4NFx1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1xuICAgICAgICAgICAgZmlsZUNvbnRlbnQgPSBmaWxlQ29udGVudC5yZXBsYWNlKGpzb25CbG9ja1JlZ2V4LCAobWF0Y2gsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTc2RUVcdTY4MDdcdTg4NjhcdTY4M0NcdTc2ODRcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgICAgICAgICAgaWYgKChBcnJheS5pc0FycmF5KGpzb25EYXRhKSAmJiBqc29uRGF0YS5zb21lKChpdGVtOiBhbnkpID0+IGl0ZW0uaWQgPT09IHRhYmxlSWQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGpzb25EYXRhLmlkID09PSB0YWJsZUlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdgYGBqc29uOnRhYmxlLWRhdGFcXG4nICsgZGF0YVRvRXhwb3J0ICsgJ1xcbmBgYCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU2NjJGXHU3NkVFXHU2ODA3XHU4ODY4XHU2ODNDXHU3Njg0XHU2NTcwXHU2MzZFXHVGRjBDXHU0RkREXHU2MzAxXHU0RTBEXHU1M0Q4XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjI3RVx1NTIzMFx1NzNCMFx1NjcwOVx1NzY4NFx1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1x1RkYwQ1x1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NFx1NEVFM1x1NzgwMVx1NTc1N1xuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1NjU4N1x1NEVGNlx1NjcyQlx1NUMzRVx1NkRGQlx1NTJBMFx1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1xuICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9ICdcXG5cXG5gYGBqc29uOnRhYmxlLWRhdGFcXG4nICsgZGF0YVRvRXhwb3J0ICsgJ1xcbmBgYCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NEZFRVx1NjUzOVx1NTQwRVx1NzY4NFx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBcHAoKS52YXVsdC5tb2RpZnkoZmlsZSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU1QzA2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkZDXHU1MUZBXHU1MjMwXHU2NTg3XHU0RUY2OiAke2ZpbGUucGF0aH0sIFx1ODg2OFx1NjgzQ0lEOiAke3RhYmxlSWR9YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTVCRkNcdTUxRkFcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTUyMzBcdTY1ODdcdTRFRjZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLDhDQUFBQSxTQUFBO0FBQUEsS0FBQyxTQUFVLFFBQVEsU0FBUztBQUMzQixhQUFPLFlBQVksWUFBWSxPQUFPQSxZQUFXLGNBQWNBLFFBQU8sVUFBVSxRQUFRLElBQ3hGLE9BQU8sV0FBVyxjQUFjLE9BQU8sTUFBTSxPQUFPLE9BQU8sSUFDMUQsT0FBTyxRQUFRLFFBQVE7QUFBQSxJQUN6QixHQUFFLFNBQU8sV0FBWTtBQUFFO0FBRXRCLGVBQVMscUJBQXFCLElBQUlBLFNBQVE7QUFDekMsZUFBT0EsVUFBUyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEdBQUcsR0FBR0EsU0FBUUEsUUFBTyxPQUFPLEdBQUdBLFFBQU87QUFBQSxNQUNyRTtBQUVBLFVBQUksVUFBVSxxQkFBcUIsU0FBVUEsU0FBUTtBQUVyRCxZQUFJLFNBQVNBLFFBQU8sVUFBVSxPQUFPLFVBQVUsZUFBZSxPQUFPLFFBQVEsT0FDekUsU0FBUyxPQUFPLFFB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QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHVCQUE2QjtBQUU1QixVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDhCQUFZO0FBQ3RFLFFBQUksQ0FBQztBQUFZO0FBR2pCLFVBQU0sZ0JBQWdCLFdBQVcsUUFBUSxNQUFNO0FBRy9DLFFBQUksaUJBQWlCLENBQUMsS0FBSyxzQkFBc0I7QUFFaEQsaUJBQVcsTUFBTTtBQUNoQixxQ0FBNkIsSUFBSTtBQUFBLE1BQ2xDLEdBQUcsR0FBRztBQUFBLElBQ1A7QUFHQSxTQUFLLHVCQUF1QjtBQUFBLEVBQzdCO0FBQ0Q7QUFHQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJkb2N1bWVudCIsICJrZXkiLCAiYyIsICJzb3VyY2UiLCAiZXhwb3J0cyIsICJwb3MiLCAiY29kZVBvaW50QXQiLCAiZnJvbUNvZGVQb2ludCIsICJwYXJzZSIsICJ0b2tlbiIsICJidWZmZXIiLCAic3RyaW5naWZ5IiwgInN0YWNrIiwgInZhbHVlIiwgImkiLCAibGlzdCIsICJKU09ONSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImhlYWRlckNvbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY29sU3BhbiIsICJyb3dTcGFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiY2VsbCIsICJyb3dJbmRleCIsICJjb2xJbmRleCIsICJhY3RpdmVWaWV3IiwgImV2ZW50IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImV2ZW50IiwgImV2ZW50Il0KfQo=

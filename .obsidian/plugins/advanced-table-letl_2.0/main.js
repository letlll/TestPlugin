/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/json5/dist/index.js
var require_dist = __commonJS({
  "node_modules/json5/dist/index.js"(exports, module2) {
    (function(global, factory) {
      typeof exports === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define(factory) : global.JSON5 = factory();
    })(exports, function() {
      "use strict";
      function createCommonjsModule(fn, module3) {
        return module3 = { exports: {} }, fn(module3, module3.exports), module3.exports;
      }
      var _global = createCommonjsModule(function(module3) {
        var global = module3.exports = typeof window != "undefined" && window.Math == Math ? window : typeof self != "undefined" && self.Math == Math ? self : Function("return this")();
        if (typeof __g == "number") {
          __g = global;
        }
      });
      var _core = createCommonjsModule(function(module3) {
        var core = module3.exports = { version: "2.6.5" };
        if (typeof __e == "number") {
          __e = core;
        }
      });
      var _core_1 = _core.version;
      var _isObject = function(it) {
        return typeof it === "object" ? it !== null : typeof it === "function";
      };
      var _anObject = function(it) {
        if (!_isObject(it)) {
          throw TypeError(it + " is not an object!");
        }
        return it;
      };
      var _fails = function(exec) {
        try {
          return !!exec();
        } catch (e) {
          return true;
        }
      };
      var _descriptors = !_fails(function() {
        return Object.defineProperty({}, "a", { get: function() {
          return 7;
        } }).a != 7;
      });
      var document2 = _global.document;
      var is = _isObject(document2) && _isObject(document2.createElement);
      var _domCreate = function(it) {
        return is ? document2.createElement(it) : {};
      };
      var _ie8DomDefine = !_descriptors && !_fails(function() {
        return Object.defineProperty(_domCreate("div"), "a", { get: function() {
          return 7;
        } }).a != 7;
      });
      var _toPrimitive = function(it, S) {
        if (!_isObject(it)) {
          return it;
        }
        var fn, val;
        if (S && typeof (fn = it.toString) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        if (typeof (fn = it.valueOf) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        if (!S && typeof (fn = it.toString) == "function" && !_isObject(val = fn.call(it))) {
          return val;
        }
        throw TypeError("Can't convert object to primitive value");
      };
      var dP = Object.defineProperty;
      var f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {
        _anObject(O);
        P = _toPrimitive(P, true);
        _anObject(Attributes);
        if (_ie8DomDefine) {
          try {
            return dP(O, P, Attributes);
          } catch (e) {
          }
        }
        if ("get" in Attributes || "set" in Attributes) {
          throw TypeError("Accessors not supported!");
        }
        if ("value" in Attributes) {
          O[P] = Attributes.value;
        }
        return O;
      };
      var _objectDp = {
        f
      };
      var _propertyDesc = function(bitmap, value) {
        return {
          enumerable: !(bitmap & 1),
          configurable: !(bitmap & 2),
          writable: !(bitmap & 4),
          value
        };
      };
      var _hide = _descriptors ? function(object, key2, value) {
        return _objectDp.f(object, key2, _propertyDesc(1, value));
      } : function(object, key2, value) {
        object[key2] = value;
        return object;
      };
      var hasOwnProperty = {}.hasOwnProperty;
      var _has = function(it, key2) {
        return hasOwnProperty.call(it, key2);
      };
      var id = 0;
      var px = Math.random();
      var _uid = function(key2) {
        return "Symbol(".concat(key2 === void 0 ? "" : key2, ")_", (++id + px).toString(36));
      };
      var _library = false;
      var _shared = createCommonjsModule(function(module3) {
        var SHARED = "__core-js_shared__";
        var store = _global[SHARED] || (_global[SHARED] = {});
        (module3.exports = function(key2, value) {
          return store[key2] || (store[key2] = value !== void 0 ? value : {});
        })("versions", []).push({
          version: _core.version,
          mode: _library ? "pure" : "global",
          copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)"
        });
      });
      var _functionToString = _shared("native-function-to-string", Function.toString);
      var _redefine = createCommonjsModule(function(module3) {
        var SRC = _uid("src");
        var TO_STRING = "toString";
        var TPL = ("" + _functionToString).split(TO_STRING);
        _core.inspectSource = function(it) {
          return _functionToString.call(it);
        };
        (module3.exports = function(O, key2, val, safe) {
          var isFunction = typeof val == "function";
          if (isFunction) {
            _has(val, "name") || _hide(val, "name", key2);
          }
          if (O[key2] === val) {
            return;
          }
          if (isFunction) {
            _has(val, SRC) || _hide(val, SRC, O[key2] ? "" + O[key2] : TPL.join(String(key2)));
          }
          if (O === _global) {
            O[key2] = val;
          } else if (!safe) {
            delete O[key2];
            _hide(O, key2, val);
          } else if (O[key2]) {
            O[key2] = val;
          } else {
            _hide(O, key2, val);
          }
        })(Function.prototype, TO_STRING, function toString() {
          return typeof this == "function" && this[SRC] || _functionToString.call(this);
        });
      });
      var _aFunction = function(it) {
        if (typeof it != "function") {
          throw TypeError(it + " is not a function!");
        }
        return it;
      };
      var _ctx = function(fn, that, length) {
        _aFunction(fn);
        if (that === void 0) {
          return fn;
        }
        switch (length) {
          case 1:
            return function(a) {
              return fn.call(that, a);
            };
          case 2:
            return function(a, b) {
              return fn.call(that, a, b);
            };
          case 3:
            return function(a, b, c2) {
              return fn.call(that, a, b, c2);
            };
        }
        return function() {
          return fn.apply(that, arguments);
        };
      };
      var PROTOTYPE = "prototype";
      var $export = function(type, name, source2) {
        var IS_FORCED = type & $export.F;
        var IS_GLOBAL = type & $export.G;
        var IS_STATIC = type & $export.S;
        var IS_PROTO = type & $export.P;
        var IS_BIND = type & $export.B;
        var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];
        var exports2 = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});
        var expProto = exports2[PROTOTYPE] || (exports2[PROTOTYPE] = {});
        var key2, own, out, exp;
        if (IS_GLOBAL) {
          source2 = name;
        }
        for (key2 in source2) {
          own = !IS_FORCED && target && target[key2] !== void 0;
          out = (own ? target : source2)[key2];
          exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == "function" ? _ctx(Function.call, out) : out;
          if (target) {
            _redefine(target, key2, out, type & $export.U);
          }
          if (exports2[key2] != out) {
            _hide(exports2, key2, exp);
          }
          if (IS_PROTO && expProto[key2] != out) {
            expProto[key2] = out;
          }
        }
      };
      _global.core = _core;
      $export.F = 1;
      $export.G = 2;
      $export.S = 4;
      $export.P = 8;
      $export.B = 16;
      $export.W = 32;
      $export.U = 64;
      $export.R = 128;
      var _export = $export;
      var ceil = Math.ceil;
      var floor = Math.floor;
      var _toInteger = function(it) {
        return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
      };
      var _defined = function(it) {
        if (it == void 0) {
          throw TypeError("Can't call method on  " + it);
        }
        return it;
      };
      var _stringAt = function(TO_STRING) {
        return function(that, pos2) {
          var s = String(_defined(that));
          var i = _toInteger(pos2);
          var l = s.length;
          var a, b;
          if (i < 0 || i >= l) {
            return TO_STRING ? "" : void 0;
          }
          a = s.charCodeAt(i);
          return a < 55296 || a > 56319 || i + 1 === l || (b = s.charCodeAt(i + 1)) < 56320 || b > 57343 ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 55296 << 10) + (b - 56320) + 65536;
        };
      };
      var $at = _stringAt(false);
      _export(_export.P, "String", {
        // 21.1.3.3 String.prototype.codePointAt(pos)
        codePointAt: function codePointAt2(pos2) {
          return $at(this, pos2);
        }
      });
      var codePointAt = _core.String.codePointAt;
      var max = Math.max;
      var min = Math.min;
      var _toAbsoluteIndex = function(index, length) {
        index = _toInteger(index);
        return index < 0 ? max(index + length, 0) : min(index, length);
      };
      var fromCharCode = String.fromCharCode;
      var $fromCodePoint = String.fromCodePoint;
      _export(_export.S + _export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), "String", {
        // 21.1.2.2 String.fromCodePoint(...codePoints)
        fromCodePoint: function fromCodePoint2(x) {
          var arguments$1 = arguments;
          var res = [];
          var aLen = arguments.length;
          var i = 0;
          var code;
          while (aLen > i) {
            code = +arguments$1[i++];
            if (_toAbsoluteIndex(code, 1114111) !== code) {
              throw RangeError(code + " is not a valid code point");
            }
            res.push(
              code < 65536 ? fromCharCode(code) : fromCharCode(((code -= 65536) >> 10) + 55296, code % 1024 + 56320)
            );
          }
          return res.join("");
        }
      });
      var fromCodePoint = _core.String.fromCodePoint;
      var Space_Separator = /[\u1680\u2000-\u200A\u202F\u205F\u3000]/;
      var ID_Start = /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;
      var ID_Continue = /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
      var unicode = {
        Space_Separator,
        ID_Start,
        ID_Continue
      };
      var util = {
        isSpaceSeparator: function isSpaceSeparator(c2) {
          return typeof c2 === "string" && unicode.Space_Separator.test(c2);
        },
        isIdStartChar: function isIdStartChar(c2) {
          return typeof c2 === "string" && (c2 >= "a" && c2 <= "z" || c2 >= "A" && c2 <= "Z" || c2 === "$" || c2 === "_" || unicode.ID_Start.test(c2));
        },
        isIdContinueChar: function isIdContinueChar(c2) {
          return typeof c2 === "string" && (c2 >= "a" && c2 <= "z" || c2 >= "A" && c2 <= "Z" || c2 >= "0" && c2 <= "9" || c2 === "$" || c2 === "_" || c2 === "\u200C" || c2 === "\u200D" || unicode.ID_Continue.test(c2));
        },
        isDigit: function isDigit(c2) {
          return typeof c2 === "string" && /[0-9]/.test(c2);
        },
        isHexDigit: function isHexDigit(c2) {
          return typeof c2 === "string" && /[0-9A-Fa-f]/.test(c2);
        }
      };
      var source;
      var parseState;
      var stack;
      var pos;
      var line;
      var column;
      var token;
      var key;
      var root;
      var parse2 = function parse3(text, reviver) {
        source = String(text);
        parseState = "start";
        stack = [];
        pos = 0;
        line = 1;
        column = 0;
        token = void 0;
        key = void 0;
        root = void 0;
        do {
          token = lex();
          parseStates[parseState]();
        } while (token.type !== "eof");
        if (typeof reviver === "function") {
          return internalize({ "": root }, "", reviver);
        }
        return root;
      };
      function internalize(holder, name, reviver) {
        var value = holder[name];
        if (value != null && typeof value === "object") {
          if (Array.isArray(value)) {
            for (var i = 0; i < value.length; i++) {
              var key2 = String(i);
              var replacement = internalize(value, key2, reviver);
              if (replacement === void 0) {
                delete value[key2];
              } else {
                Object.defineProperty(value, key2, {
                  value: replacement,
                  writable: true,
                  enumerable: true,
                  configurable: true
                });
              }
            }
          } else {
            for (var key$1 in value) {
              var replacement$1 = internalize(value, key$1, reviver);
              if (replacement$1 === void 0) {
                delete value[key$1];
              } else {
                Object.defineProperty(value, key$1, {
                  value: replacement$1,
                  writable: true,
                  enumerable: true,
                  configurable: true
                });
              }
            }
          }
        }
        return reviver.call(holder, name, value);
      }
      var lexState;
      var buffer;
      var doubleQuote;
      var sign;
      var c;
      function lex() {
        lexState = "default";
        buffer = "";
        doubleQuote = false;
        sign = 1;
        for (; ; ) {
          c = peek();
          var token2 = lexStates[lexState]();
          if (token2) {
            return token2;
          }
        }
      }
      function peek() {
        if (source[pos]) {
          return String.fromCodePoint(source.codePointAt(pos));
        }
      }
      function read() {
        var c2 = peek();
        if (c2 === "\n") {
          line++;
          column = 0;
        } else if (c2) {
          column += c2.length;
        } else {
          column++;
        }
        if (c2) {
          pos += c2.length;
        }
        return c2;
      }
      var lexStates = {
        default: function default$1() {
          switch (c) {
            case "	":
            case "\v":
            case "\f":
            case " ":
            case "\xA0":
            case "\uFEFF":
            case "\n":
            case "\r":
            case "\u2028":
            case "\u2029":
              read();
              return;
            case "/":
              read();
              lexState = "comment";
              return;
            case void 0:
              read();
              return newToken("eof");
          }
          if (util.isSpaceSeparator(c)) {
            read();
            return;
          }
          return lexStates[parseState]();
        },
        comment: function comment() {
          switch (c) {
            case "*":
              read();
              lexState = "multiLineComment";
              return;
            case "/":
              read();
              lexState = "singleLineComment";
              return;
          }
          throw invalidChar(read());
        },
        multiLineComment: function multiLineComment() {
          switch (c) {
            case "*":
              read();
              lexState = "multiLineCommentAsterisk";
              return;
            case void 0:
              throw invalidChar(read());
          }
          read();
        },
        multiLineCommentAsterisk: function multiLineCommentAsterisk() {
          switch (c) {
            case "*":
              read();
              return;
            case "/":
              read();
              lexState = "default";
              return;
            case void 0:
              throw invalidChar(read());
          }
          read();
          lexState = "multiLineComment";
        },
        singleLineComment: function singleLineComment() {
          switch (c) {
            case "\n":
            case "\r":
            case "\u2028":
            case "\u2029":
              read();
              lexState = "default";
              return;
            case void 0:
              read();
              return newToken("eof");
          }
          read();
        },
        value: function value() {
          switch (c) {
            case "{":
            case "[":
              return newToken("punctuator", read());
            case "n":
              read();
              literal("ull");
              return newToken("null", null);
            case "t":
              read();
              literal("rue");
              return newToken("boolean", true);
            case "f":
              read();
              literal("alse");
              return newToken("boolean", false);
            case "-":
            case "+":
              if (read() === "-") {
                sign = -1;
              }
              lexState = "sign";
              return;
            case ".":
              buffer = read();
              lexState = "decimalPointLeading";
              return;
            case "0":
              buffer = read();
              lexState = "zero";
              return;
            case "1":
            case "2":
            case "3":
            case "4":
            case "5":
            case "6":
            case "7":
            case "8":
            case "9":
              buffer = read();
              lexState = "decimalInteger";
              return;
            case "I":
              read();
              literal("nfinity");
              return newToken("numeric", Infinity);
            case "N":
              read();
              literal("aN");
              return newToken("numeric", NaN);
            case '"':
            case "'":
              doubleQuote = read() === '"';
              buffer = "";
              lexState = "string";
              return;
          }
          throw invalidChar(read());
        },
        identifierNameStartEscape: function identifierNameStartEscape() {
          if (c !== "u") {
            throw invalidChar(read());
          }
          read();
          var u = unicodeEscape();
          switch (u) {
            case "$":
            case "_":
              break;
            default:
              if (!util.isIdStartChar(u)) {
                throw invalidIdentifier();
              }
              break;
          }
          buffer += u;
          lexState = "identifierName";
        },
        identifierName: function identifierName() {
          switch (c) {
            case "$":
            case "_":
            case "\u200C":
            case "\u200D":
              buffer += read();
              return;
            case "\\":
              read();
              lexState = "identifierNameEscape";
              return;
          }
          if (util.isIdContinueChar(c)) {
            buffer += read();
            return;
          }
          return newToken("identifier", buffer);
        },
        identifierNameEscape: function identifierNameEscape() {
          if (c !== "u") {
            throw invalidChar(read());
          }
          read();
          var u = unicodeEscape();
          switch (u) {
            case "$":
            case "_":
            case "\u200C":
            case "\u200D":
              break;
            default:
              if (!util.isIdContinueChar(u)) {
                throw invalidIdentifier();
              }
              break;
          }
          buffer += u;
          lexState = "identifierName";
        },
        sign: function sign$1() {
          switch (c) {
            case ".":
              buffer = read();
              lexState = "decimalPointLeading";
              return;
            case "0":
              buffer = read();
              lexState = "zero";
              return;
            case "1":
            case "2":
            case "3":
            case "4":
            case "5":
            case "6":
            case "7":
            case "8":
            case "9":
              buffer = read();
              lexState = "decimalInteger";
              return;
            case "I":
              read();
              literal("nfinity");
              return newToken("numeric", sign * Infinity);
            case "N":
              read();
              literal("aN");
              return newToken("numeric", NaN);
          }
          throw invalidChar(read());
        },
        zero: function zero() {
          switch (c) {
            case ".":
              buffer += read();
              lexState = "decimalPoint";
              return;
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
            case "x":
            case "X":
              buffer += read();
              lexState = "hexadecimal";
              return;
          }
          return newToken("numeric", sign * 0);
        },
        decimalInteger: function decimalInteger() {
          switch (c) {
            case ".":
              buffer += read();
              lexState = "decimalPoint";
              return;
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalPointLeading: function decimalPointLeading() {
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalFraction";
            return;
          }
          throw invalidChar(read());
        },
        decimalPoint: function decimalPoint() {
          switch (c) {
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalFraction";
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalFraction: function decimalFraction() {
          switch (c) {
            case "e":
            case "E":
              buffer += read();
              lexState = "decimalExponent";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        decimalExponent: function decimalExponent() {
          switch (c) {
            case "+":
            case "-":
              buffer += read();
              lexState = "decimalExponentSign";
              return;
          }
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalExponentInteger";
            return;
          }
          throw invalidChar(read());
        },
        decimalExponentSign: function decimalExponentSign() {
          if (util.isDigit(c)) {
            buffer += read();
            lexState = "decimalExponentInteger";
            return;
          }
          throw invalidChar(read());
        },
        decimalExponentInteger: function decimalExponentInteger() {
          if (util.isDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        hexadecimal: function hexadecimal() {
          if (util.isHexDigit(c)) {
            buffer += read();
            lexState = "hexadecimalInteger";
            return;
          }
          throw invalidChar(read());
        },
        hexadecimalInteger: function hexadecimalInteger() {
          if (util.isHexDigit(c)) {
            buffer += read();
            return;
          }
          return newToken("numeric", sign * Number(buffer));
        },
        string: function string() {
          switch (c) {
            case "\\":
              read();
              buffer += escape();
              return;
            case '"':
              if (doubleQuote) {
                read();
                return newToken("string", buffer);
              }
              buffer += read();
              return;
            case "'":
              if (!doubleQuote) {
                read();
                return newToken("string", buffer);
              }
              buffer += read();
              return;
            case "\n":
            case "\r":
              throw invalidChar(read());
            case "\u2028":
            case "\u2029":
              separatorChar(c);
              break;
            case void 0:
              throw invalidChar(read());
          }
          buffer += read();
        },
        start: function start() {
          switch (c) {
            case "{":
            case "[":
              return newToken("punctuator", read());
          }
          lexState = "value";
        },
        beforePropertyName: function beforePropertyName() {
          switch (c) {
            case "$":
            case "_":
              buffer = read();
              lexState = "identifierName";
              return;
            case "\\":
              read();
              lexState = "identifierNameStartEscape";
              return;
            case "}":
              return newToken("punctuator", read());
            case '"':
            case "'":
              doubleQuote = read() === '"';
              lexState = "string";
              return;
          }
          if (util.isIdStartChar(c)) {
            buffer += read();
            lexState = "identifierName";
            return;
          }
          throw invalidChar(read());
        },
        afterPropertyName: function afterPropertyName() {
          if (c === ":") {
            return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        beforePropertyValue: function beforePropertyValue() {
          lexState = "value";
        },
        afterPropertyValue: function afterPropertyValue() {
          switch (c) {
            case ",":
            case "}":
              return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        beforeArrayValue: function beforeArrayValue() {
          if (c === "]") {
            return newToken("punctuator", read());
          }
          lexState = "value";
        },
        afterArrayValue: function afterArrayValue() {
          switch (c) {
            case ",":
            case "]":
              return newToken("punctuator", read());
          }
          throw invalidChar(read());
        },
        end: function end() {
          throw invalidChar(read());
        }
      };
      function newToken(type, value) {
        return {
          type,
          value,
          line,
          column
        };
      }
      function literal(s) {
        for (var i = 0, list = s; i < list.length; i += 1) {
          var c2 = list[i];
          var p = peek();
          if (p !== c2) {
            throw invalidChar(read());
          }
          read();
        }
      }
      function escape() {
        var c2 = peek();
        switch (c2) {
          case "b":
            read();
            return "\b";
          case "f":
            read();
            return "\f";
          case "n":
            read();
            return "\n";
          case "r":
            read();
            return "\r";
          case "t":
            read();
            return "	";
          case "v":
            read();
            return "\v";
          case "0":
            read();
            if (util.isDigit(peek())) {
              throw invalidChar(read());
            }
            return "\0";
          case "x":
            read();
            return hexEscape();
          case "u":
            read();
            return unicodeEscape();
          case "\n":
          case "\u2028":
          case "\u2029":
            read();
            return "";
          case "\r":
            read();
            if (peek() === "\n") {
              read();
            }
            return "";
          case "1":
          case "2":
          case "3":
          case "4":
          case "5":
          case "6":
          case "7":
          case "8":
          case "9":
            throw invalidChar(read());
          case void 0:
            throw invalidChar(read());
        }
        return read();
      }
      function hexEscape() {
        var buffer2 = "";
        var c2 = peek();
        if (!util.isHexDigit(c2)) {
          throw invalidChar(read());
        }
        buffer2 += read();
        c2 = peek();
        if (!util.isHexDigit(c2)) {
          throw invalidChar(read());
        }
        buffer2 += read();
        return String.fromCodePoint(parseInt(buffer2, 16));
      }
      function unicodeEscape() {
        var buffer2 = "";
        var count = 4;
        while (count-- > 0) {
          var c2 = peek();
          if (!util.isHexDigit(c2)) {
            throw invalidChar(read());
          }
          buffer2 += read();
        }
        return String.fromCodePoint(parseInt(buffer2, 16));
      }
      var parseStates = {
        start: function start() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          push();
        },
        beforePropertyName: function beforePropertyName() {
          switch (token.type) {
            case "identifier":
            case "string":
              key = token.value;
              parseState = "afterPropertyName";
              return;
            case "punctuator":
              pop();
              return;
            case "eof":
              throw invalidEOF();
          }
        },
        afterPropertyName: function afterPropertyName() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          parseState = "beforePropertyValue";
        },
        beforePropertyValue: function beforePropertyValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          push();
        },
        beforeArrayValue: function beforeArrayValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          if (token.type === "punctuator" && token.value === "]") {
            pop();
            return;
          }
          push();
        },
        afterPropertyValue: function afterPropertyValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          switch (token.value) {
            case ",":
              parseState = "beforePropertyName";
              return;
            case "}":
              pop();
          }
        },
        afterArrayValue: function afterArrayValue() {
          if (token.type === "eof") {
            throw invalidEOF();
          }
          switch (token.value) {
            case ",":
              parseState = "beforeArrayValue";
              return;
            case "]":
              pop();
          }
        },
        end: function end() {
        }
      };
      function push() {
        var value;
        switch (token.type) {
          case "punctuator":
            switch (token.value) {
              case "{":
                value = {};
                break;
              case "[":
                value = [];
                break;
            }
            break;
          case "null":
          case "boolean":
          case "numeric":
          case "string":
            value = token.value;
            break;
        }
        if (root === void 0) {
          root = value;
        } else {
          var parent = stack[stack.length - 1];
          if (Array.isArray(parent)) {
            parent.push(value);
          } else {
            Object.defineProperty(parent, key, {
              value,
              writable: true,
              enumerable: true,
              configurable: true
            });
          }
        }
        if (value !== null && typeof value === "object") {
          stack.push(value);
          if (Array.isArray(value)) {
            parseState = "beforeArrayValue";
          } else {
            parseState = "beforePropertyName";
          }
        } else {
          var current = stack[stack.length - 1];
          if (current == null) {
            parseState = "end";
          } else if (Array.isArray(current)) {
            parseState = "afterArrayValue";
          } else {
            parseState = "afterPropertyValue";
          }
        }
      }
      function pop() {
        stack.pop();
        var current = stack[stack.length - 1];
        if (current == null) {
          parseState = "end";
        } else if (Array.isArray(current)) {
          parseState = "afterArrayValue";
        } else {
          parseState = "afterPropertyValue";
        }
      }
      function invalidChar(c2) {
        if (c2 === void 0) {
          return syntaxError("JSON5: invalid end of input at " + line + ":" + column);
        }
        return syntaxError("JSON5: invalid character '" + formatChar(c2) + "' at " + line + ":" + column);
      }
      function invalidEOF() {
        return syntaxError("JSON5: invalid end of input at " + line + ":" + column);
      }
      function invalidIdentifier() {
        column -= 5;
        return syntaxError("JSON5: invalid identifier character at " + line + ":" + column);
      }
      function separatorChar(c2) {
        console.warn("JSON5: '" + formatChar(c2) + "' in strings is not valid ECMAScript; consider escaping");
      }
      function formatChar(c2) {
        var replacements = {
          "'": "\\'",
          '"': '\\"',
          "\\": "\\\\",
          "\b": "\\b",
          "\f": "\\f",
          "\n": "\\n",
          "\r": "\\r",
          "	": "\\t",
          "\v": "\\v",
          "\0": "\\0",
          "\u2028": "\\u2028",
          "\u2029": "\\u2029"
        };
        if (replacements[c2]) {
          return replacements[c2];
        }
        if (c2 < " ") {
          var hexString = c2.charCodeAt(0).toString(16);
          return "\\x" + ("00" + hexString).substring(hexString.length);
        }
        return c2;
      }
      function syntaxError(message) {
        var err = new SyntaxError(message);
        err.lineNumber = line;
        err.columnNumber = column;
        return err;
      }
      var stringify = function stringify2(value, replacer, space) {
        var stack2 = [];
        var indent = "";
        var propertyList;
        var replacerFunc;
        var gap = "";
        var quote;
        if (replacer != null && typeof replacer === "object" && !Array.isArray(replacer)) {
          space = replacer.space;
          quote = replacer.quote;
          replacer = replacer.replacer;
        }
        if (typeof replacer === "function") {
          replacerFunc = replacer;
        } else if (Array.isArray(replacer)) {
          propertyList = [];
          for (var i = 0, list = replacer; i < list.length; i += 1) {
            var v = list[i];
            var item = void 0;
            if (typeof v === "string") {
              item = v;
            } else if (typeof v === "number" || v instanceof String || v instanceof Number) {
              item = String(v);
            }
            if (item !== void 0 && propertyList.indexOf(item) < 0) {
              propertyList.push(item);
            }
          }
        }
        if (space instanceof Number) {
          space = Number(space);
        } else if (space instanceof String) {
          space = String(space);
        }
        if (typeof space === "number") {
          if (space > 0) {
            space = Math.min(10, Math.floor(space));
            gap = "          ".substr(0, space);
          }
        } else if (typeof space === "string") {
          gap = space.substr(0, 10);
        }
        return serializeProperty("", { "": value });
        function serializeProperty(key2, holder) {
          var value2 = holder[key2];
          if (value2 != null) {
            if (typeof value2.toJSON5 === "function") {
              value2 = value2.toJSON5(key2);
            } else if (typeof value2.toJSON === "function") {
              value2 = value2.toJSON(key2);
            }
          }
          if (replacerFunc) {
            value2 = replacerFunc.call(holder, key2, value2);
          }
          if (value2 instanceof Number) {
            value2 = Number(value2);
          } else if (value2 instanceof String) {
            value2 = String(value2);
          } else if (value2 instanceof Boolean) {
            value2 = value2.valueOf();
          }
          switch (value2) {
            case null:
              return "null";
            case true:
              return "true";
            case false:
              return "false";
          }
          if (typeof value2 === "string") {
            return quoteString(value2, false);
          }
          if (typeof value2 === "number") {
            return String(value2);
          }
          if (typeof value2 === "object") {
            return Array.isArray(value2) ? serializeArray(value2) : serializeObject(value2);
          }
          return void 0;
        }
        function quoteString(value2) {
          var quotes = {
            "'": 0.1,
            '"': 0.2
          };
          var replacements = {
            "'": "\\'",
            '"': '\\"',
            "\\": "\\\\",
            "\b": "\\b",
            "\f": "\\f",
            "\n": "\\n",
            "\r": "\\r",
            "	": "\\t",
            "\v": "\\v",
            "\0": "\\0",
            "\u2028": "\\u2028",
            "\u2029": "\\u2029"
          };
          var product = "";
          for (var i2 = 0; i2 < value2.length; i2++) {
            var c2 = value2[i2];
            switch (c2) {
              case "'":
              case '"':
                quotes[c2]++;
                product += c2;
                continue;
              case "\0":
                if (util.isDigit(value2[i2 + 1])) {
                  product += "\\x00";
                  continue;
                }
            }
            if (replacements[c2]) {
              product += replacements[c2];
              continue;
            }
            if (c2 < " ") {
              var hexString = c2.charCodeAt(0).toString(16);
              product += "\\x" + ("00" + hexString).substring(hexString.length);
              continue;
            }
            product += c2;
          }
          var quoteChar = quote || Object.keys(quotes).reduce(function(a, b) {
            return quotes[a] < quotes[b] ? a : b;
          });
          product = product.replace(new RegExp(quoteChar, "g"), replacements[quoteChar]);
          return quoteChar + product + quoteChar;
        }
        function serializeObject(value2) {
          if (stack2.indexOf(value2) >= 0) {
            throw TypeError("Converting circular structure to JSON5");
          }
          stack2.push(value2);
          var stepback = indent;
          indent = indent + gap;
          var keys = propertyList || Object.keys(value2);
          var partial = [];
          for (var i2 = 0, list2 = keys; i2 < list2.length; i2 += 1) {
            var key2 = list2[i2];
            var propertyString = serializeProperty(key2, value2);
            if (propertyString !== void 0) {
              var member = serializeKey(key2) + ":";
              if (gap !== "") {
                member += " ";
              }
              member += propertyString;
              partial.push(member);
            }
          }
          var final;
          if (partial.length === 0) {
            final = "{}";
          } else {
            var properties;
            if (gap === "") {
              properties = partial.join(",");
              final = "{" + properties + "}";
            } else {
              var separator = ",\n" + indent;
              properties = partial.join(separator);
              final = "{\n" + indent + properties + ",\n" + stepback + "}";
            }
          }
          stack2.pop();
          indent = stepback;
          return final;
        }
        function serializeKey(key2) {
          if (key2.length === 0) {
            return quoteString(key2, true);
          }
          var firstChar = String.fromCodePoint(key2.codePointAt(0));
          if (!util.isIdStartChar(firstChar)) {
            return quoteString(key2, true);
          }
          for (var i2 = firstChar.length; i2 < key2.length; i2++) {
            if (!util.isIdContinueChar(String.fromCodePoint(key2.codePointAt(i2)))) {
              return quoteString(key2, true);
            }
          }
          return key2;
        }
        function serializeArray(value2) {
          if (stack2.indexOf(value2) >= 0) {
            throw TypeError("Converting circular structure to JSON5");
          }
          stack2.push(value2);
          var stepback = indent;
          indent = indent + gap;
          var partial = [];
          for (var i2 = 0; i2 < value2.length; i2++) {
            var propertyString = serializeProperty(String(i2), value2);
            partial.push(propertyString !== void 0 ? propertyString : "null");
          }
          var final;
          if (partial.length === 0) {
            final = "[]";
          } else {
            if (gap === "") {
              var properties = partial.join(",");
              final = "[" + properties + "]";
            } else {
              var separator = ",\n" + indent;
              var properties$1 = partial.join(separator);
              final = "[\n" + indent + properties$1 + ",\n" + stepback + "]";
            }
          }
          stack2.pop();
          indent = stepback;
          return final;
        }
      };
      var JSON52 = {
        parse: parse2,
        stringify
      };
      var lib = JSON52;
      var es5 = lib;
      return es5;
    });
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  ObsidianSpreadsheet: () => ObsidianSpreadsheet,
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var SheetSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Advanced Table XT \u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u539F\u751F\u8868\u683C\u540E\u5904\u7406").setDesc("\u542F\u7528\u6B64\u8BBE\u7F6E\u4EE5\u4F7F\u7528Obsidian Sheets\u7684\u6E32\u67D3\u5668").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.nativeProcessing).onChange(async (value) => {
        var _a, _b;
        this.plugin.settings.nativeProcessing = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.activeLeaf) == null ? void 0 : _a.rebuildView();
        (_b = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _b.previewMode.rerender(true);
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u5728\u5355\u5143\u683C\u4E2D\u4F7F\u7528\u6BB5\u843D").setDesc("\u542F\u7528\u6B64\u8BBE\u7F6E\u4EE5\u5728\u8868\u683C\u5355\u5143\u683C\u4E2D\u4F7F\u7528\u6BB5\u843D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.paragraphs).onChange(async (value) => {
        var _a, _b;
        this.plugin.settings.paragraphs = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.activeLeaf) == null ? void 0 : _a.rebuildView();
        (_b = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _b.previewMode.rerender(true);
      })
    );
    containerEl.createEl("h3", { text: "\u5DE5\u5177\u680F\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u8868\u683C\u5DE5\u5177\u680F").setDesc("\u542F\u7528\u6216\u7981\u7528\u8868\u683C\u5DE5\u5177\u680F\u529F\u80FD").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.toolbarEnabled).onChange(async (value) => {
        this.plugin.settings.toolbarEnabled = value;
        await this.plugin.saveSettings();
        if (value) {
          this.plugin.createToolbar();
        } else {
          document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
            container.remove();
          });
        }
      })
    );
    containerEl.createEl("h3", { text: "\u7F16\u8F91\u6A21\u5F0F\u64CD\u4F5C" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C").setDesc("\u5141\u8BB8\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u76F4\u63A5\u4FEE\u6539 Markdown \u6E90\u7801\u4E2D\u7684\u8868\u683C").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableEditModeOperations).onChange(async (value) => {
        this.plugin.settings.enableEditModeOperations = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\u5355\u5143\u683C\u5408\u5E76" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u5355\u5143\u683C\u5408\u5E76").setDesc("\u542F\u7528\u4F7F\u7528 < \u548C ^ \u6807\u8BB0\u8FDB\u884C\u5355\u5143\u683C\u5408\u5E76\u7684\u529F\u80FD").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableCellMerging).onChange(async (value) => {
        var _a;
        this.plugin.settings.enableCellMerging = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _a.previewMode.rerender(true);
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u5408\u5E76\u975E\u7A7A\u5355\u5143\u683C\u65F6\u786E\u8BA4").setDesc("\u5F53\u5408\u5E76\u5305\u542B\u5185\u5BB9\u7684\u5355\u5143\u683C\u65F6\u663E\u793A\u786E\u8BA4\u5BF9\u8BDD\u6846").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.confirmMergeNonEmpty).onChange(async (value) => {
        this.plugin.settings.confirmMergeNonEmpty = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u5C45\u4E2D\u5408\u5E76\u5355\u5143\u683C").setDesc("\u81EA\u52A8\u5C06\u5408\u5E76\u5355\u5143\u683C\u4E2D\u7684\u5185\u5BB9\u5C45\u4E2D\u663E\u793A").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoCenterMergedCells).onChange(async (value) => {
        var _a;
        this.plugin.settings.autoCenterMergedCells = value;
        await this.plugin.saveSettings();
        (_a = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView)) == null ? void 0 : _a.previewMode.rerender(true);
      })
    );
    containerEl.createEl("h3", { text: "\u8868\u683CID\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u542F\u7528\u8868\u683CID").setDesc("\u81EA\u52A8\u4E3A\u8868\u683C\u6DFB\u52A0ID\u4F5C\u4E3AHTML\u6CE8\u91CA").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableTableIds).onChange(async (value) => {
        this.plugin.settings.enableTableIds = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u4F7F\u7528\u8868\u683C\u6CE8\u91CA\u5939\u6A21\u5F0F").setDesc('\u5728\u8868\u683C\u524D\u540E\u6DFB\u52A0\u914D\u5BF9\u7684HTML\u6CE8\u91CA\uFF0C\u5F62\u6210"\u6CE8\u91CA\u5939"\uFF0C\u63D0\u9AD8\u8868\u683CID\u8BC6\u522B\u7684\u51C6\u786E\u6027').addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.useTableWrapperComments).onChange(async (value) => {
        this.plugin.settings.useTableWrapperComments = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u8868\u683CID\u524D\u7F00").setDesc("\u751F\u6210\u7684\u8868\u683CID\u524D\u7F00").addText(
      (text) => text.setValue(this.plugin.settings.idPrefix).onChange(async (value) => {
        this.plugin.settings.idPrefix = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u8868\u683C\u7279\u5F81\u5339\u914D\u76F8\u4F3C\u5EA6\u9608\u503C").setDesc("\u5F53\u901A\u8FC7\u7279\u5F81\u5339\u914D\u8868\u683C\u65F6\uFF0C\u9700\u8981\u8FBE\u5230\u7684\u6700\u5C0F\u76F8\u4F3C\u5EA6\uFF080-1\u4E4B\u95F4\uFF0C\u9ED8\u8BA40.7\uFF09").addSlider(
      (slider) => slider.setLimits(0.5, 1, 0.05).setValue(this.plugin.settings.featureSimilarityThreshold || 0.7).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.featureSimilarityThreshold = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u4F18\u5148\u4F7F\u7528\u8868\u683C\u7279\u5F81\u5339\u914D").setDesc("\u542F\u7528\u540E\uFF0C\u5C06\u4F18\u5148\u4F7F\u7528\u7279\u5F81\u5339\u914D\u800C\u975E\u4F4D\u7F6E\u5339\u914D\u6765\u8BC6\u522B\u8868\u683CID").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.preferFeatureMatching || false).onChange(async (value) => {
        this.plugin.settings.preferFeatureMatching = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\u6570\u636E\u5B58\u50A8\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u4F18\u5148\u4F7F\u7528\u6587\u4EF6\u5B58\u50A8").setDesc("\u542F\u7528\u540E\uFF0C\u8868\u683C\u6570\u636E\u5C06\u4F18\u5148\u5B58\u50A8\u5728Markdown\u6587\u4EF6\u4E2D\uFF0C\u800C\u4E0D\u662Fdata.json\u6587\u4EF6\u4E2D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.preferFileStorage || false).onChange(async (value) => {
        this.plugin.settings.preferFileStorage = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u5BFC\u51FA\u5230\u6587\u4EF6").setDesc("\u542F\u7528\u540E\uFF0C\u5373\u4F7F\u4F7F\u7528data.json\u5B58\u50A8\u6570\u636E\uFF0C\u4E5F\u4F1A\u81EA\u52A8\u5C06\u6570\u636E\u5BFC\u51FA\u5230Markdown\u6587\u4EF6\u4E2D").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoExportToFile || false).onChange(async (value) => {
        this.plugin.settings.autoExportToFile = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/sheetElement.ts
var import_obsidian2 = require("obsidian");
var JSON5 = __toESM(require_dist());
var MERGE_UP_SIGNIFIER = "^";
var MERGE_LEFT_SIGNIFIER = "<";
var HEADER_DELIMETER = "-";
var META_DELIMETER = "---";
var SheetElement = class extends import_obsidian2.MarkdownRenderChild {
  constructor(el, source, ctx, app, plugin) {
    super(el);
    this.el = el;
    this.source = source;
    this.ctx = ctx;
    this.app = app;
    this.plugin = plugin;
    this.globalStyle = {};
    this.cellMaxLength = 0;
    this.rowMaxLength = 0;
    this.rowStyles = [];
    this.colStyles = [];
    this.domGrid = [];
  }
  async onload() {
    this.metaRE = new RegExp(String.raw`^${META_DELIMETER}\s*?(?:~(.*?))?\s*?\n+`, "mg");
    this.newLineRE = new RegExp(String.raw`\n`);
    this.cellBorderRE = new RegExp(String.raw`(?<!\\)\|`);
    this.headerRE = new RegExp(String.raw`^\s*?(:)?(?:${HEADER_DELIMETER})+?(:)?\s*?(?:(?<!\\)~(.*?))?$`);
    this.parseInputToGrid();
    this.validateInput();
    this.normalizeGrid();
    this.table = this.el;
    this.table.id = "obsidian-sheets-parsed";
    this.tableHead = this.table.createEl("thead");
    this.tableBody = this.table.createEl("tbody");
    this.getHeaderBoundaries();
    this.getHeaderStyles();
    this.buildDomTable();
  }
  onunload() {
  }
  displayError(error) {
    this.el.createDiv({
      text: `
Error: \`${error}\`

`,
      cls: "obs-sheets_error"
    });
    this.unload();
  }
  parseInputToGrid() {
    var _a;
    if (!this.metaRE.test(this.source))
      return this.contentGrid = this.source.split(this.newLineRE).filter((row) => this.cellBorderRE.test(row)).map((row) => row.split(this.cellBorderRE).map((cell) => cell.trim()));
    const [meta, unparsedStyle, source] = this.source.split(this.metaRE);
    this.parseMetadata(meta);
    if (unparsedStyle) {
      let cellStyle = {};
      const cls = unparsedStyle.match(/\.\S+/g) || [];
      cls.forEach((cssClass) => {
        var _a2;
        cellStyle = { ...cellStyle, ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {} };
      });
      const inlineStyle = ((_a = unparsedStyle.match(/\{.*\}/)) == null ? void 0 : _a[0]) || "{}";
      try {
        cellStyle = { ...cellStyle, ...JSON5.parse(inlineStyle) };
      } catch (e) {
        console.error(`Invalid cell style \`${inlineStyle}\``);
      }
      this.globalStyle = cellStyle;
    }
    return this.contentGrid = source.split(this.newLineRE).map((row) => row.split(this.cellBorderRE).map((cell) => cell.trim()));
  }
  parseMetadata(meta) {
    let metadata;
    try {
      metadata = JSON5.parse(meta);
    } catch (error) {
      return this.displayError("Metadata is not proper JSON");
    }
    this.metadata = metadata;
    if (metadata.classes) {
      this.styles = metadata.classes;
    }
  }
  validateInput() {
    if (!this.contentGrid.every(
      (row) => {
        var _a, _b;
        return !((_a = row.pop()) == null ? void 0 : _a.trim()) && !((_b = row.shift()) == null ? void 0 : _b.trim());
      }
    ))
      return this.displayError("Malformed table");
  }
  normalizeGrid() {
    for (let rowIndex = 0; rowIndex < this.contentGrid.length; rowIndex++) {
      const row = this.contentGrid[rowIndex];
      if (this.rowMaxLength < row.length)
        this.rowMaxLength = row.length;
      for (let colIndex = 0; colIndex < row.length; colIndex++)
        if (this.cellMaxLength < row[colIndex].trim().length)
          this.cellMaxLength = row[colIndex].trim().length;
    }
    this.contentGrid = this.contentGrid.map(
      (line) => Array.from(
        { ...line, length: this.rowMaxLength },
        (cell) => cell || ""
      )
    );
  }
  getHeaderBoundaries() {
    this.headerRow = this.contentGrid.findIndex(
      (headerRow) => headerRow.every((headerCol) => this.headerRE.test(headerCol))
    );
    this.headerCol = this.contentGrid[0].map(
      (_, i) => this.contentGrid.map((row) => row[i])
    ).findIndex(
      (headerCol) => headerCol.every((headerCol2) => this.headerRE.test(headerCol2))
    );
  }
  getHeaderStyles() {
    if (this.headerRow !== -1)
      this.colStyles = this.contentGrid[this.headerRow].map((rowHead) => {
        var _a, _b;
        let styles = {};
        const alignment = rowHead.match(this.headerRE);
        if (!alignment)
          return { classes: [], styles };
        else if (alignment[1] && alignment[2])
          styles["textAlign"] = "center";
        else if (alignment[1])
          styles["textAlign"] = "left";
        else if (alignment[2])
          styles["textAlign"] = "right";
        const classes = ((_b = (_a = alignment[3]) == null ? void 0 : _a.match(/\.\S+/g)) == null ? void 0 : _b.map(String)) || [];
        classes.forEach(
          (cssClass) => {
            var _a2;
            return styles = {
              ...styles,
              ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {}
            };
          }
        );
        return { classes, styles };
      });
    if (this.headerCol !== -1)
      this.rowStyles = this.contentGrid[0].map(
        (_, i) => this.contentGrid.map((row) => row[i])
      )[this.headerCol].map((rowHead) => {
        var _a, _b;
        let styles = {};
        const alignment = rowHead.match(this.headerRE);
        if (!alignment)
          return { classes: [], styles };
        else if (alignment[1] && alignment[2])
          styles["textAlign"] = "center";
        else if (alignment[1])
          styles["textAlign"] = "left";
        else if (alignment[2])
          styles["textAlign"] = "right";
        const classes = ((_b = (_a = alignment[3]) == null ? void 0 : _a.match(/\.\S+/g)) == null ? void 0 : _b.map(String)) || [];
        classes.forEach(
          (cssClass) => {
            var _a2;
            return styles = {
              ...styles,
              ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass.slice(1)]) || {}
            };
          }
        );
        return { classes, styles };
      });
  }
  buildDomTable() {
    for (let rowIndex = 0; rowIndex < this.contentGrid.length; rowIndex++)
      this.buildDomRow(rowIndex);
  }
  buildDomRow(rowIndex) {
    const rowContents = this.contentGrid[rowIndex];
    let rowNode = this.tableBody.createEl("tr");
    if (rowIndex < this.headerRow)
      rowNode = this.tableHead.createEl("tr");
    else if (rowIndex === this.headerRow)
      return;
    this.domGrid[rowIndex] = [];
    for (let columnIndex = 0; columnIndex < rowContents.length; columnIndex++)
      this.buildDomCell(rowIndex, columnIndex, rowNode);
  }
  async buildDomCell(rowIndex, columnIndex, rowNode) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    const [
      cellContent,
      cellStyles
    ] = this.contentGrid[rowIndex][columnIndex].split(/(?<![\\~])~(?!~)/);
    let cls = [];
    let cellStyle = this.globalStyle;
    if (this.rowStyles[rowIndex]) {
      cellStyle = { ...cellStyle, ...this.rowStyles[rowIndex].styles };
      cls.push(...this.rowStyles[rowIndex].classes);
    }
    if (this.colStyles[columnIndex]) {
      cellStyle = { ...cellStyle, ...this.colStyles[columnIndex].styles };
      cls.push(...this.colStyles[columnIndex].classes);
    }
    if (cellStyles) {
      cls = cellStyles.match(/(?<=\.)\S+/g) || [];
      cls.forEach((cssClass) => {
        var _a2;
        cellStyle = { ...cellStyle, ...((_a2 = this.styles) == null ? void 0 : _a2[cssClass]) || {} };
      });
      const inlineStyle = ((_a = cellStyles.match(/\{.*\}/)) == null ? void 0 : _a[0]) || "{}";
      try {
        cellStyle = { ...cellStyle, ...JSON5.parse(inlineStyle) };
      } catch (e) {
        console.error(`Invalid cell style \`${inlineStyle}\``);
      }
    }
    let cellTag = "td";
    let cell;
    if (columnIndex === this.headerCol || rowIndex === this.headerRow)
      return;
    else if (columnIndex < this.headerCol || rowIndex < this.headerRow)
      cellTag = "th";
    if (cellContent == MERGE_LEFT_SIGNIFIER && ((_c = (_b = this.domGrid) == null ? void 0 : _b[rowIndex]) == null ? void 0 : _c[columnIndex - 1])) {
      cell = this.domGrid[rowIndex][columnIndex - 1];
      (cell == null ? void 0 : cell.colSpan) || Object.assign(cell, { colSpan: 1 });
      cell.colSpan = columnIndex - parseInt(cell.getAttribute("col-index") || columnIndex.toString()) + 1;
    } else if (cellContent == MERGE_UP_SIGNIFIER && ((_e = (_d = this.domGrid) == null ? void 0 : _d[rowIndex - 1]) == null ? void 0 : _e[columnIndex])) {
      cell = this.domGrid[rowIndex - 1][columnIndex];
      (cell == null ? void 0 : cell.rowSpan) || Object.assign(cell, { rowSpan: 1 });
      cell.rowSpan = rowIndex - parseInt(cell.getAttribute("row-index") || "0") + 1;
    } else if (((_g = (_f = this.domGrid) == null ? void 0 : _f[rowIndex - 1]) == null ? void 0 : _g[columnIndex]) && ((_i = (_h = this.domGrid) == null ? void 0 : _h[rowIndex]) == null ? void 0 : _i[columnIndex - 1]) && this.domGrid[rowIndex][columnIndex - 1] === this.domGrid[rowIndex - 1][columnIndex])
      cell = this.domGrid[rowIndex][columnIndex - 1];
    else {
      cell = rowNode.createEl(cellTag, { cls });
      cell.setAttribute("row-index", rowIndex.toString());
      cell.setAttribute("col-index", columnIndex.toString());
      import_obsidian2.MarkdownRenderer.render(
        this.app,
        "\u200B " + (cellContent || "\u200B"),
        // Make sure markdown that requires to be at the start of a line is not rendered
        cell,
        "",
        this
      ).then(() => {
        cell.innerHTML = cell.children[0].innerHTML.replace(/^\u200B /g, "");
      });
      Object.assign(cell.style, cellStyle);
    }
    return this.domGrid[rowIndex][columnIndex] = cell;
  }
};

// src/markdownTableDetector.ts
var import_obsidian3 = require("obsidian");
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, message, onClose) {
    super(app);
    this.result = false;
    this.message = message;
    this.onClose = onClose;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "\u786E\u8BA4\u64CD\u4F5C" });
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.createEl("button", { text: "\u53D6\u6D88" }).addEventListener("click", () => {
      this.result = false;
      this.close();
    });
    buttonContainer.createEl("button", { text: "\u786E\u8BA4", cls: "mod-cta" }).addEventListener("click", () => {
      this.result = true;
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onClose(this.result);
  }
};
var MarkdownTableDetector = class {
  // app
  getApp() {
    return this.plugin.app;
  }
  constructor(plugin) {
    this.plugin = plugin;
    console.log("MarkdownTableDetector initialized");
  }
  /**
   * 
   * @param message 
   * @returns 
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const modal = new ConfirmModal(this.getApp(), message, (result) => {
        resolve(result);
      });
      modal.open();
    });
  }
  /**
   * HTMLMarkdown
   * @param table HTML
   * @returns HTML
   */
  isHtmlFormattedTable(table) {
    try {
      if (table.hasAttribute("border") || table.hasAttribute("cellpadding") || table.hasAttribute("cellspacing") || table.hasAttribute("width") || table.hasAttribute("height") || table.hasAttribute("bgcolor")) {
        return true;
      }
      const style = table.getAttribute("style");
      if (style && (style.includes("border-collapse") || style.includes("text-align") || style.includes("font-family") || style.includes("background-color"))) {
        return true;
      }
      const cells = table.querySelectorAll("td, th");
      for (const cell of Array.from(cells).slice(0, 10)) {
        const html = cell.innerHTML || "";
        if (html.includes("<") && html.includes(">") && !html.match(/^<(em|strong|s|code|a|span)[^>]*>.*<\/(em|strong|s|code|a|span)>$/)) {
          return true;
        }
      }
      const rows = table.querySelectorAll("tr");
      if (rows.length > 1) {
        const secondRow = rows[1];
        const separatorCells = secondRow.querySelectorAll("td, th");
        let isSeparatorRow = true;
        for (const cell of Array.from(separatorCells)) {
          const text = cell.textContent || "";
          if (!text.match(/^:?-+:?$/)) {
            isSeparatorRow = false;
            break;
          }
        }
        if (!isSeparatorRow) {
          return true;
        }
      }
      return false;
    } catch (error) {
      console.error("\u68C0\u6D4BHTML\u8868\u683C\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 
   * @param table HTML
   */
  setupTableIndices(table) {
    try {
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          cell.dataset.rowIndex = rowIndex.toString();
          cell.dataset.colIndex = colIndex.toString();
          cell.setAttribute("row-index", rowIndex.toString());
          cell.setAttribute("col-index", colIndex.toString());
          cell.classList.add("advanced-table-cell");
          if (cell.tagName.toLowerCase() === "th") {
            cell.classList.add("advanced-table-header");
          }
          if (!cell.innerHTML.trim()) {
            cell.innerHTML = "&nbsp;";
          }
        }
      }
    } catch (error) {
      console.error("\u8BBE\u7F6E\u8868\u683C\u7D22\u5F15\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param cell 
   * @param marker  ('^'  '<')
   * @returns 
   */
  isMergeMarker(cell, marker) {
    var _a;
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    if (marker === "^") {
      return /^(\^+|\\\^|\s*\^+\s*)$/.test(content);
    } else if (marker === "<") {
      return /^(<+|\\<|\s*<+\s*)$/.test(content);
    }
    return false;
  }
  /**
   * 
   * @param cell 
   * @returns 
   */
  hasMeaningfulContent(cell) {
    var _a;
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    return content !== "" && content !== "&nbsp;" && !/^(\^+|\\\^|\s*\^+\s*)$/.test(content) && !/^(<+|\\<|\s*<+\s*)$/.test(content);
  }
  /**
   * 
   * @param table HTML
   */
  async parseMergeCellMarkers(table) {
    var _a, _b, _c, _d, _e, _f, _g;
    if (!this.plugin.settings.enableCellMerging)
      return;
    try {
      const rows = table.querySelectorAll("tr");
      const mergeUp = [];
      const mergeLeft = [];
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          const upMatch = content.match(/^(\^+)$/);
          if (upMatch) {
            const count = upMatch[1].length;
            console.log(`\u53D1\u73B0\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${count}, \u5185\u5BB9="${content}"`);
            mergeUp.push({ cell, count });
            continue;
          }
          const leftMatch = content.match(/^(<+)$/);
          if (leftMatch) {
            const count = leftMatch[1].length;
            console.log(`\u53D1\u73B0\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${count}, \u5185\u5BB9="${content}"`);
            mergeLeft.push({ cell, count });
            continue;
          }
          if (content === "\\^" || content === " ^ " || content === " \\^ ") {
            console.log(`\u53D1\u73B0\u8F6C\u4E49\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u5185\u5BB9="${content}"`);
            mergeUp.push({ cell, count: 1 });
          } else if (content === "\\<" || content === " < " || content === " \\< ") {
            console.log(`\u53D1\u73B0\u8F6C\u4E49\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u5185\u5BB9="${content}"`);
            mergeLeft.push({ cell, count: 1 });
          }
        }
      }
      for (const { cell, count } of mergeUp) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        console.log(`\u5904\u7406\u5411\u4E0A\u5408\u5E76: \u884C=${rowIndex}, \u5217=${colIndex}, \u5408\u5E76\u6570\u91CF=${count}`);
        if (rowIndex >= count) {
          const targetRowIndex = rowIndex - count;
          const targetRow = rows[targetRowIndex];
          if (targetRow) {
            const targetCells = targetRow.querySelectorAll("td, th");
            if (colIndex < targetCells.length) {
              const targetCell = targetCells[colIndex];
              if (this.hasMeaningfulContent(targetCell)) {
                const cellsToMerge = [];
                if (this.hasMeaningfulContent(cell)) {
                  cellsToMerge.push({
                    rowIndex,
                    colIndex,
                    content: ((_b = cell.textContent) == null ? void 0 : _b.trim()) || ""
                  });
                }
                for (let i = 1; i < count; i++) {
                  const midRowIndex = rowIndex - i;
                  if (midRowIndex > targetRowIndex) {
                    const midRow = rows[midRowIndex];
                    const midCells = midRow.querySelectorAll("td, th");
                    if (colIndex < midCells.length) {
                      const midCell = midCells[colIndex];
                      if (this.hasMeaningfulContent(midCell)) {
                        cellsToMerge.push({
                          rowIndex: midRowIndex,
                          colIndex,
                          content: ((_c = midCell.textContent) == null ? void 0 : _c.trim()) || ""
                        });
                      }
                    }
                  }
                }
                if (this.plugin.settings.confirmMergeNonEmpty && cellsToMerge.length > 0) {
                  const cellContents = cellsToMerge.map(
                    (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
                  ).join("\n");
                  const confirmMerge = await this.showConfirmDialog(
                    `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
                  );
                  if (!confirmMerge) {
                    console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5355\u5143\u683C\u5408\u5E76");
                    continue;
                  }
                }
                let rowSpan = parseInt(targetCell.getAttribute("rowspan") || "1");
                rowSpan = rowSpan + count;
                console.log(`\u8BBE\u7F6Erowspan: \u76EE\u6807\u5355\u5143\u683C(${targetRowIndex},${colIndex}), rowspan=${rowSpan}`);
                targetCell.setAttribute("rowspan", rowSpan.toString());
                targetCell.rowSpan = rowSpan;
                targetCell.classList.add("obs-merged-cell");
                cell.style.display = "none";
              } else {
                console.warn("\u5411\u4E0A\u5408\u5E76\u5931\u8D25: \u76EE\u6807\u5355\u5143\u683C\u6CA1\u6709\u6709\u6548\u5185\u5BB9", targetCell);
              }
            }
          }
        }
      }
      for (const { cell, count } of mergeLeft) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        console.log(`\u5904\u7406\u5411\u5DE6\u5408\u5E76: \u884C=${rowIndex}, \u5217=${colIndex}, \u5408\u5E76\u6570\u91CF=${count}`);
        if (colIndex >= count) {
          const targetColIndex = colIndex - count;
          const targetCell = (_d = rows[rowIndex]) == null ? void 0 : _d.querySelectorAll("td, th")[targetColIndex];
          if (targetCell) {
            if (this.hasMeaningfulContent(targetCell)) {
              const cellsToMerge = [];
              if (this.hasMeaningfulContent(cell)) {
                cellsToMerge.push({
                  rowIndex,
                  colIndex,
                  content: ((_e = cell.textContent) == null ? void 0 : _e.trim()) || ""
                });
              }
              for (let i = 1; i < count; i++) {
                const midColIndex = colIndex - i;
                if (midColIndex > targetColIndex) {
                  const midCell = (_f = rows[rowIndex]) == null ? void 0 : _f.querySelectorAll("td, th")[midColIndex];
                  if (midCell && this.hasMeaningfulContent(midCell)) {
                    cellsToMerge.push({
                      rowIndex,
                      colIndex: midColIndex,
                      content: ((_g = midCell.textContent) == null ? void 0 : _g.trim()) || ""
                    });
                  }
                }
              }
              if (this.plugin.settings.confirmMergeNonEmpty && cellsToMerge.length > 0) {
                const cellContents = cellsToMerge.map(
                  (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
                ).join("\n");
                const confirmMerge = await this.showConfirmDialog(
                  `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
                );
                if (!confirmMerge) {
                  console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5355\u5143\u683C\u5408\u5E76");
                  continue;
                }
              }
              let colSpan = parseInt(targetCell.getAttribute("colspan") || "1");
              colSpan = colSpan + count;
              console.log(`\u8BBE\u7F6Ecolspan: \u76EE\u6807\u5355\u5143\u683C(${rowIndex},${targetColIndex}), colspan=${colSpan}`);
              targetCell.setAttribute("colspan", colSpan.toString());
              targetCell.colSpan = colSpan;
              targetCell.classList.add("obs-merged-cell");
              cell.style.display = "none";
            } else {
              console.warn("\u5411\u5DE6\u5408\u5E76\u5931\u8D25: \u76EE\u6807\u5355\u5143\u683C\u6CA1\u6709\u6709\u6548\u5185\u5BB9", targetCell);
            }
          }
        }
      }
      if (this.plugin.settings.autoCenterMergedCells) {
        const mergedCells = table.querySelectorAll("[rowspan], [colspan]");
        mergedCells.forEach((cell) => {
          const htmlCell = cell;
          if (parseInt(htmlCell.getAttribute("rowspan") || "1") > 1 || parseInt(htmlCell.getAttribute("colspan") || "1") > 1) {
            htmlCell.style.textAlign = "center";
            htmlCell.style.verticalAlign = "middle";
            htmlCell.classList.add("obs-merged-cell");
          }
        });
      }
    } catch (error) {
      console.error("\u89E3\u6790\u5355\u5143\u683C\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * Markdown
   * @param table HTML
   */
  applyMergeCellsMarkers(table) {
    var _a;
    try {
      if (table.dataset.tableMergeProcessed === "true") {
        return;
      }
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const row = rows[rowIndex];
        const cells = row.querySelectorAll("td, th");
        for (let colIndex = 0; colIndex < cells.length; colIndex++) {
          const cell = cells[colIndex];
          const cellContent = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          const leftMatch = cellContent.match(/^(<+|\\<|\s*<+\s*)$/);
          if (leftMatch && colIndex > 0) {
            let mergeCount = 1;
            if (cellContent.match(/^<+$/)) {
              mergeCount = cellContent.length;
            }
            console.log(`\u5E94\u7528\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${mergeCount}, \u5185\u5BB9="${cellContent}"`);
            const targetColIndex = colIndex - mergeCount;
            if (targetColIndex >= 0) {
              const leftCell = cells[targetColIndex];
              const colSpan2 = mergeCount + 1;
              console.log(`\u8BBE\u7F6Ecolspan: \u76EE\u6807\u5355\u5143\u683C(${rowIndex},${targetColIndex}), colspan=${colSpan2}`);
              leftCell.colSpan = colSpan2;
              leftCell.setAttribute("colspan", colSpan2.toString());
              cell.style.display = "none";
              if (this.plugin.settings.autoCenterMergedCells) {
                leftCell.style.textAlign = "center";
                leftCell.style.verticalAlign = "middle";
              }
              leftCell.classList.add("obs-merged-cell");
            }
            continue;
          }
          const upMatch = cellContent.match(/^(\^+|\\\^|\s*\^+\s*)$/);
          if (upMatch && rowIndex > 0) {
            let mergeCount = 1;
            if (cellContent.match(/^\^+$/)) {
              mergeCount = cellContent.length;
            }
            console.log(`\u5E94\u7528\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u884C=${rowIndex}, \u5217=${colIndex}, \u6807\u8BB0\u6570\u91CF=${mergeCount}, \u5185\u5BB9="${cellContent}"`);
            const targetRowIndex = rowIndex - mergeCount;
            if (targetRowIndex >= 0) {
              const aboveRow = rows[targetRowIndex];
              const aboveCells = aboveRow.querySelectorAll("td, th");
              if (colIndex < aboveCells.length) {
                const aboveCell = aboveCells[colIndex];
                const rowSpan2 = mergeCount + 1;
                console.log(`\u8BBE\u7F6Erowspan: \u76EE\u6807\u5355\u5143\u683C(${targetRowIndex},${colIndex}), rowspan=${rowSpan2}`);
                aboveCell.rowSpan = rowSpan2;
                aboveCell.setAttribute("rowspan", rowSpan2.toString());
                cell.style.display = "none";
                if (this.plugin.settings.autoCenterMergedCells) {
                  aboveCell.style.textAlign = "center";
                  aboveCell.style.verticalAlign = "middle";
                }
                aboveCell.classList.add("obs-merged-cell");
              }
            }
            continue;
          }
          const rowSpan = parseInt(cell.getAttribute("rowspan") || "1");
          const colSpan = parseInt(cell.getAttribute("colspan") || "1");
          if (rowSpan > 1) {
            for (let i = 1; i < rowSpan; i++) {
              if (rowIndex + i < rows.length) {
                const targetRow = rows[rowIndex + i];
                const targetCells = targetRow.querySelectorAll("td, th");
                if (colIndex < targetCells.length) {
                  const targetCell = targetCells[colIndex];
                  const markerText = "^".repeat(i);
                  console.log(`\u6DFB\u52A0\u5411\u4E0A\u5408\u5E76\u6807\u8BB0: \u4F4D\u7F6E(${rowIndex + i},${colIndex}), \u6807\u8BB0="${markerText}"`);
                  targetCell.textContent = markerText;
                  targetCell.classList.add("merge-marker");
                }
              }
            }
          }
          if (colSpan > 1) {
            for (let i = 1; i < colSpan; i++) {
              if (colIndex + i < cells.length) {
                const targetCell = cells[colIndex + i];
                const markerText = "<".repeat(i);
                console.log(`\u6DFB\u52A0\u5411\u5DE6\u5408\u5E76\u6807\u8BB0: \u4F4D\u7F6E(${rowIndex},${colIndex + i}), \u6807\u8BB0="${markerText}"`);
                targetCell.textContent = markerText;
                targetCell.classList.add("merge-marker");
              }
            }
          }
        }
      }
      table.dataset.tableMergeProcessed = "true";
      console.log(`\u8868\u683C\u5904\u7406\u5B8C\u6210\uFF0C\u5DF2\u6DFB\u52A0\u5408\u5E76\u6807\u8BB0`);
    } catch (error) {
      console.error("\u5E94\u7528\u5408\u5E76\u5355\u5143\u683C\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param table 
   * @param selectedCells 
   * @returns 
   */
  async mergeSelectedCells(table, selectedCells) {
    var _a;
    if (!selectedCells || selectedCells.length < 2) {
      new import_obsidian3.Notice("\u8BF7\u9009\u62E9\u81F3\u5C112\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
      return false;
    }
    try {
      let minRow = Number.MAX_SAFE_INTEGER;
      let maxRow = 0;
      let minCol = Number.MAX_SAFE_INTEGER;
      let maxCol = 0;
      for (const cell of selectedCells) {
        const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
        minRow = Math.min(minRow, rowIndex);
        maxRow = Math.max(maxRow, rowIndex);
        minCol = Math.min(minCol, colIndex);
        maxCol = Math.max(maxCol, colIndex);
      }
      const expectedCellCount = (maxRow - minRow + 1) * (maxCol - minCol + 1);
      if (expectedCellCount !== selectedCells.length) {
        new import_obsidian3.Notice("\u53EA\u80FD\u5408\u5E76\u5F62\u6210\u5B8C\u6574\u77E9\u5F62\u7684\u5355\u5143\u683C");
        return false;
      }
      const mainCell = table.querySelector(`[row-index="${minRow}"][col-index="${minCol}"]`);
      if (!mainCell) {
        new import_obsidian3.Notice("\u65E0\u6CD5\u627E\u5230\u4E3B\u5355\u5143\u683C");
        return false;
      }
      if (this.plugin.settings.confirmMergeNonEmpty) {
        const nonEmptyCells = [];
        for (const cell of selectedCells) {
          if (cell === mainCell)
            continue;
          if (this.hasMeaningfulContent(cell)) {
            const rowIndex = parseInt(cell.getAttribute("row-index") || cell.dataset.rowIndex || "0");
            const colIndex = parseInt(cell.getAttribute("col-index") || cell.dataset.colIndex || "0");
            nonEmptyCells.push({
              rowIndex,
              colIndex,
              content: ((_a = cell.textContent) == null ? void 0 : _a.trim()) || ""
            });
          }
        }
        if (nonEmptyCells.length > 0) {
          const cellContents = nonEmptyCells.map(
            (c) => `[${c.rowIndex + 1},${c.colIndex + 1}]: "${c.content}"`
          ).join("\n");
          const confirmMerge = await this.showConfirmDialog(
            `\u4EE5\u4E0B\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\u5C06\u88AB\u8986\u76D6:
${cellContents}

\u786E\u5B9A\u8981\u5408\u5E76\u8FD9\u4E9B\u5355\u5143\u683C\u5417\uFF1F`
          );
          if (!confirmMerge) {
            new import_obsidian3.Notice("\u5DF2\u53D6\u6D88\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      const rowSpanValue = maxRow - minRow + 1;
      const colSpanValue = maxCol - minCol + 1;
      mainCell.setAttribute("rowspan", rowSpanValue.toString());
      mainCell.setAttribute("colspan", colSpanValue.toString());
      mainCell.rowSpan = rowSpanValue;
      mainCell.colSpan = colSpanValue;
      mainCell.classList.add("obs-merged-cell");
      if (this.plugin.settings.autoCenterMergedCells) {
        mainCell.style.textAlign = "center";
        mainCell.style.verticalAlign = "middle";
      }
      for (const cell of selectedCells) {
        if (cell !== mainCell) {
          cell.style.display = "none";
        }
      }
      this.applyMergeCellsMarkersForArea(table, minRow, minCol, maxRow, maxCol);
      return true;
    } catch (error) {
      console.error("\u5408\u5E76\u9009\u4E2D\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 
   * @param table 
   * @param startRow 
   * @param startCol 
   * @param endRow 
   * @param endCol 
   */
  applyMergeCellsMarkersForArea(table, startRow, startCol, endRow, endCol) {
    try {
      const rows = table.querySelectorAll("tr");
      for (let rowIndex = startRow; rowIndex <= endRow; rowIndex++) {
        if (rowIndex < rows.length) {
          const row = rows[rowIndex];
          const cells = row.querySelectorAll("td, th");
          for (let colIndex = startCol; colIndex <= endCol; colIndex++) {
            if (colIndex < cells.length && !(rowIndex === startRow && colIndex === startCol)) {
              const cell = cells[colIndex];
              if (colIndex === startCol) {
                cell.textContent = "^";
                cell.classList.add("merge-marker");
              } else if (rowIndex === startRow) {
                cell.textContent = "<";
                cell.classList.add("merge-marker");
              } else {
                cell.textContent = Math.random() > 0.5 ? "^" : "<";
                cell.classList.add("merge-marker", "hidden-marker");
              }
            }
          }
        }
      }
    } catch (error) {
      console.error("\u5E94\u7528\u533A\u57DF\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
    }
  }
};

// src/tableIdManager.ts
var import_obsidian4 = require("obsidian");
var _TableIdManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    console.log("TableIdManager initialized");
  }
  // app
  getApp() {
    return this.plugin.app;
  }
  /**
   * 
   * @param table HTML
   * @param useFallback HTMLIDID
   * @returns IDnull
   */
  getTableIdentifier(table, useFallback = false) {
    try {
      if (_TableIdManager.isProcessingTableId)
        return null;
      _TableIdManager.isProcessingTableId = true;
      console.log("\u5F00\u59CB\u83B7\u53D6\u8868\u683CID");
      const currentDomId = table.getAttribute("data-table-id");
      if (currentDomId) {
        console.log(`\u8868\u683C\u5F53\u524DDOM\u5C5E\u6027ID: ${currentDomId}`);
      }
      const tableFeature = this.extractTableFeature(table);
      if (tableFeature) {
        console.log(`\u63D0\u53D6\u7684\u8868\u683C\u7279\u5F81:`, tableFeature);
      }
      let commentId = this.getTableIdFromComment(table);
      if (commentId) {
        console.log(`\u4ECEHTML\u6CE8\u91CA\u83B7\u53D6\u5230\u8868\u683CID: ${commentId}`);
        if (currentDomId && currentDomId !== commentId) {
          console.log(`\u8B66\u544A: DOM\u4E2D\u7684ID(${currentDomId})\u4E0EHTML\u6CE8\u91CA\u4E2D\u7684ID(${commentId})\u4E0D\u5339\u914D`);
          console.log(`\u6B63\u5728\u66F4\u65B0DOM\u5C5E\u6027\uFF0C\u4F7F\u7528HTML\u6CE8\u91CA\u4E2D\u7684ID: ${commentId}`);
          table.setAttribute("data-table-id", commentId);
        } else if (!currentDomId) {
          console.log(`\u8BBE\u7F6EDOM\u5C5E\u6027ID: ${commentId}`);
          table.setAttribute("data-table-id", commentId);
        }
        if (tableFeature) {
          table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        }
        _TableIdManager.isProcessingTableId = false;
        return commentId;
      }
      if (useFallback && currentDomId) {
        console.log(`\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u56DE\u9000\u4F7F\u7528DOM\u5C5E\u6027ID: ${currentDomId}`);
        if (tableFeature) {
          table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        }
        _TableIdManager.isProcessingTableId = false;
        return currentDomId;
      }
      console.log("\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u4E0D\u4F7F\u7528\u5176\u4ED6ID\u6765\u6E90");
      if (!useFallback && currentDomId) {
        console.log(`\u8B66\u544A: \u8868\u683CDOM\u4E2D\u6709ID(${currentDomId})\uFF0C\u4F46\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u5BF9\u5E94ID`);
        console.log("\u6E05\u9664DOM\u4E2D\u7684ID\u5C5E\u6027\uFF0C\u4EE5\u907F\u514D\u4F7F\u7528\u8FC7\u65F6\u6216\u4E0D\u6B63\u786E\u7684ID");
        table.removeAttribute("data-table-id");
      }
      _TableIdManager.isProcessingTableId = false;
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      _TableIdManager.isProcessingTableId = false;
      return null;
    }
  }
  /**
   * ID
   * @param table HTML
   * @returns ID
   */
  getOrCreateTableId(table) {
    try {
      if (_TableIdManager.isCreatingTableId)
        return "";
      _TableIdManager.isCreatingTableId = true;
      let tableId = this.getTableIdentifier(table, true);
      if (!tableId) {
        console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u53EF\u4EE5\u4F7F\u7528confirmAndCreateTableId\u65B9\u6CD5\u521B\u5EFA\u65B0ID");
        new import_obsidian4.Notice('\u672A\u627E\u5230\u8868\u683CID\uFF0C\u8BF7\u4F7F\u7528\u8868\u683C\u5DE5\u5177\u680F\u4E2D\u7684"\u8BBE\u7F6E\u8868\u683CID"\u529F\u80FD\u521B\u5EFA\u65B0ID');
      }
      _TableIdManager.isCreatingTableId = false;
      return tableId || "";
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      _TableIdManager.isCreatingTableId = false;
      return "";
    }
  }
  /**
   * ID
   * @param table HTML
   * @returns ID
   */
  confirmAndCreateTableId(table) {
    try {
      const existingId = this.getTableIdentifier(table, true);
      if (existingId) {
        console.log(`\u8868\u683C\u5DF2\u6709ID: ${existingId}\uFF0C\u4E0D\u9700\u8981\u521B\u5EFA\u65B0ID`);
        new import_obsidian4.Notice(`\u8868\u683C\u5DF2\u6709ID: ${existingId}`);
        return existingId;
      }
      const newId = this.generateTableId();
      console.log(`\u4E3A\u8868\u683C\u751F\u6210\u65B0ID: ${newId}`);
      this.addTableIdComment(table, newId);
      return newId;
    } catch (error) {
      console.error("\u786E\u8BA4\u5E76\u521B\u5EFA\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return "";
    }
  }
  /**
   * HTMLID
   * @param table HTML
   * @returns IDnull
   */
  getTableIdFromComment(table) {
    var _a, _b;
    try {
      console.log("\u5F00\u59CB\u4ECEHTML\u6CE8\u91CA\u4E2D\u67E5\u627E\u8868\u683CID");
      console.log("\u8868\u683CDOM:", table.outerHTML.substring(0, 100) + "...");
      try {
        const activeFile = this.getApp().workspace.getActiveFile();
        if (activeFile) {
          console.log(`\u5C1D\u8BD5\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u67E5\u627E\u8868\u683CID: ${activeFile.path}`);
          const tablePosition = this.getTablePositionInDOM(table);
          if (tablePosition) {
            console.log(`\u8868\u683C\u4F4D\u7F6E: \u7B2C${tablePosition.index}\u4E2A\u8868\u683C`);
            this.getApp().vault.read(activeFile).then((content) => {
              const tableInfos = this.extractTableIdsFromMarkdown(content);
              console.log(`\u4ECEMarkdown\u5185\u5BB9\u4E2D\u63D0\u53D6\u7684\u8868\u683CID:`, tableInfos);
              if (tableInfos.length > tablePosition.index) {
                const { id } = tableInfos[tablePosition.index];
                if (id) {
                  console.log(`\u4ECEMarkdown\u5185\u5BB9\u4E2D\u627E\u5230\u8868\u683CID: ${id}`);
                  table.setAttribute("data-table-id", id);
                  return id;
                }
              }
            }).catch((err) => {
              console.error("\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\u65F6\u51FA\u9519:", err);
            });
          }
        }
      } catch (error) {
        console.error("\u4ECE\u6587\u4EF6\u5185\u5BB9\u67E5\u627E\u8868\u683CID\u65F6\u51FA\u9519:", error);
      }
      let node = table.previousSibling;
      let nodeCount = 0;
      console.log("\u5F00\u59CB\u904D\u5386\u524D\u7F6E\u8282\u70B9...");
      while (node && nodeCount < 30) {
        nodeCount++;
        const nodeType = node.nodeType;
        const nodeTypeStr = nodeType === Node.COMMENT_NODE ? "COMMENT" : nodeType === Node.TEXT_NODE ? "TEXT" : nodeType === Node.ELEMENT_NODE ? "ELEMENT" : "OTHER";
        console.log(`\u68C0\u67E5\u8282\u70B9 #${nodeCount}: \u7C7B\u578B=${nodeTypeStr}`);
        if (nodeType === Node.COMMENT_NODE) {
          const commentText = ((_a = node.textContent) == null ? void 0 : _a.trim()) || "";
          console.log(`\u53D1\u73B0\u6CE8\u91CA\u8282\u70B9: "${commentText}"`);
          const beginMatch = commentText.match(/table-begin:\s*([a-zA-Z0-9_\-:.]+)/i);
          if (beginMatch && beginMatch[1]) {
            const commentId = beginMatch[1];
            console.log(`\u4ECE\u8868\u683C\u5F00\u59CB\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const idMatch = commentText.match(/table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (idMatch && idMatch[1]) {
            const commentId = idMatch[1];
            console.log(`\u4ECEHTML\u6CE8\u91CA\u4E2D\u6210\u529F\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const altIdMatch = commentText.match(/id:?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (altIdMatch && altIdMatch[1]) {
            const commentId = altIdMatch[1];
            console.log(`\u4ECE\u66FF\u4EE3\u683C\u5F0FHTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const tblMatch = commentText.match(/(tbl|table):?\s*([a-zA-Z0-9_\-:.]+)/i);
          if (tblMatch && tblMatch[2]) {
            const commentId = tblMatch[2];
            console.log(`\u4ECEtbl/table\u683C\u5F0FHTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
        } else if (nodeType === Node.TEXT_NODE) {
          const textContent = node.textContent || "";
          console.log(`\u6587\u672C\u8282\u70B9\u5185\u5BB9: "${textContent.substring(0, 30)}${textContent.length > 30 ? "..." : ""}"`);
          const htmlCommentMatch = textContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (htmlCommentMatch && htmlCommentMatch[1]) {
            const commentId = htmlCommentMatch[1];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const altHtmlCommentMatch = textContent.match(/<!--\s*id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (altHtmlCommentMatch && altHtmlCommentMatch[1]) {
            const commentId = altHtmlCommentMatch[1];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684\u66FF\u4EE3HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          const tblHtmlCommentMatch = textContent.match(/<!--\s*(tbl|table):?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
          if (tblHtmlCommentMatch && tblHtmlCommentMatch[2]) {
            const commentId = tblHtmlCommentMatch[2];
            console.log(`\u4ECE\u6587\u672C\u8282\u70B9\u4E2D\u7684tbl/table HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
            return commentId;
          }
          if (textContent.trim() === "") {
            node = node.previousSibling;
            continue;
          }
        } else if (nodeType === Node.ELEMENT_NODE) {
          const tagName = node.tagName;
          console.log(`\u5143\u7D20\u8282\u70B9: <${tagName.toLowerCase()}>`);
          const elemDataId = node.getAttribute("data-id") || node.getAttribute("data-table-id");
          if (elemDataId) {
            console.log(`\u4ECE\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${elemDataId}`);
            return elemDataId;
          }
          const elemContent = node.innerHTML || "";
          if (elemContent.includes("<!--") && elemContent.includes("-->")) {
            console.log(`\u5143\u7D20\u5185\u5BB9\u5305\u542BHTML\u6CE8\u91CA: "${elemContent.substring(0, 50)}${elemContent.length > 50 ? "..." : ""}"`);
            const htmlCommentMatch = elemContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
            if (htmlCommentMatch && htmlCommentMatch[1]) {
              const commentId = htmlCommentMatch[1];
              console.log(`\u4ECE\u5143\u7D20\u5185\u5BB9\u4E2D\u7684HTML\u6CE8\u91CA\u8BC6\u522B\u8868\u683CID: ${commentId}`);
              return commentId;
            }
          }
          if (["BR", "HR", "P", "DIV", "SPAN"].includes(tagName)) {
            node = node.previousSibling;
            continue;
          }
          console.log(`\u9047\u5230\u5143\u7D20\u8282\u70B9 ${tagName}\uFF0C\u505C\u6B62\u67E5\u627E`);
          break;
        }
        node = node.previousSibling;
      }
      if (table.parentElement) {
        console.log("\u5C1D\u8BD5\u68C0\u67E5\u7236\u5143\u7D20\u53CA\u5176\u524D\u7F6E\u8282\u70B9...");
        const parentDataId = table.parentElement.getAttribute("data-id") || table.parentElement.getAttribute("data-table-id");
        if (parentDataId) {
          console.log(`\u4ECE\u7236\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${parentDataId}`);
          return parentDataId;
        }
        if (table.parentElement.previousSibling) {
          let parentPrevNode = table.parentElement.previousSibling;
          if (parentPrevNode) {
            if (parentPrevNode.nodeType === Node.COMMENT_NODE) {
              const commentText = ((_b = parentPrevNode.textContent) == null ? void 0 : _b.trim()) || "";
              console.log(`\u53D1\u73B0\u7236\u5143\u7D20\u524D\u7684\u6CE8\u91CA\u8282\u70B9: "${commentText}"`);
              const idMatch = commentText.match(/table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)/i);
              if (idMatch && idMatch[1]) {
                const commentId = idMatch[1];
                console.log(`\u4ECE\u7236\u5143\u7D20\u524D\u7684HTML\u6CE8\u91CA\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
                return commentId;
              }
            } else if (parentPrevNode.nodeType === Node.TEXT_NODE) {
              const textContent = parentPrevNode.textContent || "";
              const htmlCommentMatch = textContent.match(/<!--\s*table[-_]?id:?\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
              if (htmlCommentMatch && htmlCommentMatch[1]) {
                const commentId = htmlCommentMatch[1];
                console.log(`\u4ECE\u7236\u5143\u7D20\u524D\u7684\u6587\u672C\u8282\u70B9\u4E2D\u8BC6\u522B\u8868\u683CID: ${commentId}`);
                return commentId;
              }
            }
          }
        }
        if (table.parentElement.parentElement) {
          const grandParentDataId = table.parentElement.parentElement.getAttribute("data-id") || table.parentElement.parentElement.getAttribute("data-table-id");
          if (grandParentDataId) {
            console.log(`\u4ECE\u7956\u7236\u5143\u7D20\u5C5E\u6027\u4E2D\u627E\u5230ID: ${grandParentDataId}`);
            return grandParentDataId;
          }
        }
      }
      console.log("\u672A\u5728HTML\u6CE8\u91CA\u4E2D\u627E\u5230\u8868\u683CID");
      return null;
    } catch (error) {
      console.error("\u4ECE\u6CE8\u91CA\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * ID
   * @param table HTML
   * @param id ID
   */
  addTableIdComment(table, id) {
    var _a, _b, _c, _d, _e, _f;
    try {
      const tableFeature = this.extractTableFeature(table);
      const featureJson = JSON.stringify(tableFeature);
      const useWrapperComments = this.plugin.settings.useTableWrapperComments;
      const previousNode = table.previousSibling;
      if (previousNode && previousNode.nodeType === Node.COMMENT_NODE) {
        const comment = previousNode.nodeValue || "";
        if (comment.includes("table-id:") || comment.includes("table-begin:")) {
          (_a = previousNode.parentNode) == null ? void 0 : _a.removeChild(previousNode);
        }
      }
      const nextNode = table.nextSibling;
      if (nextNode && nextNode.nodeType === Node.COMMENT_NODE) {
        const comment = nextNode.nodeValue || "";
        if (comment.includes("table-end:") || comment.includes("table-id-end:")) {
          (_b = nextNode.parentNode) == null ? void 0 : _b.removeChild(nextNode);
        }
      }
      if (useWrapperComments) {
        const beginCommentContent = `table-begin: ${id} feature: ${featureJson}`;
        const beginComment = document.createComment(` ${beginCommentContent} `);
        const endCommentContent = `table-end: ${id}`;
        const endComment = document.createComment(` ${endCommentContent} `);
        (_c = table.parentNode) == null ? void 0 : _c.insertBefore(beginComment, table);
        if (table.nextSibling) {
          (_d = table.parentNode) == null ? void 0 : _d.insertBefore(endComment, table.nextSibling);
        } else {
          (_e = table.parentNode) == null ? void 0 : _e.appendChild(endComment);
        }
        console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0\u6CE8\u91CA\u5939: ${id} \u7279\u5F81:`, tableFeature);
      } else {
        const commentContent = `table-id: ${id} feature: ${featureJson}`;
        const comment = document.createComment(` ${commentContent} `);
        (_f = table.parentNode) == null ? void 0 : _f.insertBefore(comment, table);
        console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID\u6CE8\u91CA: ${id} \u7279\u5F81:`, tableFeature);
      }
      table.setAttribute("data-table-id", id);
      table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
      new import_obsidian4.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${id}`);
    } catch (error) {
      console.error("\u6DFB\u52A0\u8868\u683CID\u6CE8\u91CA\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param table HTMLMarkdown
   * @returns 
   */
  extractTableFeature(table) {
    try {
      let rows = 0;
      let cols = 0;
      let headers = "";
      let firstRowContent = "";
      let lastRowContent = "";
      let mergePattern = "";
      let position = void 0;
      let fileInfo = void 0;
      const activeFile = this.getApp().workspace.getActiveFile();
      if (activeFile) {
        fileInfo = {
          path: activeFile.path,
          name: activeFile.basename
        };
      }
      if (typeof table === "string") {
        const lines = table.split("\n");
        const tableLines = lines.filter((line) => line.trim().startsWith("|"));
        rows = tableLines.length;
        if (rows > 0) {
          const cells = tableLines[0].split("|").filter((cell) => cell.trim() !== "");
          cols = cells.length;
          headers = cells.map((c) => c.trim()).join("-");
          firstRowContent = tableLines[0];
          lastRowContent = tableLines[rows - 1];
        }
        mergePattern = this.extractMergePattern(tableLines);
        const firstLineIndex = lines.findIndex((line) => line === tableLines[0]);
        if (firstLineIndex >= 0) {
          position = {
            startLine: firstLineIndex,
            endLine: firstLineIndex + rows - 1
          };
        }
      } else {
        const tableRows = table.querySelectorAll("tr");
        rows = tableRows.length;
        if (rows > 0) {
          const firstRowCells = tableRows[0].querySelectorAll("th, td");
          cols = firstRowCells.length;
          headers = Array.from(firstRowCells).map((cell) => {
            var _a;
            return ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
          }).join("-");
          firstRowContent = tableRows[0].textContent || "";
          lastRowContent = tableRows[rows - 1].textContent || "";
        }
        mergePattern = this.extractMergePatterFromDOM(table);
        const positionData = table.getAttribute("data-table-position");
        if (positionData) {
          try {
            position = JSON.parse(positionData);
          } catch (e) {
            console.error("\u89E3\u6790\u8868\u683C\u4F4D\u7F6E\u6570\u636E\u65F6\u51FA\u9519:", e);
          }
        }
      }
      return {
        rows,
        cols,
        headers,
        firstRowContent,
        lastRowContent,
        mergePattern,
        position,
        fileInfo
      };
    } catch (error) {
      console.error("\u63D0\u53D6\u8868\u683C\u7279\u5F81\u65F6\u51FA\u9519:", error);
      return {
        rows: 0,
        cols: 0,
        headers: "",
        firstRowContent: "",
        lastRowContent: "",
        mergePattern: ""
      };
    }
  }
  /**
   * Markdown
   */
  extractMergePattern(lines) {
    let pattern = "";
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const cells = line.split("|").filter((cell) => cell.trim() !== "");
      for (let j = 0; j < cells.length; j++) {
        const cell = cells[j].trim();
        if (cell === "^") {
          pattern += `^${i}-${j};`;
        } else if (cell === "<") {
          pattern += `<${i}-${j};`;
        }
      }
    }
    return pattern;
  }
  /**
   * DOM
   */
  extractMergePatterFromDOM(table) {
    let pattern = "";
    const rows = table.querySelectorAll("tr");
    for (let i = 0; i < rows.length; i++) {
      const cells = rows[i].querySelectorAll("th, td");
      for (let j = 0; j < cells.length; j++) {
        const cell = cells[j];
        const rowspan = cell.getAttribute("rowspan");
        const colspan = cell.getAttribute("colspan");
        if (rowspan && parseInt(rowspan) > 1) {
          pattern += `r${i}-${j}-${rowspan};`;
        }
        if (colspan && parseInt(colspan) > 1) {
          pattern += `c${i}-${j}-${colspan};`;
        }
      }
    }
    return pattern;
  }
  /**
   * 
   * @param feature1 
   * @param feature2 
   * @returns 0-1
   */
  calculateFeatureSimilarity(feature1, feature2) {
    var _a, _b;
    if (!feature1 || !feature2)
      return 0;
    let score = 0;
    let totalWeight = 0;
    const pathWeight = 5;
    if (((_a = feature1.fileInfo) == null ? void 0 : _a.path) && ((_b = feature2.fileInfo) == null ? void 0 : _b.path) && feature1.fileInfo.path === feature2.fileInfo.path) {
      score += pathWeight;
    }
    totalWeight += pathWeight;
    const rowWeight = 3;
    const colWeight = 3;
    if (feature1.rows === feature2.rows) {
      score += rowWeight;
    } else {
      const rowDiff = Math.abs(feature1.rows - feature2.rows);
      if (rowDiff <= 1)
        score += rowWeight * (1 - rowDiff / 2);
    }
    totalWeight += rowWeight;
    if (feature1.cols === feature2.cols) {
      score += colWeight;
    } else {
      const colDiff = Math.abs(feature1.cols - feature2.cols);
      if (colDiff <= 1)
        score += colWeight * (1 - colDiff / 2);
    }
    totalWeight += colWeight;
    const headerWeight = 4;
    if (feature1.headers && feature2.headers) {
      const headerSimilarity = this.calculateTextSimilarity(feature1.headers, feature2.headers);
      score += headerWeight * headerSimilarity;
    }
    totalWeight += headerWeight;
    const positionWeight = 2;
    if (feature1.position && feature2.position) {
      const startLineDiff = Math.abs(feature1.position.startLine - feature2.position.startLine);
      const positionSimilarity = Math.max(0, 1 - startLineDiff / 10);
      score += positionWeight * positionSimilarity;
    }
    totalWeight += positionWeight;
    const firstRowWeight = 2;
    if (feature1.firstRowContent && feature2.firstRowContent) {
      const firstRowSimilarity = this.calculateTextSimilarity(
        feature1.firstRowContent,
        feature2.firstRowContent
      );
      score += firstRowWeight * firstRowSimilarity;
    }
    totalWeight += firstRowWeight;
    const lastRowWeight = 2;
    if (feature1.lastRowContent && feature2.lastRowContent) {
      const lastRowSimilarity = this.calculateTextSimilarity(
        feature1.lastRowContent,
        feature2.lastRowContent
      );
      score += lastRowWeight * lastRowSimilarity;
    }
    totalWeight += lastRowWeight;
    const mergeWeight = 1;
    if (feature1.mergePattern && feature2.mergePattern) {
      const mergeSimilarity = this.calculateTextSimilarity(
        feature1.mergePattern,
        feature2.mergePattern
      );
      score += mergeWeight * mergeSimilarity;
    }
    totalWeight += mergeWeight;
    const similarity = totalWeight > 0 ? score / totalWeight : 0;
    console.log(`\u8868\u683C\u7279\u5F81\u76F8\u4F3C\u5EA6: ${similarity.toFixed(2)}`);
    return similarity;
  }
  /**
   * 
   * @param str1 
   * @param str2 
   * @returns 0-1
   */
  calculateTextSimilarity(str1, str2) {
    if (!str1 || !str2)
      return 0;
    if (str1 === str2)
      return 1;
    const maxLen = Math.max(str1.length, str2.length);
    if (maxLen === 0)
      return 1;
    let matches = 0;
    const minLen = Math.min(str1.length, str2.length);
    for (let i = 0; i < minLen; i++) {
      if (str1[i] === str2[i])
        matches++;
      else
        break;
    }
    for (let i = 1; i <= minLen - matches; i++) {
      if (str1[str1.length - i] === str2[str2.length - i])
        matches++;
      else
        break;
    }
    matches = Math.min(matches, minLen);
    return matches / maxLen;
  }
  /**
   * DOM
   * @param table 
   * @returns null
   */
  getTablePositionInDOM(table) {
    try {
      const allTables = Array.from(document.querySelectorAll("table"));
      const tableId = table.getAttribute("data-table-id");
      if (tableId) {
        for (let i = 0; i < allTables.length; i++) {
          const currentId = allTables[i].getAttribute("data-table-id");
          if (currentId === tableId) {
            console.log(`\u901A\u8FC7ID\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${i}\u4E2A\u8868\u683C\uFF08ID: ${tableId}\uFF09`);
            return { index: i, id: tableId };
          }
        }
      }
      const tableFeature = this.extractTableFeature(table);
      if (tableFeature) {
        for (let i = 0; i < allTables.length; i++) {
          const currentFeature = this.extractTableFeature(allTables[i]);
          if (tableFeature.contentHash === currentFeature.contentHash && tableFeature.headers === currentFeature.headers && tableFeature.rows === currentFeature.rows && tableFeature.cols === currentFeature.cols) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u7CBE\u786E\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${i}\u4E2A\u8868\u683C`);
            return { index: i };
          }
        }
      }
      let bestMatchIndex = -1;
      let bestMatchScore = 0;
      let bestMatchId = "";
      for (let i = 0; i < allTables.length; i++) {
        const currentTable = allTables[i];
        const currentFeature = this.extractTableFeature(currentTable);
        const currentId = currentTable.getAttribute("data-table-id");
        const similarityScore = this.calculateFeatureSimilarity(tableFeature, currentFeature);
        if (similarityScore > bestMatchScore) {
          bestMatchScore = similarityScore;
          bestMatchIndex = i;
          bestMatchId = currentId || "";
        }
      }
      if (bestMatchIndex !== -1 && bestMatchScore > 0.7) {
        console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683C\u4F4D\u7F6E: \u7B2C${bestMatchIndex}\u4E2A\u8868\u683C\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
        return { index: bestMatchIndex, id: bestMatchId };
      }
      const index = allTables.indexOf(table);
      if (index !== -1) {
        console.log(`\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E: \u7B2C${index}\u4E2A\u8868\u683C\uFF08\u5171${allTables.length}\u4E2A\uFF09`);
        return { index };
      }
      console.warn("\u65E0\u6CD5\u786E\u5B9A\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E");
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u8868\u683C\u4F4D\u7F6E\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 
   * @param str 
   * @returns 
   */
  simpleHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash).toString(16).substring(0, 8);
  }
  /**
   * ID
   * @param table 
   * @param autoCreate IDconfirmAndCreateTableId
   * @returns ID
   */
  ensureTableHasId(table, autoCreate = false) {
    if (!table)
      return "";
    const tableId = this.getTableIdentifier(table, true);
    if (tableId) {
      if (!table.getAttribute("data-table-id")) {
        table.setAttribute("data-table-id", tableId);
      }
      return tableId;
    }
    if (autoCreate) {
      console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u81EA\u52A8\u521B\u5EFA\u65B0ID");
      return this.confirmAndCreateTableId(table);
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u4E0D\u81EA\u52A8\u521B\u5EFAID");
    return "";
  }
  /**
   * ID
   * @returns ID
   */
  generateTableId() {
    try {
      const prefix = this.plugin.settings.idPrefix || "tbl";
      const date = new Date();
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, "0");
      const day = String(date.getDate()).padStart(2, "0");
      const activeFile = this.getApp().workspace.getActiveFile();
      let fileCode = "doc";
      if (activeFile) {
        const fileName = activeFile.basename;
        if (fileName && fileName.length >= 2) {
          fileCode = fileName.substring(0, 2).toLowerCase();
        }
      }
      const randomChars = "abcdefghijklmnopqrstuvwxyz";
      let randomStr = "";
      for (let i = 0; i < 6; i++) {
        randomStr += randomChars.charAt(Math.floor(Math.random() * randomChars.length));
      }
      const tableId = `${prefix}-${year}${month}${day}-${fileCode}${randomStr}`;
      console.log(`\u751F\u6210\u8868\u683CID: ${tableId}`);
      return tableId;
    } catch (error) {
      console.error("\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519:", error);
      const timestamp = new Date().getTime();
      const random = Math.floor(Math.random() * 1e4);
      return `${this.plugin.settings.idPrefix || "tbl"}-${timestamp}-${random}`;
    }
  }
  /**
   * MarkdownID
   * @param content Markdown
   * @returns ID
   */
  extractTableIdsFromMarkdown(content) {
    try {
      const result = [];
      const lines = content.split("\n");
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        let tableId = "";
        let tableFeature = {};
        const beginMatch = line.match(/<!--\s*table-begin:\s*([a-zA-Z0-9_\-:.]+)\s*(?:feature:\s*(\{.*\}))?\s*-->/);
        if (beginMatch) {
          tableId = beginMatch[1];
          if (beginMatch[2]) {
            try {
              tableFeature = JSON.parse(beginMatch[2]);
            } catch (e) {
              console.error("\u89E3\u6790\u8868\u683C\u7279\u5F81JSON\u65F6\u51FA\u9519:", e);
            }
          }
          let tableContent = "";
          let tableStartLine = -1;
          let tableEndLine = -1;
          for (let j = i + 1; j < lines.length; j++) {
            if (lines[j].trim().startsWith("|")) {
              tableStartLine = j;
              break;
            }
          }
          if (tableStartLine >= 0) {
            for (let j = tableStartLine; j < lines.length; j++) {
              if (!lines[j].trim().startsWith("|")) {
                tableEndLine = j - 1;
                break;
              }
              if (j === lines.length - 1) {
                tableEndLine = j;
              }
            }
            if (tableEndLine >= tableStartLine) {
              tableContent = lines.slice(tableStartLine, tableEndLine + 1).join("\n");
              const feature = this.extractTableFeature(tableContent);
              feature.position = {
                startLine: tableStartLine,
                endLine: tableEndLine
              };
              const activeFile = this.getApp().workspace.getActiveFile();
              if (activeFile) {
                feature.fileInfo = {
                  path: activeFile.path,
                  name: activeFile.basename
                };
              }
              const mergedFeature = { ...feature, ...tableFeature, id: tableId };
              result.push({
                id: tableId,
                feature: mergedFeature
              });
            }
          }
          continue;
        }
        const idMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*(?:feature:\s*(\{.*\}))?\s*-->/);
        if (idMatch) {
          tableId = idMatch[1];
          if (idMatch[2]) {
            try {
              tableFeature = JSON.parse(idMatch[2]);
            } catch (e) {
              console.error("\u89E3\u6790\u8868\u683C\u7279\u5F81JSON\u65F6\u51FA\u9519:", e);
            }
          }
          let tableContent = "";
          let tableStartLine = -1;
          let tableEndLine = -1;
          for (let j = i + 1; j < lines.length; j++) {
            if (lines[j].trim().startsWith("|")) {
              tableStartLine = j;
              break;
            }
          }
          if (tableStartLine >= 0) {
            for (let j = tableStartLine; j < lines.length; j++) {
              if (!lines[j].trim().startsWith("|")) {
                tableEndLine = j - 1;
                break;
              }
              if (j === lines.length - 1) {
                tableEndLine = j;
              }
            }
            if (tableEndLine >= tableStartLine) {
              tableContent = lines.slice(tableStartLine, tableEndLine + 1).join("\n");
              const feature = this.extractTableFeature(tableContent);
              feature.position = {
                startLine: tableStartLine,
                endLine: tableEndLine
              };
              const activeFile = this.plugin.app.workspace.getActiveFile();
              if (activeFile) {
                feature.fileInfo = {
                  path: activeFile.path,
                  name: activeFile.basename
                };
              }
              const mergedFeature = { ...feature, ...tableFeature, id: tableId };
              result.push({
                id: tableId,
                feature: mergedFeature
              });
            }
          }
        }
      }
      return result;
    } catch (error) {
      console.error("\u4ECEMarkdown\u5185\u5BB9\u63D0\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return [];
    }
  }
};
var TableIdManager = _TableIdManager;
TableIdManager.isProcessingTableId = false;
TableIdManager.isCreatingTableId = false;

// src/tableToolbar.ts
var import_obsidian5 = require("obsidian");
var import_obsidian6 = require("obsidian");
var TableToolbar = class {
  constructor(plugin) {
    this.activeTable = null;
    this.selectedCells = [];
    this.isDragging = false;
    this.dragStartX = 0;
    this.dragStartY = 0;
    this.isCollapsed = false;
    this.initialPosition = { left: "50%", top: "10px" };
    this.editModeTableInfo = null;
    this.applyToEntireTable = false;
    this.plugin = plugin;
    console.log("TableToolbar initialized");
  }
  // app
  getApp() {
    return this.plugin.app;
  }
  /**
   * 
   * @param containerEl 
   */
  createToolbar(containerEl) {
    var _a, _b, _c;
    this.containerEl = containerEl;
    containerEl.style.position = "fixed";
    containerEl.style.zIndex = "1000";
    containerEl.style.left = "50%";
    containerEl.style.top = "10px";
    containerEl.style.transform = "translateX(-50%)";
    containerEl.style.display = "block";
    this.toolbar = containerEl.createEl("div", {
      cls: "advanced-table-toolbar"
    });
    this.toolbar.style.display = "flex";
    this.toolbar.style.flexDirection = "row";
    this.toolbar.style.gap = "5px";
    this.toolbar.style.padding = "5px";
    this.toolbar.style.margin = "5px 0";
    this.toolbar.style.borderRadius = "5px";
    this.toolbar.style.backgroundColor = "var(--background-secondary)";
    this.toolbar.style.boxShadow = "0 2px 8px rgba(0, 0, 0, 0.15)";
    this.toolbar.style.userSelect = "none";
    this.toolbar.style.position = "relative";
    this.dragHandle = this.toolbar.createEl("div", {
      cls: "advanced-table-toolbar-drag-handle"
    });
    this.dragHandle.style.cursor = "grab";
    this.dragHandle.style.padding = "0 5px";
    this.dragHandle.style.display = "flex";
    this.dragHandle.style.alignItems = "center";
    this.dragHandle.style.marginRight = "5px";
    this.dragHandle.style.height = "28px";
    this.dragHandle.style.borderRadius = "3px";
    this.dragHandle.addEventListener("mouseover", () => {
      this.dragHandle.style.backgroundColor = "var(--background-modifier-hover)";
    });
    this.dragHandle.addEventListener("mouseout", () => {
      this.dragHandle.style.backgroundColor = "transparent";
    });
    (0, import_obsidian5.setIcon)(this.dragHandle, "grip-vertical");
    this.toolbarContent = this.toolbar.createEl("div", {
      cls: "advanced-table-toolbar-content"
    });
    this.toolbarContent.style.display = "flex";
    this.toolbarContent.style.flexDirection = "row";
    this.toolbarContent.style.gap = "5px";
    this.toolbarContent.style.flexGrow = "1";
    this.createButtonGroup("\u5BF9\u9F50", [
      { id: "align-left", tooltip: "\u5DE6\u5BF9\u9F50", icon: "align-left" },
      { id: "align-center", tooltip: "\u5C45\u4E2D\u5BF9\u9F50", icon: "align-center" },
      { id: "align-right", tooltip: "\u53F3\u5BF9\u9F50", icon: "align-right" },
      { id: "align-top", tooltip: "\u9876\u90E8\u5BF9\u9F50", icon: "align-top" },
      { id: "align-middle", tooltip: "\u5782\u76F4\u5C45\u4E2D", icon: "align-middle" },
      { id: "align-bottom", tooltip: "\u5E95\u90E8\u5BF9\u9F50", icon: "align-bottom" },
      { id: "align-all", tooltip: "\u5168\u90E8\u5C45\u4E2D", icon: "align-all" }
    ]);
    this.createSeparator();
    this.createButtonGroup("\u5408\u5E76", [
      { id: "merge-cells", tooltip: "\u5408\u5E76\u9009\u4E2D\u5355\u5143\u683C", icon: "merge-cells" },
      { id: "merge-right", tooltip: "\u5411\u53F3\u5408\u5E76", icon: "merge-right" },
      { id: "merge-down", tooltip: "\u5411\u4E0B\u5408\u5E76", icon: "merge-down" },
      { id: "split", tooltip: "\u62C6\u5206\u5355\u5143\u683C", icon: "split" }
    ]);
    this.createSeparator();
    this.createButtonGroup("\u8868\u683C", [
      { id: "table-id", tooltip: "\u751F\u6210\u8868\u683CID", icon: "table-id" },
      { id: "table-row-add", tooltip: "\u6DFB\u52A0\u884C", icon: "table-row-add" },
      { id: "table-style", tooltip: "\u8868\u683C\u6837\u5F0F", icon: "table-style" }
    ]);
    this.collapseButton = this.toolbar.createEl("button", {
      cls: "advanced-table-toolbar-collapse-button",
      attr: { "aria-label": "\u6536\u8D77/\u5C55\u5F00\u5DE5\u5177\u680F", "title": "\u6536\u8D77\u5DE5\u5177\u680F" }
    });
    this.collapseButton.style.display = "flex";
    this.collapseButton.style.justifyContent = "center";
    this.collapseButton.style.alignItems = "center";
    this.collapseButton.style.width = "28px";
    this.collapseButton.style.height = "28px";
    this.collapseButton.style.padding = "3px";
    this.collapseButton.style.border = "none";
    this.collapseButton.style.borderRadius = "3px";
    this.collapseButton.style.backgroundColor = "transparent";
    this.collapseButton.style.cursor = "pointer";
    this.collapseButton.style.marginLeft = "5px";
    (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-left");
    this.collapseButton.addEventListener("mouseover", () => {
      this.collapseButton.style.backgroundColor = "var(--background-modifier-hover)";
    });
    this.collapseButton.addEventListener("mouseout", () => {
      this.collapseButton.style.backgroundColor = "transparent";
    });
    this.collapseButton.addEventListener("click", () => {
      this.toggleCollapse();
    });
    this.setupDraggable();
    console.log("\u5DE5\u5177\u680F\u5DF2\u521B\u5EFA\uFF0C\u62D6\u62FD\u624B\u67C4\u72B6\u6001:", {
      dragHandleExists: !!this.dragHandle,
      dragHandleParent: (_a = this.dragHandle) == null ? void 0 : _a.parentElement,
      dragHandleDisplay: (_b = this.dragHandle) == null ? void 0 : _b.style.display,
      dragHandleIcon: (_c = this.dragHandle) == null ? void 0 : _c.innerHTML,
      toolbarChildren: Array.from(this.toolbar.children).map((child) => child.className)
    });
  }
  /**
   * 
   */
  setupDraggable() {
    const container = this.containerEl;
    this.dragHandle.addEventListener("mousedown", (e) => {
      if (e.button !== 0)
        return;
      this.isDragging = true;
      this.dragStartX = e.clientX;
      this.dragStartY = e.clientY;
      const rect = container.getBoundingClientRect();
      this.initialPosition = {
        left: container.style.left || "50%",
        top: container.style.top || "10px"
      };
      this.dragHandle.style.cursor = "grabbing";
      document.body.style.cursor = "grabbing";
      e.preventDefault();
      e.stopPropagation();
    });
    const mouseMoveHandler = (e) => {
      if (!this.isDragging)
        return;
      const deltaX = e.clientX - this.dragStartX;
      const deltaY = e.clientY - this.dragStartY;
      const rect = container.getBoundingClientRect();
      let newLeft;
      if (this.initialPosition.left.endsWith("%")) {
        const viewportWidth = document.documentElement.clientWidth;
        const initialLeftPx = parseFloat(this.initialPosition.left) / 100 * viewportWidth;
        newLeft = `${initialLeftPx + deltaX}px`;
      } else {
        const initialLeftPx = parseFloat(this.initialPosition.left);
        newLeft = `${initialLeftPx + deltaX}px`;
      }
      const newTop = `${parseFloat(this.initialPosition.top) + deltaY}px`;
      container.style.left = newLeft;
      container.style.top = newTop;
      container.style.transform = "none";
      e.preventDefault();
      e.stopPropagation();
    };
    const mouseUpHandler = (e) => {
      if (!this.isDragging)
        return;
      this.isDragging = false;
      this.dragHandle.style.cursor = "grab";
      document.body.style.cursor = "";
      e.stopPropagation();
    };
    document.addEventListener("mousemove", mouseMoveHandler);
    document.addEventListener("mouseup", mouseUpHandler);
    this.plugin.registerDomEvent(document, "mousemove", mouseMoveHandler);
    this.plugin.registerDomEvent(document, "mouseup", mouseUpHandler);
  }
  /**
   * /
   */
  toggleCollapse() {
    this.isCollapsed = !this.isCollapsed;
    if (this.isCollapsed) {
      this.toolbarContent.style.display = "none";
      (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-right");
      this.toolbar.style.width = "auto";
      this.toolbar.classList.add("collapsed");
      this.containerEl.style.width = "auto";
      this.containerEl.style.height = "auto";
      this.collapseButton.setAttribute("title", "\u5C55\u5F00\u5DE5\u5177\u680F");
    } else {
      this.toolbarContent.style.display = "flex";
      (0, import_obsidian5.setIcon)(this.collapseButton, "chevron-left");
      this.toolbar.style.width = "";
      this.toolbar.classList.remove("collapsed");
      this.containerEl.style.width = "";
      this.containerEl.style.height = "";
      this.collapseButton.setAttribute("title", "\u6536\u8D77\u5DE5\u5177\u680F");
    }
  }
  /**
   * 
   * @param groupName 
   * @param buttons 
   */
  createButtonGroup(groupName, buttons) {
    const group = this.toolbarContent.createEl("div", {
      cls: "advanced-table-toolbar-group"
    });
    group.style.display = "flex";
    group.style.flexDirection = "row";
    group.style.alignItems = "center";
    const label = group.createEl("span", {
      text: groupName,
      cls: "advanced-table-toolbar-group-label"
    });
    label.style.fontSize = "12px";
    label.style.marginRight = "5px";
    label.style.opacity = "0.7";
    buttons.forEach((btn) => {
      const button = group.createEl("button", {
        cls: `advanced-table-toolbar-button ${btn.id}`,
        attr: { "aria-label": btn.tooltip }
      });
      button.style.display = "flex";
      button.style.justifyContent = "center";
      button.style.alignItems = "center";
      button.style.width = "28px";
      button.style.height = "28px";
      button.style.padding = "3px";
      button.style.border = "none";
      button.style.borderRadius = "3px";
      button.style.backgroundColor = "transparent";
      button.style.cursor = "pointer";
      (0, import_obsidian5.setIcon)(button, btn.icon);
      button.addEventListener("mouseover", () => {
        button.style.backgroundColor = "var(--background-modifier-hover)";
      });
      button.addEventListener("mouseout", () => {
        button.style.backgroundColor = "transparent";
      });
      button.addEventListener("click", () => {
        this.handleButtonClick(btn.id);
      });
      button.setAttribute("title", btn.tooltip);
    });
  }
  /**
   * 
   */
  createSeparator() {
    const separator = this.toolbarContent.createEl("div", {
      cls: "advanced-table-toolbar-separator"
    });
    separator.style.width = "1px";
    separator.style.height = "24px";
    separator.style.margin = "0 5px";
    separator.style.backgroundColor = "var(--background-modifier-border)";
  }
  /**
   * 
   * @param buttonId ID
   */
  handleButtonClick(buttonId) {
    try {
      console.log(`\u70B9\u51FB\u4E86\u6309\u94AE: ${buttonId}`);
      const isEditMode = this.isInEditMode();
      switch (buttonId) {
        case "align-left":
          this.applyAlignmentToSelectedCells("left");
          break;
        case "align-center":
          this.applyAlignmentToSelectedCells("center");
          break;
        case "align-right":
          this.applyAlignmentToSelectedCells("right");
          break;
        case "align-top":
          this.applyAlignmentToSelectedCells(void 0, "top");
          break;
        case "align-middle":
          this.applyAlignmentToSelectedCells(void 0, "middle");
          break;
        case "align-bottom":
          this.applyAlignmentToSelectedCells(void 0, "bottom");
          break;
        case "align-all":
          this.applyAlignmentToSelectedCells("center", "middle");
          break;
        case "merge-cells":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u591A\u9009\u5408\u5E76\uFF0C\u8BF7\u4F7F\u7528\u5411\u53F3\u6216\u5411\u4E0B\u5408\u5E76");
          } else {
            this.mergeCells();
          }
          break;
        case "merge-right":
          this.mergeRight();
          break;
        case "merge-down":
          this.mergeDown();
          break;
        case "split":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            this.plugin.markdownSourceEditor.splitMergedCells().then((success) => {
              if (success) {
                this.clearCellSelection();
              }
            }).catch((error) => {
              console.error("\u62C6\u5206\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
              new import_obsidian5.Notice(`\u62C6\u5206\u5355\u5143\u683C\u65F6\u51FA\u9519: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
            });
          } else {
            this.splitCell();
          }
          break;
        case "table-id":
          this.generateTableId();
          break;
        case "table-row-add":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u901A\u8FC7\u5DE5\u5177\u680F\u6DFB\u52A0\u884C\uFF0C\u8BF7\u76F4\u63A5\u7F16\u8F91Markdown\u6E90\u7801");
          } else {
            this.showRowAddMenu();
          }
          break;
        case "table-style":
          if (isEditMode && this.plugin.settings.enableEditModeOperations) {
            new import_obsidian5.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u6682\u4E0D\u652F\u6301\u6837\u5F0F\u8BBE\u7F6E");
          } else {
            this.showStyleMenu();
          }
          break;
        default:
          console.log(`\u672A\u5904\u7406\u7684\u6309\u94AEID: ${buttonId}`);
      }
    } catch (error) {
      console.error(`\u5904\u7406\u6309\u94AE\u70B9\u51FB\u65F6\u51FA\u9519: ${buttonId}`, error);
    }
  }
  /**
   * 
   */
  logDebugInfo() {
    const allTables = document.querySelectorAll("table").length;
    const selectedTableElements = document.querySelectorAll('table[data-table-selected="true"]').length;
    console.log("\u5F53\u524D\u72B6\u6001:", {
      activeTable: this.activeTable,
      allTables,
      selectedCells: this.selectedCells,
      selectedTableElements,
      toolbarContainer: this.containerEl
    });
  }
  /**
   * 
   * @param horizontalAlign 
   * @param verticalAlign 
   */
  applyAlignmentToSelectedCells(horizontalAlign, verticalAlign) {
    try {
      console.log("\u5E94\u7528\u5BF9\u9F50:", { horizontalAlign, verticalAlign });
      this.applyAlignmentStylesOnly(horizontalAlign, verticalAlign);
      if (!this.activeTable || this.selectedCells.length === 0 && !this.applyToEntireTable) {
        console.warn("\u6CA1\u6709\u9009\u4E2D\u5355\u5143\u683C\u6216\u6D3B\u52A8\u8868\u683C");
        return;
      }
      this.plugin.readTableIdFromMarkdown(this.activeTable).then((tableId) => {
        console.log(`\u4ECEMarkdown\u6587\u4EF6\u4E2D\u83B7\u53D6\u8868\u683CID: ${tableId}`);
        if (!tableId) {
          console.warn("\u672A\u627E\u5230HTML\u6CE8\u91CA\u4E2D\u5B9A\u4E49\u7684\u8868\u683CID\uFF0C\u5C06\u53EA\u5E94\u7528\u6837\u5F0F\u4F46\u4E0D\u4FDD\u5B58\u6570\u636E");
          new import_obsidian5.Notice("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u6837\u5F0F\u5DF2\u5E94\u7528\u4F46\u672A\u4FDD\u5B58\u5230\u6570\u636E\u6587\u4EF6");
          return;
        }
        if (this.activeTable) {
          const activeTable = this.activeTable;
          const activeFile = this.getApp().workspace.getActiveFile();
          if (!activeFile) {
            console.warn("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84");
            return;
          }
          const selectedCellPositions = this.getSelectedCellPositions();
          console.log("\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E:", selectedCellPositions);
          this.plugin.loadData().then((existingData) => {
            var _a;
            if (!existingData.tables) {
              existingData.tables = {};
            }
            let tableData = existingData.tables[tableId];
            if (!tableData) {
              console.log(`\u521B\u5EFA\u65B0\u7684\u8868\u683C\u6570\u636E: ${tableId}`);
              const rows = activeTable.querySelectorAll("tr");
              const rowCount = rows.length;
              let colCount = 0;
              if (rowCount > 0) {
                const firstRow = rows[0];
                colCount = firstRow.querySelectorAll("td, th").length;
              }
              tableData = {
                id: tableId,
                locations: [
                  {
                    path: activeFile.path,
                    isActive: true
                  }
                ],
                structure: {
                  rowCount,
                  colCount,
                  hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
                },
                styling: {
                  rowHeights: Array(rowCount).fill("auto"),
                  colWidths: Array(colCount).fill("auto"),
                  alignment: Array(colCount).fill("left"),
                  cellStyles: []
                  // 
                }
              };
              existingData.tables[tableId] = tableData;
              console.log(`\u5DF2\u521B\u5EFA\u65B0\u7684\u8868\u683C\u6570\u636E\u8BB0\u5F55: ${tableId}`, tableData);
            } else {
              console.log(`\u627E\u5230\u73B0\u6709\u8868\u683C\u6570\u636E: ${tableId}`, tableData);
              if (!tableData.structure) {
                const rows = activeTable.querySelectorAll("tr");
                const rowCount = rows.length;
                let colCount = 0;
                if (rowCount > 0) {
                  const firstRow = rows[0];
                  colCount = firstRow.querySelectorAll("td, th").length;
                }
                tableData.structure = {
                  rowCount,
                  colCount,
                  hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
                };
              }
              if (!tableData.styling) {
                tableData.styling = {
                  rowHeights: Array(tableData.structure.rowCount).fill("auto"),
                  colWidths: Array(tableData.structure.colCount).fill("auto"),
                  alignment: Array(tableData.structure.colCount).fill("left"),
                  cellStyles: []
                  // 
                };
              }
              if (!tableData.styling.cellStyles) {
                tableData.styling.cellStyles = [];
              }
              if (!tableData.locations) {
                tableData.locations = [{
                  path: activeFile.path,
                  isActive: true
                }];
              } else {
                const filePathExists = tableData.locations.some((loc) => loc.path === activeFile.path);
                if (!filePathExists) {
                  tableData.locations.push({
                    path: activeFile.path,
                    isActive: true
                  });
                }
              }
            }
            if (this.selectedCells.length === 0 || this.applyToEntireTable) {
              if (horizontalAlign) {
                tableData.styling = tableData.styling || {};
                tableData.styling.alignment = tableData.styling.alignment || [];
                const colCount = ((_a = tableData.structure) == null ? void 0 : _a.colCount) || 0;
                for (let i = 0; i < colCount; i++) {
                  tableData.styling.alignment[i] = horizontalAlign;
                }
                console.log(`\u66F4\u65B0\u8868\u683C\u5BF9\u9F50\u6570\u636E: ${tableId}`, tableData.styling.alignment);
              }
            } else {
              selectedCellPositions.forEach((pos) => {
                const existingStyleIndex = tableData.styling.cellStyles.findIndex(
                  (style) => style.row === pos.row && style.col === pos.col
                );
                if (existingStyleIndex !== -1) {
                  if (horizontalAlign) {
                    tableData.styling.cellStyles[existingStyleIndex].textAlign = horizontalAlign;
                  }
                  if (verticalAlign) {
                    tableData.styling.cellStyles[existingStyleIndex].verticalAlign = verticalAlign;
                  }
                } else {
                  const newStyle = { row: pos.row, col: pos.col };
                  if (horizontalAlign) {
                    newStyle.textAlign = horizontalAlign;
                  }
                  if (verticalAlign) {
                    newStyle.verticalAlign = verticalAlign;
                  }
                  tableData.styling.cellStyles.push(newStyle);
                }
              });
              console.log(`\u66F4\u65B0\u5355\u5143\u683C\u6837\u5F0F\u6570\u636E: ${tableId}`, tableData.styling.cellStyles);
            }
            this.plugin.saveData(existingData);
            console.log(`\u5DF2\u4FDD\u5B58\u8868\u683C\u6570\u636E: ${tableId}`);
            new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230${this.selectedCells.length > 0 ? "\u9009\u4E2D\u5355\u5143\u683C" : "\u6574\u4E2A\u8868\u683C"}\u5E76\u4FDD\u5B58\u5230\u6570\u636E\u6587\u4EF6`);
          }).catch((err) => {
            console.error("\u4FDD\u5B58\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", err);
            new import_obsidian5.Notice(`\u4FDD\u5B58\u8868\u683C\u6570\u636E\u5931\u8D25: ${err.message || "\u672A\u77E5\u9519\u8BEF"}`);
          });
        } else {
          console.warn("\u4FDD\u5B58\u6570\u636E\u65F6\u8868\u683C\u4E0D\u518D\u5B58\u5728");
        }
      }).catch((error) => {
        console.error("\u83B7\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
        new import_obsidian5.Notice(`\u83B7\u53D6\u8868\u683CID\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      });
      console.log("\u5BF9\u9F50\u5E94\u7528\u5B8C\u6210");
    } catch (error) {
      console.error("\u5E94\u7528\u5BF9\u9F50\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u5E94\u7528\u5BF9\u9F50\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   * @returns 
   */
  getSelectedCellPositions() {
    const positions = [];
    if (!this.activeTable || this.selectedCells.length === 0) {
      return positions;
    }
    this.selectedCells.forEach((cell) => {
      const row = cell.closest("tr");
      if (!row)
        return;
      const rowIndex = Array.from(this.activeTable.querySelectorAll("tr")).indexOf(row);
      if (rowIndex === -1)
        return;
      const colIndex = Array.from(row.querySelectorAll("td, th")).indexOf(cell);
      if (colIndex === -1)
        return;
      positions.push({ row: rowIndex, col: colIndex });
    });
    return positions;
  }
  /**
   * 
   * @param horizontalAlign 
   * @param verticalAlign 
   */
  applyAlignmentStylesOnly(horizontalAlign, verticalAlign) {
    if (this.selectedCells.length === 0 && this.activeTable) {
      const cells = this.activeTable.querySelectorAll("td, th");
      cells.forEach((cell) => {
        const cellEl = cell;
        if (horizontalAlign) {
          cellEl.style.textAlign = horizontalAlign;
        }
        if (verticalAlign) {
          cellEl.style.verticalAlign = verticalAlign;
        }
      });
      new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230\u6574\u4E2A\u8868\u683C`);
    } else {
      this.selectedCells.forEach((cell) => {
        if (horizontalAlign) {
          cell.style.textAlign = horizontalAlign;
        }
        if (verticalAlign) {
          cell.style.verticalAlign = verticalAlign;
        }
      });
      new import_obsidian5.Notice(`\u5DF2\u5C06${horizontalAlign || ""}${horizontalAlign && verticalAlign ? "\u548C" : ""}${verticalAlign || ""}\u5BF9\u9F50\u5E94\u7528\u5230\u9009\u4E2D\u5355\u5143\u683C`);
    }
  }
  /**
   * 
   */
  async mergeCells() {
    var _a;
    try {
      console.log("\u5C1D\u8BD5\u5408\u5E76\u9009\u4E2D\u7684\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("right");
        if (success) {
          this.clearCellSelection();
          console.log("\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length < 2) {
          new import_obsidian5.Notice("\u8BF7\u9009\u62E9\u81F3\u5C112\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
          return;
        }
        const boundary = this.getSelectedCellsBoundary();
        if (!boundary) {
          new import_obsidian5.Notice("\u65E0\u6CD5\u786E\u5B9A\u9009\u4E2D\u5355\u5143\u683C\u7684\u8FB9\u754C");
          return;
        }
        const { minRow, maxRow, minCol, maxCol } = boundary;
        const expectedCellCount = (maxRow - minRow + 1) * (maxCol - minCol + 1);
        if (expectedCellCount !== this.selectedCells.length) {
          new import_obsidian5.Notice("\u53EA\u80FD\u5408\u5E76\u5F62\u6210\u5B8C\u6574\u77E9\u5F62\u7684\u5355\u5143\u683C");
          return;
        }
        const mainCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${minRow}"][col-index="${minCol}"]`);
        if (!mainCell) {
          new import_obsidian5.Notice("\u65E0\u6CD5\u627E\u5230\u4E3B\u5355\u5143\u683C");
          return;
        }
        if (this.plugin.settings.confirmMergeNonEmpty) {
          const nonEmptyCells = this.selectedCells.filter((cell) => {
            var _a2;
            if (cell === mainCell)
              return false;
            const content = ((_a2 = cell.textContent) == null ? void 0 : _a2.trim()) || "";
            return content !== "" && content !== "<" && content !== "^";
          });
          if (nonEmptyCells.length > 0) {
            const cellContents = nonEmptyCells.map((cell) => {
              var _a2;
              return `"${((_a2 = cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
            }).join(", ");
            const confirmMerge = await this.showConfirmDialog(
              `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
            );
            if (!confirmMerge)
              return;
          }
        }
        const rowSpanValue = maxRow - minRow + 1;
        const colSpanValue = maxCol - minCol + 1;
        if (rowSpanValue > 1) {
          mainCell.setAttribute("rowspan", rowSpanValue.toString());
        }
        if (colSpanValue > 1) {
          mainCell.setAttribute("colspan", colSpanValue.toString());
        }
        for (const cell of this.selectedCells) {
          if (cell === mainCell)
            continue;
          const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
          const colIndex = parseInt(cell.getAttribute("col-index") || "0");
          if (rowIndex === minRow) {
            const markerCount = colIndex - minCol;
            cell.textContent = "<".repeat(markerCount);
            cell.setAttribute("data-merged", "true");
            cell.setAttribute("data-merge-direction", "left");
            cell.setAttribute("data-merge-count", markerCount.toString());
          } else if (colIndex === minCol) {
            const markerCount = rowIndex - minRow;
            cell.textContent = "^".repeat(markerCount);
            cell.setAttribute("data-merged", "true");
            cell.setAttribute("data-merge-direction", "up");
            cell.setAttribute("data-merge-count", markerCount.toString());
          } else {
            if (rowIndex > minRow && colIndex > minCol) {
              const markerCount = colIndex - minCol;
              cell.textContent = "<".repeat(markerCount);
              cell.setAttribute("data-merged", "true");
              cell.setAttribute("data-merge-direction", "left");
              cell.setAttribute("data-merge-count", markerCount.toString());
            }
          }
          cell.style.display = "none";
        }
        this.applyMergedCellStyles(mainCell, this.selectedCells.filter((cell) => cell !== mainCell));
        new import_obsidian5.Notice(`\u5DF2\u6210\u529F\u5408\u5E76${this.selectedCells.length}\u4E2A\u5355\u5143\u683C`);
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        this.clearCellSelection();
      }
    } catch (error) {
      console.error("\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   */
  async mergeRight() {
    var _a, _b;
    try {
      console.log("\u5C1D\u8BD5\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("right");
        if (success) {
          this.clearCellSelection();
          console.log("\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length === 0) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u5408\u5E76\u7684\u5355\u5143\u683C");
          return;
        }
        if (this.selectedCells.length > 1) {
          const rowIndices = /* @__PURE__ */ new Set();
          for (const cell2 of this.selectedCells) {
            const rowIndex2 = parseInt(cell2.getAttribute("row-index") || "0");
            rowIndices.add(rowIndex2);
          }
          if (rowIndices.size !== 1) {
            new import_obsidian5.Notice("\u5411\u53F3\u5408\u5E76\u9700\u8981\u9009\u62E9\u540C\u4E00\u884C\u7684\u5355\u5143\u683C");
            return;
          }
          const cellsWithIndices = this.selectedCells.map((cell2) => {
            return {
              cell: cell2,
              colIndex: parseInt(cell2.getAttribute("col-index") || "0")
            };
          }).sort((a, b) => a.colIndex - b.colIndex);
          for (let i = 1; i < cellsWithIndices.length; i++) {
            if (cellsWithIndices[i].colIndex !== cellsWithIndices[i - 1].colIndex + 1) {
              new import_obsidian5.Notice("\u9700\u8981\u9009\u62E9\u8FDE\u7EED\u7684\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
              return;
            }
          }
          const mainCell = cellsWithIndices[0].cell;
          const mergeCount = cellsWithIndices.length - 1;
          if (this.plugin.settings.confirmMergeNonEmpty) {
            const nonEmptyCells = cellsWithIndices.slice(1).filter((item) => {
              var _a2;
              const content = ((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "";
              return content !== "" && content !== "<" && content !== "^";
            });
            if (nonEmptyCells.length > 0) {
              const cellContents = nonEmptyCells.map((item) => {
                var _a2;
                return `"${((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
              }).join(", ");
              const confirmMerge = await this.showConfirmDialog(
                `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
              );
              if (!confirmMerge)
                return;
            }
          }
          for (let i = 1; i < cellsWithIndices.length; i++) {
            const cell2 = cellsWithIndices[i].cell;
            cell2.textContent = "<".repeat(i);
            cell2.setAttribute("data-merged", "true");
            cell2.setAttribute("data-merge-direction", "left");
            cell2.setAttribute("data-merge-count", i.toString());
          }
          this.applyMergedCellStyles(mainCell, cellsWithIndices.slice(1).map((item) => item.cell));
          new import_obsidian5.Notice(`\u5DF2\u5411\u53F3\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C`);
          console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C\u6210\u529F`);
          this.clearCellSelection();
          return;
        }
        const cell = this.selectedCells[0];
        if (!cell) {
          console.log("\u672A\u627E\u5230\u9009\u4E2D\u7684\u5355\u5143\u683C");
          return;
        }
        const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || "0");
        console.log(`\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}`);
        const rightCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${rowIndex}"][col-index="${colIndex + 1}"]`);
        if (!rightCell) {
          new import_obsidian5.Notice("\u53F3\u4FA7\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
          return;
        }
        const rightContent = (_b = rightCell.textContent) == null ? void 0 : _b.trim();
        if (this.plugin.settings.confirmMergeNonEmpty && rightContent && rightContent !== "<" && rightContent !== "^") {
          const confirmed = await this.showConfirmDialog(
            `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9"${rightContent}"\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
          );
          if (!confirmed)
            return;
        }
        rightCell.textContent = "<";
        rightCell.setAttribute("data-merged", "true");
        rightCell.setAttribute("data-merge-direction", "left");
        this.applyMergedCellStyles(cell, [rightCell]);
        new import_obsidian5.Notice("\u5DF2\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
      }
    } catch (error) {
      console.error("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   */
  async mergeDown() {
    var _a, _b;
    try {
      console.log("\u5C1D\u8BD5\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      console.log(`\u5F53\u524D\u6A21\u5F0F: ${isEditMode ? "\u7F16\u8F91\u6A21\u5F0F" : "\u9884\u89C8\u6A21\u5F0F"}`);
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        console.log("\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4F7F\u7528 MarkdownSourceEditor \u5408\u5E76\u5355\u5143\u683C");
        const success = await this.plugin.markdownSourceEditor.mergeCells("down");
        if (success) {
          this.clearCellSelection();
          console.log("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
        } else {
          console.log("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25");
        }
      } else {
        if (this.selectedCells.length === 0) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u5408\u5E76\u7684\u5355\u5143\u683C");
          return;
        }
        if (this.selectedCells.length > 1) {
          const colIndices = /* @__PURE__ */ new Set();
          for (const cell2 of this.selectedCells) {
            const colIndex2 = parseInt(cell2.getAttribute("col-index") || "0");
            colIndices.add(colIndex2);
          }
          if (colIndices.size !== 1) {
            new import_obsidian5.Notice("\u5411\u4E0B\u5408\u5E76\u9700\u8981\u9009\u62E9\u540C\u4E00\u5217\u7684\u5355\u5143\u683C");
            return;
          }
          const cellsWithIndices = this.selectedCells.map((cell2) => {
            return {
              cell: cell2,
              rowIndex: parseInt(cell2.getAttribute("row-index") || "0")
            };
          }).sort((a, b) => a.rowIndex - b.rowIndex);
          for (let i = 1; i < cellsWithIndices.length; i++) {
            if (cellsWithIndices[i].rowIndex !== cellsWithIndices[i - 1].rowIndex + 1) {
              new import_obsidian5.Notice("\u9700\u8981\u9009\u62E9\u8FDE\u7EED\u7684\u5355\u5143\u683C\u8FDB\u884C\u5408\u5E76");
              return;
            }
          }
          const mainCell = cellsWithIndices[0].cell;
          const mergeCount = cellsWithIndices.length - 1;
          if (this.plugin.settings.confirmMergeNonEmpty) {
            const nonEmptyCells = cellsWithIndices.slice(1).filter((item) => {
              var _a2;
              const content = ((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "";
              return content !== "" && content !== "<" && content !== "^";
            });
            if (nonEmptyCells.length > 0) {
              const cellContents = nonEmptyCells.map((item) => {
                var _a2;
                return `"${((_a2 = item.cell.textContent) == null ? void 0 : _a2.trim()) || "(\u7A7A)"}"`;
              }).join(", ");
              const confirmMerge = await this.showConfirmDialog(
                `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9${cellContents}\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
              );
              if (!confirmMerge)
                return;
            }
          }
          for (let i = 1; i < cellsWithIndices.length; i++) {
            const cell2 = cellsWithIndices[i].cell;
            cell2.textContent = "^".repeat(i);
            cell2.setAttribute("data-merged", "true");
            cell2.setAttribute("data-merge-direction", "up");
            cell2.setAttribute("data-merge-count", i.toString());
          }
          this.applyMergedCellStyles(mainCell, cellsWithIndices.slice(1).map((item) => item.cell));
          new import_obsidian5.Notice(`\u5DF2\u5411\u4E0B\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C`);
          console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76${mergeCount}\u4E2A\u5355\u5143\u683C\u6210\u529F`);
          this.clearCellSelection();
          return;
        }
        const cell = this.selectedCells[0];
        if (!cell) {
          console.log("\u672A\u627E\u5230\u9009\u4E2D\u7684\u5355\u5143\u683C");
          return;
        }
        const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
        const colIndex = parseInt(cell.getAttribute("col-index") || "0");
        console.log(`\u9009\u4E2D\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}`);
        const belowCell = (_a = this.activeTable) == null ? void 0 : _a.querySelector(`[row-index="${rowIndex + 1}"][col-index="${colIndex}"]`);
        if (!belowCell) {
          new import_obsidian5.Notice("\u4E0B\u65B9\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
          return;
        }
        const belowContent = (_b = belowCell.textContent) == null ? void 0 : _b.trim();
        if (this.plugin.settings.confirmMergeNonEmpty && belowContent && belowContent !== "<" && belowContent !== "^") {
          const confirmed = await this.showConfirmDialog(
            `\u8981\u5408\u5E76\u7684\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9"${belowContent}"\uFF0C\u786E\u5B9A\u8981\u5408\u5E76\u5417\uFF1F`
          );
          if (!confirmed)
            return;
        }
        belowCell.textContent = "^";
        belowCell.setAttribute("data-merged", "true");
        belowCell.setAttribute("data-merge-direction", "up");
        this.applyMergedCellStyles(cell, [belowCell]);
        new import_obsidian5.Notice("\u5DF2\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
        console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u6210\u529F");
      }
    } catch (error) {
      console.error("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   */
  splitCell() {
    try {
      if (this.selectedCells.length !== 1) {
        console.log("\u9700\u8981\u9009\u62E9\u4E00\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u62C6\u5206");
        new import_obsidian5.Notice("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5355\u5143\u683C\u8FDB\u884C\u62C6\u5206");
        return;
      }
      console.log("\u5F00\u59CB\u62C6\u5206\u5355\u5143\u683C");
      const cell = this.selectedCells[0];
      const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
      const colIndex = parseInt(cell.getAttribute("col-index") || "0");
      const colSpan = cell.getAttribute("colspan");
      const rowSpan = cell.getAttribute("rowspan");
      const table = cell.closest("table");
      let hasMergeMarkers = false;
      if (table) {
        const rightCell = table.querySelector(`[row-index="${rowIndex}"][col-index="${colIndex + 1}"]`);
        if (rightCell && rightCell.textContent) {
          const rightContent = rightCell.textContent.trim();
          if (rightContent === "<" || rightContent === "^") {
            hasMergeMarkers = true;
            rightCell.textContent = "";
            console.log("\u5DF2\u6E05\u9664\u53F3\u4FA7\u5355\u5143\u683C\u7684\u5408\u5E76\u6807\u8BB0");
          }
        }
        const belowCell = table.querySelector(`[row-index="${rowIndex + 1}"][col-index="${colIndex}"]`);
        if (belowCell && belowCell.textContent) {
          const belowContent = belowCell.textContent.trim();
          if (belowContent === "<" || belowContent === "^") {
            hasMergeMarkers = true;
            belowCell.textContent = "";
            console.log("\u5DF2\u6E05\u9664\u4E0B\u65B9\u5355\u5143\u683C\u7684\u5408\u5E76\u6807\u8BB0");
          }
        }
        for (let i = colIndex + 1; i < colIndex + 10; i++) {
          const nextCell = table.querySelector(`[row-index="${rowIndex}"][col-index="${i}"]`);
          if (nextCell && nextCell.textContent && nextCell.textContent.trim() === "<") {
            nextCell.textContent = "";
            hasMergeMarkers = true;
            console.log(`\u5DF2\u6E05\u9664\u4F4D\u7F6E (${rowIndex}, ${i}) \u7684\u6C34\u5E73\u5408\u5E76\u6807\u8BB0`);
          } else {
            break;
          }
        }
        for (let i = rowIndex + 1; i < rowIndex + 10; i++) {
          const nextCell = table.querySelector(`[row-index="${i}"][col-index="${colIndex}"]`);
          if (nextCell && nextCell.textContent && nextCell.textContent.trim() === "^") {
            nextCell.textContent = "";
            hasMergeMarkers = true;
            console.log(`\u5DF2\u6E05\u9664\u4F4D\u7F6E (${i}, ${colIndex}) \u7684\u5782\u76F4\u5408\u5E76\u6807\u8BB0`);
          } else {
            break;
          }
        }
      }
      if (!colSpan && !rowSpan && !hasMergeMarkers) {
        console.log("\u9009\u4E2D\u7684\u5355\u5143\u683C\u6CA1\u6709\u5408\u5E76\u5C5E\u6027\uFF0C\u65E0\u9700\u62C6\u5206");
        new import_obsidian5.Notice("\u9009\u4E2D\u7684\u5355\u5143\u683C\u6CA1\u6709\u5408\u5E76\u5C5E\u6027\uFF0C\u65E0\u9700\u62C6\u5206");
        return;
      }
      if (colSpan) {
        cell.removeAttribute("colspan");
      }
      if (rowSpan) {
        cell.removeAttribute("rowspan");
      }
      if (table) {
        const hiddenCells = table.querySelectorAll('td[style*="display: none"], th[style*="display: none"]');
        hiddenCells.forEach((hiddenCell) => {
          hiddenCell.style.display = "";
        });
      }
      new import_obsidian5.Notice("\u5DF2\u62C6\u5206\u5355\u5143\u683C");
      console.log("\u5355\u5143\u683C\u62C6\u5206\u5B8C\u6210");
      this.clearCellSelection();
    } catch (error) {
      console.error("\u62C6\u5206\u5355\u5143\u683C\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u62C6\u5206\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * ID
   */
  generateTableId() {
    try {
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (!activeView) {
        new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      if (isEditMode && this.plugin.settings.enableEditModeOperations) {
        this.showConfirmDialog("\u662F\u5426\u4E3A\u5F53\u524D\u8868\u683C\u521B\u5EFAID\uFF1F\u521B\u5EFA\u540E\u5C06\u5728\u8868\u683C\u524D\u6DFB\u52A0HTML\u6CE8\u91CA\u3002").then((confirmed) => {
          if (!confirmed) {
            return;
          }
          const editor = activeView.editor;
          const tableInfo = this.plugin.markdownSourceEditor.locateTableInMarkdown(editor);
          if (tableInfo) {
            if (tableInfo.tableId) {
              new import_obsidian5.Notice(`\u8868\u683C\u5DF2\u6709ID: ${tableInfo.tableId}`);
              return;
            }
            const newId = this.generateUniqueTableId();
            const tableStartLine = tableInfo.startLine;
            const currentPos = editor.getCursor();
            editor.replaceRange(`<!-- table-id: ${newId} -->
`, { line: tableStartLine, ch: 0 });
            editor.setCursor(currentPos);
            new import_obsidian5.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newId}`);
            console.log("\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID:", newId);
          } else {
            new import_obsidian5.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u5728\u8868\u683C\u5185");
          }
        });
      } else {
        if (!this.activeTable) {
          new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
          return;
        }
        this.showConfirmDialog("\u662F\u5426\u4E3A\u5F53\u524D\u8868\u683C\u521B\u5EFAID\uFF1F").then((confirmed) => {
          if (!confirmed) {
            return;
          }
          const tableId = this.activeTable ? this.plugin.tableIdManager.confirmAndCreateTableId(this.activeTable) : "";
          if (tableId) {
            const activeView2 = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
            if (activeView2) {
              activeView2.previewMode.rerender(true);
            }
            console.log("\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID:", tableId);
          } else {
            console.error("\u521B\u5EFA\u8868\u683CID\u5931\u8D25");
            new import_obsidian5.Notice("\u521B\u5EFA\u8868\u683CID\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u6DFB\u52A0");
          }
        });
      }
    } catch (error) {
      console.error("\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519:", error);
      new import_obsidian5.Notice(`\u751F\u6210\u8868\u683CID\u65F6\u51FA\u9519: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * ID
   * @returns  tbl-YYYYMMDD-xxxxxxxx ID
   */
  generateUniqueTableId() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, "0");
    const day = String(now.getDate()).padStart(2, "0");
    const dateStr = `${year}${month}${day}`;
    const randomChars = "abcdefghijklmnopqrstuvwxyz0123456789";
    let randomStr = "";
    for (let i = 0; i < 8; i++) {
      randomStr += randomChars.charAt(Math.floor(Math.random() * randomChars.length));
    }
    return `tbl-${dateStr}-${randomStr}`;
  }
  /**
   * ID
   * @param editor 
   * @returns IDnull
   */
  checkExistingTableId(editor) {
    const content = editor.getValue();
    const lines = content.split("\n");
    let tableStartLine = -1;
    for (let i = 0; i < lines.length; i++) {
      if (lines[i].trim().startsWith("|") && lines[i].includes("|")) {
        if (i + 1 < lines.length && lines[i + 1].trim().match(/^\|[-:\s|]*\|$/)) {
          tableStartLine = i;
          break;
        }
      }
    }
    if (tableStartLine === -1) {
      return null;
    }
    let idCommentLine = tableStartLine - 1;
    while (idCommentLine >= 0 && (lines[idCommentLine].trim() === "" || lines[idCommentLine].trim().startsWith("<!--"))) {
      const line = lines[idCommentLine].trim();
      if (line.includes("table-id:")) {
        const match = line.match(/table-id:\s*([^\s>]+)/);
        return match ? match[1] : null;
      }
      idCommentLine--;
    }
    return null;
  }
  /**
   * 
   * @param tableId ID
   * @param tableElement 
   * @param filePath 
   */
  extractAndStoreTableInfo(tableId, tableElement, filePath) {
    try {
      const rows = tableElement.querySelectorAll("tr");
      const rowCount = rows.length;
      let colCount = 0;
      let hasHeaders = false;
      if (rowCount > 0) {
        const firstRow = rows[0];
        const headerCells = firstRow.querySelectorAll("th");
        hasHeaders = headerCells.length > 0;
        for (const row of Array.from(rows)) {
          const cellCount = row.querySelectorAll("td, th").length;
          colCount = Math.max(colCount, cellCount);
        }
      }
      const mergeInfo = this.extractMergeInfo(tableElement);
      console.log(`\u63D0\u53D6\u8868\u683C\u5408\u5E76\u4FE1\u606F:`, mergeInfo);
      const tableInfo = {
        id: tableId,
        locations: [
          {
            path: filePath,
            isActive: true
          }
        ],
        structure: {
          rowCount,
          colCount,
          hasHeaders
        },
        styling: {
          rowHeights: Array(rowCount).fill("auto"),
          colWidths: Array(colCount).fill("auto"),
          alignment: Array(colCount).fill("left")
        }
      };
      console.log(`\u4FDD\u5B58\u8868\u683C\u4FE1\u606F: ID=${tableId}, \u884C\u6570=${rowCount}, \u5217\u6570=${colCount}, \u8868\u5934=${hasHeaders}`);
      this.plugin.saveTableData(tableInfo);
    } catch (error) {
      console.error("\u63D0\u53D6\u8868\u683C\u4FE1\u606F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param tableElement 
   * @returns 
   */
  extractMergeInfo(tableElement) {
    var _a;
    const mergeInfo = {
      horizontal: [],
      vertical: []
    };
    const rows = tableElement.querySelectorAll("tr");
    for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
      const row = rows[rowIndex];
      const cells = row.querySelectorAll("td, th");
      for (let colIndex = 0; colIndex < cells.length; colIndex++) {
        const cell = cells[colIndex];
        const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
        const leftMatch = content.match(/^(<+)$/);
        if (leftMatch) {
          const count = leftMatch[1].length;
          mergeInfo.horizontal.push({
            row: rowIndex,
            col: colIndex,
            count,
            content
          });
        }
        const upMatch = content.match(/^(\^+)$/);
        if (upMatch) {
          const count = upMatch[1].length;
          mergeInfo.vertical.push({
            row: rowIndex,
            col: colIndex,
            count,
            content
          });
        }
        const colspan = parseInt(cell.getAttribute("colspan") || "1");
        const rowspan = parseInt(cell.getAttribute("rowspan") || "1");
        if (colspan > 1 || rowspan > 1) {
          console.log(`\u53D1\u73B0\u5408\u5E76\u5355\u5143\u683C: \u4F4D\u7F6E(${rowIndex},${colIndex}), colspan=${colspan}, rowspan=${rowspan}`);
        }
      }
    }
    return mergeInfo;
  }
  /**
   * 
   */
  showRowAddMenu() {
    try {
      if (!this.activeTable) {
        console.log("\u65E0\u6D3B\u52A8\u8868\u683C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u884C");
        new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
        return;
      }
      console.log("\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355");
      const menu = new import_obsidian5.Menu();
      menu.addItem(
        (item) => item.setTitle("\u5728\u4E0A\u65B9\u6DFB\u52A0\u884C").setIcon("arrow-up").onClick(() => this.addRow("above"))
      );
      menu.addItem(
        (item) => item.setTitle("\u5728\u4E0B\u65B9\u6DFB\u52A0\u884C").setIcon("arrow-down").onClick(() => this.addRow("below"))
      );
      const toolbarEl = this.toolbar;
      if (toolbarEl) {
        const rect = toolbarEl.getBoundingClientRect();
        menu.showAtPosition({ x: rect.left, y: rect.bottom });
      } else {
        menu.showAtMouseEvent(event);
      }
    } catch (error) {
      console.error("\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u663E\u793A\u6DFB\u52A0\u884C\u83DC\u5355\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   * @param position above  below
   */
  addRow(position) {
    var _a, _b;
    try {
      if (!this.activeTable) {
        console.log("\u65E0\u6D3B\u52A8\u8868\u683C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u884C");
        new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
        return;
      }
      console.log("\u5F00\u59CB\u6DFB\u52A0\u884C:", position);
      let targetRow = null;
      if (this.selectedCells.length > 0) {
        targetRow = this.selectedCells[0].closest("tr");
      } else {
        targetRow = this.activeTable.querySelector("tr");
      }
      if (!targetRow) {
        console.error("\u65E0\u6CD5\u627E\u5230\u76EE\u6807\u884C");
        new import_obsidian5.Notice("\u65E0\u6CD5\u627E\u5230\u76EE\u6807\u884C");
        return;
      }
      const cellCount = targetRow.querySelectorAll("td, th").length;
      const newRow = document.createElement("tr");
      for (let i = 0; i < cellCount; i++) {
        const cell = document.createElement("td");
        cell.textContent = "";
        newRow.appendChild(cell);
      }
      if (position === "above") {
        (_a = targetRow.parentNode) == null ? void 0 : _a.insertBefore(newRow, targetRow);
      } else {
        (_b = targetRow.parentNode) == null ? void 0 : _b.insertBefore(newRow, targetRow.nextSibling);
      }
      new import_obsidian5.Notice(`\u5DF2\u5728${position === "above" ? "\u4E0A\u65B9" : "\u4E0B\u65B9"}\u6DFB\u52A0\u884C`);
      console.log("\u6DFB\u52A0\u884C\u5B8C\u6210:", position);
    } catch (error) {
      console.error("\u6DFB\u52A0\u884C\u5931\u8D25:", error);
      new import_obsidian5.Notice(`\u6DFB\u52A0\u884C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
    }
  }
  /**
   * 
   */
  updateRowIndices() {
    if (!this.activeTable)
      return;
    const rows = this.activeTable.querySelectorAll("tr");
    rows.forEach((row, rowIndex) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        cell.setAttribute("row-index", rowIndex.toString());
        cell.setAttribute("col-index", colIndex.toString());
      });
    });
  }
  /**
   * 
   */
  showStyleMenu() {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u8868\u683C\u6837\u5F0F").setIcon("brush").onClick(() => {
        new import_obsidian5.Notice("\u6837\u5F0F\u8BBE\u7F6E\u529F\u80FD\u6B63\u5728\u5F00\u53D1\u4E2D");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u6761\u7EB9\u6837\u5F0F").setIcon("lines").onClick(() => this.applyStripedStyle())
    );
    menu.addItem(
      (item) => item.setTitle("\u8BBE\u7F6E\u8FB9\u6846\u6837\u5F0F").setIcon("box").onClick(() => this.applyBorderedStyle())
    );
    const button = this.toolbar.querySelector(".table-style");
    const rect = button.getBoundingClientRect();
    menu.showAtPosition({ x: rect.left, y: rect.bottom });
  }
  /**
   * 
   */
  applyStripedStyle() {
    if (!this.activeTable) {
      new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
      return;
    }
    const rows = this.activeTable.querySelectorAll("tr");
    rows.forEach((row, index) => {
      if (index > 0 && index % 2 === 1) {
        const cells = row.querySelectorAll("td");
        cells.forEach((cell) => {
          cell.style.backgroundColor = "var(--background-secondary)";
        });
      }
    });
    new import_obsidian5.Notice("\u5DF2\u5E94\u7528\u6761\u7EB9\u6837\u5F0F");
  }
  /**
   * 
   */
  applyBorderedStyle() {
    if (!this.activeTable) {
      new import_obsidian5.Notice("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u8868\u683C");
      return;
    }
    this.activeTable.style.borderCollapse = "collapse";
    const cells = this.activeTable.querySelectorAll("td, th");
    cells.forEach((cell) => {
      cell.style.border = "1px solid var(--background-modifier-border)";
      cell.style.padding = "4px 8px";
    });
    new import_obsidian5.Notice("\u5DF2\u5E94\u7528\u8FB9\u6846\u6837\u5F0F");
  }
  /**
   * 
   * @param table HTML
   */
  setActiveTable(table) {
    var _a, _b;
    try {
      console.log("\u8BBE\u7F6E\u6D3B\u52A8\u8868\u683C");
      console.log("\u8868\u683CDOM\u7ED3\u6784:", table.outerHTML.substring(0, 200) + "...");
      const tableId = this.plugin.tableIdManager.getTableIdentifier(table);
      console.log(`\u8868\u683CID\u68C0\u67E5\u7ED3\u679C: ${tableId || "\u672A\u627E\u5230"}`);
      let prevNode = table.previousSibling;
      let nodeCount = 0;
      console.log("\u8868\u683C\u524D\u7F6E\u8282\u70B9\u68C0\u67E5:");
      while (prevNode && nodeCount < 5) {
        nodeCount++;
        const nodeType = prevNode.nodeType;
        const nodeTypeStr = nodeType === Node.COMMENT_NODE ? "COMMENT" : nodeType === Node.TEXT_NODE ? "TEXT" : nodeType === Node.ELEMENT_NODE ? "ELEMENT" : "OTHER";
        if (nodeType === Node.COMMENT_NODE) {
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u5185\u5BB9="${((_a = prevNode.textContent) == null ? void 0 : _a.trim()) || ""}"`);
        } else if (nodeType === Node.TEXT_NODE) {
          const text = ((_b = prevNode.textContent) == null ? void 0 : _b.trim()) || "";
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u5185\u5BB9="${text.substring(0, 20)}${text.length > 20 ? "..." : ""}"`);
        } else if (nodeType === Node.ELEMENT_NODE) {
          console.log(`  \u524D\u7F6E\u8282\u70B9#${nodeCount}: \u7C7B\u578B=${nodeTypeStr}, \u6807\u7B7E=<${prevNode.tagName.toLowerCase()}>`);
        }
        prevNode = prevNode.previousSibling;
      }
      this.activeTable = table;
      this.plugin.removeAllTableHighlights();
      this.plugin.highlightSelectedTable(table);
      this.setupCellSelection();
      console.log("\u6D3B\u52A8\u8868\u683C\u8BBE\u7F6E\u5B8C\u6210");
    } catch (error) {
      console.error("\u8BBE\u7F6E\u6D3B\u52A8\u8868\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param tableInfo 
   */
  setActiveEditModeTable(tableInfo) {
    try {
      if (this.activeTable) {
        this.clearCellSelection();
        this.activeTable.dataset.tableSelected = "false";
        this.activeTable.style.outline = "";
        this.activeTable.style.outlineOffset = "";
        this.activeTable = null;
      }
      this.editModeTableInfo = tableInfo;
      console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u9009\u62E9\u4E86\u8868\u683C:", tableInfo);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u7F16\u8F91\u6A21\u5F0F\u6D3B\u52A8\u8868\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @returns 
   */
  isInEditMode() {
    const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    return activeView ? activeView.getMode() === "source" : false;
  }
  /**
   * 
   */
  setupCellSelection() {
    if (!this.activeTable)
      return;
    const cells = this.activeTable.querySelectorAll("td, th");
    cells.forEach((cell) => {
      const cellEl = cell;
      cellEl.onclick = (event2) => this.handleCellClick(cellEl, event2);
    });
  }
  /**
   * 
   * @param cell 
   * @param event 
   */
  handleCellClick(cell, event2) {
    event2.stopPropagation();
    if (!event2.ctrlKey && !event2.metaKey) {
      this.clearCellSelection();
    }
    const index = this.selectedCells.indexOf(cell);
    if (index === -1) {
      this.selectedCells.push(cell);
      cell.classList.add("selected-cell");
      cell.style.backgroundColor = "var(--text-selection)";
      const position = this.selectedCells.length > 1 ? "\u591A\u9009\u6A21\u5F0F" : "\u5DF2\u9009\u62E9\u5355\u5143\u683C";
      new import_obsidian5.Notice(`${position} (${this.selectedCells.length})`, 1e3);
    } else {
      this.selectedCells.splice(index, 1);
      cell.classList.remove("selected-cell");
      cell.style.backgroundColor = "";
      if (this.selectedCells.length > 0) {
        new import_obsidian5.Notice(`\u5DF2\u9009\u62E9 ${this.selectedCells.length} \u4E2A\u5355\u5143\u683C`, 1e3);
      }
    }
    console.log("\u5DF2\u9009\u62E9\u5355\u5143\u683C:", this.selectedCells.length);
  }
  /**
   * 
   */
  clearCellSelection() {
    this.selectedCells.forEach((cell) => {
      cell.classList.remove("selected-cell");
      cell.style.backgroundColor = "";
    });
    this.selectedCells = [];
  }
  /**
   * 
   * @param message 
   * @returns 
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const notice = new import_obsidian5.Notice(message, 0);
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "space-between";
      buttonContainer.style.marginTop = "10px";
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve(false);
      };
      const confirmButton = document.createElement("button");
      confirmButton.textContent = "\u786E\u5B9A";
      confirmButton.style.marginLeft = "10px";
      confirmButton.onclick = () => {
        notice.hide();
        resolve(true);
      };
      buttonContainer.appendChild(cancelButton);
      buttonContainer.appendChild(confirmButton);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 
   * @param mainCell 
   * @param mergedCells 
   */
  applyMergedCellStyles(mainCell, mergedCells) {
    mainCell.classList.add("obs-merged-cell-main");
    if (this.plugin.settings.autoCenterMergedCells) {
      mainCell.style.textAlign = "center";
      mainCell.style.verticalAlign = "middle";
    }
    for (const cell of mergedCells) {
      cell.style.display = "none";
    }
    mainCell.setAttribute("data-merged-main", "true");
  }
  /**
   * 
   */
  clearSelection() {
    try {
      this.clearCellSelection();
      if (this.activeTable) {
        this.activeTable.dataset.tableSelected = "false";
        this.activeTable.style.outline = "";
        this.activeTable.style.outlineOffset = "";
        this.activeTable = null;
      }
      this.editModeTableInfo = null;
      console.log("\u5DF2\u6E05\u9664\u8868\u683C\u9009\u62E9");
    } catch (error) {
      console.error("\u6E05\u9664\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @returns  {minRow, maxRow, minCol, maxCol}
   */
  getSelectedCellsBoundary() {
    if (!this.selectedCells || this.selectedCells.length === 0) {
      return null;
    }
    let minRow = Number.MAX_SAFE_INTEGER;
    let maxRow = 0;
    let minCol = Number.MAX_SAFE_INTEGER;
    let maxCol = 0;
    for (const cell of this.selectedCells) {
      const rowIndex = parseInt(cell.getAttribute("row-index") || "0");
      const colIndex = parseInt(cell.getAttribute("col-index") || "0");
      minRow = Math.min(minRow, rowIndex);
      maxRow = Math.max(maxRow, rowIndex);
      minCol = Math.min(minCol, colIndex);
      maxCol = Math.max(maxCol, colIndex);
    }
    return { minRow, maxRow, minCol, maxCol };
  }
};

// src/markdownSourceEditor.ts
var import_obsidian7 = require("obsidian");
var MarkdownSourceEditor = class {
  // app
  getApp() {
    return this.plugin.app;
  }
  constructor(plugin) {
    this.plugin = plugin;
    console.log("MarkdownSourceEditor initialized");
  }
  /**
   * 
   * @returns null
   */
  getActiveEditor() {
    const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
    if (activeView && activeView.editor) {
      return activeView.editor;
    }
    return null;
  }
  /**
   * Markdown
   * @param editor 
   * @returns null
   */
  locateTableInMarkdown(editor) {
    try {
      const content = editor.getValue();
      const cursor = editor.getCursor();
      const lines = content.split("\n");
      const cursorLine = lines[cursor.line];
      const isInTableRow = cursorLine && cursorLine.trim().startsWith("|") && cursorLine.trim().endsWith("|");
      if (!isInTableRow)
        return null;
      let startLine = cursor.line;
      while (startLine > 0 && lines[startLine - 1].trim().startsWith("|")) {
        startLine--;
      }
      let endLine = cursor.line;
      while (endLine < lines.length - 1 && lines[endLine + 1].trim().startsWith("|")) {
        endLine++;
      }
      if (!this.isValidTable(lines.slice(startLine, endLine + 1))) {
        return null;
      }
      const tableId = this.findTableIdAbove(editor, startLine);
      return {
        startLine,
        endLine,
        content: lines.slice(startLine, endLine + 1).join("\n"),
        tableId
      };
    } catch (error) {
      console.error("\u5B9A\u4F4DMarkdown\u8868\u683C\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * ID
   * @param editor 
   * @param tableLine 
   * @returns IDundefined
   */
  findTableIdAbove(editor, tableLine) {
    console.log(`\u67E5\u627E\u8868\u683CID: \u8868\u683C\u8D77\u59CB\u884C=${tableLine}`);
    const maxLinesToCheck = 10;
    let currentLine = tableLine - 1;
    const minLine = Math.max(0, tableLine - maxLinesToCheck);
    while (currentLine >= minLine) {
      const line = editor.getLine(currentLine);
      if (!line)
        break;
      console.log(`\u68C0\u67E5\u884C ${currentLine}: "${line}"`);
      const standardIdMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (standardIdMatch && standardIdMatch[1]) {
        const id = standardIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u6807\u51C6\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const noHyphenIdMatch = line.match(/<!--\s*tableid:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (noHyphenIdMatch && noHyphenIdMatch[1]) {
        const id = noHyphenIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u8FDE\u5B57\u7B26\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const simpleIdMatch = line.match(/<!--\s*id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (simpleIdMatch && simpleIdMatch[1]) {
        const id = simpleIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u7B80\u5316\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const tableNameIdMatch = line.match(/<!--\s*(table|tbl):\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (tableNameIdMatch && tableNameIdMatch[2]) {
        const id = tableNameIdMatch[2];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u8868\u683C\u540D\u79F0\u683C\u5F0FID: ${id}`);
        return id;
      }
      const noSpaceIdMatch = line.match(/<!--table-id:([a-zA-Z0-9_\-:.]+)-->/i);
      if (noSpaceIdMatch && noSpaceIdMatch[1]) {
        const id = noSpaceIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u7A7A\u683C\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      if (line.trim() !== "" && !line.trim().startsWith("<!--") && !line.trim().startsWith("//")) {
        console.log(`\u5728\u884C ${currentLine} \u9047\u5230\u975E\u7A7A\u975E\u6CE8\u91CA\u884C\uFF0C\u505C\u6B62\u641C\u7D22`);
        break;
      }
      currentLine--;
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID");
    return void 0;
  }
  /**
   * Markdown
   * @param lines 
   * @returns 
   */
  isValidTable(lines) {
    if (lines.length < 2)
      return false;
    const firstLine = lines[0].trim();
    if (!firstLine.startsWith("|") || !firstLine.endsWith("|"))
      return false;
    const secondLine = lines[1].trim();
    if (!secondLine.startsWith("|") || !secondLine.endsWith("|"))
      return false;
    const separatorCells = secondLine.split("|").slice(1, -1);
    for (const cell of separatorCells) {
      const trimmedCell = cell.trim();
      if (!trimmedCell.match(/^:?-+:?$/)) {
        return false;
      }
    }
    for (let i = 2; i < lines.length; i++) {
      const line = lines[i].trim();
      if (!line.startsWith("|") || !line.endsWith("|")) {
        return false;
      }
    }
    return true;
  }
  /**
   * MarkdownID
   * @returns IDnull
   */
  async addTableIdToMarkdown() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return null;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return null;
      }
      const tableId = this.checkExistingTableId(editor, tableInfo.startLine);
      if (tableId) {
        new import_obsidian7.Notice(`\u8868\u683C\u5DF2\u6709ID: ${tableId}`);
        return tableId;
      }
      const newTableId = this.generateUniqueTableId();
      console.log(`\u4E3A\u8868\u683C\u6DFB\u52A0\u65B0ID: ${newTableId}, \u8868\u683C\u8D77\u59CB\u884C: ${tableInfo.startLine}`);
      let insertPosition = { line: tableInfo.startLine, ch: 0 };
      let insertContent = `<!-- table-id: ${newTableId} -->
`;
      if (tableInfo.startLine > 0) {
        const prevLine = editor.getLine(tableInfo.startLine - 1);
        if (prevLine && prevLine.trim() !== "") {
          insertContent = `
<!-- table-id: ${newTableId} -->
`;
        }
      }
      editor.replaceRange(insertContent, insertPosition);
      this.saveTableInfo(newTableId, tableInfo);
      console.log(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newTableId}`);
      new import_obsidian7.Notice(`\u5DF2\u4E3A\u8868\u683C\u6DFB\u52A0ID: ${newTableId}`);
      return newTableId;
    } catch (error) {
      console.error("\u6DFB\u52A0\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 
   * @param tableId ID
   * @param tableInfo 
   */
  saveTableInfo(tableId, tableInfo) {
    try {
      const activeView = this.getApp().workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView || !activeView.file)
        return;
      const filePath = activeView.file.path;
      const { rows, hasHeader } = this.parseTableStructure(tableInfo.content);
      const tableData = {
        id: tableId,
        locations: [
          {
            path: filePath,
            isActive: true
          }
        ],
        structure: {
          rowCount: rows.length,
          colCount: rows.length > 0 ? rows[0].length : 0,
          hasHeaders: hasHeader
        },
        styling: {
          rowHeights: Array(rows.length).fill("auto"),
          colWidths: rows.length > 0 ? Array(rows[0].length).fill("auto") : [],
          alignment: rows.length > 0 ? Array(rows[0].length).fill("left") : []
        }
      };
      this.plugin.saveTableData(tableData);
    } catch (error) {
      console.error("\u4FDD\u5B58\u8868\u683C\u4FE1\u606F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * ID
   * @param editor 
   * @param tableLine 
   * @returns IDnull
   */
  checkExistingTableId(editor, tableLine) {
    if (tableLine <= 0)
      return null;
    console.log(`\u68C0\u67E5\u8868\u683C\u662F\u5426\u5DF2\u6709ID: \u8868\u683C\u8D77\u59CB\u884C=${tableLine}`);
    const maxLinesToCheck = 10;
    let currentLine = tableLine - 1;
    const minLine = Math.max(0, tableLine - maxLinesToCheck);
    while (currentLine >= minLine) {
      const line = editor.getLine(currentLine);
      if (!line)
        break;
      console.log(`\u68C0\u67E5\u884C ${currentLine}: "${line}"`);
      const standardIdMatch = line.match(/<!--\s*table-id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (standardIdMatch && standardIdMatch[1]) {
        const id = standardIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u6807\u51C6\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const noHyphenIdMatch = line.match(/<!--\s*tableid:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (noHyphenIdMatch && noHyphenIdMatch[1]) {
        const id = noHyphenIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u8FDE\u5B57\u7B26\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const simpleIdMatch = line.match(/<!--\s*id:\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (simpleIdMatch && simpleIdMatch[1]) {
        const id = simpleIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u7B80\u5316\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      const tableNameIdMatch = line.match(/<!--\s*(table|tbl):\s*([a-zA-Z0-9_\-:.]+)\s*-->/i);
      if (tableNameIdMatch && tableNameIdMatch[2]) {
        const id = tableNameIdMatch[2];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u8868\u683C\u540D\u79F0\u683C\u5F0FID: ${id}`);
        return id;
      }
      const noSpaceIdMatch = line.match(/<!--table-id:([a-zA-Z0-9_\-:.]+)-->/i);
      if (noSpaceIdMatch && noSpaceIdMatch[1]) {
        const id = noSpaceIdMatch[1];
        console.log(`\u5728\u884C ${currentLine} \u627E\u5230\u65E0\u7A7A\u683C\u683C\u5F0F\u8868\u683CID: ${id}`);
        return id;
      }
      if (line.trim() !== "" && !line.trim().startsWith("<!--") && !line.trim().startsWith("//")) {
        console.log(`\u5728\u884C ${currentLine} \u9047\u5230\u975E\u7A7A\u975E\u6CE8\u91CA\u884C\uFF0C\u505C\u6B62\u641C\u7D22`);
        break;
      }
      currentLine--;
    }
    console.log("\u672A\u627E\u5230\u8868\u683CID");
    return null;
  }
  /**
   * ID
   * @returns ID
   */
  generateUniqueTableId() {
    const prefix = this.plugin.settings.idPrefix || "tbl";
    const timestamp = new Date().toISOString().slice(0, 10).replace(/-/g, "");
    const randomId = Math.random().toString(36).substring(2, 8);
    return `${prefix}-${timestamp}-${randomId}`;
  }
  /**
   * 
   * @param tableContent 
   * @returns 
   */
  parseTableStructure(tableContent) {
    const lines = tableContent.split("\n");
    const rows = [];
    let hasHeader = false;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (!line.startsWith("|"))
        continue;
      if (line.includes("-") && i === 1) {
        hasHeader = true;
        continue;
      }
      const cells = line.split("|").filter((cell, index, array) => index > 0 && index < array.length - 1).map((cell) => cell.trim());
      rows.push(cells);
    }
    return { rows, hasHeader };
  }
  /**
   * 
   * @param tableRows 
   * @param rowIndex 
   * @param colIndex 
   * @returns 
   */
  getCellContent(tableRows, rowIndex, colIndex) {
    if (rowIndex >= 0 && rowIndex < tableRows.length && colIndex >= 0 && colIndex < tableRows[rowIndex].length) {
      return tableRows[rowIndex][colIndex];
    }
    return "";
  }
  /**
   * 
   * @param editor 
   * @param tableInfo 
   * @param rowIndex 
   * @param colIndex 
   * @param content 
   */
  setCellContent(editor, tableInfo, rowIndex, colIndex, content) {
    try {
      const lineIndex = tableInfo.startLine + rowIndex;
      if (lineIndex > tableInfo.endLine)
        return;
      const line = editor.getLine(lineIndex);
      if (!line)
        return;
      const cells = line.split("|");
      if (colIndex + 1 >= cells.length - 1)
        return;
      cells[colIndex + 1] = ` ${content} `;
      editor.replaceRange(
        cells.join("|"),
        { line: lineIndex, ch: 0 },
        { line: lineIndex, ch: line.length }
      );
    } catch (error) {
      console.error("\u8BBE\u7F6E\u5355\u5143\u683C\u5185\u5BB9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param direction  ('right'  'down')
   */
  async mergeCells(direction) {
    try {
      console.log(`\u5C1D\u8BD5${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C`);
      const editor = this.getActiveEditor();
      if (!editor) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const cellPosition = this.getCellPosition(editor);
      if (!cellPosition) {
        console.log("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E");
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      const { tableInfo, rowIndex, colIndex } = cellPosition;
      console.log(`\u51C6\u5907${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C: \u884C=${rowIndex}, \u5217=${colIndex}`);
      let result = false;
      if (direction === "right") {
        result = await this.mergeCellsRight(editor, tableInfo, rowIndex, colIndex);
      } else if (direction === "down") {
        result = await this.mergeCellsDown(editor, tableInfo, rowIndex, colIndex);
      }
      if (result) {
        console.log(`${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C\u6210\u529F`);
      } else {
        console.log(`${direction === "right" ? "\u5411\u53F3" : "\u5411\u4E0B"}\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25`);
      }
      return result;
    } catch (error) {
      console.error(`\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519(${direction}):`, error);
      new import_obsidian7.Notice(`\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 
   * @param line 
   * @param cursorCh 
   * @returns -1
   */
  getCursorColumnIndex(line, cursorCh) {
    try {
      if (!line.trim().startsWith("|") || !line.trim().endsWith("|")) {
        console.log("\u884C\u4E0D\u662F\u6709\u6548\u7684\u8868\u683C\u884C:", line);
        return -1;
      }
      const cells = line.split("|");
      if (cells[0].trim() === "")
        cells.shift();
      if (cells[cells.length - 1].trim() === "")
        cells.pop();
      let currentPos = line.indexOf("|");
      for (let i = 0; i < cells.length; i++) {
        const cellWidth = cells[i].length + 1;
        const nextPos = currentPos + cellWidth;
        console.log(`\u68C0\u67E5\u5355\u5143\u683C ${i}: \u8303\u56F4=${currentPos}-${nextPos}, \u5185\u5BB9="${cells[i]}"`);
        if (cursorCh > currentPos && cursorCh <= nextPos) {
          console.log(`\u5149\u6807\u5728\u5355\u5143\u683C ${i} \u5185: \u4F4D\u7F6E=${cursorCh}`);
          return i;
        }
        currentPos = nextPos;
      }
      console.log(`\u672A\u627E\u5230\u5149\u6807\u6240\u5728\u5355\u5143\u683C: cursorCh=${cursorCh}, line="${line}"`);
      return -1;
    } catch (error) {
      console.error("\u83B7\u53D6\u5149\u6807\u6240\u5728\u5217\u7D22\u5F15\u65F6\u51FA\u9519:", error);
      return -1;
    }
  }
  /**
   * 
   * @param editor 
   * @returns null
   */
  getCellPosition(editor) {
    try {
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.log("\u672A\u627E\u5230\u8868\u683C");
        return null;
      }
      const cursor = editor.getCursor();
      const rowIndex = cursor.line - tableInfo.startLine;
      if (rowIndex < 0 || rowIndex > tableInfo.endLine - tableInfo.startLine) {
        console.log(`\u884C\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: rowIndex=${rowIndex}, tableRange=${tableInfo.startLine}-${tableInfo.endLine}`);
        return null;
      }
      const line = editor.getLine(cursor.line);
      if (!line) {
        console.log("\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9");
        return null;
      }
      if (!line.trim().startsWith("|") || !line.trim().endsWith("|")) {
        console.log("\u5F53\u524D\u884C\u4E0D\u662F\u6709\u6548\u7684\u8868\u683C\u884C");
        return null;
      }
      const colIndex = this.getCursorColumnIndex(line, cursor.ch);
      if (colIndex === -1) {
        console.log("\u65E0\u6CD5\u786E\u5B9A\u5149\u6807\u6240\u5728\u5217");
        return null;
      }
      console.log(`\u6210\u529F\u83B7\u53D6\u5355\u5143\u683C\u4F4D\u7F6E: \u884C=${rowIndex}, \u5217=${colIndex}, \u8868\u683C\u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      return {
        tableInfo,
        rowIndex,
        colIndex
      };
    } catch (error) {
      console.error("\u83B7\u53D6\u5355\u5143\u683C\u4F4D\u7F6E\u4FE1\u606F\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 
   * @param editor 
   * @param tableInfo 
   * @param rowIndex 
   * @param colIndex 
   * @param mergeCount 0
   * @returns 
   */
  async mergeCellsRight(editor, tableInfo, rowIndex, colIndex, mergeCount = 0) {
    try {
      const lineIndex = tableInfo.startLine + rowIndex;
      const line = editor.getLine(lineIndex);
      if (!line) {
        console.log(`\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9: lineIndex=${lineIndex}`);
        return false;
      }
      console.log(`\u5C1D\u8BD5\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C: \u884C=${lineIndex}, \u5217=${colIndex}, \u5DF2\u5408\u5E76=${mergeCount}, \u884C\u5185\u5BB9="${line}"`);
      const cells = line.split("|");
      if (colIndex + 2 >= cells.length) {
        console.log(`\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: colIndex=${colIndex}, cells.length=${cells.length}`);
        new import_obsidian7.Notice("\u53F3\u4FA7\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
        return false;
      }
      const mainContent = cells[colIndex + 1].trim();
      const targetContent = cells[colIndex + 2].trim();
      console.log(`\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${mainContent}", \u76EE\u6807\u5355\u5143\u683C\u5185\u5BB9="${targetContent}"`);
      const isMergeMarker = /^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(targetContent);
      console.log(`\u76EE\u6807\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: ${isMergeMarker}`);
      let mergeAction = "replace";
      if (targetContent && !isMergeMarker) {
        if (this.plugin.settings.confirmMergeNonEmpty) {
          mergeAction = await this.showMergeCellOptionsDialog(mainContent, targetContent);
          console.log(`\u7528\u6237\u9009\u62E9\u7684\u5408\u5E76\u64CD\u4F5C: ${mergeAction}`);
          if (mergeAction === "cancel") {
            console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      if (mergeAction === "merge" && mainContent && targetContent && !isMergeMarker) {
        cells[colIndex + 1] = ` ${mainContent} ${targetContent} `;
        console.log(`\u5408\u5E76\u5185\u5BB9: \u65B0\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${cells[colIndex + 1]}"`);
      }
      const mergeDistance = mergeCount + 1;
      const mergeMarker = "<".repeat(mergeDistance);
      console.log(`\u751F\u6210\u5408\u5E76\u6807\u8BB0: \u8DDD\u79BB=${mergeDistance}, \u6807\u8BB0="${mergeMarker}"`);
      cells[colIndex + 2] = ` ${mergeMarker} `;
      const newLine = cells.join("|");
      console.log(`\u65B0\u884C\u5185\u5BB9="${newLine}"`);
      editor.replaceRange(
        newLine,
        { line: lineIndex, ch: 0 },
        { line: lineIndex, ch: line.length }
      );
      if (colIndex + 3 < cells.length) {
        const nextCellContent = cells[colIndex + 3].trim();
        console.log(`\u68C0\u67E5\u4E0B\u4E00\u4E2A\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: \u5185\u5BB9="${nextCellContent}"`);
        if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(nextCellContent)) {
          console.log("\u68C0\u6D4B\u5230\u53F3\u4FA7\u6709\u8FDE\u7EED\u5408\u5E76\u5355\u5143\u683C\uFF0C\u7EE7\u7EED\u5408\u5E76");
          await this.mergeCellsRight(editor, tableInfo, rowIndex, colIndex + 1, mergeDistance);
        }
      }
      new import_obsidian7.Notice("\u5DF2\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C");
      return true;
    } catch (error) {
      console.error("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 
   * @param editor 
   * @param tableInfo 
   * @param rowIndex 
   * @param colIndex 
   * @param mergeCount 0
   * @returns 
   */
  async mergeCellsDown(editor, tableInfo, rowIndex, colIndex, mergeCount = 0) {
    try {
      const currentLineIndex = tableInfo.startLine + rowIndex;
      const nextLineIndex = currentLineIndex + 1;
      if (nextLineIndex > tableInfo.endLine) {
        console.log(`\u4E0B\u4E00\u884C\u8D85\u51FA\u8868\u683C\u8303\u56F4: nextLineIndex=${nextLineIndex}, tableEndLine=${tableInfo.endLine}`);
        new import_obsidian7.Notice("\u4E0B\u65B9\u6CA1\u6709\u5355\u5143\u683C\u53EF\u5408\u5E76");
        return false;
      }
      const currentLine = editor.getLine(currentLineIndex);
      const nextLine = editor.getLine(nextLineIndex);
      if (!currentLine || !nextLine) {
        console.log(`\u65E0\u6CD5\u83B7\u53D6\u884C\u5185\u5BB9: currentLine=${!!currentLine}, nextLine=${!!nextLine}`);
        return false;
      }
      console.log(`\u5C1D\u8BD5\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C: \u5F53\u524D\u884C=${currentLineIndex}, \u4E0B\u4E00\u884C=${nextLineIndex}, \u5217=${colIndex}, \u5DF2\u5408\u5E76=${mergeCount}`);
      console.log(`\u5F53\u524D\u884C\u5185\u5BB9="${currentLine}"`);
      console.log(`\u4E0B\u4E00\u884C\u5185\u5BB9="${nextLine}"`);
      const currentCells = currentLine.split("|");
      const nextCells = nextLine.split("|");
      if (colIndex + 1 >= currentCells.length || colIndex + 1 >= nextCells.length) {
        console.log(`\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4: colIndex=${colIndex}, currentCells.length=${currentCells.length}, nextCells.length=${nextCells.length}`);
        new import_obsidian7.Notice("\u65E0\u6CD5\u5408\u5E76\u5355\u5143\u683C\uFF0C\u5217\u7D22\u5F15\u8D85\u51FA\u8303\u56F4");
        return false;
      }
      const mainContent = currentCells[colIndex + 1].trim();
      const targetContent = nextCells[colIndex + 1].trim();
      console.log(`\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${mainContent}", \u76EE\u6807\u5355\u5143\u683C\u5185\u5BB9="${targetContent}"`);
      const isMergeMarker = /^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(targetContent);
      console.log(`\u76EE\u6807\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: ${isMergeMarker}`);
      let mergeAction = "replace";
      if (targetContent && !isMergeMarker) {
        if (this.plugin.settings.confirmMergeNonEmpty) {
          mergeAction = await this.showMergeCellOptionsDialog(mainContent, targetContent);
          console.log(`\u7528\u6237\u9009\u62E9\u7684\u5408\u5E76\u64CD\u4F5C: ${mergeAction}`);
          if (mergeAction === "cancel") {
            console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5408\u5E76\u64CD\u4F5C");
            return false;
          }
        }
      }
      if (mergeAction === "merge" && mainContent && targetContent && !isMergeMarker) {
        currentCells[colIndex + 1] = ` ${mainContent} ${targetContent} `;
        console.log(`\u5408\u5E76\u5185\u5BB9: \u65B0\u4E3B\u5355\u5143\u683C\u5185\u5BB9="${currentCells[colIndex + 1]}"`);
        editor.replaceRange(
          currentCells.join("|"),
          { line: currentLineIndex, ch: 0 },
          { line: currentLineIndex, ch: currentLine.length }
        );
      }
      const mergeDistance = mergeCount + 1;
      const mergeMarker = "^".repeat(mergeDistance);
      console.log(`\u751F\u6210\u5408\u5E76\u6807\u8BB0: \u8DDD\u79BB=${mergeDistance}, \u6807\u8BB0="${mergeMarker}"`);
      nextCells[colIndex + 1] = ` ${mergeMarker} `;
      const newNextLine = nextCells.join("|");
      console.log(`\u65B0\u4E0B\u4E00\u884C\u5185\u5BB9="${newNextLine}"`);
      editor.replaceRange(
        newNextLine,
        { line: nextLineIndex, ch: 0 },
        { line: nextLineIndex, ch: nextLine.length }
      );
      if (nextLineIndex + 1 <= tableInfo.endLine) {
        const nextNextLine = editor.getLine(nextLineIndex + 1);
        if (nextNextLine) {
          const nextNextCells = nextNextLine.split("|");
          if (colIndex + 1 < nextNextCells.length) {
            const nextNextCellContent = nextNextCells[colIndex + 1].trim();
            console.log(`\u68C0\u67E5\u4E0B\u4E00\u884C\u5355\u5143\u683C\u662F\u5426\u4E3A\u5408\u5E76\u6807\u8BB0: \u5185\u5BB9="${nextNextCellContent}"`);
            if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(nextNextCellContent)) {
              console.log("\u68C0\u6D4B\u5230\u4E0B\u65B9\u6709\u8FDE\u7EED\u5408\u5E76\u5355\u5143\u683C\uFF0C\u7EE7\u7EED\u5408\u5E76");
              await this.mergeCellsDown(editor, tableInfo, rowIndex + 1, colIndex, mergeDistance);
            }
          }
        }
      }
      new import_obsidian7.Notice("\u5DF2\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C");
      return true;
    } catch (error) {
      console.error("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 
   * @param message 
   * @returns 
   */
  async showConfirmDialog(message) {
    return new Promise((resolve) => {
      const notice = new import_obsidian7.Notice(message, 0);
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "space-between";
      buttonContainer.style.marginTop = "10px";
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve(false);
      };
      const confirmButton = document.createElement("button");
      confirmButton.textContent = "\u786E\u5B9A";
      confirmButton.style.marginLeft = "10px";
      confirmButton.onclick = () => {
        notice.hide();
        resolve(true);
      };
      buttonContainer.appendChild(cancelButton);
      buttonContainer.appendChild(confirmButton);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 
   * @param mainContent 
   * @param targetContent 
   * @returns 'merge'=, 'replace'=, 'cancel'=
   */
  async showMergeCellOptionsDialog(mainContent, targetContent) {
    return new Promise((resolve) => {
      const notice = new import_obsidian7.Notice("\u5408\u5E76\u5355\u5143\u683C\u9009\u9879", 0);
      const contentContainer = document.createElement("div");
      contentContainer.style.marginBottom = "10px";
      contentContainer.innerHTML = `
                <p>\u76EE\u6807\u5355\u5143\u683C\u5305\u542B\u5185\u5BB9\uFF1A"${targetContent}"</p>
                <p>\u8BF7\u9009\u62E9\u5408\u5E76\u65B9\u5F0F\uFF1A</p>
            `;
      const buttonContainer = document.createElement("div");
      buttonContainer.style.display = "flex";
      buttonContainer.style.flexDirection = "column";
      buttonContainer.style.gap = "5px";
      const mergeButton = document.createElement("button");
      mergeButton.textContent = "\u5408\u5E76\u5E76\u4FDD\u7559\u5185\u5BB9";
      mergeButton.onclick = () => {
        notice.hide();
        resolve("merge");
      };
      const replaceButton = document.createElement("button");
      replaceButton.textContent = "\u4EC5\u4F7F\u7528\u5408\u5E76\u6807\u8BB0";
      replaceButton.onclick = () => {
        notice.hide();
        resolve("replace");
      };
      const cancelButton = document.createElement("button");
      cancelButton.textContent = "\u53D6\u6D88";
      cancelButton.onclick = () => {
        notice.hide();
        resolve("cancel");
      };
      buttonContainer.appendChild(mergeButton);
      buttonContainer.appendChild(replaceButton);
      buttonContainer.appendChild(cancelButton);
      notice.noticeEl.appendChild(contentContainer);
      notice.noticeEl.appendChild(buttonContainer);
    });
  }
  /**
   * 
   * @returns 
   */
  async detectAndFixMergeMarkers() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      let hasFixedMarkers = false;
      for (let i = tableInfo.startLine; i <= tableInfo.endLine; i++) {
        const line = editor.getLine(i);
        if (!line)
          continue;
        const cells = line.split("|");
        let hasChanges = false;
        for (let j = 1; j < cells.length - 1; j++) {
          const cell = cells[j];
          const trimmedCell = cell.trim();
          if (trimmedCell === "\\<" || trimmedCell === "<") {
            cells[j] = " < ";
            hasChanges = true;
          } else if (trimmedCell === "\\^" || trimmedCell === "^") {
            cells[j] = " ^ ";
            hasChanges = true;
          }
        }
        if (hasChanges) {
          const updatedLine = cells.join("|");
          editor.replaceRange(
            updatedLine,
            { line: i, ch: 0 },
            { line: i, ch: line.length }
          );
          hasFixedMarkers = true;
        }
      }
      if (hasFixedMarkers) {
        new import_obsidian7.Notice("\u5DF2\u7EDF\u4E00\u8868\u683C\u5408\u5E76\u6807\u8BB0\u683C\u5F0F");
      } else {
        new import_obsidian7.Notice("\u672A\u53D1\u73B0\u9700\u8981\u4FEE\u590D\u7684\u5408\u5E76\u6807\u8BB0");
      }
      return hasFixedMarkers;
    } catch (error) {
      console.error("\u68C0\u6D4B\u548C\u4FEE\u590D\u8868\u683C\u5408\u5E76\u6807\u8BB0\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  /**
   * 
   * @returns 
   */
  async splitMergedCells() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return false;
      }
      const cellPosition = this.getCellPosition(editor);
      if (!cellPosition) {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u8868\u683C\u6216\u65E0\u6CD5\u786E\u5B9A\u5355\u5143\u683C\u4F4D\u7F6E\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return false;
      }
      const { tableInfo, rowIndex, colIndex } = cellPosition;
      const lineIndex = tableInfo.startLine + rowIndex;
      console.log(`\u5C1D\u8BD5\u62C6\u5206\u5355\u5143\u683C: \u884C=${rowIndex}, \u5217=${colIndex}, \u8868\u683C\u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      const line = editor.getLine(lineIndex);
      if (!line)
        return false;
      let hasSplitCells = false;
      if (colIndex + 1 < line.split("|").length - 1) {
        const cells = line.split("|");
        const rightCell = cells[colIndex + 2];
        const rightCellTrimmed = rightCell.trim();
        console.log(`\u53F3\u4FA7\u5355\u5143\u683C\u5185\u5BB9: "${rightCellTrimmed}"`);
        if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(rightCellTrimmed)) {
          cells[colIndex + 2] = "  ";
          editor.replaceRange(
            cells.join("|"),
            { line: lineIndex, ch: 0 },
            { line: lineIndex, ch: line.length }
          );
          console.log("\u5DF2\u62C6\u5206\u53F3\u4FA7\u5408\u5E76\u5355\u5143\u683C");
          hasSplitCells = true;
        }
      }
      if (lineIndex < tableInfo.endLine) {
        const belowLine = editor.getLine(lineIndex + 1);
        if (belowLine) {
          const belowCells = belowLine.split("|");
          if (colIndex + 1 < belowCells.length) {
            const belowCell = belowCells[colIndex + 1];
            const belowCellTrimmed = belowCell.trim();
            console.log(`\u4E0B\u65B9\u5355\u5143\u683C\u5185\u5BB9: "${belowCellTrimmed}"`);
            if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(belowCellTrimmed)) {
              belowCells[colIndex + 1] = "  ";
              editor.replaceRange(
                belowCells.join("|"),
                { line: lineIndex + 1, ch: 0 },
                { line: lineIndex + 1, ch: belowLine.length }
              );
              console.log("\u5DF2\u62C6\u5206\u4E0B\u65B9\u5408\u5E76\u5355\u5143\u683C");
              hasSplitCells = true;
            }
          }
        }
      }
      const recursiveSplit = await this.recursiveSplitMergedCells(editor, tableInfo, rowIndex, colIndex);
      if (recursiveSplit) {
        hasSplitCells = true;
      }
      if (hasSplitCells) {
        new import_obsidian7.Notice("\u5DF2\u6210\u529F\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C");
        return true;
      } else {
        new import_obsidian7.Notice("\u672A\u627E\u5230\u53EF\u62C6\u5206\u7684\u5408\u5E76\u5355\u5143\u683C\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u4F4D\u4E8E\u5408\u5E76\u5355\u5143\u683C\u5185");
        return false;
      }
    } catch (error) {
      console.error("\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
      new import_obsidian7.Notice(`\u62C6\u5206\u5408\u5E76\u5355\u5143\u683C\u5931\u8D25: ${error.message || "\u672A\u77E5\u9519\u8BEF"}`);
      return false;
    }
  }
  /**
   * 
   * 
   * @param editor 
   * @param tableInfo 
   * @param rowIndex 
   * @param colIndex 
   * @returns 
   */
  async recursiveSplitMergedCells(editor, tableInfo, rowIndex, colIndex) {
    let hasSplitCells = false;
    const maxSearchDepth = 10;
    for (let col = colIndex + 1; col < colIndex + maxSearchDepth; col++) {
      const lineIndex = tableInfo.startLine + rowIndex;
      const line = editor.getLine(lineIndex);
      if (!line)
        break;
      const cells = line.split("|");
      if (col + 1 >= cells.length)
        break;
      const cellContent = cells[col + 1].trim();
      if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(cellContent)) {
        cells[col + 1] = "  ";
        editor.replaceRange(
          cells.join("|"),
          { line: lineIndex, ch: 0 },
          { line: lineIndex, ch: line.length }
        );
        hasSplitCells = true;
        console.log(`\u5DF2\u62C6\u5206\u4F4D\u4E8E (${rowIndex}, ${col}) \u7684\u6C34\u5E73\u5408\u5E76\u5355\u5143\u683C`);
      } else {
        break;
      }
    }
    for (let row = rowIndex + 1; row < rowIndex + maxSearchDepth && row + tableInfo.startLine <= tableInfo.endLine; row++) {
      const lineIndex = tableInfo.startLine + row;
      const line = editor.getLine(lineIndex);
      if (!line)
        break;
      const cells = line.split("|");
      if (colIndex + 1 >= cells.length)
        break;
      const cellContent = cells[colIndex + 1].trim();
      if (/^(<+|\^+|\\<|\\^|\s*<+\s*|\s*\^+\s*)$/.test(cellContent)) {
        cells[colIndex + 1] = "  ";
        editor.replaceRange(
          cells.join("|"),
          { line: lineIndex, ch: 0 },
          { line: lineIndex, ch: line.length }
        );
        hasSplitCells = true;
        console.log(`\u5DF2\u62C6\u5206\u4F4D\u4E8E (${row}, ${colIndex}) \u7684\u5782\u76F4\u5408\u5E76\u5355\u5143\u683C`);
      } else {
        break;
      }
    }
    return hasSplitCells;
  }
  /**
   * ID
   * @returns IDnull
   */
  async getCurrentTableId() {
    try {
      const editor = this.getActiveEditor();
      if (!editor) {
        console.warn("\u672A\u627E\u5230\u6D3B\u52A8\u7F16\u8F91\u5668");
        return null;
      }
      const tableInfo = this.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.warn("\u672A\u627E\u5230\u8868\u683C\uFF0C\u8BF7\u5C06\u5149\u6807\u653E\u5728\u8868\u683C\u5185");
        return null;
      }
      let tableId = tableInfo.tableId;
      if (!tableId) {
        console.log("\u5728tableInfo\u4E2D\u672A\u627E\u5230ID\uFF0C\u5C1D\u8BD5\u4F7F\u7528checkExistingTableId\u67E5\u627E");
        tableId = this.checkExistingTableId(editor, tableInfo.startLine) || void 0;
      }
      if (tableId) {
        console.log(`\u627E\u5230\u8868\u683CID: ${tableId}`);
        return tableId;
      }
      console.warn("\u672A\u627E\u5230\u8868\u683CID");
      return null;
    } catch (error) {
      console.error("\u83B7\u53D6\u5F53\u524D\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
};

// src/icons.ts
var import_obsidian8 = require("obsidian");
function loadIcons() {
  (0, import_obsidian8.addIcon)("align-left", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M25,50 L60,50 M25,70 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-center", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M35,50 L65,50 M30,70 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-right", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M25,30 L75,30 M40,50 L75,50 M30,70 L75,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-top", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,25 L50,60 M70,25 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-middle", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,35 L50,65 M70,30 L70,70" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-bottom", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
        <path d="M30,25 L30,75 M50,40 L50,75 M70,30 L70,75" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("align-all", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <circle cx="50" cy="50" r="15" fill="none" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-cells", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="10" y="10" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="60" y="10" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="10" y="60" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="60" y="60" width="30" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,45 L50,55 M45,50 L55,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-right", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="30" width="30" height="40" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="55" y="30" width="30" height="40" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M45,50 L55,50 M50,45 L55,50 L50,55" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("merge-down", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="30" y="15" width="40" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="30" y="55" width="40" height="30" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,45 L50,55 M45,50 L50,55 L55,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("split", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M50,20 L50,80 M20,50 L80,50" stroke="currentColor" stroke-width="3"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-id", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="30" width="60" height="50" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,30 L80,30" stroke="currentColor" stroke-width="5"/>
        <rect x="35" y="15" width="30" height="15" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M45,45 L45,65 M55,45 L55,65 M45,55 L55,55" stroke="currentColor" stroke-width="2"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-row-add", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,50 L80,50" stroke="currentColor" stroke-width="3"/>
        <circle cx="85" cy="50" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M85,45 L85,55 M80,50 L90,50" stroke="currentColor" stroke-width="2"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-style", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="20" y="20" width="60" height="60" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M20,40 L80,40 M20,60 L80,60 M40,20 L40,80 M60,20 L60,80" stroke="currentColor" stroke-width="2"/>
        <path d="M65,25 L75,35 M65,35 L75,25" stroke="currentColor" stroke-width="2"/>
        <path d="M25,45 L35,55 M35,45 L25,55" stroke="currentColor" stroke-width="2"/>
        <circle cx="50" cy="50" r="5" fill="currentColor"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-toolbar-toggle", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="15" width="70" height="70" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M15,35 L85,35 M15,65 L85,65" stroke="currentColor" stroke-width="2"/>
        <path d="M35,15 L35,85 M65,15 L65,85" stroke="currentColor" stroke-width="2"/>
        <rect x="40" y="5" width="20" height="10" fill="currentColor"/>
        <rect x="40" y="85" width="20" height="10" fill="currentColor"/>
        <rect x="5" y="40" width="10" height="20" fill="currentColor"/>
        <rect x="85" y="40" width="10" height="20" fill="currentColor"/>
    </svg>`);
  (0, import_obsidian8.addIcon)("table-edit-mode", `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
        <rect x="15" y="25" width="70" height="50" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M15,45 L85,45" stroke="currentColor" stroke-width="2"/>
        <path d="M35,25 L35,75" stroke="currentColor" stroke-width="2"/>
        <path d="M55,25 L55,75" stroke="currentColor" stroke-width="2"/>
        <path d="M75,10 L90,25 L80,35 L65,20 Z" fill="none" stroke="currentColor" stroke-width="2"/>
        <path d="M65,20 L80,35" stroke="currentColor" stroke-width="2"/>
    </svg>`);
}

// src/tableStyleRenderer.ts
var import_obsidian9 = require("obsidian");
var TableStyleRenderer = class extends import_obsidian9.MarkdownRenderChild {
  /**
   * 
   * @param el 
   * @param tableId ID
   * @param styling 
   * @param plugin 
   */
  constructor(el, tableId, styling, plugin) {
    super(el);
    this.tableId = tableId;
    this.styling = styling;
    this.plugin = plugin;
  }
  /**
   * app
   */
  getApp() {
    return this.plugin.app;
  }
  /**
   * 
   */
  onload() {
    console.log(`\u8868\u683C\u6837\u5F0F\u6E32\u67D3\u5668\u52A0\u8F7D: \u8868\u683CID=${this.tableId}`);
    this.applyStyles();
    this.containerEl.classList.add(`table-${this.tableId}`);
    this.containerEl.setAttribute("data-table-styles-applied", "true");
  }
  /**
   * 
   */
  applyStyles() {
    if (!this.styling)
      return;
    if (this.styling.alignment && Array.isArray(this.styling.alignment)) {
      this.applyColumnAlignment(this.styling.alignment);
    }
    if (this.styling.cellStyles && Array.isArray(this.styling.cellStyles)) {
      this.applyCellStyles(this.styling.cellStyles);
    }
    if (this.styling.rowHeights && Array.isArray(this.styling.rowHeights)) {
      this.applyRowHeights(this.styling.rowHeights);
    }
    if (this.styling.colWidths && Array.isArray(this.styling.colWidths)) {
      this.applyColumnWidths(this.styling.colWidths);
    }
  }
  /**
   * 
   * @param alignments 
   */
  applyColumnAlignment(alignments) {
    const rows = this.containerEl.querySelectorAll("tr");
    rows.forEach((row) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        if (alignments[colIndex]) {
          cell.style.textAlign = alignments[colIndex];
        }
      });
    });
  }
  /**
   * 
   * @param cellStyles 
   */
  applyCellStyles(cellStyles) {
    cellStyles.forEach((style) => {
      if (typeof style.row !== "number" || typeof style.col !== "number") {
        return;
      }
      const cell = this.findCell(style.row, style.col);
      if (!cell)
        return;
      if (style.textAlign)
        cell.style.textAlign = style.textAlign;
      if (style.verticalAlign)
        cell.style.verticalAlign = style.verticalAlign;
      if (style.backgroundColor)
        cell.style.backgroundColor = style.backgroundColor;
      if (style.color)
        cell.style.color = style.color;
      if (style.fontWeight)
        cell.style.fontWeight = style.fontWeight;
      if (style.fontStyle)
        cell.style.fontStyle = style.fontStyle;
    });
  }
  /**
   * 
   * @param heights 
   */
  applyRowHeights(heights) {
    console.log(`\u5E94\u7528\u884C\u9AD8: ${JSON.stringify(heights)}`);
    const rows = this.containerEl.querySelectorAll("tr");
    rows.forEach((row, rowIndex) => {
      if (rowIndex < heights.length && heights[rowIndex] && heights[rowIndex] !== "auto") {
        row.style.height = heights[rowIndex];
        console.log(`\u8BBE\u7F6E\u7B2C${rowIndex + 1}\u884C\u9AD8\u5EA6: ${heights[rowIndex]}`);
      }
    });
  }
  /**
   * 
   * @param widths 
   */
  applyColumnWidths(widths) {
    console.log(`\u5E94\u7528\u5217\u5BBD: ${JSON.stringify(widths)}`);
    let colgroup = this.containerEl.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      this.containerEl.prepend(colgroup);
    } else {
      colgroup.innerHTML = "";
    }
    widths.forEach((width, index) => {
      const col = document.createElement("col");
      if (width && width !== "auto") {
        col.style.width = width;
        console.log(`\u8BBE\u7F6E\u7B2C${index + 1}\u5217\u5BBD\u5EA6: ${width}`);
      }
      if (colgroup) {
        colgroup.appendChild(col);
      }
    });
  }
  /**
   * 
   * @param rowIndex 
   * @param colIndex 
   * @returns null
   */
  findCell(rowIndex, colIndex) {
    const rows = this.containerEl.querySelectorAll("tr");
    if (!rows || rows.length <= rowIndex)
      return null;
    const cells = rows[rowIndex].querySelectorAll("td, th");
    if (!cells || cells.length <= colIndex)
      return null;
    return cells[colIndex];
  }
  /**
   * 
   */
  onunload() {
    console.log(`\u8868\u683C ${this.tableId} \u7684\u6837\u5F0F\u6E32\u67D3\u5668\u5DF2\u5378\u8F7D`);
  }
  /**
   * 
   */
  async applyTableStyles(tableElement, tableId) {
    var _a;
    try {
      if (tableElement.getAttribute("data-table-styles-applied") === "true") {
        return;
      }
      const data = await this.plugin.loadData();
      const tableData = (_a = data == null ? void 0 : data.tables) == null ? void 0 : _a[tableId];
      if (!tableData || !tableData.styling) {
        console.log(`\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u8868\u683C\u6837\u5F0F\u6570\u636E\uFF1A${tableId}`);
        return;
      }
      console.log(`\u5E94\u7528\u8868\u683C\u6837\u5F0F - ID=${tableId}`, tableData.styling);
      if (tableData.styling.rowHeights && tableData.styling.rowHeights.length > 0) {
        const rows = tableElement.querySelectorAll("tr");
        tableData.styling.rowHeights.forEach((height, index) => {
          if (index < rows.length && height && height !== "auto") {
            rows[index].style.height = height;
            console.log(`\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
          }
        });
      }
      if (tableData.styling.colWidths && tableData.styling.colWidths.length > 0) {
        let colgroup = tableElement.querySelector("colgroup");
        if (!colgroup) {
          colgroup = document.createElement("colgroup");
          tableElement.insertBefore(colgroup, tableElement.firstChild);
        } else {
          colgroup.innerHTML = "";
        }
        tableData.styling.colWidths.forEach((width, index) => {
          const col = document.createElement("col");
          if (width && width !== "auto") {
            col.style.width = width;
            console.log(`\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
          }
          if (colgroup) {
            colgroup.appendChild(col);
          }
        });
      }
      if (tableData.styling.alignment && tableData.styling.alignment.length > 0) {
        const rows = tableElement.querySelectorAll("tr");
        rows.forEach((row) => {
          const cells = row.querySelectorAll("th, td");
          cells.forEach((cell, cellIndex) => {
            if (cellIndex < tableData.styling.alignment.length) {
              const alignment = tableData.styling.alignment[cellIndex];
              if (alignment) {
                cell.style.textAlign = alignment;
              }
            }
          });
        });
      }
      if (tableData.styling.cellStyles && tableData.styling.cellStyles.length > 0) {
        tableData.styling.cellStyles.forEach((cellStyle) => {
          if (cellStyle.row !== void 0 && cellStyle.col !== void 0) {
            const rows = tableElement.querySelectorAll("tr");
            if (cellStyle.row < rows.length) {
              const row = rows[cellStyle.row];
              const cells = row.querySelectorAll("th, td");
              if (cellStyle.col < cells.length) {
                const cell = cells[cellStyle.col];
                if (cellStyle.backgroundColor) {
                  cell.style.backgroundColor = cellStyle.backgroundColor;
                }
                if (cellStyle.textColor) {
                  cell.style.color = cellStyle.textColor;
                }
                if (cellStyle.fontWeight) {
                  cell.style.fontWeight = cellStyle.fontWeight;
                }
                if (cellStyle.fontStyle) {
                  cell.style.fontStyle = cellStyle.fontStyle;
                }
              }
            }
          }
        });
      }
      tableElement.setAttribute("data-table-styles-applied", "true");
      tableElement.classList.add(`table-${tableId}`);
      console.log(`\u8868\u683C\u6837\u5F0F\u5E94\u7528\u5B8C\u6210 - ID=${tableId}`);
    } catch (error) {
      console.error("\u5E94\u7528\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   */
  async applyPreviewModeStyles(containerEl) {
    try {
      console.log("\u9884\u89C8\u6A21\u5F0F\u6FC0\u6D3B\uFF0C\u5F00\u59CB\u5E94\u7528\u4FDD\u5B58\u7684\u8868\u683C\u6837\u5F0F");
      const tables = containerEl.querySelectorAll("table");
      console.log(`\u627E\u5230 ${tables.length} \u4E2A\u8868\u683C\u9700\u8981\u5E94\u7528\u6837\u5F0F`);
      if (!tables.length)
        return;
      for (let index = 0; index < tables.length; index++) {
        const tableElement = tables[index];
        let tableId = tableElement.getAttribute("data-table-id");
        if (!tableId) {
          const activeFile = this.getApp().workspace.getActiveFile();
          if (activeFile) {
            tableId = await this.plugin.readTableIdFromMarkdown(tableElement);
          }
        }
        if (tableId) {
          console.log(`\u4E3A\u8868\u683C\u5E94\u7528\u6837\u5F0F - \u7D22\u5F15=${index}, ID=${tableId}`);
          await this.applyTableStyles(tableElement, tableId);
        } else {
          console.log(`\u65E0\u6CD5\u4E3A\u8868\u683C\u5E94\u7528\u6837\u5F0F - \u7D22\u5F15=${index}, \u672A\u627E\u5230ID`);
        }
      }
    } catch (error) {
      console.error("\u5E94\u7528\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
    }
  }
};
async function renderTablesWithStoredStyles(plugin) {
  var _a;
  function getApp() {
    return plugin.app;
  }
  try {
    console.log("\u5F00\u59CB\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
    const activeView = getApp().workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
    if (!activeView) {
      console.log("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE\uFF0C\u65E0\u6CD5\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
      return;
    }
    const activeFile = activeView.file;
    if (!activeFile) {
      console.log("\u672A\u627E\u5230\u6D3B\u52A8\u6587\u4EF6\uFF0C\u65E0\u6CD5\u6E32\u67D3\u8868\u683C\u6837\u5F0F");
      return;
    }
    const filePath = activeFile.path;
    console.log(`\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84: ${filePath}`);
    let tables = {};
    if (plugin.tableDataExtractor) {
      tables = await plugin.tableDataExtractor.extractTableDataFromFile(activeFile);
      console.log(`\u4ECEMarkdown\u6587\u4EF6\u4E2D\u63D0\u53D6\u5230 ${Object.keys(tables).length} \u4E2A\u8868\u683C\u6570\u636E`);
    }
    if (Object.keys(tables).length === 0) {
      console.log("\u4ECEMarkdown\u6587\u4EF6\u4E2D\u672A\u63D0\u53D6\u5230\u8868\u683C\u6570\u636E\uFF0C\u5C1D\u8BD5\u4ECEdata.json\u83B7\u53D6");
      const pluginData = await plugin.loadData() || {};
      tables = pluginData.tables || {};
      if (!tables || Object.keys(tables).length === 0) {
        console.log("\u6CA1\u6709\u5B58\u50A8\u7684\u8868\u683C\u6570\u636E");
        return;
      }
    }
    const allTables = document.querySelectorAll("table");
    if (!allTables.length) {
      console.log("\u5F53\u524D\u6587\u4EF6\u4E2D\u6CA1\u6709\u8868\u683C");
      return;
    }
    console.log(`\u5F53\u524D\u6587\u4EF6\u4E2D\u6709 ${allTables.length} \u4E2A\u8868\u683C`);
    const renderQueue = [];
    const fileContent = await plugin.app.vault.read(activeFile);
    const tableInfos = plugin.tableIdManager.extractTableIdsFromMarkdown(fileContent);
    console.log(`\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u63D0\u53D6\u5230 ${tableInfos.length} \u4E2A\u8868\u683C\u4FE1\u606F`);
    for (let i = 0; i < allTables.length; i++) {
      const table = allTables[i];
      let tableId = table.getAttribute("data-table-id");
      if (!tableId && i < tableInfos.length) {
        tableId = tableInfos[i].id;
        if (tableId) {
          console.log(`\u901A\u8FC7\u4F4D\u7F6E\u5339\u914D\u627E\u5230\u8868\u683CID: ${tableId}`);
          table.setAttribute("data-table-id", tableId);
        }
      }
      if (!tableId) {
        const tableFeature = plugin.tableIdManager.extractTableFeature(table);
        let bestMatchId = "";
        let bestMatchScore = 0;
        for (const { id, feature } of tableInfos) {
          if (!id)
            continue;
          const score = plugin.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
          if (score > bestMatchScore) {
            bestMatchScore = score;
            bestMatchId = id;
          }
        }
        if (bestMatchId && bestMatchScore > 0.7) {
          console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
          tableId = bestMatchId;
          table.setAttribute("data-table-id", tableId);
        }
      }
      if (tableId && tables[tableId]) {
        const tableData = tables[tableId];
        const isInCurrentFile = (_a = tableData.locations) == null ? void 0 : _a.some((loc) => loc.path === filePath);
        if (isInCurrentFile) {
          console.log(`\u4E3A\u8868\u683C ${tableId} \u6DFB\u52A0\u6E32\u67D3\u4EFB\u52A1`);
          renderQueue.push({
            table,
            tableId,
            tableData
          });
        }
      }
    }
    if (renderQueue.length > 0) {
      console.log(`\u5F00\u59CB\u5904\u7406 ${renderQueue.length} \u4E2A\u8868\u683C\u6E32\u67D3\u4EFB\u52A1`);
      await processRenderQueue(renderQueue, plugin);
    } else {
      console.log("\u6CA1\u6709\u9700\u8981\u6E32\u67D3\u7684\u8868\u683C");
    }
  } catch (error) {
    console.error("\u6E32\u67D3\u8868\u683C\u6837\u5F0F\u65F6\u51FA\u9519:", error);
  }
}
async function processRenderQueue(queue, plugin) {
  const batchSize = 3;
  let processedCount = 0;
  let successCount = 0;
  console.log(`\u5F00\u59CB\u5904\u7406\u6E32\u67D3\u961F\u5217\uFF0C\u5171 ${queue.length} \u4E2A\u8868\u683C`);
  const processBatch = async () => {
    try {
      const endIndex = Math.min(processedCount + batchSize, queue.length);
      for (let i = processedCount; i < endIndex; i++) {
        const { table, tableId, tableData } = queue[i];
        console.log(`\u5904\u7406\u961F\u5217\u4E2D\u7684\u8868\u683C ${i + 1}/${queue.length} - ID=${tableId}`);
        try {
          const success = await renderTableWithStyles(table, tableId, tableData, plugin);
          if (success) {
            successCount++;
          }
        } catch (error) {
          console.error(`\u5904\u7406\u8868\u683C ${tableId} \u65F6\u51FA\u9519:`, error);
        }
      }
      processedCount = endIndex;
      if (processedCount < queue.length) {
        return new Promise((resolve) => {
          window.requestAnimationFrame(() => {
            processBatch().then(resolve);
          });
        });
      }
    } catch (error) {
      console.error("\u5904\u7406\u8868\u683C\u6279\u6B21\u65F6\u51FA\u9519:", error);
    }
  };
  await processBatch();
  console.log(`\u5B8C\u6210\u4E86 ${processedCount} \u4E2A\u8868\u683C\u7684\u5904\u7406\uFF0C\u6210\u529F\u5E94\u7528\u6837\u5F0F: ${successCount}`);
}
async function renderTableWithStyles(table, tableId, tableData, plugin) {
  try {
    console.log(`\u5F00\u59CB\u4E3A\u8868\u683C ${tableId} \u5E94\u7528\u6837\u5F0F`);
    if (table.getAttribute("data-table-styles-applied") === "true") {
      console.log(`\u8868\u683C ${tableId} \u5DF2\u7ECF\u5E94\u7528\u4E86\u6837\u5F0F\uFF0C\u8DF3\u8FC7`);
      return true;
    }
    if (!tableData.styling) {
      console.log(`\u8868\u683C ${tableId} \u6CA1\u6709\u6709\u6548\u7684\u6837\u5F0F\u6570\u636E`);
      return false;
    }
    const ctx = getContextForTable(table, plugin);
    if (ctx) {
      try {
        ctx.addChild(new TableStyleRenderer(table, tableId, tableData.styling, plugin));
        console.log(`\u8868\u683C ${tableId} \u5DF2\u4F7F\u7528RenderChild\u5E94\u7528\u6837\u5F0F`);
      } catch (error) {
        console.error(`\u4F7F\u7528RenderChild\u5E94\u7528\u6837\u5F0F\u65F6\u51FA\u9519:`, error);
        applyStylesDirectly(table, tableData.styling);
        console.log(`\u8868\u683C ${tableId} \u56DE\u9000\u5230\u76F4\u63A5\u5E94\u7528\u6837\u5F0F`);
      }
    } else {
      applyStylesDirectly(table, tableData.styling);
      console.log(`\u8868\u683C ${tableId} \u5DF2\u76F4\u63A5\u5E94\u7528\u6837\u5F0F`);
    }
    table.setAttribute("data-table-styles-applied", "true");
    if (!table.classList.contains(`table-${tableId}`)) {
      table.classList.add(`table-${tableId}`);
    }
    console.log(`\u8868\u683C ${tableId} \u6837\u5F0F\u5E94\u7528\u5B8C\u6210`);
    return true;
  } catch (error) {
    console.error(`\u4E3A\u8868\u683C ${tableId} \u5E94\u7528\u6837\u5F0F\u65F6\u51FA\u9519:`, error);
    return false;
  }
}
function getContextForTable(table, plugin) {
  var _a, _b, _c;
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
  if (!activeView || activeView.getMode() !== "preview")
    return null;
  try {
    const sectionEl = table.closest("[data-section-id]");
    if (sectionEl) {
      const sectionId = sectionEl.getAttribute("data-section-id");
      if (sectionId && activeView.previewMode) {
        const sections = (_a = activeView.previewMode.renderer) == null ? void 0 : _a.sections;
        if (sections && sections[sectionId]) {
          return sections[sectionId];
        }
      }
    }
    if (activeView.previewMode) {
      const sectionInfo = (_c = (_b = activeView.previewMode.renderer) == null ? void 0 : _b.getSectionInfo) == null ? void 0 : _c.call(_b, table);
      if (sectionInfo && sectionInfo.section) {
        return sectionInfo.section;
      }
    }
    return null;
  } catch (e) {
    console.warn("\u83B7\u53D6\u8868\u683C\u6E32\u67D3\u4E0A\u4E0B\u6587\u5931\u8D25:", e);
    return null;
  }
}
function applyStylesDirectly(table, styling) {
  if (!styling)
    return;
  if (styling.rowHeights && Array.isArray(styling.rowHeights)) {
    const rows = table.querySelectorAll("tr");
    styling.rowHeights.forEach((height, index) => {
      if (index < rows.length && height && height !== "auto") {
        rows[index].style.height = height;
        console.log(`\u76F4\u63A5\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
      }
    });
  }
  if (styling.colWidths && Array.isArray(styling.colWidths)) {
    let colgroup = table.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      table.insertBefore(colgroup, table.firstChild);
    } else {
      colgroup.innerHTML = "";
    }
    styling.colWidths.forEach((width, index) => {
      const col = document.createElement("col");
      if (width && width !== "auto") {
        col.style.width = width;
        console.log(`\u76F4\u63A5\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
      }
      if (colgroup) {
        colgroup.appendChild(col);
      }
    });
  }
  if (styling.alignment && Array.isArray(styling.alignment)) {
    const rows = table.querySelectorAll("tr");
    rows.forEach((row) => {
      const cells = row.querySelectorAll("td, th");
      cells.forEach((cell, colIndex) => {
        if (styling.alignment[colIndex]) {
          cell.style.textAlign = styling.alignment[colIndex];
        }
      });
    });
  }
  if (styling.cellStyles && Array.isArray(styling.cellStyles)) {
    styling.cellStyles.forEach((style) => {
      if (typeof style.row !== "number" || typeof style.col !== "number") {
        return;
      }
      const rows = table.querySelectorAll("tr");
      if (!rows || rows.length <= style.row)
        return;
      const cells = rows[style.row].querySelectorAll("td, th");
      if (!cells || cells.length <= style.col)
        return;
      const cell = cells[style.col];
      if (style.textAlign)
        cell.style.textAlign = style.textAlign;
      if (style.verticalAlign)
        cell.style.verticalAlign = style.verticalAlign;
      if (style.backgroundColor)
        cell.style.backgroundColor = style.backgroundColor;
      if (style.color)
        cell.style.color = style.color;
      if (style.fontWeight)
        cell.style.fontWeight = style.fontWeight;
      if (style.fontStyle)
        cell.style.fontStyle = style.fontStyle;
    });
  }
  const tableId = table.getAttribute("data-table-id");
  if (tableId) {
    table.classList.add(`table-${tableId}`);
  }
}

// src/setupPreviewModeTableSelection.ts
function findMergeMarkers(table) {
  var _a;
  const cells = table.querySelectorAll("td, th");
  for (const cell of Array.from(cells)) {
    const content = ((_a = cell.textContent) == null ? void 0 : _a.trim()) || "";
    if (content === "^" || content === "<") {
      return true;
    }
  }
  return false;
}
function setupPreviewModeTableSelection(plugin) {
  try {
    plugin.currentEditingTable = null;
    const tables = document.querySelectorAll("table");
    if (!tables.length)
      return;
    console.log(`\u9884\u89C8\u6A21\u5F0F\u4E0B\u627E\u5230 ${tables.length} \u4E2A\u8868\u683C`);
    tables.forEach((table, index) => {
      table.removeEventListener("click", plugin.handleTableClick);
      table.addEventListener("click", plugin.handleTableClick);
      plugin.tableDetector.setupTableIndices(table);
      table.setAttribute("data-table-index", index.toString());
      const tableFeature = plugin.tableIdManager.extractTableFeature(table);
      if (tableFeature) {
        table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
        table.setAttribute("data-rows", tableFeature.rows.toString());
        table.setAttribute("data-cols", tableFeature.cols.toString());
        if (tableFeature.position) {
          table.setAttribute("data-table-position", JSON.stringify(tableFeature.position));
        }
      }
      plugin.readTableIdFromMarkdown(table).then((tableId) => {
        if (tableId) {
          table.setAttribute("data-table-id", tableId);
          console.log(`\u8868\u683CID\u5DF2\u8BBE\u7F6E: ${tableId}`);
          if (tableFeature) {
            tableFeature.id = tableId;
            table.setAttribute("data-table-feature", JSON.stringify(tableFeature));
          }
        }
      }).catch((error) => {
        console.error("\u8BFB\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      });
      if (plugin.settings.enableCellMerging !== false) {
        if (table.dataset.tableMergeProcessed !== "true") {
          const hasMergeMarkers = findMergeMarkers(table);
          if (hasMergeMarkers) {
            console.log(`\u8868\u683C\u5305\u542B\u5408\u5E76\u6807\u8BB0\uFF0C\u5E94\u7528\u5408\u5E76\u5355\u5143\u683C\u6E32\u67D3`);
            plugin.tableDetector.applyMergeCellsMarkers(table);
          }
        }
      }
    });
    renderTablesWithStoredStyles(plugin);
    console.log("\u9884\u89C8\u6A21\u5F0F\u4E0B\u8BBE\u7F6E\u4E86\u8868\u683C\u9009\u62E9");
  } catch (error) {
    console.error("\u8BBE\u7F6E\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
  }
}

// src/tableResizer.ts
var TableResizer = class {
  /**
   * 
   * @param plugin 
   */
  constructor(plugin) {
    this.activeTable = null;
    this.resizeHandles = [];
    this.isResizing = false;
    this.currentHandle = null;
    this.startX = 0;
    this.startY = 0;
    this.startWidth = 0;
    this.startHeight = 0;
    this.columnIndex = -1;
    this.tableWidth = 0;
    this.targetIndex = -1;
    this.resizeType = "column";
    this.resizeGuide = null;
    this.plugin = plugin;
    console.log("TableResizer: \u521D\u59CB\u5316\u8868\u683C\u5927\u5C0F\u8C03\u6574\u5668");
  }
  // app
  getApp() {
    return this.plugin.app;
  }
  /**
   * 
   * @param table 
   */
  setupTableResize(table) {
    try {
      console.log("TableResizer: \u4E3A\u8868\u683C\u8BBE\u7F6E\u5927\u5C0F\u8C03\u6574\u529F\u80FD");
      this.removeResizeHandles();
      this.activeTable = table;
      this.addResizeHandles(table);
      console.log("TableResizer: \u8868\u683C\u5927\u5C0F\u8C03\u6574\u529F\u80FD\u8BBE\u7F6E\u5B8C\u6210");
    } catch (error) {
      console.error("TableResizer: \u8BBE\u7F6E\u8868\u683C\u5927\u5C0F\u8C03\u6574\u529F\u80FD\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param table 
   */
  addResizeHandles(table) {
    console.log("TableResizer: \u6DFB\u52A0\u62D6\u62FD\u53E5\u67C4");
    table.style.position = "relative";
    const rows = table.querySelectorAll("tr");
    if (rows.length === 0) {
      console.warn("TableResizer: \u8868\u683C\u6CA1\u6709\u884C");
      return;
    }
    const firstRowCells = rows[0].querySelectorAll("th, td");
    if (firstRowCells.length === 0) {
      console.warn("TableResizer: \u8868\u683C\u7B2C\u4E00\u884C\u6CA1\u6709\u5355\u5143\u683C");
      return;
    }
    console.log(`TableResizer: \u8868\u683C\u6709 ${rows.length} \u884C, ${firstRowCells.length} \u5217`);
    for (let i = 0; i < firstRowCells.length - 1; i++) {
      const cell = firstRowCells[i];
      const nextCell = firstRowCells[i + 1];
      const cellRect = cell.getBoundingClientRect();
      const tableRect = table.getBoundingClientRect();
      const handleLeft = cell.offsetLeft + cell.offsetWidth;
      const colHandle = document.createElement("div");
      colHandle.className = "table-resize-handle-col";
      colHandle.style.position = "absolute";
      colHandle.style.top = "0";
      colHandle.style.left = `${handleLeft}px`;
      colHandle.style.width = "5px";
      colHandle.style.height = "100%";
      colHandle.style.cursor = "col-resize";
      colHandle.style.zIndex = "100";
      colHandle.dataset.index = i.toString();
      colHandle.dataset.type = "column";
      console.log(`TableResizer: \u6DFB\u52A0\u5217\u62D6\u62FD\u53E5\u67C4 - \u7D22\u5F15=${i}, \u4F4D\u7F6E=${handleLeft}px`);
      this.addHandleEventListeners(colHandle);
      table.appendChild(colHandle);
      this.resizeHandles.push(colHandle);
    }
    for (let i = 0; i < rows.length - 1; i++) {
      const row = rows[i];
      const nextRow = rows[i + 1];
      const rowRect = row.getBoundingClientRect();
      const tableRect = table.getBoundingClientRect();
      const handleTop = row.offsetTop + row.offsetHeight;
      const rowHandle = document.createElement("div");
      rowHandle.className = "table-resize-handle-row";
      rowHandle.style.position = "absolute";
      rowHandle.style.left = "0";
      rowHandle.style.top = `${handleTop}px`;
      rowHandle.style.height = "5px";
      rowHandle.style.width = "100%";
      rowHandle.style.cursor = "row-resize";
      rowHandle.style.zIndex = "100";
      rowHandle.dataset.index = i.toString();
      rowHandle.dataset.type = "row";
      console.log(`TableResizer: \u6DFB\u52A0\u884C\u62D6\u62FD\u53E5\u67C4 - \u7D22\u5F15=${i}, \u4F4D\u7F6E=${handleTop}px`);
      this.addHandleEventListeners(rowHandle);
      table.appendChild(rowHandle);
      this.resizeHandles.push(rowHandle);
    }
  }
  /**
   * 
   * @param handle 
   */
  addHandleEventListeners(handle) {
    handle.addEventListener("mousedown", this.handleMouseDown.bind(this));
    handle.addEventListener("mouseenter", () => {
      handle.style.backgroundColor = "var(--interactive-accent)";
    });
    handle.addEventListener("mouseleave", () => {
      if (!this.isResizing || this.currentHandle !== handle) {
        handle.style.backgroundColor = "transparent";
      }
    });
  }
  /**
   * 
   * @param event 
   */
  handleMouseDown(event2) {
    if (!this.activeTable)
      return;
    event2.stopPropagation();
    event2.preventDefault();
    const handle = event2.target;
    this.currentHandle = handle;
    this.resizeType = handle.dataset.type;
    this.targetIndex = parseInt(handle.dataset.index || "-1");
    console.log(`TableResizer: \u5F00\u59CB\u62D6\u62FD - \u7C7B\u578B=${this.resizeType}, \u7D22\u5F15=${this.targetIndex}`);
    this.startX = event2.clientX;
    this.startY = event2.clientY;
    if (this.resizeType === "column") {
      const cells = this.activeTable.querySelectorAll(`tr:first-child > *:nth-child(${this.targetIndex + 1})`);
      if (cells.length > 0) {
        const cell = cells[0];
        this.startWidth = cell.offsetWidth;
        console.log(`TableResizer: \u5217\u521D\u59CB\u5BBD\u5EA6=${this.startWidth}px`);
      }
    } else {
      const rows = this.activeTable.querySelectorAll(`tr:nth-child(${this.targetIndex + 1})`);
      if (rows.length > 0) {
        const row = rows[0];
        this.startHeight = row.offsetHeight;
        console.log(`TableResizer: \u884C\u521D\u59CB\u9AD8\u5EA6=${this.startHeight}px`);
      }
    }
    this.createResizeGuide();
    this.isResizing = true;
    document.addEventListener("mousemove", this.handleMouseMove.bind(this));
    document.addEventListener("mouseup", this.handleMouseUp.bind(this));
  }
  /**
   * 
   */
  createResizeGuide() {
    if (!this.activeTable || !this.currentHandle)
      return;
    const guide = document.createElement("div");
    guide.className = `table-resize-guide table-resize-guide-${this.resizeType}`;
    guide.style.position = "absolute";
    guide.style.backgroundColor = "var(--interactive-accent)";
    guide.style.zIndex = "1000";
    if (this.resizeType === "column") {
      guide.style.width = "2px";
      guide.style.height = "100%";
      guide.style.top = "0";
      guide.style.left = this.currentHandle.style.left;
    } else {
      guide.style.height = "2px";
      guide.style.width = "100%";
      guide.style.left = "0";
      guide.style.top = this.currentHandle.style.top;
    }
    this.activeTable.appendChild(guide);
    this.resizeGuide = guide;
    console.log("TableResizer: \u521B\u5EFA\u8C03\u6574\u5927\u5C0F\u8F85\u52A9\u7EBF");
  }
  /**
   * 
   * @param event 
   */
  handleMouseMove(event2) {
    if (!this.isResizing || !this.activeTable || !this.currentHandle || !this.resizeGuide)
      return;
    const deltaX = event2.clientX - this.startX;
    const deltaY = event2.clientY - this.startY;
    if (this.resizeType === "column") {
      const newLeft = parseInt(this.currentHandle.style.left) + deltaX;
      this.resizeGuide.style.left = `${newLeft}px`;
      console.log(`TableResizer: \u8C03\u6574\u5217\u8F85\u52A9\u7EBF - \u4F4D\u7F6E=${newLeft}px`);
    } else {
      const newTop = parseInt(this.currentHandle.style.top) + deltaY;
      this.resizeGuide.style.top = `${newTop}px`;
      console.log(`TableResizer: \u8C03\u6574\u884C\u8F85\u52A9\u7EBF - \u4F4D\u7F6E=${newTop}px`);
    }
  }
  /**
   * 
   * @param event 
   */
  handleMouseUp(event2) {
    if (!this.isResizing || !this.activeTable)
      return;
    console.log("TableResizer: \u7ED3\u675F\u62D6\u62FD");
    const deltaX = event2.clientX - this.startX;
    const deltaY = event2.clientY - this.startY;
    if (this.resizeType === "column" && this.targetIndex >= 0) {
      const newWidth = Math.max(20, this.startWidth + deltaX);
      this.applyColumnWidth(this.targetIndex, newWidth);
      console.log(`TableResizer: \u5E94\u7528\u65B0\u5217\u5BBD - \u7D22\u5F15=${this.targetIndex}, \u5BBD\u5EA6=${newWidth}px`);
    } else if (this.resizeType === "row" && this.targetIndex >= 0) {
      const newHeight = Math.max(20, this.startHeight + deltaY);
      this.applyRowHeight(this.targetIndex, newHeight);
      console.log(`TableResizer: \u5E94\u7528\u65B0\u884C\u9AD8 - \u7D22\u5F15=${this.targetIndex}, \u9AD8\u5EA6=${newHeight}px`);
    }
    this.saveTableSizeData();
    if (this.resizeGuide) {
      this.resizeGuide.remove();
      this.resizeGuide = null;
    }
    this.isResizing = false;
    this.currentHandle = null;
    document.removeEventListener("mousemove", this.handleMouseMove.bind(this));
    document.removeEventListener("mouseup", this.handleMouseUp.bind(this));
  }
  /**
   * 
   * @param colIndex 
   * @param width 
   */
  applyColumnWidth(colIndex, width) {
    if (!this.activeTable)
      return;
    let colgroup = this.activeTable.querySelector("colgroup");
    if (!colgroup) {
      colgroup = document.createElement("colgroup");
      const firstRow = this.activeTable.querySelector("tr");
      if (firstRow) {
        const cellCount = firstRow.querySelectorAll("th, td").length;
        for (let i = 0; i < cellCount; i++) {
          const col = document.createElement("col");
          colgroup.appendChild(col);
        }
      }
      this.activeTable.prepend(colgroup);
    }
    const cols = colgroup.querySelectorAll("col");
    if (colIndex < cols.length) {
      const col = cols[colIndex];
      col.style.width = `${width}px`;
    }
  }
  /**
   * 
   * @param rowIndex 
   * @param height 
   */
  applyRowHeight(rowIndex, height) {
    if (!this.activeTable)
      return;
    const rows = this.activeTable.querySelectorAll("tr");
    if (rowIndex < rows.length) {
      const row = rows[rowIndex];
      row.style.height = `${height}px`;
    }
  }
  /**
   * 
   */
  async saveTableSizeData() {
    if (!this.activeTable)
      return;
    try {
      const tableId = this.activeTable.getAttribute("data-table-id");
      if (!tableId) {
        console.warn("TableResizer: \u65E0\u6CD5\u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E\uFF0C\u8868\u683C\u6CA1\u6709ID");
        return;
      }
      console.log(`TableResizer: \u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E - \u8868\u683CID=${tableId}`);
      const colWidths = [];
      const colgroup = this.activeTable.querySelector("colgroup");
      if (colgroup) {
        const cols = colgroup.querySelectorAll("col");
        cols.forEach((col) => {
          const width = col.style.width || "auto";
          colWidths.push(width);
        });
      }
      if (colWidths.length === 0) {
        const firstRow = this.activeTable.querySelector("tr");
        if (firstRow) {
          const cellCount = firstRow.querySelectorAll("th, td").length;
          for (let i = 0; i < cellCount; i++) {
            colWidths.push("auto");
          }
        }
      }
      const rowHeights = [];
      const rows = this.activeTable.querySelectorAll("tr");
      rows.forEach((row) => {
        const height = row.style.height || "auto";
        rowHeights.push(height);
      });
      console.log("TableResizer: \u6536\u96C6\u7684\u5C3A\u5BF8\u6570\u636E", { colWidths, rowHeights });
      let allData = await this.plugin.loadData() || {};
      if (!allData.tables) {
        allData.tables = {};
      }
      const activeFile = this.getApp().workspace.getActiveFile();
      if (!activeFile) {
        console.warn("TableResizer: \u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6587\u4EF6\u8DEF\u5F84");
        return;
      }
      if (!allData.tables[tableId]) {
        allData.tables[tableId] = {
          id: tableId,
          locations: [{
            path: activeFile.path,
            isActive: true
          }],
          structure: {
            rowCount: rows.length,
            colCount: colWidths.length,
            hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
          },
          styling: {
            rowHeights,
            colWidths,
            alignment: Array(colWidths.length).fill("left"),
            cellStyles: []
          }
        };
        console.log(`TableResizer: \u521B\u5EFA\u4E86\u65B0\u7684\u8868\u683C\u6570\u636E - ID=${tableId}`, allData.tables[tableId]);
      } else {
        if (!allData.tables[tableId].styling) {
          allData.tables[tableId].styling = {};
        }
        if (!allData.tables[tableId].locations) {
          allData.tables[tableId].locations = [{
            path: activeFile.path,
            isActive: true
          }];
        } else {
          const filePathExists = allData.tables[tableId].locations.some(
            (loc) => loc.path === activeFile.path
          );
          if (!filePathExists) {
            allData.tables[tableId].locations.push({
              path: activeFile.path,
              isActive: true
            });
          }
        }
        allData.tables[tableId].styling.rowHeights = rowHeights;
        allData.tables[tableId].styling.colWidths = colWidths;
        allData.tables[tableId].structure = {
          rowCount: rows.length,
          colCount: colWidths.length,
          hasHeaders: rows.length > 0 && rows[0].querySelectorAll("th").length > 0
        };
        console.log(`TableResizer: \u66F4\u65B0\u4E86\u73B0\u6709\u8868\u683C\u6570\u636E - ID=${tableId}`, allData.tables[tableId]);
      }
      await this.plugin.saveData(allData);
      if (this.plugin.settings.preferFileStorage && activeFile) {
        await this.plugin.tableDataExtractor.exportTableDataToFile(activeFile, tableId, allData.tables[tableId]);
        console.log(`TableResizer: \u5DF2\u5C06\u8868\u683C\u5927\u5C0F\u6570\u636E\u5BFC\u51FA\u5230\u6587\u4EF6 ${activeFile.path}`);
      }
      console.log("TableResizer: \u8868\u683C\u5C3A\u5BF8\u6570\u636E\u4FDD\u5B58\u6210\u529F");
      this.applyCurrentSizes();
    } catch (error) {
      console.error("TableResizer: \u4FDD\u5B58\u8868\u683C\u5C3A\u5BF8\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   */
  applyCurrentSizes() {
    if (!this.activeTable)
      return;
    try {
      const colgroup = this.activeTable.querySelector("colgroup");
      if (colgroup) {
        const cols = colgroup.querySelectorAll("col");
        cols.forEach((col, index) => {
          const width = col.style.width;
          if (width) {
            console.log(`TableResizer: \u7ACB\u5373\u5E94\u7528\u5217\u5BBD - \u7D22\u5F15=${index}, \u5BBD\u5EA6=${width}`);
          }
        });
      }
      const rows = this.activeTable.querySelectorAll("tr");
      rows.forEach((row, index) => {
        const height = row.style.height;
        if (height) {
          console.log(`TableResizer: \u7ACB\u5373\u5E94\u7528\u884C\u9AD8 - \u7D22\u5F15=${index}, \u9AD8\u5EA6=${height}`);
        }
      });
    } catch (error) {
      console.error("TableResizer: \u5E94\u7528\u5F53\u524D\u5C3A\u5BF8\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   */
  removeResizeHandles() {
    console.log("TableResizer: \u79FB\u9664\u62D6\u62FD\u53E5\u67C4");
    this.resizeHandles.forEach((handle) => {
      handle.remove();
    });
    this.resizeHandles = [];
    if (this.resizeGuide) {
      this.resizeGuide.remove();
      this.resizeGuide = null;
    }
  }
  /**
   * 
   */
  cleanup() {
    console.log("TableResizer: \u6E05\u7406\u8D44\u6E90");
    this.removeResizeHandles();
    this.activeTable = null;
    this.isResizing = false;
    this.currentHandle = null;
  }
};

// src/tableDataExtractor.ts
var TableDataExtractor = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  // app
  getApp() {
    return this.plugin.app;
  }
  /**
   * 
   * @param file 
   * @returns ID
   */
  async extractTableDataFromFile(file) {
    try {
      const fileContent = await this.getApp().vault.read(file);
      const result = {};
      const jsonCodeBlockRegex = /```json:table-data\s*\n([\s\S]*?)\n```/g;
      let jsonMatch;
      while ((jsonMatch = jsonCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const jsonStr = jsonMatch[1].trim();
          const jsonData = JSON.parse(jsonStr);
          if (Array.isArray(jsonData)) {
            for (const tableData of jsonData) {
              if (tableData.id) {
                this.processTableDataObject(tableData, result);
              }
            }
          } else if (jsonData.id) {
            this.processTableDataObject(jsonData, result);
          }
        } catch (error) {
          console.error("\u89E3\u6790JSON\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      const csvCodeBlockRegex = /```csv:table-data\s*\n([\s\S]*?)\n```/g;
      let csvMatch;
      while ((csvMatch = csvCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const csvStr = csvMatch[1].trim();
          const csvLines = csvStr.split("\n");
          if (csvLines.length > 1) {
            const headers = csvLines[0].split(",");
            for (let i = 1; i < csvLines.length; i++) {
              const values = csvLines[i].split(",");
              const tableData = {};
              for (let j = 0; j < headers.length && j < values.length; j++) {
                if (values[j]) {
                  try {
                    tableData[headers[j]] = JSON.parse(values[j]);
                  } catch (e) {
                    tableData[headers[j]] = values[j];
                  }
                }
              }
              if (tableData.id) {
                this.processTableDataObject(tableData, result);
              }
            }
          }
        } catch (error) {
          console.error("\u89E3\u6790CSV\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      const customCodeBlockRegex = /```table-data\s*\n([\s\S]*?)\n```/g;
      let customMatch;
      while ((customMatch = customCodeBlockRegex.exec(fileContent)) !== null) {
        try {
          const customStr = customMatch[1].trim();
          const customLines = customStr.split("\n");
          for (const line of customLines) {
            const tableData = this.parseCustomTableDataFormat(line);
            if (tableData && tableData.id) {
              result[tableData.id] = tableData;
            }
          }
        } catch (error) {
          console.error("\u89E3\u6790\u81EA\u5B9A\u4E49\u8868\u683C\u6570\u636E\u4EE3\u7801\u5757\u65F6\u51FA\u9519:", error);
        }
      }
      this.extractTableDataFromComments(fileContent, result);
      return result;
    } catch (error) {
      console.error("\u4ECE\u6587\u4EF6\u63D0\u53D6\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
      return {};
    }
  }
  /**
   * HTMLID
   * @param fileContent 
   * @param result 
   */
  extractTableDataFromComments(fileContent, result) {
    try {
      const commentRegex = /<!--\s*table-id:\s*([\w-]+)(?:\s*\|\s*([^>]*))?\s*-->/g;
      let match;
      while ((match = commentRegex.exec(fileContent)) !== null) {
        const tableId = match[1].trim();
        const dataString = match[2] ? match[2].trim() : null;
        if (tableId && dataString) {
          const tableData = this.parseCustomTableDataFormat(`${tableId}|${dataString}`);
          if (tableData && tableData.id) {
            result[tableData.id] = tableData;
          }
        } else if (tableId && !result[tableId]) {
          result[tableId] = this.createEmptyTableData(tableId);
        }
      }
    } catch (error) {
      console.error("\u4ECEHTML\u6CE8\u91CA\u63D0\u53D6\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param tableId ID
   * @returns 
   */
  createEmptyTableData(tableId) {
    return {
      id: tableId,
      locations: [],
      structure: {
        rowCount: 0,
        colCount: 0,
        hasHeaders: false
      },
      styling: {
        rowHeights: [],
        colWidths: [],
        alignment: []
      }
    };
  }
  /**
   * 
   * @param tableData 
   * @param result 
   */
  processTableDataObject(tableData, result) {
    try {
      if (!tableData.structure) {
        tableData.structure = {
          rowCount: 0,
          colCount: 0,
          hasHeaders: false
        };
      }
      if (!tableData.styling) {
        tableData.styling = {
          rowHeights: [],
          colWidths: [],
          alignment: []
        };
      }
      if (!tableData.locations) {
        tableData.locations = [];
      }
      result[tableData.id] = tableData;
    } catch (error) {
      console.error("\u5904\u7406\u8868\u683C\u6570\u636E\u5BF9\u8C61\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * : tableId|key1:value1|key2:value2,...
   * @param line 
   * @returns 
   */
  parseCustomTableDataFormat(line) {
    try {
      const parts = line.split("|");
      if (parts.length < 1)
        return null;
      const tableId = parts[0].trim();
      if (!tableId)
        return null;
      const tableData = this.createEmptyTableData(tableId);
      for (let i = 1; i < parts.length; i++) {
        const keyValue = parts[i].split(":");
        if (keyValue.length !== 2)
          continue;
        const key = keyValue[0].trim();
        const value = keyValue[1].trim();
        switch (key) {
          case "wrapper":
            tableData.structure.useTableWrapper = value === "true";
            break;
          case "width":
            tableData.styling.colWidths = value.split(",").map((w) => w.trim());
            break;
          case "align":
            tableData.styling.alignment = value.split(",").map((a) => a.trim());
            break;
          case "height":
            tableData.styling.rowHeights = value.split(",").map((h) => h.trim());
            break;
        }
      }
      return tableData;
    } catch (error) {
      console.error("\u89E3\u6790\u81EA\u5B9A\u4E49\u8868\u683C\u6570\u636E\u683C\u5F0F\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 
   * @param table 
   * @param tableData 
   * @returns 
   */
  enhanceTableData(table, tableData) {
    const enhancedData = JSON.parse(JSON.stringify(tableData));
    const rows = table.querySelectorAll("tr");
    const rowCount = rows.length;
    let colCount = 0;
    const hasHeaderRow = table.querySelector("thead") !== null;
    rows.forEach((row) => {
      const cellCount = row.querySelectorAll("td, th").length;
      colCount = Math.max(colCount, cellCount);
    });
    if (!enhancedData.structure.rowCount || enhancedData.structure.rowCount === 0) {
      enhancedData.structure.rowCount = rowCount;
    }
    if (!enhancedData.structure.colCount || enhancedData.structure.colCount === 0) {
      enhancedData.structure.colCount = colCount;
    }
    if (enhancedData.structure.hasHeaders === void 0) {
      enhancedData.structure.hasHeaders = hasHeaderRow;
    }
    if (!enhancedData.styling.rowHeights || enhancedData.styling.rowHeights.length === 0) {
      enhancedData.styling.rowHeights = Array(rowCount).fill("auto");
    }
    if (!enhancedData.styling.colWidths || enhancedData.styling.colWidths.length === 0) {
      enhancedData.styling.colWidths = Array(colCount).fill("auto");
    }
    if (!enhancedData.styling.alignment || enhancedData.styling.alignment.length === 0) {
      enhancedData.styling.alignment = Array(colCount).fill("right");
      if (colCount > 0)
        enhancedData.styling.alignment[0] = "left";
    }
    return enhancedData;
  }
  /**
   * Markdown
   * @param file 
   * @param tableId ID
   * @param tableData 
   */
  async exportTableDataToFile(file, tableId, tableData) {
    try {
      if (!file || !tableId || !tableData)
        return;
      let fileContent = await this.getApp().vault.read(file);
      const tableIds = /* @__PURE__ */ new Set();
      const commentRegex = /<!-- table-id: ([\w-]+) -->/g;
      let match;
      while ((match = commentRegex.exec(fileContent)) !== null) {
        tableIds.add(match[1]);
      }
      tableIds.add(tableId);
      const existingTableData = await this.extractTableDataFromFile(file);
      existingTableData[tableId] = tableData;
      const tableDataArray = Array.from(tableIds).filter((id) => existingTableData[id]).map((id) => existingTableData[id]);
      const dataToExport = JSON.stringify(tableDataArray, null, 2);
      const jsonBlockRegex = /```json:table-data\s*\n([\s\S]*?)\n```/g;
      const codeBlocks = [];
      while ((match = jsonBlockRegex.exec(fileContent)) !== null) {
        codeBlocks.push({
          start: match.index,
          end: match.index + match[0].length
        });
      }
      if (codeBlocks.length > 0) {
        for (let i = codeBlocks.length - 1; i >= 0; i--) {
          const block = codeBlocks[i];
          fileContent = fileContent.substring(0, block.start) + fileContent.substring(block.end);
        }
      }
      if (!fileContent.endsWith("\n\n")) {
        if (fileContent.endsWith("\n")) {
          fileContent += "\n";
        } else {
          fileContent += "\n\n";
        }
      }
      fileContent += "```json:table-data\n" + dataToExport + "\n```";
      await this.getApp().vault.modify(file, fileContent);
      console.log(`\u5DF2\u5C06\u6240\u6709\u8868\u683C\u6570\u636E\u5BFC\u51FA\u5230\u6587\u4EF6\u672B\u5C3E: ${file.path}, \u8868\u683C\u6570\u91CF: ${tableDataArray.length}`);
    } catch (error) {
      console.error("\u5BFC\u51FA\u8868\u683C\u6570\u636E\u5230\u6587\u4EF6\u65F6\u51FA\u9519:", error);
    }
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  nativeProcessing: true,
  paragraphs: true,
  enableCellMerging: true,
  confirmMergeNonEmpty: true,
  enableTableIds: true,
  idPrefix: "tbl",
  autoCenterMergedCells: true,
  toolbarEnabled: true,
  enableEditModeOperations: true,
  useTableWrapperComments: false,
  // 
  featureSimilarityThreshold: 0.7,
  // 70%
  preferFeatureMatching: false,
  // 
  preferFileStorage: true,
  // 
  autoExportToFile: false
  // 
};
var ObsidianSpreadsheet = class extends import_obsidian10.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.currentEditingTable = null;
    // 
    this.lastPreviewModeState = false;
    /**
     * 
     */
    this.handleTableClick = (event2) => {
      try {
        const table = event2.currentTarget;
        if (!table)
          return;
        this.removeAllTableHighlights();
        this.highlightSelectedTable(table);
        if (this.settings.toolbarEnabled) {
          this.tableToolbar.setActiveTable(table);
        }
        this.tableResizer.setupTableResize(table);
        console.log("\u8868\u683C\u70B9\u51FB\u4E8B\u4EF6\u5DF2\u5904\u7406");
      } catch (error) {
        console.error("\u5904\u7406\u8868\u683C\u70B9\u51FB\u4E8B\u4EF6\u65F6\u51FA\u9519:", error);
      }
    };
    /**
     * 
     * @param event 
     */
    this.handleDocumentClick = (event2) => {
      var _a;
      try {
        const isClickInToolbar = event2.target instanceof Node && ((_a = document.querySelector(".advanced-table-toolbar-container")) == null ? void 0 : _a.contains(event2.target));
        const isClickInTable = event2.target instanceof Node && event2.target.closest("table") !== null;
        if (!isClickInToolbar && !isClickInTable) {
          if (this.tableToolbar.activeTable) {
            this.tableToolbar.clearSelection();
          }
        }
      } catch (error) {
        console.error("\u5904\u7406\u6587\u6863\u70B9\u51FB\u4E8B\u4EF6\u65F6\u51FA\u9519:", error);
      }
    };
    this.handleTableClick = this.handleTableClick.bind(this);
    this.handleDocumentClick = this.handleDocumentClick.bind(this);
  }
  // 
  async onload() {
    try {
      console.log("Loading Advanced Table XT plugin");
      await this.loadSettings();
      if (this.settings.toolbarEnabled === void 0) {
        this.settings.toolbarEnabled = true;
        await this.saveSettings();
      }
      if (this.settings.enableEditModeOperations === void 0) {
        this.settings.enableEditModeOperations = true;
        await this.saveSettings();
      }
      if (this.settings.preferFileStorage === void 0) {
        this.settings.preferFileStorage = true;
        await this.saveSettings();
      }
      if (this.settings.autoExportToFile === void 0) {
        this.settings.autoExportToFile = false;
        await this.saveSettings();
      }
      loadIcons();
      console.log("Initializing plugin components");
      this.tableIdManager = new TableIdManager(this);
      this.markdownSourceEditor = new MarkdownSourceEditor(this);
      this.tableDetector = new MarkdownTableDetector(this);
      this.tableToolbar = new TableToolbar(this);
      this.tableResizer = new TableResizer(this);
      this.tableDataExtractor = new TableDataExtractor(this);
      this.ribbonIcon = this.addRibbonIcon("table-toolbar-toggle", "\u8868\u683C\u5DE5\u5177\u680F", (evt) => {
        this.toggleToolbarState();
      });
      this.addRibbonIcon("table-edit-mode", "\u7F16\u8F91\u6A21\u5F0F\u8868\u683C\u64CD\u4F5C", (evt) => {
        const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
        if (!activeView) {
          new import_obsidian10.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
          return;
        }
        const isEditMode = activeView.getMode() === "source";
        if (!isEditMode) {
          new import_obsidian10.Notice("\u8BF7\u5207\u6362\u5230\u7F16\u8F91\u6A21\u5F0F\u4F7F\u7528\u6B64\u529F\u80FD");
          return;
        }
        const menu = new import_obsidian10.Menu();
        menu.addItem((item) => {
          item.setTitle("\u4E3A\u8868\u683C\u6DFB\u52A0ID").setIcon("table-id").onClick(async () => {
            await this.markdownSourceEditor.addTableIdToMarkdown();
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C").setIcon("merge-right").onClick(async () => {
            await this.markdownSourceEditor.mergeCells("right");
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C").setIcon("merge-down").onClick(async () => {
            await this.markdownSourceEditor.mergeCells("down");
          });
        });
        menu.showAtMouseEvent(evt);
      });
      this.updateRibbonIcon();
      if (this.settings.toolbarEnabled) {
        this.createToolbar();
      }
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          if (this.settings.toolbarEnabled) {
            setTimeout(() => {
              this.setupTableSelection();
            }, 300);
          }
        })
      );
      this.registerEvent(
        this.app.workspace.on("layout-change", () => {
          if (this.settings.toolbarEnabled) {
            setTimeout(() => {
              this.setupTableSelection();
            }, 300);
          }
        })
      );
      this.registerEvent(
        this.app.workspace.on("editor-change", (editor, view) => {
          if (this.settings.toolbarEnabled && this.settings.enableEditModeOperations) {
            if (view instanceof import_obsidian10.MarkdownView && view.getMode() === "source") {
              this.debounce(() => {
                const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
                if (tableInfo) {
                  this.setupEditModeTableSelection(editor);
                }
              }, 500)();
            }
          }
        })
      );
      this.registerDomEvent(document, "click", (evt) => {
        if (this.settings.toolbarEnabled && this.settings.enableEditModeOperations) {
          const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
          if (activeView && activeView.getMode() === "source") {
            setTimeout(() => {
              const editor = activeView.editor;
              const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
              if (tableInfo) {
                this.setupEditModeTableSelection(editor);
              }
            }, 100);
          }
        }
      });
      this.addCommand({
        id: "add-table-id-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u4E3A\u8868\u683C\u6DFB\u52A0ID",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.addTableIdToMarkdown();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "merge-cell-right-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5411\u53F3\u5408\u5E76\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.mergeCells("right");
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "merge-cell-down-in-edit-mode",
        name: "\u5728\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5411\u4E0B\u5408\u5E76\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.mergeCells("down");
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "show-current-table-id",
        name: "\u663E\u793A\u5F53\u524D\u8868\u683CID",
        callback: async () => {
          await this.showCurrentTableId();
        }
      });
      this.addCommand({
        id: "split-merged-cells",
        name: "\u62C6\u5206\u5DF2\u5408\u5E76\u7684\u5355\u5143\u683C",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.splitMergedCells();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.addCommand({
        id: "fix-merge-markers",
        name: "\u4FEE\u590D\u8868\u683C\u5408\u5E76\u6807\u8BB0",
        editorCallback: async (editor) => {
          if (this.settings.enableEditModeOperations) {
            await this.markdownSourceEditor.detectAndFixMergeMarkers();
          } else {
            new import_obsidian10.Notice("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u7684\u8868\u683C\u64CD\u4F5C\u5DF2\u7981\u7528\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u542F\u7528");
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor(
        "sheet",
        async (source, el, ctx) => {
          source = source.trim();
          ctx.addChild(
            new SheetElement(
              el,
              source,
              ctx,
              this.app,
              this
            )
          );
        }
      );
      this.registerMarkdownPostProcessor(async (el, ctx) => {
        var _a;
        if (!this.settings.nativeProcessing)
          return;
        if (((_a = ctx.frontmatter) == null ? void 0 : _a["disable-sheet"]) === true)
          return;
        const tableEls = el.querySelectorAll("table");
        if (tableEls.length) {
          for (const tableEl of Array.from(tableEls)) {
            if (!tableEl)
              return;
            if ((tableEl == null ? void 0 : tableEl.id) === "obsidian-sheets-parsed")
              return;
            if (this.settings.enableTableIds) {
              this.tableIdManager.ensureTableHasId(tableEl);
            }
            if (this.settings.enableCellMerging !== false) {
              this.renderMergedCells(tableEl, ctx);
              if (tableEl.querySelector("[rowspan], [colspan]")) {
                this.tableDetector.applyMergeCellsMarkers(tableEl);
              }
            }
          }
        }
      });
      this.addSettingTab(new SheetSettingsTab(this.app, this));
      console.log("Advanced Table XT plugin loaded successfully");
    } catch (error) {
      console.error("Error loading Advanced Table XT plugin:", error);
    }
    this.setupViewModeChangeListener();
    this.checkAndRenderTables();
    console.log("Advanced Table XT \u63D2\u4EF6\u5DF2\u52A0\u8F7D");
  }
  /**
   * 
   * @param func 
   * @param wait 
   */
  debounce(func, wait) {
    let timeout = null;
    return function(...args) {
      const context = this;
      const later = function() {
        timeout = null;
        func.apply(context, args);
      };
      if (timeout)
        clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  //  - 
  createToolbar() {
    try {
      document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
        container.remove();
      });
      const toolbarContainer = document.createElement("div");
      toolbarContainer.className = "advanced-table-toolbar-container";
      document.body.appendChild(toolbarContainer);
      this.tableToolbar.createToolbar(toolbarContainer);
      document.addEventListener("click", this.handleDocumentClick);
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (activeView) {
        const isEditMode = activeView.getMode() === "source";
        if (isEditMode) {
          const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(activeView.editor);
          if (tableInfo) {
            this.setupEditModeTableSelection(activeView.editor);
          }
        } else {
          this.setupPreviewModeTableSelection();
        }
      }
      console.log("\u5DE5\u5177\u680F\u5DF2\u521B\u5EFA");
    } catch (error) {
      console.error("\u521B\u5EFA\u5DE5\u5177\u680F\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   */
  setupTableSelection() {
    try {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView)
        return;
      const isEditMode = activeView.getMode() === "source";
      if (isEditMode) {
        this.setupEditModeTableSelection(activeView.editor);
      } else {
        this.setupPreviewModeTableSelection();
      }
    } catch (error) {
      console.error("\u8BBE\u7F6E\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param editor 
   */
  setupEditModeTableSelection(editor) {
    try {
      const cursor = editor.getCursor();
      console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5149\u6807\u4F4D\u7F6E: \u884C=${cursor.line}, \u5217=${cursor.ch}`);
      const tableInfo = this.markdownSourceEditor.locateTableInMarkdown(editor);
      if (!tableInfo) {
        console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u672A\u627E\u5230\u8868\u683C");
        if (this.currentEditingTable) {
          this.currentEditingTable = null;
          if (this.tableToolbar) {
            this.tableToolbar.clearSelection();
          }
        }
        return;
      }
      console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u627E\u5230\u8868\u683C: \u8303\u56F4=${tableInfo.startLine}-${tableInfo.endLine}`);
      if (!document.querySelector(".advanced-table-toolbar-container")) {
        this.createToolbar();
      }
      this.currentEditingTable = {
        startLine: tableInfo.startLine,
        endLine: tableInfo.endLine,
        content: tableInfo.content
      };
      this.tableToolbar.setActiveEditModeTable(this.currentEditingTable);
      const cellPosition = this.markdownSourceEditor.getCellPosition(editor);
      if (cellPosition) {
        console.log(`\u7F16\u8F91\u6A21\u5F0F\u4E0B\u5149\u6807\u4F4D\u4E8E\u5355\u5143\u683C: \u884C=${cellPosition.rowIndex}, \u5217=${cellPosition.colIndex}`);
      } else {
        console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u65E0\u6CD5\u786E\u5B9A\u5149\u6807\u6240\u5728\u5355\u5143\u683C");
      }
      console.log("\u7F16\u8F91\u6A21\u5F0F\u4E0B\u9009\u62E9\u4E86\u8868\u683C:", this.currentEditingTable);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u7F16\u8F91\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   */
  setupPreviewModeTableSelection() {
    try {
      setupPreviewModeTableSelection(this);
    } catch (error) {
      console.error("\u8BBE\u7F6E\u9884\u89C8\u6A21\u5F0F\u8868\u683C\u9009\u62E9\u65F6\u51FA\u9519:", error);
    }
  }
  onunload() {
    console.log("\u5378\u8F7D Advanced Table XT \u63D2\u4EF6");
    document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
      container.remove();
    });
    this.removeAllTableHighlights();
    this.tableResizer.cleanup();
    document.querySelectorAll("table[data-table-processed]").forEach((table) => {
      const tableEl = table;
      delete tableEl.dataset.tableProcessed;
      delete tableEl.dataset.tableSelected;
      tableEl.style.outline = "";
      tableEl.style.outlineOffset = "";
      tableEl.onclick = null;
    });
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  highlightSelectedTable(table) {
    this.removeAllTableHighlights();
    table.style.outline = "2px solid var(--interactive-accent)";
    table.style.outlineOffset = "2px";
    table.dataset.tableSelected = "true";
  }
  removeAllTableHighlights() {
    document.querySelectorAll('table[data-table-selected="true"]').forEach((table) => {
      const tableEl = table;
      tableEl.style.outline = "";
      tableEl.style.outlineOffset = "";
      delete tableEl.dataset.tableSelected;
    });
  }
  createTableData(table, tableId) {
    var _a;
    try {
      const commentId = this.tableIdManager.getTableIdentifier(table);
      if (!commentId || commentId !== tableId) {
        console.warn(`\u8868\u683CID\u9A8C\u8BC1\u5931\u8D25: \u4F20\u5165ID=${tableId}, HTML\u6CE8\u91CAID=${commentId || "\u65E0"}`);
        console.warn("\u53EA\u6709\u5728HTML\u6CE8\u91CA\u4E2D\u660E\u786E\u5B9A\u4E49\u7684\u8868\u683CID\u624D\u80FD\u521B\u5EFA\u6570\u636E");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        console.warn("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u89C6\u56FE\uFF0C\u4E0D\u521B\u5EFA\u8868\u683C\u6570\u636E");
        return;
      }
      const filePath = (_a = activeView.file) == null ? void 0 : _a.path;
      if (!filePath) {
        console.warn("\u65E0\u6CD5\u83B7\u53D6\u6587\u4EF6\u8DEF\u5F84\uFF0C\u4E0D\u521B\u5EFA\u8868\u683C\u6570\u636E");
        return;
      }
      console.log(`\u4E3A\u6709\u6548\u7684HTML\u6CE8\u91CAID\u521B\u5EFA\u8868\u683C\u6570\u636E: ${tableId}`);
      this.tableToolbar.extractAndStoreTableInfo(tableId, table, filePath);
    } catch (error) {
      console.error("\u521B\u5EFA\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  async saveTableData(tableData) {
    try {
      if (!tableData || !tableData.id) {
        console.warn("\u65E0\u6548\u7684\u8868\u683C\u6570\u636E\uFF0C\u7F3A\u5C11ID");
        return;
      }
      console.log(`\u51C6\u5907\u4FDD\u5B58\u8868\u683C\u6570\u636E: ${tableData.id}`);
      const activeFile = this.app.workspace.getActiveFile();
      let savedToFile = false;
      if (this.settings.preferFileStorage && activeFile && this.tableDataExtractor) {
        try {
          await this.tableDataExtractor.exportTableDataToFile(activeFile, tableData.id, tableData);
          console.log(`\u5DF2\u5C06\u8868\u683C\u6570\u636E\u4FDD\u5B58\u5230\u6587\u4EF6: ${activeFile.path}`);
          savedToFile = true;
        } catch (fileError) {
          console.error("\u4FDD\u5B58\u5230\u6587\u4EF6\u5931\u8D25\uFF0C\u5C06\u56DE\u9000\u5230data.json:", fileError);
          savedToFile = false;
        }
      }
      if (!savedToFile) {
        const existingData = await this.loadData() || {};
        if (!existingData.tables) {
          existingData.tables = {};
        }
        existingData.tables[tableData.id] = tableData;
        await this.saveData(existingData);
        console.log(`\u5DF2\u4FDD\u5B58\u8868\u683C\u6570\u636E\u5230data.json: ${tableData.id}`);
        if (!savedToFile && this.settings.autoExportToFile && this.tableDataExtractor && activeFile) {
          try {
            await this.tableDataExtractor.exportTableDataToFile(activeFile, tableData.id, tableData);
            console.log(`\u5DF2\u81EA\u52A8\u5C06\u8868\u683C\u6570\u636E\u5BFC\u51FA\u5230\u6587\u4EF6: ${activeFile.path}`);
          } catch (exportError) {
            console.error("\u81EA\u52A8\u5BFC\u51FA\u5230\u6587\u4EF6\u5931\u8D25:", exportError);
          }
        }
      }
    } catch (error) {
      console.error("\u4FDD\u5B58\u8868\u683C\u6570\u636E\u65F6\u51FA\u9519:", error);
    }
  }
  updateRibbonIcon() {
    if (!this.ribbonIcon)
      return;
    this.ribbonIcon.empty();
    if (this.settings.toolbarEnabled) {
      const iconEl = this.ribbonIcon.createEl("div", {
        cls: "ribbon-icon-active"
      });
      iconEl.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>`;
      iconEl.style.color = "var(--interactive-accent)";
    } else {
      const iconEl = this.ribbonIcon.createEl("div");
      iconEl.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>`;
    }
  }
  toggleToolbarState() {
    this.settings.toolbarEnabled = !this.settings.toolbarEnabled;
    this.saveSettings();
    this.updateRibbonIcon();
    if (this.settings.toolbarEnabled) {
      this.createToolbar();
      new import_obsidian10.Notice("\u8868\u683C\u5DE5\u5177\u680F\u5DF2\u542F\u7528");
    } else {
      document.querySelectorAll(".advanced-table-toolbar-container").forEach((container) => {
        container.remove();
      });
      new import_obsidian10.Notice("\u8868\u683C\u5DE5\u5177\u680F\u5DF2\u7981\u7528");
    }
  }
  /**
   * ID
   */
  async showCurrentTableId() {
    try {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        new import_obsidian10.Notice("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
        return;
      }
      const isEditMode = activeView.getMode() === "source";
      let tableId = null;
      if (isEditMode) {
        tableId = await this.markdownSourceEditor.getCurrentTableId();
      } else {
        if (this.tableToolbar.activeTable) {
          tableId = this.tableIdManager.getTableIdentifier(this.tableToolbar.activeTable);
        }
      }
      if (tableId) {
        new import_obsidian10.Notice(`\u5F53\u524D\u8868\u683CID: ${tableId}`);
        console.log("\u5F53\u524D\u8868\u683CID:", tableId);
      } else {
        new import_obsidian10.Notice("\u672A\u627E\u5230\u8868\u683CID\uFF0C\u8BF7\u786E\u4FDD\u5149\u6807\u5728\u8868\u683C\u5185\u6216\u5DF2\u9009\u62E9\u8868\u683C");
      }
    } catch (error) {
      console.error("\u663E\u793A\u5F53\u524D\u8868\u683CID\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * 
   * @param tableEl 
   * @param ctx Markdown
   */
  renderMergedCells(tableEl, ctx) {
    var _a;
    try {
      if (tableEl.dataset.tableMergeProcessed === "true") {
        return;
      }
      const rawMarkdown = ((_a = ctx.getSectionInfo(tableEl)) == null ? void 0 : _a.text) || (0, import_obsidian10.htmlToMarkdown)(tableEl);
      if (!rawMarkdown)
        return;
      const lines = rawMarkdown.split("\n");
      const tableLines = lines.filter((line) => line.trim().startsWith("|") && line.trim().endsWith("|"));
      if (tableLines.length < 2)
        return;
      const contentLines = [tableLines[0]].concat(tableLines.slice(2));
      const rows = [];
      for (const line of contentLines) {
        const cells = line.split("|").filter((_, i, arr) => i > 0 && i < arr.length - 1).map((cell) => cell.trim());
        rows.push(cells);
      }
      const domRows = tableEl.querySelectorAll("tr");
      if (domRows.length !== rows.length)
        return;
      for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        const rowCells = rows[rowIndex];
        const domRow = domRows[rowIndex];
        const domCells = domRow.querySelectorAll("th, td");
        if (domCells.length !== rowCells.length)
          continue;
        for (let colIndex = 0; colIndex < rowCells.length; colIndex++) {
          const cellContent = rowCells[colIndex];
          const domCell = domCells[colIndex];
          if ((cellContent === "<" || cellContent === "\\<" || cellContent === " < " || cellContent === " \\< ") && colIndex > 0) {
            const leftCell = domCells[colIndex - 1];
            leftCell.colSpan = (leftCell.colSpan || 1) + 1;
            domCell.style.display = "none";
            if (this.settings.autoCenterMergedCells) {
              leftCell.style.textAlign = "center";
              leftCell.style.verticalAlign = "middle";
            }
            leftCell.classList.add("obs-merged-cell");
          } else if ((cellContent === "^" || cellContent === "\\^" || cellContent === " ^ " || cellContent === " \\^ ") && rowIndex > 0) {
            const aboveRow = domRows[rowIndex - 1];
            const aboveCells = aboveRow.querySelectorAll("th, td");
            if (colIndex < aboveCells.length) {
              const aboveCell = aboveCells[colIndex];
              aboveCell.rowSpan = (aboveCell.rowSpan || 1) + 1;
              domCell.style.display = "none";
              if (this.settings.autoCenterMergedCells) {
                aboveCell.style.textAlign = "center";
                aboveCell.style.verticalAlign = "middle";
              }
              aboveCell.classList.add("obs-merged-cell");
            }
          }
        }
      }
      tableEl.dataset.tableMergeProcessed = "true";
      console.log("\u5DF2\u6E32\u67D3\u8868\u683C\u5408\u5E76\u5355\u5143\u683C");
    } catch (error) {
      console.error("\u6E32\u67D3\u5408\u5E76\u5355\u5143\u683C\u65F6\u51FA\u9519:", error);
    }
  }
  /**
   * MarkdownID
   * DOM
   * @param table 
   * @returns Promise<string | null>
   */
  async readTableIdFromMarkdown(table) {
    try {
      const existingId = table.getAttribute("data-table-id");
      if (existingId) {
        console.log(`\u4ECE\u8868\u683C\u5143\u7D20\u5C5E\u6027\u4E2D\u83B7\u53D6ID: ${existingId}`);
        return existingId;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (!activeView) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u89C6\u56FE");
        return null;
      }
      const activeFile = this.app.workspace.getActiveFile();
      if (!activeFile) {
        console.log("\u672A\u627E\u5230\u6D3B\u52A8\u6587\u4EF6");
        return null;
      }
      console.log(`\u5C1D\u8BD5\u4ECE\u6587\u4EF6\u5185\u5BB9\u4E2D\u67E5\u627E\u8868\u683CID: ${activeFile.path}`);
      const content = await this.app.vault.read(activeFile);
      const tableFeature = this.tableIdManager.extractTableFeature(table);
      console.log(`\u5F53\u524D\u8868\u683C\u7279\u5F81:`, tableFeature);
      const tableInfos = this.tableIdManager.extractTableIdsFromMarkdown(content);
      console.log(`\u4ECE\u6587\u4EF6\u4E2D\u63D0\u53D6\u7684\u8868\u683C\u4FE1\u606F:`, tableInfos);
      const allTables = Array.from(document.querySelectorAll("table"));
      const tableIndex = allTables.indexOf(table);
      console.log(`\u8868\u683C\u5728DOM\u4E2D\u7684\u4F4D\u7F6E: \u7B2C${tableIndex}\u4E2A\u8868\u683C\uFF08\u5171${allTables.length}\u4E2A\uFF09`);
      const similarityThreshold = this.settings.featureSimilarityThreshold || 0.7;
      if (this.settings.preferFeatureMatching) {
        if (tableFeature) {
          let bestMatchId = "";
          let bestMatchScore = 0;
          for (const { id, feature } of tableInfos) {
            if (!id)
              continue;
            const score = this.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
            console.log(`\u8868\u683CID ${id} \u7684\u7279\u5F81\u76F8\u4F3C\u5EA6: ${score.toFixed(2)}`);
            if (score > bestMatchScore) {
              bestMatchScore = score;
              bestMatchId = id;
            }
          }
          if (bestMatchId && bestMatchScore > similarityThreshold) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
            table.setAttribute("data-table-id", bestMatchId);
            return bestMatchId;
          }
        }
        if (tableIndex !== -1 && tableIndex < tableInfos.length) {
          const { id } = tableInfos[tableIndex];
          if (id) {
            console.log(`\u901A\u8FC7\u4F4D\u7F6E\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
      } else {
        if (tableIndex !== -1 && tableIndex < tableInfos.length) {
          const { id } = tableInfos[tableIndex];
          if (id) {
            console.log(`\u901A\u8FC7\u4F4D\u7F6E\u7CBE\u786E\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
        if (tableFeature) {
          let bestMatchId = "";
          let bestMatchScore = 0;
          for (const { id, feature } of tableInfos) {
            if (!id)
              continue;
            const score = this.tableIdManager.calculateFeatureSimilarity(tableFeature, feature);
            console.log(`\u8868\u683CID ${id} \u7684\u7279\u5F81\u76F8\u4F3C\u5EA6: ${score.toFixed(2)}`);
            if (score > bestMatchScore) {
              bestMatchScore = score;
              bestMatchId = id;
            }
          }
          if (bestMatchId && bestMatchScore > similarityThreshold) {
            console.log(`\u901A\u8FC7\u7279\u5F81\u76F8\u4F3C\u5EA6\u5339\u914D\u627E\u5230\u8868\u683CID: ${bestMatchId}\uFF08\u76F8\u4F3C\u5EA6: ${bestMatchScore.toFixed(2)}\uFF09`);
            table.setAttribute("data-table-id", bestMatchId);
            return bestMatchId;
          }
        }
      }
      if (tableFeature) {
        for (const { id, feature } of tableInfos) {
          if (!id)
            continue;
          if (feature.rows === tableFeature.rows && feature.cols === tableFeature.cols) {
            console.log(`\u901A\u8FC7\u8868\u683C\u7ED3\u6784\u5339\u914D\u627E\u5230\u8868\u683CID: ${id}`);
            table.setAttribute("data-table-id", id);
            return id;
          }
        }
      }
      if (this.settings.enableTableIds) {
        const newId = this.tableIdManager.generateTableId();
        console.log(`\u672A\u627E\u5230\u8868\u683CID\uFF0C\u751F\u6210\u65B0ID: ${newId}`);
        table.setAttribute("data-table-id", newId);
        return newId;
      }
      console.log("\u672A\u5728Markdown\u5185\u5BB9\u4E2D\u627E\u5230\u8868\u683CID\uFF0C\u4E14\u8868\u683CID\u529F\u80FD\u5DF2\u7981\u7528");
      return null;
    } catch (error) {
      console.error("\u4ECEMarkdown\u5185\u5BB9\u8BFB\u53D6\u8868\u683CID\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
  /**
   * 
   */
  setupViewModeChangeListener() {
    if (this.viewModeChangeHandler) {
      this.app.workspace.off("active-leaf-change", this.viewModeChangeHandler);
      this.app.workspace.off("layout-change", this.viewModeChangeHandler);
    }
    this.viewModeChangeHandler = () => {
      this.checkAndRenderTables();
    };
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", this.viewModeChangeHandler)
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", this.viewModeChangeHandler)
    );
    console.log("\u5DF2\u8BBE\u7F6E\u89C6\u56FE\u6A21\u5F0F\u53D8\u5316\u76D1\u542C\u5668");
  }
  /**
   * 
   */
  checkAndRenderTables() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
    if (!activeView)
      return;
    const isPreviewMode = activeView.getMode() === "preview";
    if (isPreviewMode && !this.lastPreviewModeState) {
      setTimeout(() => {
        renderTablesWithStoredStyles(this);
      }, 300);
    }
    this.lastPreviewModeState = isPreviewMode;
  }
};
var main_default = ObsidianSpreadsheet;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2pzb241L2Rpc3QvaW5kZXguanMiLCAic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9zaGVldEVsZW1lbnQudHMiLCAic3JjL21hcmtkb3duVGFibGVEZXRlY3Rvci50cyIsICJzcmMvdGFibGVJZE1hbmFnZXIudHMiLCAic3JjL3RhYmxlVG9vbGJhci50cyIsICJzcmMvbWFya2Rvd25Tb3VyY2VFZGl0b3IudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy90YWJsZVN0eWxlUmVuZGVyZXIudHMiLCAic3JjL3NldHVwUHJldmlld01vZGVUYWJsZVNlbGVjdGlvbi50cyIsICJzcmMvdGFibGVSZXNpemVyLnRzIiwgInNyYy90YWJsZURhdGFFeHRyYWN0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5KU09ONSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuXHRmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7XG5cdFx0cmV0dXJuIG1vZHVsZSA9IHsgZXhwb3J0czoge30gfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xuXHR9XG5cblx0dmFyIF9nbG9iYWwgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG5cdHZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuXHQgID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmXG5cdCAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG5cdCAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRpZiAodHlwZW9mIF9fZyA9PSAnbnVtYmVyJykgeyBfX2cgPSBnbG9iYWw7IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXHR9KTtcblxuXHR2YXIgX2NvcmUgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdHZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7IHZlcnNpb246ICcyLjYuNScgfTtcblx0aWYgKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpIHsgX19lID0gY29yZTsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cdH0pO1xuXHR2YXIgX2NvcmVfMSA9IF9jb3JlLnZlcnNpb247XG5cblx0dmFyIF9pc09iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG5cdH07XG5cblx0dmFyIF9hbk9iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIGlmICghX2lzT2JqZWN0KGl0KSkgeyB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7IH1cblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cblx0dmFyIF9mYWlscyA9IGZ1bmN0aW9uIChleGVjKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiAhIWV4ZWMoKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cblx0Ly8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxuXHR2YXIgX2Rlc2NyaXB0b3JzID0gIV9mYWlscyhmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KS5hICE9IDc7XG5cdH0pO1xuXG5cdHZhciBkb2N1bWVudCA9IF9nbG9iYWwuZG9jdW1lbnQ7XG5cdC8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxuXHR2YXIgaXMgPSBfaXNPYmplY3QoZG9jdW1lbnQpICYmIF9pc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblx0dmFyIF9kb21DcmVhdGUgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xuXHR9O1xuXG5cdHZhciBfaWU4RG9tRGVmaW5lID0gIV9kZXNjcmlwdG9ycyAmJiAhX2ZhaWxzKGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9kb21DcmVhdGUoJ2RpdicpLCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcblx0fSk7XG5cblx0Ly8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pXG5cblx0Ly8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcblx0Ly8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcblx0dmFyIF90b1ByaW1pdGl2ZSA9IGZ1bmN0aW9uIChpdCwgUykge1xuXHQgIGlmICghX2lzT2JqZWN0KGl0KSkgeyByZXR1cm4gaXQ7IH1cblx0ICB2YXIgZm4sIHZhbDtcblx0ICBpZiAoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIV9pc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHsgcmV0dXJuIHZhbDsgfVxuXHQgIGlmICh0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhX2lzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgeyByZXR1cm4gdmFsOyB9XG5cdCAgaWYgKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhX2lzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgeyByZXR1cm4gdmFsOyB9XG5cdCAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xuXHR9O1xuXG5cdHZhciBkUCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuXHR2YXIgZiA9IF9kZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHtcblx0ICBfYW5PYmplY3QoTyk7XG5cdCAgUCA9IF90b1ByaW1pdGl2ZShQLCB0cnVlKTtcblx0ICBfYW5PYmplY3QoQXR0cmlidXRlcyk7XG5cdCAgaWYgKF9pZThEb21EZWZpbmUpIHsgdHJ5IHtcblx0ICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcblx0ICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH0gfVxuXHQgIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHsgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsgfVxuXHQgIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIHsgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7IH1cblx0ICByZXR1cm4gTztcblx0fTtcblxuXHR2YXIgX29iamVjdERwID0ge1xuXHRcdGY6IGZcblx0fTtcblxuXHR2YXIgX3Byb3BlcnR5RGVzYyA9IGZ1bmN0aW9uIChiaXRtYXAsIHZhbHVlKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG5cdCAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksXG5cdCAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcblx0ICAgIHZhbHVlOiB2YWx1ZVxuXHQgIH07XG5cdH07XG5cblx0dmFyIF9oaWRlID0gX2Rlc2NyaXB0b3JzID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuXHQgIHJldHVybiBfb2JqZWN0RHAuZihvYmplY3QsIGtleSwgX3Byb3BlcnR5RGVzYygxLCB2YWx1ZSkpO1xuXHR9IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuXHQgIG9iamVjdFtrZXldID0gdmFsdWU7XG5cdCAgcmV0dXJuIG9iamVjdDtcblx0fTtcblxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblx0dmFyIF9oYXMgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xuXHR9O1xuXG5cdHZhciBpZCA9IDA7XG5cdHZhciBweCA9IE1hdGgucmFuZG9tKCk7XG5cdHZhciBfdWlkID0gZnVuY3Rpb24gKGtleSkge1xuXHQgIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7XG5cdH07XG5cblx0dmFyIF9saWJyYXJ5ID0gZmFsc2U7XG5cblx0dmFyIF9zaGFyZWQgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG5cdHZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcblx0dmFyIHN0b3JlID0gX2dsb2JhbFtTSEFSRURdIHx8IChfZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5cblx0KG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHt9KTtcblx0fSkoJ3ZlcnNpb25zJywgW10pLnB1c2goe1xuXHQgIHZlcnNpb246IF9jb3JlLnZlcnNpb24sXG5cdCAgbW9kZTogX2xpYnJhcnkgPyAncHVyZScgOiAnZ2xvYmFsJyxcblx0ICBjb3B5cmlnaHQ6ICdcdTAwQTkgMjAxOSBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSdcblx0fSk7XG5cdH0pO1xuXG5cdHZhciBfZnVuY3Rpb25Ub1N0cmluZyA9IF9zaGFyZWQoJ25hdGl2ZS1mdW5jdGlvbi10by1zdHJpbmcnLCBGdW5jdGlvbi50b1N0cmluZyk7XG5cblx0dmFyIF9yZWRlZmluZSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHtcblx0dmFyIFNSQyA9IF91aWQoJ3NyYycpO1xuXG5cdHZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xuXHR2YXIgVFBMID0gKCcnICsgX2Z1bmN0aW9uVG9TdHJpbmcpLnNwbGl0KFRPX1NUUklORyk7XG5cblx0X2NvcmUuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIHJldHVybiBfZnVuY3Rpb25Ub1N0cmluZy5jYWxsKGl0KTtcblx0fTtcblxuXHQobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywga2V5LCB2YWwsIHNhZmUpIHtcblx0ICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiB2YWwgPT0gJ2Z1bmN0aW9uJztcblx0ICBpZiAoaXNGdW5jdGlvbikgeyBfaGFzKHZhbCwgJ25hbWUnKSB8fCBfaGlkZSh2YWwsICduYW1lJywga2V5KTsgfVxuXHQgIGlmIChPW2tleV0gPT09IHZhbCkgeyByZXR1cm47IH1cblx0ICBpZiAoaXNGdW5jdGlvbikgeyBfaGFzKHZhbCwgU1JDKSB8fCBfaGlkZSh2YWwsIFNSQywgT1trZXldID8gJycgKyBPW2tleV0gOiBUUEwuam9pbihTdHJpbmcoa2V5KSkpOyB9XG5cdCAgaWYgKE8gPT09IF9nbG9iYWwpIHtcblx0ICAgIE9ba2V5XSA9IHZhbDtcblx0ICB9IGVsc2UgaWYgKCFzYWZlKSB7XG5cdCAgICBkZWxldGUgT1trZXldO1xuXHQgICAgX2hpZGUoTywga2V5LCB2YWwpO1xuXHQgIH0gZWxzZSBpZiAoT1trZXldKSB7XG5cdCAgICBPW2tleV0gPSB2YWw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIF9oaWRlKE8sIGtleSwgdmFsKTtcblx0ICB9XG5cdC8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxuXHR9KShGdW5jdGlvbi5wcm90b3R5cGUsIFRPX1NUUklORywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgJiYgdGhpc1tTUkNdIHx8IF9mdW5jdGlvblRvU3RyaW5nLmNhbGwodGhpcyk7XG5cdH0pO1xuXHR9KTtcblxuXHR2YXIgX2FGdW5jdGlvbiA9IGZ1bmN0aW9uIChpdCkge1xuXHQgIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpOyB9XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXG5cdC8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xuXG5cdHZhciBfY3R4ID0gZnVuY3Rpb24gKGZuLCB0aGF0LCBsZW5ndGgpIHtcblx0ICBfYUZ1bmN0aW9uKGZuKTtcblx0ICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBmbjsgfVxuXHQgIHN3aXRjaCAobGVuZ3RoKSB7XG5cdCAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoLyogLi4uYXJncyAqLykge1xuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0fTtcblxuXHR2YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cblx0dmFyICRleHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgbmFtZSwgc291cmNlKSB7XG5cdCAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkY7XG5cdCAgdmFyIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0Lkc7XG5cdCAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7XG5cdCAgdmFyIElTX1BST1RPID0gdHlwZSAmICRleHBvcnQuUDtcblx0ICB2YXIgSVNfQklORCA9IHR5cGUgJiAkZXhwb3J0LkI7XG5cdCAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IF9nbG9iYWwgOiBJU19TVEFUSUMgPyBfZ2xvYmFsW25hbWVdIHx8IChfZ2xvYmFsW25hbWVdID0ge30pIDogKF9nbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV07XG5cdCAgdmFyIGV4cG9ydHMgPSBJU19HTE9CQUwgPyBfY29yZSA6IF9jb3JlW25hbWVdIHx8IChfY29yZVtuYW1lXSA9IHt9KTtcblx0ICB2YXIgZXhwUHJvdG8gPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KTtcblx0ICB2YXIga2V5LCBvd24sIG91dCwgZXhwO1xuXHQgIGlmIChJU19HTE9CQUwpIHsgc291cmNlID0gbmFtZTsgfVxuXHQgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuXHQgICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG5cdCAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcblx0ICAgIG91dCA9IChvd24gPyB0YXJnZXQgOiBzb3VyY2UpW2tleV07XG5cdCAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuXHQgICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBfY3R4KG91dCwgX2dsb2JhbCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBfY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG5cdCAgICAvLyBleHRlbmQgZ2xvYmFsXG5cdCAgICBpZiAodGFyZ2V0KSB7IF9yZWRlZmluZSh0YXJnZXQsIGtleSwgb3V0LCB0eXBlICYgJGV4cG9ydC5VKTsgfVxuXHQgICAgLy8gZXhwb3J0XG5cdCAgICBpZiAoZXhwb3J0c1trZXldICE9IG91dCkgeyBfaGlkZShleHBvcnRzLCBrZXksIGV4cCk7IH1cblx0ICAgIGlmIChJU19QUk9UTyAmJiBleHBQcm90b1trZXldICE9IG91dCkgeyBleHBQcm90b1trZXldID0gb3V0OyB9XG5cdCAgfVxuXHR9O1xuXHRfZ2xvYmFsLmNvcmUgPSBfY29yZTtcblx0Ly8gdHlwZSBiaXRtYXBcblx0JGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcblx0JGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWxcblx0JGV4cG9ydC5TID0gNDsgICAvLyBzdGF0aWNcblx0JGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuXHQkZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmRcblx0JGV4cG9ydC5XID0gMzI7ICAvLyB3cmFwXG5cdCRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuXHQkZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcblx0dmFyIF9leHBvcnQgPSAkZXhwb3J0O1xuXG5cdC8vIDcuMS40IFRvSW50ZWdlclxuXHR2YXIgY2VpbCA9IE1hdGguY2VpbDtcblx0dmFyIGZsb29yID0gTWF0aC5mbG9vcjtcblx0dmFyIF90b0ludGVnZXIgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcblx0fTtcblxuXHQvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxuXHR2YXIgX2RlZmluZWQgPSBmdW5jdGlvbiAoaXQpIHtcblx0ICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB7IHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTsgfVxuXHQgIHJldHVybiBpdDtcblx0fTtcblxuXHQvLyB0cnVlICAtPiBTdHJpbmcjYXRcblx0Ly8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5cdHZhciBfc3RyaW5nQXQgPSBmdW5jdGlvbiAoVE9fU1RSSU5HKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0LCBwb3MpIHtcblx0ICAgIHZhciBzID0gU3RyaW5nKF9kZWZpbmVkKHRoYXQpKTtcblx0ICAgIHZhciBpID0gX3RvSW50ZWdlcihwb3MpO1xuXHQgICAgdmFyIGwgPSBzLmxlbmd0aDtcblx0ICAgIHZhciBhLCBiO1xuXHQgICAgaWYgKGkgPCAwIHx8IGkgPj0gbCkgeyByZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7IH1cblx0ICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7XG5cdCAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZlxuXHQgICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYVxuXHQgICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDtcblx0ICB9O1xuXHR9O1xuXG5cdHZhciAkYXQgPSBfc3RyaW5nQXQoZmFsc2UpO1xuXHRfZXhwb3J0KF9leHBvcnQuUCwgJ1N0cmluZycsIHtcblx0ICAvLyAyMS4xLjMuMyBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0KHBvcylcblx0ICBjb2RlUG9pbnRBdDogZnVuY3Rpb24gY29kZVBvaW50QXQocG9zKSB7XG5cdCAgICByZXR1cm4gJGF0KHRoaXMsIHBvcyk7XG5cdCAgfVxuXHR9KTtcblxuXHR2YXIgY29kZVBvaW50QXQgPSBfY29yZS5TdHJpbmcuY29kZVBvaW50QXQ7XG5cblx0dmFyIG1heCA9IE1hdGgubWF4O1xuXHR2YXIgbWluID0gTWF0aC5taW47XG5cdHZhciBfdG9BYnNvbHV0ZUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBsZW5ndGgpIHtcblx0ICBpbmRleCA9IF90b0ludGVnZXIoaW5kZXgpO1xuXHQgIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpO1xuXHR9O1xuXG5cdHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHR2YXIgJGZyb21Db2RlUG9pbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuXHQvLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG5cdF9leHBvcnQoX2V4cG9ydC5TICsgX2V4cG9ydC5GICogKCEhJGZyb21Db2RlUG9pbnQgJiYgJGZyb21Db2RlUG9pbnQubGVuZ3RoICE9IDEpLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpXG5cdCAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KSB7XG5cdCAgICB2YXIgYXJndW1lbnRzJDEgPSBhcmd1bWVudHM7XG5cdCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgICB2YXIgcmVzID0gW107XG5cdCAgICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB2YXIgY29kZTtcblx0ICAgIHdoaWxlIChhTGVuID4gaSkge1xuXHQgICAgICBjb2RlID0gK2FyZ3VtZW50cyQxW2krK107XG5cdCAgICAgIGlmIChfdG9BYnNvbHV0ZUluZGV4KGNvZGUsIDB4MTBmZmZmKSAhPT0gY29kZSkgeyB0aHJvdyBSYW5nZUVycm9yKGNvZGUgKyAnIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQnKTsgfVxuXHQgICAgICByZXMucHVzaChjb2RlIDwgMHgxMDAwMFxuXHQgICAgICAgID8gZnJvbUNoYXJDb2RlKGNvZGUpXG5cdCAgICAgICAgOiBmcm9tQ2hhckNvZGUoKChjb2RlIC09IDB4MTAwMDApID4+IDEwKSArIDB4ZDgwMCwgY29kZSAlIDB4NDAwICsgMHhkYzAwKVxuXHQgICAgICApO1xuXHQgICAgfSByZXR1cm4gcmVzLmpvaW4oJycpO1xuXHQgIH1cblx0fSk7XG5cblx0dmFyIGZyb21Db2RlUG9pbnQgPSBfY29yZS5TdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuXHQvLyBUaGlzIGlzIGEgZ2VuZXJhdGVkIGZpbGUuIERvIG5vdCBlZGl0LlxuXHR2YXIgU3BhY2VfU2VwYXJhdG9yID0gL1tcXHUxNjgwXFx1MjAwMC1cXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXS87XG5cdHZhciBJRF9TdGFydCA9IC9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwODYwLVxcdTA4NkFcXHUwOEEwLVxcdTA4QjRcXHUwOEI2LVxcdTA4QkRcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk4MFxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTA5RkNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQUY5XFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNEXFx1MEM1OC1cXHUwQzVBXFx1MEM2MFxcdTBDNjFcXHUwQzgwXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDU0LVxcdTBENTZcXHUwRDVGLVxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y1XFx1MTNGOC1cXHUxM0ZEXFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4ODRcXHUxODg3LVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUM4MC1cXHUxQzg4XFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyRTJGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJFXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkVBXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OURcXHVBNkEwLVxcdUE2RUZcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3QUVcXHVBN0IwLVxcdUE3QjdcXHVBN0Y3LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QThGRFxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBOUUwLVxcdUE5RTRcXHVBOUU2LVxcdUE5RUZcXHVBOUZBLVxcdUE5RkVcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE3RS1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNjVcXHVBQjcwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERjAwLVxcdURGMUZcXHVERjJELVxcdURGNEFcXHVERjUwLVxcdURGNzVcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENCMC1cXHVEQ0QzXFx1RENEOC1cXHVEQ0ZCXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVEQ0UwLVxcdURDRjJcXHVEQ0Y0XFx1RENGNVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMFxcdURFMTAtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNFxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhcXHVEQzgwLVxcdURDQjJcXHVEQ0MwLVxcdURDRjJdfFxcdUQ4MDRbXFx1REMwMy1cXHVEQzM3XFx1REM4My1cXHVEQ0FGXFx1RENEMC1cXHVEQ0U4XFx1REQwMy1cXHVERDI2XFx1REQ1MC1cXHVERDcyXFx1REQ3NlxcdUREODMtXFx1RERCMlxcdUREQzEtXFx1RERDNFxcdUREREFcXHVERERDXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTJCXFx1REU4MC1cXHVERTg2XFx1REU4OFxcdURFOEEtXFx1REU4RFxcdURFOEYtXFx1REU5RFxcdURFOUYtXFx1REVBOFxcdURFQjAtXFx1REVERVxcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNEXFx1REY1MFxcdURGNUQtXFx1REY2MV18XFx1RDgwNVtcXHVEQzAwLVxcdURDMzRcXHVEQzQ3LVxcdURDNEFcXHVEQzgwLVxcdURDQUZcXHVEQ0M0XFx1RENDNVxcdURDQzdcXHVERDgwLVxcdUREQUVcXHVEREQ4LVxcdUREREJcXHVERTAwLVxcdURFMkZcXHVERTQ0XFx1REU4MC1cXHVERUFBXFx1REYwMC1cXHVERjE5XXxcXHVEODA2W1xcdURDQTAtXFx1RENERlxcdURDRkZcXHVERTAwXFx1REUwQi1cXHVERTMyXFx1REUzQVxcdURFNTBcXHVERTVDLVxcdURFODNcXHVERTg2LVxcdURFODlcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDdbXFx1REMwMC1cXHVEQzA4XFx1REMwQS1cXHVEQzJFXFx1REM0MFxcdURDNzItXFx1REM4RlxcdUREMDAtXFx1REQwNlxcdUREMDhcXHVERDA5XFx1REQwQi1cXHVERDMwXFx1REQ0Nl18XFx1RDgwOFtcXHVEQzAwLVxcdURGOTldfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXFx1REM4MC1cXHVERDQzXXxbXFx1RDgwQ1xcdUQ4MUMtXFx1RDgyMFxcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q1xcdUQ4NkYtXFx1RDg3MlxcdUQ4NzQtXFx1RDg3OV1bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxMVtcXHVEQzAwLVxcdURFNDZdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REVEMC1cXHVERUVEXFx1REYwMC1cXHVERjJGXFx1REY0MC1cXHVERjQzXFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTBcXHVERjkzLVxcdURGOUZcXHVERkUwXFx1REZFMV18XFx1RDgyMVtcXHVEQzAwLVxcdURGRUNdfFxcdUQ4MjJbXFx1REMwMC1cXHVERUYyXXxcXHVEODJDW1xcdURDMDAtXFx1REQxRVxcdURENzAtXFx1REVGQl18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTldfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVERDAwLVxcdURENDNdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRFxcdURDMjAtXFx1REZGRl18XFx1RDg3M1tcXHVEQzAwLVxcdURFQTFcXHVERUIwLVxcdURGRkZdfFxcdUQ4N0FbXFx1REMwMC1cXHVERkUwXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF0vO1xuXHR2YXIgSURfQ29udGludWUgPSAvW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzAwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0ODMtXFx1MDQ4N1xcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjEwLVxcdTA2MUFcXHUwNjIwLVxcdTA2NjlcXHUwNjZFLVxcdTA2RDNcXHUwNkQ1LVxcdTA2RENcXHUwNkRGLVxcdTA2RThcXHUwNkVBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMC1cXHUwNzRBXFx1MDc0RC1cXHUwN0IxXFx1MDdDMC1cXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgyRFxcdTA4NDAtXFx1MDg1QlxcdTA4NjAtXFx1MDg2QVxcdTA4QTAtXFx1MDhCNFxcdTA4QjYtXFx1MDhCRFxcdTA4RDQtXFx1MDhFMVxcdTA4RTMtXFx1MDk2M1xcdTA5NjYtXFx1MDk2RlxcdTA5NzEtXFx1MDk4M1xcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkMtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNFXFx1MDlEN1xcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUzXFx1MDlFNi1cXHUwOUYxXFx1MDlGQ1xcdTBBMDEtXFx1MEEwM1xcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEEzQ1xcdTBBM0UtXFx1MEE0MlxcdTBBNDdcXHUwQTQ4XFx1MEE0Qi1cXHUwQTREXFx1MEE1MVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTY2LVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkMtXFx1MEFDNVxcdTBBQzctXFx1MEFDOVxcdTBBQ0ItXFx1MEFDRFxcdTBBRDBcXHUwQUUwLVxcdTBBRTNcXHUwQUU2LVxcdTBBRUZcXHUwQUY5LVxcdTBBRkZcXHUwQjAxLVxcdTBCMDNcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzQy1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYzXFx1MEI2Ni1cXHUwQjZGXFx1MEI3MVxcdTBCODJcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDBcXHUwQkQ3XFx1MEJFNi1cXHUwQkVGXFx1MEMwMC1cXHUwQzAzXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRC1cXHUwQzQ0XFx1MEM0Ni1cXHUwQzQ4XFx1MEM0QS1cXHUwQzREXFx1MEM1NVxcdTBDNTZcXHUwQzU4LVxcdTBDNUFcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgwLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDAtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTQtXFx1MEQ1N1xcdTBENUYtXFx1MEQ2M1xcdTBENjYtXFx1MEQ2RlxcdTBEN0EtXFx1MEQ3RlxcdTBEODJcXHUwRDgzXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBEQ0FcXHUwRENGLVxcdTBERDRcXHUwREQ2XFx1MEREOC1cXHUwRERGXFx1MERFNi1cXHUwREVGXFx1MERGMlxcdTBERjNcXHUwRTAxLVxcdTBFM0FcXHUwRTQwLVxcdTBFNEVcXHUwRTUwLVxcdTBFNTlcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCOVxcdTBFQkItXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRUM4LVxcdTBFQ0RcXHUwRUQwLVxcdTBFRDlcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEYxOFxcdTBGMTlcXHUwRjIwLVxcdTBGMjlcXHUwRjM1XFx1MEYzN1xcdTBGMzlcXHUwRjNFLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjcxLVxcdTBGODRcXHUwRjg2LVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAwMC1cXHUxMDQ5XFx1MTA1MC1cXHUxMDlEXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzNUQtXFx1MTM1RlxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNVxcdTEzRjgtXFx1MTNGRFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxNFxcdTE3MjAtXFx1MTczNFxcdTE3NDAtXFx1MTc1M1xcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3NzJcXHUxNzczXFx1MTc4MC1cXHUxN0QzXFx1MTdEN1xcdTE3RENcXHUxN0REXFx1MTdFMC1cXHUxN0U5XFx1MTgwQi1cXHUxODBEXFx1MTgxMC1cXHUxODE5XFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MTk0Ni1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MTlEMC1cXHUxOUQ5XFx1MUEwMC1cXHUxQTFCXFx1MUEyMC1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3Ri1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUFBN1xcdTFBQjAtXFx1MUFCRFxcdTFCMDAtXFx1MUI0QlxcdTFCNTAtXFx1MUI1OVxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUJGM1xcdTFDMDAtXFx1MUMzN1xcdTFDNDAtXFx1MUM0OVxcdTFDNEQtXFx1MUM3RFxcdTFDODAtXFx1MUM4OFxcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNGOVxcdTFEMDAtXFx1MURGOVxcdTFERkItXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDNGXFx1MjA0MFxcdTIwNTRcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIwRDAtXFx1MjBEQ1xcdTIwRTFcXHUyMEU1LVxcdTIwRjBcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ3Ri1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkRFMC1cXHUyREZGXFx1MkUyRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyRlxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOTlcXHUzMDlBXFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJFXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkVBXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjJCXFx1QTY0MC1cXHVBNjZGXFx1QTY3NC1cXHVBNjdEXFx1QTY3Ri1cXHVBNkYxXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBN0FFXFx1QTdCMC1cXHVBN0I3XFx1QTdGNy1cXHVBODI3XFx1QTg0MC1cXHVBODczXFx1QTg4MC1cXHVBOEM1XFx1QThEMC1cXHVBOEQ5XFx1QThFMC1cXHVBOEY3XFx1QThGQlxcdUE4RkRcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNjVcXHVBQjcwLVxcdUFCRUFcXHVBQkVDXFx1QUJFRFxcdUFCRjAtXFx1QUJGOVxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMUQtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJGXFx1RkUzM1xcdUZFMzRcXHVGRTRELVxcdUZFNEZcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjEwLVxcdUZGMTlcXHVGRjIxLVxcdUZGM0FcXHVGRjNGXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1RERGRFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURFRTBcXHVERjAwLVxcdURGMUZcXHVERjJELVxcdURGNEFcXHVERjUwLVxcdURGN0FcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENBMC1cXHVEQ0E5XFx1RENCMC1cXHVEQ0QzXFx1RENEOC1cXHVEQ0ZCXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVEQ0UwLVxcdURDRjJcXHVEQ0Y0XFx1RENGNVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMC1cXHVERTAzXFx1REUwNVxcdURFMDZcXHVERTBDLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTM4LVxcdURFM0FcXHVERTNGXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU2XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OFxcdURDODAtXFx1RENCMlxcdURDQzAtXFx1RENGMl18XFx1RDgwNFtcXHVEQzAwLVxcdURDNDZcXHVEQzY2LVxcdURDNkZcXHVEQzdGLVxcdURDQkFcXHVEQ0QwLVxcdURDRThcXHVEQ0YwLVxcdURDRjlcXHVERDAwLVxcdUREMzRcXHVERDM2LVxcdUREM0ZcXHVERDUwLVxcdURENzNcXHVERDc2XFx1REQ4MC1cXHVEREM0XFx1RERDQS1cXHVERENDXFx1REREMC1cXHVERERBXFx1REREQ1xcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUzN1xcdURFM0VcXHVERTgwLVxcdURFODZcXHVERTg4XFx1REU4QS1cXHVERThEXFx1REU4Ri1cXHVERTlEXFx1REU5Ri1cXHVERUE4XFx1REVCMC1cXHVERUVBXFx1REVGMC1cXHVERUY5XFx1REYwMC1cXHVERjAzXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0MtXFx1REY0NFxcdURGNDdcXHVERjQ4XFx1REY0Qi1cXHVERjREXFx1REY1MFxcdURGNTdcXHVERjVELVxcdURGNjNcXHVERjY2LVxcdURGNkNcXHVERjcwLVxcdURGNzRdfFxcdUQ4MDVbXFx1REMwMC1cXHVEQzRBXFx1REM1MC1cXHVEQzU5XFx1REM4MC1cXHVEQ0M1XFx1RENDN1xcdURDRDAtXFx1RENEOVxcdUREODAtXFx1RERCNVxcdUREQjgtXFx1RERDMFxcdURERDgtXFx1RERERFxcdURFMDAtXFx1REU0MFxcdURFNDRcXHVERTUwLVxcdURFNTlcXHVERTgwLVxcdURFQjdcXHVERUMwLVxcdURFQzlcXHVERjAwLVxcdURGMTlcXHVERjFELVxcdURGMkJcXHVERjMwLVxcdURGMzldfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0U5XFx1RENGRlxcdURFMDAtXFx1REUzRVxcdURFNDdcXHVERTUwLVxcdURFODNcXHVERTg2LVxcdURFOTlcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDdbXFx1REMwMC1cXHVEQzA4XFx1REMwQS1cXHVEQzM2XFx1REMzOC1cXHVEQzQwXFx1REM1MC1cXHVEQzU5XFx1REM3Mi1cXHVEQzhGXFx1REM5Mi1cXHVEQ0E3XFx1RENBOS1cXHVEQ0I2XFx1REQwMC1cXHVERDA2XFx1REQwOFxcdUREMDlcXHVERDBCLVxcdUREMzZcXHVERDNBXFx1REQzQ1xcdUREM0RcXHVERDNGLVxcdURENDdcXHVERDUwLVxcdURENTldfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk5XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RVxcdURDODAtXFx1REQ0M118W1xcdUQ4MENcXHVEODFDLVxcdUQ4MjBcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNcXHVEODZGLVxcdUQ4NzJcXHVEODc0LVxcdUQ4NzldW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MTFbXFx1REMwMC1cXHVERTQ2XXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFNjAtXFx1REU2OVxcdURFRDAtXFx1REVFRFxcdURFRjAtXFx1REVGNFxcdURGMDAtXFx1REYzNlxcdURGNDAtXFx1REY0M1xcdURGNTAtXFx1REY1OVxcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwLVxcdURGN0VcXHVERjhGLVxcdURGOUZcXHVERkUwXFx1REZFMV18XFx1RDgyMVtcXHVEQzAwLVxcdURGRUNdfFxcdUQ4MjJbXFx1REMwMC1cXHVERUYyXXxcXHVEODJDW1xcdURDMDAtXFx1REQxRVxcdURENzAtXFx1REVGQl18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTlcXHVEQzlEXFx1REM5RV18XFx1RDgzNFtcXHVERDY1LVxcdURENjlcXHVERDZELVxcdURENzJcXHVERDdCLVxcdUREODJcXHVERDg1LVxcdUREOEJcXHVEREFBLVxcdUREQURcXHVERTQyLVxcdURFNDRdfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQlxcdURGQ0UtXFx1REZGRl18XFx1RDgzNltcXHVERTAwLVxcdURFMzZcXHVERTNCLVxcdURFNkNcXHVERTc1XFx1REU4NFxcdURFOUItXFx1REU5RlxcdURFQTEtXFx1REVBRl18XFx1RDgzOFtcXHVEQzAwLVxcdURDMDZcXHVEQzA4LVxcdURDMThcXHVEQzFCLVxcdURDMjFcXHVEQzIzXFx1REMyNFxcdURDMjYtXFx1REMyQV18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVEQ0QwLVxcdURDRDZcXHVERDAwLVxcdURENEFcXHVERDUwLVxcdURENTldfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRFxcdURDMjAtXFx1REZGRl18XFx1RDg3M1tcXHVEQzAwLVxcdURFQTFcXHVERUIwLVxcdURGRkZdfFxcdUQ4N0FbXFx1REMwMC1cXHVERkUwXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF18XFx1REI0MFtcXHVERDAwLVxcdURERUZdLztcblxuXHR2YXIgdW5pY29kZSA9IHtcblx0XHRTcGFjZV9TZXBhcmF0b3I6IFNwYWNlX1NlcGFyYXRvcixcblx0XHRJRF9TdGFydDogSURfU3RhcnQsXG5cdFx0SURfQ29udGludWU6IElEX0NvbnRpbnVlXG5cdH07XG5cblx0dmFyIHV0aWwgPSB7XG5cdCAgICBpc1NwYWNlU2VwYXJhdG9yOiBmdW5jdGlvbiBpc1NwYWNlU2VwYXJhdG9yIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiB1bmljb2RlLlNwYWNlX1NlcGFyYXRvci50ZXN0KGMpXG5cdCAgICB9LFxuXG5cdCAgICBpc0lkU3RhcnRDaGFyOiBmdW5jdGlvbiBpc0lkU3RhcnRDaGFyIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAoXG5cdCAgICAgICAgICAgIChjID49ICdhJyAmJiBjIDw9ICd6JykgfHxcblx0ICAgICAgICAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8XG5cdCAgICAgICAgKGMgPT09ICckJykgfHwgKGMgPT09ICdfJykgfHxcblx0ICAgICAgICB1bmljb2RlLklEX1N0YXJ0LnRlc3QoYylcblx0ICAgICAgICApXG5cdCAgICB9LFxuXG5cdCAgICBpc0lkQ29udGludWVDaGFyOiBmdW5jdGlvbiBpc0lkQ29udGludWVDaGFyIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAoXG5cdCAgICAgICAgICAgIChjID49ICdhJyAmJiBjIDw9ICd6JykgfHxcblx0ICAgICAgICAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8XG5cdCAgICAgICAgKGMgPj0gJzAnICYmIGMgPD0gJzknKSB8fFxuXHQgICAgICAgIChjID09PSAnJCcpIHx8IChjID09PSAnXycpIHx8XG5cdCAgICAgICAgKGMgPT09ICdcXHUyMDBDJykgfHwgKGMgPT09ICdcXHUyMDBEJykgfHxcblx0ICAgICAgICB1bmljb2RlLklEX0NvbnRpbnVlLnRlc3QoYylcblx0ICAgICAgICApXG5cdCAgICB9LFxuXG5cdCAgICBpc0RpZ2l0OiBmdW5jdGlvbiBpc0RpZ2l0IChjKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyAmJiAvWzAtOV0vLnRlc3QoYylcblx0ICAgIH0sXG5cblx0ICAgIGlzSGV4RGlnaXQ6IGZ1bmN0aW9uIGlzSGV4RGlnaXQgKGMpIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIGMgPT09ICdzdHJpbmcnICYmIC9bMC05QS1GYS1mXS8udGVzdChjKVxuXHQgICAgfSxcblx0fTtcblxuXHR2YXIgc291cmNlO1xuXHR2YXIgcGFyc2VTdGF0ZTtcblx0dmFyIHN0YWNrO1xuXHR2YXIgcG9zO1xuXHR2YXIgbGluZTtcblx0dmFyIGNvbHVtbjtcblx0dmFyIHRva2VuO1xuXHR2YXIga2V5O1xuXHR2YXIgcm9vdDtcblxuXHR2YXIgcGFyc2UgPSBmdW5jdGlvbiBwYXJzZSAodGV4dCwgcmV2aXZlcikge1xuXHQgICAgc291cmNlID0gU3RyaW5nKHRleHQpO1xuXHQgICAgcGFyc2VTdGF0ZSA9ICdzdGFydCc7XG5cdCAgICBzdGFjayA9IFtdO1xuXHQgICAgcG9zID0gMDtcblx0ICAgIGxpbmUgPSAxO1xuXHQgICAgY29sdW1uID0gMDtcblx0ICAgIHRva2VuID0gdW5kZWZpbmVkO1xuXHQgICAga2V5ID0gdW5kZWZpbmVkO1xuXHQgICAgcm9vdCA9IHVuZGVmaW5lZDtcblxuXHQgICAgZG8ge1xuXHQgICAgICAgIHRva2VuID0gbGV4KCk7XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUuXG5cdCAgICAgICAgLy8gaWYgKCFwYXJzZVN0YXRlc1twYXJzZVN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkUGFyc2VTdGF0ZSgpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgcGFyc2VTdGF0ZXNbcGFyc2VTdGF0ZV0oKTtcblx0ICAgIH0gd2hpbGUgKHRva2VuLnR5cGUgIT09ICdlb2YnKVxuXG5cdCAgICBpZiAodHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXR1cm4gaW50ZXJuYWxpemUoeycnOiByb290fSwgJycsIHJldml2ZXIpXG5cdCAgICB9XG5cblx0ICAgIHJldHVybiByb290XG5cdH07XG5cblx0ZnVuY3Rpb24gaW50ZXJuYWxpemUgKGhvbGRlciwgbmFtZSwgcmV2aXZlcikge1xuXHQgICAgdmFyIHZhbHVlID0gaG9sZGVyW25hbWVdO1xuXHQgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIga2V5ID0gU3RyaW5nKGkpO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50ID0gaW50ZXJuYWxpemUodmFsdWUsIGtleSwgcmV2aXZlcik7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrZXldO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFsdWUsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVwbGFjZW1lbnQsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBrZXkkMSBpbiB2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50JDEgPSBpbnRlcm5hbGl6ZSh2YWx1ZSwga2V5JDEsIHJldml2ZXIpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50JDEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrZXkkMV07XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWx1ZSwga2V5JDEsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlcGxhY2VtZW50JDEsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiByZXZpdmVyLmNhbGwoaG9sZGVyLCBuYW1lLCB2YWx1ZSlcblx0fVxuXG5cdHZhciBsZXhTdGF0ZTtcblx0dmFyIGJ1ZmZlcjtcblx0dmFyIGRvdWJsZVF1b3RlO1xuXHR2YXIgc2lnbjtcblx0dmFyIGM7XG5cblx0ZnVuY3Rpb24gbGV4ICgpIHtcblx0ICAgIGxleFN0YXRlID0gJ2RlZmF1bHQnO1xuXHQgICAgYnVmZmVyID0gJyc7XG5cdCAgICBkb3VibGVRdW90ZSA9IGZhbHNlO1xuXHQgICAgc2lnbiA9IDE7XG5cblx0ICAgIGZvciAoOzspIHtcblx0ICAgICAgICBjID0gcGVlaygpO1xuXG5cdCAgICAgICAgLy8gVGhpcyBjb2RlIGlzIHVucmVhY2hhYmxlLlxuXHQgICAgICAgIC8vIGlmICghbGV4U3RhdGVzW2xleFN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkTGV4U3RhdGUobGV4U3RhdGUpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgdmFyIHRva2VuID0gbGV4U3RhdGVzW2xleFN0YXRlXSgpO1xuXHQgICAgICAgIGlmICh0b2tlbikge1xuXHQgICAgICAgICAgICByZXR1cm4gdG9rZW5cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblxuXHRmdW5jdGlvbiBwZWVrICgpIHtcblx0ICAgIGlmIChzb3VyY2VbcG9zXSkge1xuXHQgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChzb3VyY2UuY29kZVBvaW50QXQocG9zKSlcblx0ICAgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlYWQgKCkge1xuXHQgICAgdmFyIGMgPSBwZWVrKCk7XG5cblx0ICAgIGlmIChjID09PSAnXFxuJykge1xuXHQgICAgICAgIGxpbmUrKztcblx0ICAgICAgICBjb2x1bW4gPSAwO1xuXHQgICAgfSBlbHNlIGlmIChjKSB7XG5cdCAgICAgICAgY29sdW1uICs9IGMubGVuZ3RoO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb2x1bW4rKztcblx0ICAgIH1cblxuXHQgICAgaWYgKGMpIHtcblx0ICAgICAgICBwb3MgKz0gYy5sZW5ndGg7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBjXG5cdH1cblxuXHR2YXIgbGV4U3RhdGVzID0ge1xuXHQgICAgZGVmYXVsdDogZnVuY3Rpb24gZGVmYXVsdCQxICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdcXHQnOlxuXHQgICAgICAgIGNhc2UgJ1xcdic6XG5cdCAgICAgICAgY2FzZSAnXFxmJzpcblx0ICAgICAgICBjYXNlICcgJzpcblx0ICAgICAgICBjYXNlICdcXHUwMEEwJzpcblx0ICAgICAgICBjYXNlICdcXHVGRUZGJzpcblx0ICAgICAgICBjYXNlICdcXG4nOlxuXHQgICAgICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcvJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdjb21tZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ2VvZicpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNTcGFjZVNlcGFyYXRvcihjKSkge1xuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0ICAgICAgICAvLyBpZiAoIWxleFN0YXRlc1twYXJzZVN0YXRlXSkge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkTGV4U3RhdGUocGFyc2VTdGF0ZSlcblx0ICAgICAgICAvLyB9XG5cblx0ICAgICAgICByZXR1cm4gbGV4U3RhdGVzW3BhcnNlU3RhdGVdKClcblx0ICAgIH0sXG5cblx0ICAgIGNvbW1lbnQ6IGZ1bmN0aW9uIGNvbW1lbnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJyonOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ211bHRpTGluZUNvbW1lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJy8nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ3NpbmdsZUxpbmVDb21tZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgbXVsdGlMaW5lQ29tbWVudDogZnVuY3Rpb24gbXVsdGlMaW5lQ29tbWVudCAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnKic6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnbXVsdGlMaW5lQ29tbWVudEFzdGVyaXNrJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgIH0sXG5cblx0ICAgIG11bHRpTGluZUNvbW1lbnRBc3RlcmlzazogZnVuY3Rpb24gbXVsdGlMaW5lQ29tbWVudEFzdGVyaXNrICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICcqJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJy8nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlZmF1bHQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIGxleFN0YXRlID0gJ211bHRpTGluZUNvbW1lbnQnO1xuXHQgICAgfSxcblxuXHQgICAgc2luZ2xlTGluZUNvbW1lbnQ6IGZ1bmN0aW9uIHNpbmdsZUxpbmVDb21tZW50ICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdcXG4nOlxuXHQgICAgICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVmYXVsdCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdlb2YnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgIH0sXG5cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAneyc6XG5cdCAgICAgICAgY2FzZSAnWyc6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbigncHVuY3R1YXRvcicsIHJlYWQoKSlcblxuXHQgICAgICAgIGNhc2UgJ24nOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxpdGVyYWwoJ3VsbCcpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bGwnLCBudWxsKVxuXG5cdCAgICAgICAgY2FzZSAndCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGl0ZXJhbCgncnVlJyk7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbignYm9vbGVhbicsIHRydWUpXG5cblx0ICAgICAgICBjYXNlICdmJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhbHNlJyk7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbignYm9vbGVhbicsIGZhbHNlKVxuXG5cdCAgICAgICAgY2FzZSAnLSc6XG5cdCAgICAgICAgY2FzZSAnKyc6XG5cdCAgICAgICAgICAgIGlmIChyZWFkKCkgPT09ICctJykge1xuXHQgICAgICAgICAgICAgICAgc2lnbiA9IC0xO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnc2lnbic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnLic6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbFBvaW50TGVhZGluZyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnMCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnemVybyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnMSc6XG5cdCAgICAgICAgY2FzZSAnMic6XG5cdCAgICAgICAgY2FzZSAnMyc6XG5cdCAgICAgICAgY2FzZSAnNCc6XG5cdCAgICAgICAgY2FzZSAnNSc6XG5cdCAgICAgICAgY2FzZSAnNic6XG5cdCAgICAgICAgY2FzZSAnNyc6XG5cdCAgICAgICAgY2FzZSAnOCc6XG5cdCAgICAgICAgY2FzZSAnOSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ0knOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxpdGVyYWwoJ25maW5pdHknKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdudW1lcmljJywgSW5maW5pdHkpXG5cblx0ICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhTicpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBOYU4pXG5cblx0ICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgZG91YmxlUXVvdGUgPSAocmVhZCgpID09PSAnXCInKTtcblx0ICAgICAgICAgICAgYnVmZmVyID0gJyc7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ3N0cmluZyc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGU6IGZ1bmN0aW9uIGlkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGUgKCkge1xuXHQgICAgICAgIGlmIChjICE9PSAndScpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICB2YXIgdSA9IHVuaWNvZGVFc2NhcGUoKTtcblx0ICAgICAgICBzd2l0Y2ggKHUpIHtcblx0ICAgICAgICBjYXNlICckJzpcblx0ICAgICAgICBjYXNlICdfJzpcblx0ICAgICAgICAgICAgYnJlYWtcblxuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIGlmICghdXRpbC5pc0lkU3RhcnRDaGFyKHUpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBpbnZhbGlkSWRlbnRpZmllcigpXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBicmVha1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSB1O1xuXHQgICAgICAgIGxleFN0YXRlID0gJ2lkZW50aWZpZXJOYW1lJztcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lOiBmdW5jdGlvbiBpZGVudGlmaWVyTmFtZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnJCc6XG5cdCAgICAgICAgY2FzZSAnXyc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAwQyc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAwRCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnXFxcXCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWVFc2NhcGUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0lkQ29udGludWVDaGFyKGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignaWRlbnRpZmllcicsIGJ1ZmZlcilcblx0ICAgIH0sXG5cblx0ICAgIGlkZW50aWZpZXJOYW1lRXNjYXBlOiBmdW5jdGlvbiBpZGVudGlmaWVyTmFtZUVzY2FwZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgIT09ICd1Jykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHZhciB1ID0gdW5pY29kZUVzY2FwZSgpO1xuXHQgICAgICAgIHN3aXRjaCAodSkge1xuXHQgICAgICAgIGNhc2UgJyQnOlxuXHQgICAgICAgIGNhc2UgJ18nOlxuXHQgICAgICAgIGNhc2UgJ1xcdTIwMEMnOlxuXHQgICAgICAgIGNhc2UgJ1xcdTIwMEQnOlxuXHQgICAgICAgICAgICBicmVha1xuXG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgaWYgKCF1dGlsLmlzSWRDb250aW51ZUNoYXIodSkpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IGludmFsaWRJZGVudGlmaWVyKClcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgYnVmZmVyICs9IHU7XG5cdCAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWUnO1xuXHQgICAgfSxcblxuXHQgICAgc2lnbjogZnVuY3Rpb24gc2lnbiQxICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICcuJzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsUG9pbnRMZWFkaW5nJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcwJzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICd6ZXJvJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cblx0ICAgICAgICBjYXNlICcxJzpcblx0ICAgICAgICBjYXNlICcyJzpcblx0ICAgICAgICBjYXNlICczJzpcblx0ICAgICAgICBjYXNlICc0Jzpcblx0ICAgICAgICBjYXNlICc1Jzpcblx0ICAgICAgICBjYXNlICc2Jzpcblx0ICAgICAgICBjYXNlICc3Jzpcblx0ICAgICAgICBjYXNlICc4Jzpcblx0ICAgICAgICBjYXNlICc5Jzpcblx0ICAgICAgICAgICAgYnVmZmVyID0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsSW50ZWdlcic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnSSc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgbGl0ZXJhbCgnbmZpbml0eScpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogSW5maW5pdHkpXG5cblx0ICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICBsaXRlcmFsKCdhTicpO1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBOYU4pXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgemVybzogZnVuY3Rpb24gemVybyAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnLic6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxQb2ludCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAnZSc6XG5cdCAgICAgICAgY2FzZSAnRSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudCc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAneCc6XG5cdCAgICAgICAgY2FzZSAnWCc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2hleGFkZWNpbWFsJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdudW1lcmljJywgc2lnbiAqIDApXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsSW50ZWdlcjogZnVuY3Rpb24gZGVjaW1hbEludGVnZXIgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJy4nOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsUG9pbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ2UnOlxuXHQgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsRXhwb25lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGRlY2ltYWxQb2ludExlYWRpbmc6IGZ1bmN0aW9uIGRlY2ltYWxQb2ludExlYWRpbmcgKCkge1xuXHQgICAgICAgIGlmICh1dGlsLmlzRGlnaXQoYykpIHtcblx0ICAgICAgICAgICAgYnVmZmVyICs9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEZyYWN0aW9uJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgZGVjaW1hbFBvaW50OiBmdW5jdGlvbiBkZWNpbWFsUG9pbnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJ2UnOlxuXHQgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdkZWNpbWFsRXhwb25lbnQnO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxGcmFjdGlvbic7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGRlY2ltYWxGcmFjdGlvbjogZnVuY3Rpb24gZGVjaW1hbEZyYWN0aW9uICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlICdlJzpcblx0ICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgYnVmZmVyICs9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnZGVjaW1hbEV4cG9uZW50Jztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogTnVtYmVyKGJ1ZmZlcikpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnQ6IGZ1bmN0aW9uIGRlY2ltYWxFeHBvbmVudCAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnKyc6XG5cdCAgICAgICAgY2FzZSAnLSc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudFNpZ24nO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnRTaWduOiBmdW5jdGlvbiBkZWNpbWFsRXhwb25lbnRTaWduICgpIHtcblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2RlY2ltYWxFeHBvbmVudEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBkZWNpbWFsRXhwb25lbnRJbnRlZ2VyOiBmdW5jdGlvbiBkZWNpbWFsRXhwb25lbnRJbnRlZ2VyICgpIHtcblx0ICAgICAgICBpZiAodXRpbC5pc0RpZ2l0KGMpKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXdUb2tlbignbnVtZXJpYycsIHNpZ24gKiBOdW1iZXIoYnVmZmVyKSlcblx0ICAgIH0sXG5cblx0ICAgIGhleGFkZWNpbWFsOiBmdW5jdGlvbiBoZXhhZGVjaW1hbCAoKSB7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNIZXhEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdoZXhhZGVjaW1hbEludGVnZXInO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9LFxuXG5cdCAgICBoZXhhZGVjaW1hbEludGVnZXI6IGZ1bmN0aW9uIGhleGFkZWNpbWFsSW50ZWdlciAoKSB7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNIZXhEaWdpdChjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ251bWVyaWMnLCBzaWduICogTnVtYmVyKGJ1ZmZlcikpXG5cdCAgICB9LFxuXG5cdCAgICBzdHJpbmc6IGZ1bmN0aW9uIHN0cmluZyAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnXFxcXCc6XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICAgICAgYnVmZmVyICs9IGVzY2FwZSgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1wiJzpcblx0ICAgICAgICAgICAgaWYgKGRvdWJsZVF1b3RlKSB7XG5cdCAgICAgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3N0cmluZycsIGJ1ZmZlcilcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgaWYgKCFkb3VibGVRdW90ZSkge1xuXHQgICAgICAgICAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Rva2VuKCdzdHJpbmcnLCBidWZmZXIpXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1xcbic6XG5cdCAgICAgICAgY2FzZSAnXFxyJzpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICAgICAgY2FzZSAnXFx1MjAyOSc6XG5cdCAgICAgICAgICAgIHNlcGFyYXRvckNoYXIoYyk7XG5cdCAgICAgICAgICAgIGJyZWFrXG5cblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICB9LFxuXG5cdCAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJ3snOlxuXHQgICAgICAgIGNhc2UgJ1snOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgdGhlIGRlZmF1bHQgbGV4U3RhdGUgaGFuZGxlcyBlb2YuXG5cdCAgICAgICAgLy8gY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgLy8gICAgIHJldHVybiBuZXdUb2tlbignZW9mJylcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBsZXhTdGF0ZSA9ICd2YWx1ZSc7XG5cdCAgICB9LFxuXG5cdCAgICBiZWZvcmVQcm9wZXJ0eU5hbWU6IGZ1bmN0aW9uIGJlZm9yZVByb3BlcnR5TmFtZSAoKSB7XG5cdCAgICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAnJCc6XG5cdCAgICAgICAgY2FzZSAnXyc6XG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHJlYWQoKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnaWRlbnRpZmllck5hbWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ1xcXFwnOlxuXHQgICAgICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgICAgIGxleFN0YXRlID0gJ2lkZW50aWZpZXJOYW1lU3RhcnRFc2NhcGUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cblx0ICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgY2FzZSBcIidcIjpcblx0ICAgICAgICAgICAgZG91YmxlUXVvdGUgPSAocmVhZCgpID09PSAnXCInKTtcblx0ICAgICAgICAgICAgbGV4U3RhdGUgPSAnc3RyaW5nJztcblx0ICAgICAgICAgICAgcmV0dXJuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHV0aWwuaXNJZFN0YXJ0Q2hhcihjKSkge1xuXHQgICAgICAgICAgICBidWZmZXIgKz0gcmVhZCgpO1xuXHQgICAgICAgICAgICBsZXhTdGF0ZSA9ICdpZGVudGlmaWVyTmFtZSc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cblx0ICAgIGFmdGVyUHJvcGVydHlOYW1lOiBmdW5jdGlvbiBhZnRlclByb3BlcnR5TmFtZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgPT09ICc6Jykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlWYWx1ZSAoKSB7XG5cdCAgICAgICAgbGV4U3RhdGUgPSAndmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiBhZnRlclByb3BlcnR5VmFsdWUgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlQXJyYXlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlQXJyYXlWYWx1ZSAoKSB7XG5cdCAgICAgICAgaWYgKGMgPT09ICddJykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgbGV4U3RhdGUgPSAndmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJBcnJheVZhbHVlOiBmdW5jdGlvbiBhZnRlckFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgIGNhc2UgJ10nOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3VG9rZW4oJ3B1bmN0dWF0b3InLCByZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfSxcblxuXHQgICAgZW5kOiBmdW5jdGlvbiBlbmQgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGRlZmF1bHQgbGV4U3RhdGUuXG5cdCAgICAgICAgLy8gaWYgKGMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIC8vICAgICByZWFkKClcblx0ICAgICAgICAvLyAgICAgcmV0dXJuIG5ld1Rva2VuKCdlb2YnKVxuXHQgICAgICAgIC8vIH1cblxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgIH0sXG5cdH07XG5cblx0ZnVuY3Rpb24gbmV3VG9rZW4gKHR5cGUsIHZhbHVlKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIHR5cGU6IHR5cGUsXG5cdCAgICAgICAgdmFsdWU6IHZhbHVlLFxuXHQgICAgICAgIGxpbmU6IGxpbmUsXG5cdCAgICAgICAgY29sdW1uOiBjb2x1bW4sXG5cdCAgICB9XG5cdH1cblxuXHRmdW5jdGlvbiBsaXRlcmFsIChzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICAgICAgdmFyIGMgPSBsaXN0W2ldO1xuXG5cdCAgICAgICAgdmFyIHAgPSBwZWVrKCk7XG5cblx0ICAgICAgICBpZiAocCAhPT0gYykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gZXNjYXBlICgpIHtcblx0ICAgIHZhciBjID0gcGVlaygpO1xuXHQgICAgc3dpdGNoIChjKSB7XG5cdCAgICBjYXNlICdiJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICdcXGInXG5cblx0ICAgIGNhc2UgJ2YnOlxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICByZXR1cm4gJ1xcZidcblxuXHQgICAgY2FzZSAnbic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiAnXFxuJ1xuXG5cdCAgICBjYXNlICdyJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICdcXHInXG5cblx0ICAgIGNhc2UgJ3QnOlxuXHQgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICByZXR1cm4gJ1xcdCdcblxuXHQgICAgY2FzZSAndic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiAnXFx2J1xuXG5cdCAgICBjYXNlICcwJzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgaWYgKHV0aWwuaXNEaWdpdChwZWVrKCkpKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gJ1xcMCdcblxuXHQgICAgY2FzZSAneCc6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIHJldHVybiBoZXhFc2NhcGUoKVxuXG5cdCAgICBjYXNlICd1Jzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuIHVuaWNvZGVFc2NhcGUoKVxuXG5cdCAgICBjYXNlICdcXG4nOlxuXHQgICAgY2FzZSAnXFx1MjAyOCc6XG5cdCAgICBjYXNlICdcXHUyMDI5Jzpcblx0ICAgICAgICByZWFkKCk7XG5cdCAgICAgICAgcmV0dXJuICcnXG5cblx0ICAgIGNhc2UgJ1xccic6XG5cdCAgICAgICAgcmVhZCgpO1xuXHQgICAgICAgIGlmIChwZWVrKCkgPT09ICdcXG4nKSB7XG5cdCAgICAgICAgICAgIHJlYWQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gJydcblxuXHQgICAgY2FzZSAnMSc6XG5cdCAgICBjYXNlICcyJzpcblx0ICAgIGNhc2UgJzMnOlxuXHQgICAgY2FzZSAnNCc6XG5cdCAgICBjYXNlICc1Jzpcblx0ICAgIGNhc2UgJzYnOlxuXHQgICAgY2FzZSAnNyc6XG5cdCAgICBjYXNlICc4Jzpcblx0ICAgIGNhc2UgJzknOlxuXHQgICAgICAgIHRocm93IGludmFsaWRDaGFyKHJlYWQoKSlcblxuXHQgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfVxuXG5cdCAgICByZXR1cm4gcmVhZCgpXG5cdH1cblxuXHRmdW5jdGlvbiBoZXhFc2NhcGUgKCkge1xuXHQgICAgdmFyIGJ1ZmZlciA9ICcnO1xuXHQgICAgdmFyIGMgPSBwZWVrKCk7XG5cblx0ICAgIGlmICghdXRpbC5pc0hleERpZ2l0KGMpKSB7XG5cdCAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgfVxuXG5cdCAgICBidWZmZXIgKz0gcmVhZCgpO1xuXG5cdCAgICBjID0gcGVlaygpO1xuXHQgICAgaWYgKCF1dGlsLmlzSGV4RGlnaXQoYykpIHtcblx0ICAgICAgICB0aHJvdyBpbnZhbGlkQ2hhcihyZWFkKCkpXG5cdCAgICB9XG5cblx0ICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cblx0ICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChwYXJzZUludChidWZmZXIsIDE2KSlcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaWNvZGVFc2NhcGUgKCkge1xuXHQgICAgdmFyIGJ1ZmZlciA9ICcnO1xuXHQgICAgdmFyIGNvdW50ID0gNDtcblxuXHQgICAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG5cdCAgICAgICAgdmFyIGMgPSBwZWVrKCk7XG5cdCAgICAgICAgaWYgKCF1dGlsLmlzSGV4RGlnaXQoYykpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZENoYXIocmVhZCgpKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGJ1ZmZlciArPSByZWFkKCk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChwYXJzZUludChidWZmZXIsIDE2KSlcblx0fVxuXG5cdHZhciBwYXJzZVN0YXRlcyA9IHtcblx0ICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCAoKSB7XG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGJlZm9yZVByb3BlcnR5TmFtZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlOYW1lICgpIHtcblx0ICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcblx0ICAgICAgICBjYXNlICdpZGVudGlmaWVyJzpcblx0ICAgICAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICAgICAgICBrZXkgPSB0b2tlbi52YWx1ZTtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdhZnRlclByb3BlcnR5TmFtZSc7XG5cdCAgICAgICAgICAgIHJldHVyblxuXG5cdCAgICAgICAgY2FzZSAncHVuY3R1YXRvcic6XG5cdCAgICAgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgICAgICAvLyBpZiAodG9rZW4udmFsdWUgIT09ICd9Jykge1xuXHQgICAgICAgICAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgICAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgICAgIHBvcCgpO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ2VvZic6XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIHRocm93IGludmFsaWRUb2tlbigpXG5cdCAgICB9LFxuXG5cdCAgICBhZnRlclByb3BlcnR5TmFtZTogZnVuY3Rpb24gYWZ0ZXJQcm9wZXJ0eU5hbWUgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAncHVuY3R1YXRvcicgfHwgdG9rZW4udmFsdWUgIT09ICc6Jykge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgICAgIC8vIH1cblxuXHQgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRU9GKClcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZVByb3BlcnR5VmFsdWUnO1xuXHQgICAgfSxcblxuXHQgICAgYmVmb3JlUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYmVmb3JlUHJvcGVydHlWYWx1ZSAoKSB7XG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGJlZm9yZUFycmF5VmFsdWU6IGZ1bmN0aW9uIGJlZm9yZUFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRU9GKClcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3B1bmN0dWF0b3InICYmIHRva2VuLnZhbHVlID09PSAnXScpIHtcblx0ICAgICAgICAgICAgcG9wKCk7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHB1c2goKTtcblx0ICAgIH0sXG5cblx0ICAgIGFmdGVyUHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gYWZ0ZXJQcm9wZXJ0eVZhbHVlICgpIHtcblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyBpZiAodG9rZW4udHlwZSAhPT0gJ3B1bmN0dWF0b3InKSB7XG5cdCAgICAgICAgLy8gICAgIHRocm93IGludmFsaWRUb2tlbigpXG5cdCAgICAgICAgLy8gfVxuXG5cdCAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdlb2YnKSB7XG5cdCAgICAgICAgICAgIHRocm93IGludmFsaWRFT0YoKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHtcblx0ICAgICAgICBjYXNlICcsJzpcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdiZWZvcmVQcm9wZXJ0eU5hbWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ30nOlxuXHQgICAgICAgICAgICBwb3AoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgfSxcblxuXHQgICAgYWZ0ZXJBcnJheVZhbHVlOiBmdW5jdGlvbiBhZnRlckFycmF5VmFsdWUgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAncHVuY3R1YXRvcicpIHtcblx0ICAgICAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgICAgICAvLyB9XG5cblx0ICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2VvZicpIHtcblx0ICAgICAgICAgICAgdGhyb3cgaW52YWxpZEVPRigpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgJywnOlxuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZUFycmF5VmFsdWUnO1xuXHQgICAgICAgICAgICByZXR1cm5cblxuXHQgICAgICAgIGNhc2UgJ10nOlxuXHQgICAgICAgICAgICBwb3AoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdW5yZWFjaGFibGUgc2luY2UgaXQncyBoYW5kbGVkIGJ5IHRoZSBsZXhTdGF0ZS5cblx0ICAgICAgICAvLyB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgfSxcblxuXHQgICAgZW5kOiBmdW5jdGlvbiBlbmQgKCkge1xuXHQgICAgICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZSBzaW5jZSBpdCdzIGhhbmRsZWQgYnkgdGhlIGxleFN0YXRlLlxuXHQgICAgICAgIC8vIGlmICh0b2tlbi50eXBlICE9PSAnZW9mJykge1xuXHQgICAgICAgIC8vICAgICB0aHJvdyBpbnZhbGlkVG9rZW4oKVxuXHQgICAgICAgIC8vIH1cblx0ICAgIH0sXG5cdH07XG5cblx0ZnVuY3Rpb24gcHVzaCAoKSB7XG5cdCAgICB2YXIgdmFsdWU7XG5cblx0ICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuXHQgICAgY2FzZSAncHVuY3R1YXRvcic6XG5cdCAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgJ3snOlxuXHQgICAgICAgICAgICB2YWx1ZSA9IHt9O1xuXHQgICAgICAgICAgICBicmVha1xuXG5cdCAgICAgICAgY2FzZSAnWyc6XG5cdCAgICAgICAgICAgIHZhbHVlID0gW107XG5cdCAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgYnJlYWtcblxuXHQgICAgY2FzZSAnbnVsbCc6XG5cdCAgICBjYXNlICdib29sZWFuJzpcblx0ICAgIGNhc2UgJ251bWVyaWMnOlxuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIGJyZWFrXG5cblx0ICAgIC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0ICAgIC8vIGRlZmF1bHQ6XG5cdCAgICAvLyAgICAgdGhyb3cgaW52YWxpZFRva2VuKClcblx0ICAgIH1cblxuXHQgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJvb3QgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgICAgICAgcGFyZW50LnB1c2godmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJlbnQsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuXHQgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgc3RhY2sucHVzaCh2YWx1ZSk7XG5cblx0ICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdiZWZvcmVBcnJheVZhbHVlJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2JlZm9yZVByb3BlcnR5TmFtZSc7XG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgY3VycmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdlbmQnO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50KSkge1xuXHQgICAgICAgICAgICBwYXJzZVN0YXRlID0gJ2FmdGVyQXJyYXlWYWx1ZSc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcGFyc2VTdGF0ZSA9ICdhZnRlclByb3BlcnR5VmFsdWUnO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHBvcCAoKSB7XG5cdCAgICBzdGFjay5wb3AoKTtcblxuXHQgICAgdmFyIGN1cnJlbnQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2VuZCc7XG5cdCAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudCkpIHtcblx0ICAgICAgICBwYXJzZVN0YXRlID0gJ2FmdGVyQXJyYXlWYWx1ZSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHBhcnNlU3RhdGUgPSAnYWZ0ZXJQcm9wZXJ0eVZhbHVlJztcblx0ICAgIH1cblx0fVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZFBhcnNlU3RhdGUgKCkge1xuXHQvLyAgICAgcmV0dXJuIG5ldyBFcnJvcihgSlNPTjU6IGludmFsaWQgcGFyc2Ugc3RhdGUgJyR7cGFyc2VTdGF0ZX0nYClcblx0Ly8gfVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZExleFN0YXRlIChzdGF0ZSkge1xuXHQvLyAgICAgcmV0dXJuIG5ldyBFcnJvcihgSlNPTjU6IGludmFsaWQgbGV4IHN0YXRlICcke3N0YXRlfSdgKVxuXHQvLyB9XG5cblx0ZnVuY3Rpb24gaW52YWxpZENoYXIgKGMpIHtcblx0ICAgIGlmIChjID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gc3ludGF4RXJyb3IoKFwiSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHN5bnRheEVycm9yKChcIkpTT041OiBpbnZhbGlkIGNoYXJhY3RlciAnXCIgKyAoZm9ybWF0Q2hhcihjKSkgKyBcIicgYXQgXCIgKyBsaW5lICsgXCI6XCIgKyBjb2x1bW4pKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW52YWxpZEVPRiAoKSB7XG5cdCAgICByZXR1cm4gc3ludGF4RXJyb3IoKFwiSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0fVxuXG5cdC8vIFRoaXMgY29kZSBpcyB1bnJlYWNoYWJsZS5cblx0Ly8gZnVuY3Rpb24gaW52YWxpZFRva2VuICgpIHtcblx0Ly8gICAgIGlmICh0b2tlbi50eXBlID09PSAnZW9mJykge1xuXHQvLyAgICAgICAgIHJldHVybiBzeW50YXhFcnJvcihgSlNPTjU6IGludmFsaWQgZW5kIG9mIGlucHV0IGF0ICR7bGluZX06JHtjb2x1bW59YClcblx0Ly8gICAgIH1cblxuXHQvLyAgICAgY29uc3QgYyA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHRva2VuLnZhbHVlLmNvZGVQb2ludEF0KDApKVxuXHQvLyAgICAgcmV0dXJuIHN5bnRheEVycm9yKGBKU09ONTogaW52YWxpZCBjaGFyYWN0ZXIgJyR7Zm9ybWF0Q2hhcihjKX0nIGF0ICR7bGluZX06JHtjb2x1bW59YClcblx0Ly8gfVxuXG5cdGZ1bmN0aW9uIGludmFsaWRJZGVudGlmaWVyICgpIHtcblx0ICAgIGNvbHVtbiAtPSA1O1xuXHQgICAgcmV0dXJuIHN5bnRheEVycm9yKChcIkpTT041OiBpbnZhbGlkIGlkZW50aWZpZXIgY2hhcmFjdGVyIGF0IFwiICsgbGluZSArIFwiOlwiICsgY29sdW1uKSlcblx0fVxuXG5cdGZ1bmN0aW9uIHNlcGFyYXRvckNoYXIgKGMpIHtcblx0ICAgIGNvbnNvbGUud2FybigoXCJKU09ONTogJ1wiICsgKGZvcm1hdENoYXIoYykpICsgXCInIGluIHN0cmluZ3MgaXMgbm90IHZhbGlkIEVDTUFTY3JpcHQ7IGNvbnNpZGVyIGVzY2FwaW5nXCIpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdENoYXIgKGMpIHtcblx0ICAgIHZhciByZXBsYWNlbWVudHMgPSB7XG5cdCAgICAgICAgXCInXCI6IFwiXFxcXCdcIixcblx0ICAgICAgICAnXCInOiAnXFxcXFwiJyxcblx0ICAgICAgICAnXFxcXCc6ICdcXFxcXFxcXCcsXG5cdCAgICAgICAgJ1xcYic6ICdcXFxcYicsXG5cdCAgICAgICAgJ1xcZic6ICdcXFxcZicsXG5cdCAgICAgICAgJ1xcbic6ICdcXFxcbicsXG5cdCAgICAgICAgJ1xccic6ICdcXFxccicsXG5cdCAgICAgICAgJ1xcdCc6ICdcXFxcdCcsXG5cdCAgICAgICAgJ1xcdic6ICdcXFxcdicsXG5cdCAgICAgICAgJ1xcMCc6ICdcXFxcMCcsXG5cdCAgICAgICAgJ1xcdTIwMjgnOiAnXFxcXHUyMDI4Jyxcblx0ICAgICAgICAnXFx1MjAyOSc6ICdcXFxcdTIwMjknLFxuXHQgICAgfTtcblxuXHQgICAgaWYgKHJlcGxhY2VtZW50c1tjXSkge1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlbWVudHNbY11cblx0ICAgIH1cblxuXHQgICAgaWYgKGMgPCAnICcpIHtcblx0ICAgICAgICB2YXIgaGV4U3RyaW5nID0gYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTtcblx0ICAgICAgICByZXR1cm4gJ1xcXFx4JyArICgnMDAnICsgaGV4U3RyaW5nKS5zdWJzdHJpbmcoaGV4U3RyaW5nLmxlbmd0aClcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIGNcblx0fVxuXG5cdGZ1bmN0aW9uIHN5bnRheEVycm9yIChtZXNzYWdlKSB7XG5cdCAgICB2YXIgZXJyID0gbmV3IFN5bnRheEVycm9yKG1lc3NhZ2UpO1xuXHQgICAgZXJyLmxpbmVOdW1iZXIgPSBsaW5lO1xuXHQgICAgZXJyLmNvbHVtbk51bWJlciA9IGNvbHVtbjtcblx0ICAgIHJldHVybiBlcnJcblx0fVxuXG5cdHZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiBzdHJpbmdpZnkgKHZhbHVlLCByZXBsYWNlciwgc3BhY2UpIHtcblx0ICAgIHZhciBzdGFjayA9IFtdO1xuXHQgICAgdmFyIGluZGVudCA9ICcnO1xuXHQgICAgdmFyIHByb3BlcnR5TGlzdDtcblx0ICAgIHZhciByZXBsYWNlckZ1bmM7XG5cdCAgICB2YXIgZ2FwID0gJyc7XG5cdCAgICB2YXIgcXVvdGU7XG5cblx0ICAgIGlmIChcblx0ICAgICAgICByZXBsYWNlciAhPSBudWxsICYmXG5cdCAgICAgICAgdHlwZW9mIHJlcGxhY2VyID09PSAnb2JqZWN0JyAmJlxuXHQgICAgICAgICFBcnJheS5pc0FycmF5KHJlcGxhY2VyKVxuXHQgICAgKSB7XG5cdCAgICAgICAgc3BhY2UgPSByZXBsYWNlci5zcGFjZTtcblx0ICAgICAgICBxdW90ZSA9IHJlcGxhY2VyLnF1b3RlO1xuXHQgICAgICAgIHJlcGxhY2VyID0gcmVwbGFjZXIucmVwbGFjZXI7XG5cdCAgICB9XG5cblx0ICAgIGlmICh0eXBlb2YgcmVwbGFjZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXBsYWNlckZ1bmMgPSByZXBsYWNlcjtcblx0ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXBsYWNlcikpIHtcblx0ICAgICAgICBwcm9wZXJ0eUxpc3QgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHJlcGxhY2VyOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgICAgICAgICB2YXIgdiA9IGxpc3RbaV07XG5cblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSAodm9pZCAwKTtcblxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgICAgICBpdGVtID0gdjtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChcblx0ICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICAgICAgICAgdiBpbnN0YW5jZW9mIFN0cmluZyB8fFxuXHQgICAgICAgICAgICAgICAgdiBpbnN0YW5jZW9mIE51bWJlclxuXHQgICAgICAgICAgICApIHtcblx0ICAgICAgICAgICAgICAgIGl0ZW0gPSBTdHJpbmcodik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoaXRlbSAhPT0gdW5kZWZpbmVkICYmIHByb3BlcnR5TGlzdC5pbmRleE9mKGl0ZW0pIDwgMCkge1xuXHQgICAgICAgICAgICAgICAgcHJvcGVydHlMaXN0LnB1c2goaXRlbSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChzcGFjZSBpbnN0YW5jZW9mIE51bWJlcikge1xuXHQgICAgICAgIHNwYWNlID0gTnVtYmVyKHNwYWNlKTtcblx0ICAgIH0gZWxzZSBpZiAoc3BhY2UgaW5zdGFuY2VvZiBTdHJpbmcpIHtcblx0ICAgICAgICBzcGFjZSA9IFN0cmluZyhzcGFjZSk7XG5cdCAgICB9XG5cblx0ICAgIGlmICh0eXBlb2Ygc3BhY2UgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgaWYgKHNwYWNlID4gMCkge1xuXHQgICAgICAgICAgICBzcGFjZSA9IE1hdGgubWluKDEwLCBNYXRoLmZsb29yKHNwYWNlKSk7XG5cdCAgICAgICAgICAgIGdhcCA9ICcgICAgICAgICAgJy5zdWJzdHIoMCwgc3BhY2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwYWNlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIGdhcCA9IHNwYWNlLnN1YnN0cigwLCAxMCk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBzZXJpYWxpemVQcm9wZXJ0eSgnJywgeycnOiB2YWx1ZX0pXG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZVByb3BlcnR5IChrZXksIGhvbGRlcikge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IGhvbGRlcltrZXldO1xuXHQgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUudG9KU09ONSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT041KGtleSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT04oa2V5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChyZXBsYWNlckZ1bmMpIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSByZXBsYWNlckZ1bmMuY2FsbChob2xkZXIsIGtleSwgdmFsdWUpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEJvb2xlYW4pIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuXHQgICAgICAgIGNhc2UgbnVsbDogcmV0dXJuICdudWxsJ1xuXHQgICAgICAgIGNhc2UgdHJ1ZTogcmV0dXJuICd0cnVlJ1xuXHQgICAgICAgIGNhc2UgZmFsc2U6IHJldHVybiAnZmFsc2UnXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHF1b3RlU3RyaW5nKHZhbHVlLCBmYWxzZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHNlcmlhbGl6ZUFycmF5KHZhbHVlKSA6IHNlcmlhbGl6ZU9iamVjdCh2YWx1ZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHF1b3RlU3RyaW5nICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBxdW90ZXMgPSB7XG5cdCAgICAgICAgICAgIFwiJ1wiOiAwLjEsXG5cdCAgICAgICAgICAgICdcIic6IDAuMixcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIHJlcGxhY2VtZW50cyA9IHtcblx0ICAgICAgICAgICAgXCInXCI6IFwiXFxcXCdcIixcblx0ICAgICAgICAgICAgJ1wiJzogJ1xcXFxcIicsXG5cdCAgICAgICAgICAgICdcXFxcJzogJ1xcXFxcXFxcJyxcblx0ICAgICAgICAgICAgJ1xcYic6ICdcXFxcYicsXG5cdCAgICAgICAgICAgICdcXGYnOiAnXFxcXGYnLFxuXHQgICAgICAgICAgICAnXFxuJzogJ1xcXFxuJyxcblx0ICAgICAgICAgICAgJ1xccic6ICdcXFxccicsXG5cdCAgICAgICAgICAgICdcXHQnOiAnXFxcXHQnLFxuXHQgICAgICAgICAgICAnXFx2JzogJ1xcXFx2Jyxcblx0ICAgICAgICAgICAgJ1xcMCc6ICdcXFxcMCcsXG5cdCAgICAgICAgICAgICdcXHUyMDI4JzogJ1xcXFx1MjAyOCcsXG5cdCAgICAgICAgICAgICdcXHUyMDI5JzogJ1xcXFx1MjAyOScsXG5cdCAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBwcm9kdWN0ID0gJyc7XG5cblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBjID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgICAgICBjYXNlIFwiJ1wiOlxuXHQgICAgICAgICAgICBjYXNlICdcIic6XG5cdCAgICAgICAgICAgICAgICBxdW90ZXNbY10rKztcblx0ICAgICAgICAgICAgICAgIHByb2R1Y3QgKz0gYztcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cblx0ICAgICAgICAgICAgY2FzZSAnXFwwJzpcblx0ICAgICAgICAgICAgICAgIGlmICh1dGlsLmlzRGlnaXQodmFsdWVbaSArIDFdKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QgKz0gJ1xcXFx4MDAnO1xuXHQgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnRzW2NdKSB7XG5cdCAgICAgICAgICAgICAgICBwcm9kdWN0ICs9IHJlcGxhY2VtZW50c1tjXTtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoYyA8ICcgJykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGhleFN0cmluZyA9IGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG5cdCAgICAgICAgICAgICAgICBwcm9kdWN0ICs9ICdcXFxceCcgKyAoJzAwJyArIGhleFN0cmluZykuc3Vic3RyaW5nKGhleFN0cmluZy5sZW5ndGgpO1xuXHQgICAgICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHByb2R1Y3QgKz0gYztcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgcXVvdGVDaGFyID0gcXVvdGUgfHwgT2JqZWN0LmtleXMocXVvdGVzKS5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIChxdW90ZXNbYV0gPCBxdW90ZXNbYl0pID8gYSA6IGI7IH0pO1xuXG5cdCAgICAgICAgcHJvZHVjdCA9IHByb2R1Y3QucmVwbGFjZShuZXcgUmVnRXhwKHF1b3RlQ2hhciwgJ2cnKSwgcmVwbGFjZW1lbnRzW3F1b3RlQ2hhcl0pO1xuXG5cdCAgICAgICAgcmV0dXJuIHF1b3RlQ2hhciArIHByb2R1Y3QgKyBxdW90ZUNoYXJcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gc2VyaWFsaXplT2JqZWN0ICh2YWx1ZSkge1xuXHQgICAgICAgIGlmIChzdGFjay5pbmRleE9mKHZhbHVlKSA+PSAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignQ29udmVydGluZyBjaXJjdWxhciBzdHJ1Y3R1cmUgdG8gSlNPTjUnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG5cdCAgICAgICAgdmFyIHN0ZXBiYWNrID0gaW5kZW50O1xuXHQgICAgICAgIGluZGVudCA9IGluZGVudCArIGdhcDtcblxuXHQgICAgICAgIHZhciBrZXlzID0gcHJvcGVydHlMaXN0IHx8IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICAgICAgICB2YXIgcGFydGlhbCA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0ga2V5czsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcblx0ICAgICAgICAgICAgdmFyIGtleSA9IGxpc3RbaV07XG5cblx0ICAgICAgICAgICAgdmFyIHByb3BlcnR5U3RyaW5nID0gc2VyaWFsaXplUHJvcGVydHkoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChwcm9wZXJ0eVN0cmluZyAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gc2VyaWFsaXplS2V5KGtleSkgKyAnOic7XG5cdCAgICAgICAgICAgICAgICBpZiAoZ2FwICE9PSAnJykge1xuXHQgICAgICAgICAgICAgICAgICAgIG1lbWJlciArPSAnICc7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBtZW1iZXIgKz0gcHJvcGVydHlTdHJpbmc7XG5cdCAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gobWVtYmVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciBmaW5hbDtcblx0ICAgICAgICBpZiAocGFydGlhbC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgZmluYWwgPSAne30nO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzO1xuXHQgICAgICAgICAgICBpZiAoZ2FwID09PSAnJykge1xuXHQgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IHBhcnRpYWwuam9pbignLCcpO1xuXHQgICAgICAgICAgICAgICAgZmluYWwgPSAneycgKyBwcm9wZXJ0aWVzICsgJ30nO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHNlcGFyYXRvciA9ICcsXFxuJyArIGluZGVudDtcblx0ICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBwYXJ0aWFsLmpvaW4oc2VwYXJhdG9yKTtcblx0ICAgICAgICAgICAgICAgIGZpbmFsID0gJ3tcXG4nICsgaW5kZW50ICsgcHJvcGVydGllcyArICcsXFxuJyArIHN0ZXBiYWNrICsgJ30nO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICAgICAgaW5kZW50ID0gc3RlcGJhY2s7XG5cdCAgICAgICAgcmV0dXJuIGZpbmFsXG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUtleSAoa2V5KSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHF1b3RlU3RyaW5nKGtleSwgdHJ1ZSlcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgZmlyc3RDaGFyID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoa2V5LmNvZGVQb2ludEF0KDApKTtcblx0ICAgICAgICBpZiAoIXV0aWwuaXNJZFN0YXJ0Q2hhcihmaXJzdENoYXIpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBxdW90ZVN0cmluZyhrZXksIHRydWUpXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0Q2hhci5sZW5ndGg7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgaWYgKCF1dGlsLmlzSWRDb250aW51ZUNoYXIoU3RyaW5nLmZyb21Db2RlUG9pbnQoa2V5LmNvZGVQb2ludEF0KGkpKSkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBxdW90ZVN0cmluZyhrZXksIHRydWUpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4ga2V5XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5ICh2YWx1ZSkge1xuXHQgICAgICAgIGlmIChzdGFjay5pbmRleE9mKHZhbHVlKSA+PSAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignQ29udmVydGluZyBjaXJjdWxhciBzdHJ1Y3R1cmUgdG8gSlNPTjUnKVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG5cdCAgICAgICAgdmFyIHN0ZXBiYWNrID0gaW5kZW50O1xuXHQgICAgICAgIGluZGVudCA9IGluZGVudCArIGdhcDtcblxuXHQgICAgICAgIHZhciBwYXJ0aWFsID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgcHJvcGVydHlTdHJpbmcgPSBzZXJpYWxpemVQcm9wZXJ0eShTdHJpbmcoaSksIHZhbHVlKTtcblx0ICAgICAgICAgICAgcGFydGlhbC5wdXNoKChwcm9wZXJ0eVN0cmluZyAhPT0gdW5kZWZpbmVkKSA/IHByb3BlcnR5U3RyaW5nIDogJ251bGwnKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICB2YXIgZmluYWw7XG5cdCAgICAgICAgaWYgKHBhcnRpYWwubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIGZpbmFsID0gJ1tdJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoZ2FwID09PSAnJykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBwYXJ0aWFsLmpvaW4oJywnKTtcblx0ICAgICAgICAgICAgICAgIGZpbmFsID0gJ1snICsgcHJvcGVydGllcyArICddJztcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnLFxcbicgKyBpbmRlbnQ7XG5cdCAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyQxID0gcGFydGlhbC5qb2luKHNlcGFyYXRvcik7XG5cdCAgICAgICAgICAgICAgICBmaW5hbCA9ICdbXFxuJyArIGluZGVudCArIHByb3BlcnRpZXMkMSArICcsXFxuJyArIHN0ZXBiYWNrICsgJ10nO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICAgICAgaW5kZW50ID0gc3RlcGJhY2s7XG5cdCAgICAgICAgcmV0dXJuIGZpbmFsXG5cdCAgICB9XG5cdH07XG5cblx0dmFyIEpTT041ID0ge1xuXHQgICAgcGFyc2U6IHBhcnNlLFxuXHQgICAgc3RyaW5naWZ5OiBzdHJpbmdpZnksXG5cdH07XG5cblx0dmFyIGxpYiA9IEpTT041O1xuXG5cdHZhciBlczUgPSBsaWI7XG5cblx0cmV0dXJuIGVzNTtcblxufSkpKTtcbiIsICIvLyBpbXBvcnQgeyBNZXRhUGFyc2VyIH0gZnJvbSAnbWV0YVBhcnNlcic7XHJcbmltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIFBsdWdpbiwgaHRtbFRvTWFya2Rvd24sIE5vdGljZSwgTWFya2Rvd25WaWV3LCBNYXJrZG93bkVkaXRWaWV3LCBNZW51LCBNZW51SXRlbSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2hlZXRTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBTaGVldEVsZW1lbnQgfSBmcm9tICcuL3NoZWV0RWxlbWVudCc7XHJcbmltcG9ydCAqIGFzIEpTT041IGZyb20gJ2pzb241JztcclxuaW1wb3J0IHsgTWFya2Rvd25UYWJsZURldGVjdG9yIH0gZnJvbSAnLi9tYXJrZG93blRhYmxlRGV0ZWN0b3InO1xyXG5pbXBvcnQgeyBUYWJsZUlkTWFuYWdlciB9IGZyb20gJy4vdGFibGVJZE1hbmFnZXInO1xyXG5pbXBvcnQgeyBUYWJsZVRvb2xiYXIgfSBmcm9tICcuL3RhYmxlVG9vbGJhcic7XHJcbmltcG9ydCB7IE1hcmtkb3duU291cmNlRWRpdG9yIH0gZnJvbSAnLi9tYXJrZG93blNvdXJjZUVkaXRvcic7XHJcbmltcG9ydCB7IGxvYWRJY29ucyB9IGZyb20gJy4vaWNvbnMnO1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEFwcCwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHNldHVwUHJldmlld01vZGVUYWJsZVNlbGVjdGlvbiB9IGZyb20gJy4vc2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uJztcclxuaW1wb3J0IHsgcmVuZGVyVGFibGVzV2l0aFN0b3JlZFN0eWxlcyB9IGZyb20gJy4vdGFibGVTdHlsZVJlbmRlcmVyJztcclxuaW1wb3J0IHsgVGFibGVSZXNpemVyIH0gZnJvbSAnLi90YWJsZVJlc2l6ZXInO1xyXG5pbXBvcnQgeyBUYWJsZURhdGFFeHRyYWN0b3IgfSBmcm9tICcuL3RhYmxlRGF0YUV4dHJhY3Rvcic7XHJcblxyXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xyXG5cdG5hdGl2ZVByb2Nlc3Npbmc6IGJvb2xlYW47XHJcblx0cGFyYWdyYXBoczogYm9vbGVhbjtcclxuXHRlbmFibGVDZWxsTWVyZ2luZzogYm9vbGVhbjtcclxuXHRjb25maXJtTWVyZ2VOb25FbXB0eTogYm9vbGVhbjtcclxuXHRlbmFibGVUYWJsZUlkczogYm9vbGVhbjtcclxuXHRpZFByZWZpeDogc3RyaW5nO1xyXG5cdGF1dG9DZW50ZXJNZXJnZWRDZWxsczogYm9vbGVhbjtcclxuXHR0b29sYmFyRW5hYmxlZDogYm9vbGVhbjtcclxuXHRlbmFibGVFZGl0TW9kZU9wZXJhdGlvbnM6IGJvb2xlYW47XHJcblx0dXNlVGFibGVXcmFwcGVyQ29tbWVudHM6IGJvb2xlYW47IC8vIFx1NEY3Rlx1NzUyOFx1ODg2OFx1NjgzQ1x1NkNFOFx1OTFDQVx1NTkzOVx1NkEyMVx1NUYwRlxyXG5cdGZlYXR1cmVTaW1pbGFyaXR5VGhyZXNob2xkOiBudW1iZXI7IC8vIFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG5cdHByZWZlckZlYXR1cmVNYXRjaGluZzogYm9vbGVhbjsgLy8gXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHU4MDBDXHU5NzVFXHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHJcblx0cHJlZmVyRmlsZVN0b3JhZ2U6IGJvb2xlYW47IC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NUI1OFx1NTBBOFx1ODAwQ1x1OTc1RWRhdGEuanNvblxyXG5cdGF1dG9FeHBvcnRUb0ZpbGU6IGJvb2xlYW47IC8vIFx1ODFFQVx1NTJBOFx1NUMwNmRhdGEuanNvblx1NEUyRFx1NzY4NFx1NjU3MFx1NjM2RVx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNlxyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRuYXRpdmVQcm9jZXNzaW5nOiB0cnVlLFxyXG5cdHBhcmFncmFwaHM6IHRydWUsXHJcblx0ZW5hYmxlQ2VsbE1lcmdpbmc6IHRydWUsXHJcblx0Y29uZmlybU1lcmdlTm9uRW1wdHk6IHRydWUsXHJcblx0ZW5hYmxlVGFibGVJZHM6IHRydWUsXHJcblx0aWRQcmVmaXg6ICd0YmwnLFxyXG5cdGF1dG9DZW50ZXJNZXJnZWRDZWxsczogdHJ1ZSxcclxuXHR0b29sYmFyRW5hYmxlZDogdHJ1ZSxcclxuXHRlbmFibGVFZGl0TW9kZU9wZXJhdGlvbnM6IHRydWUsXHJcblx0dXNlVGFibGVXcmFwcGVyQ29tbWVudHM6IGZhbHNlLCAvLyBcdTlFRDhcdThCQTRcdTRFMERcdTRGN0ZcdTc1MjhcdTZDRThcdTkxQ0FcdTU5MzlcdTZBMjFcdTVGMEZcclxuXHRmZWF0dXJlU2ltaWxhcml0eVRocmVzaG9sZDogMC43LCAvLyBcdTlFRDhcdThCQTRcdTc2RjhcdTRGM0NcdTVFQTZcdTk2MDhcdTUwM0M3MCVcclxuXHRwcmVmZXJGZWF0dXJlTWF0Y2hpbmc6IGZhbHNlLCAvLyBcdTlFRDhcdThCQTRcdTRFMERcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcclxuXHRwcmVmZXJGaWxlU3RvcmFnZTogdHJ1ZSwgLy8gXHU5RUQ4XHU4QkE0XHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU2NTg3XHU0RUY2XHU1QjU4XHU1MEE4XHJcblx0YXV0b0V4cG9ydFRvRmlsZTogZmFsc2UsIC8vIFx1OUVEOFx1OEJBNFx1NEUwRFx1ODFFQVx1NTJBOFx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNlxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIE9ic2lkaWFuU3ByZWFkc2hlZXQgZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncztcclxuXHRyaWJib25JY29uOiBIVE1MRWxlbWVudDtcclxuXHR0YWJsZUlkTWFuYWdlcjogVGFibGVJZE1hbmFnZXI7XHJcblx0dGFibGVEZXRlY3RvcjogTWFya2Rvd25UYWJsZURldGVjdG9yO1xyXG5cdHRhYmxlVG9vbGJhcjogVGFibGVUb29sYmFyO1xyXG5cdG1hcmtkb3duU291cmNlRWRpdG9yOiBNYXJrZG93blNvdXJjZUVkaXRvcjtcclxuXHRjdXJyZW50RWRpdGluZ1RhYmxlOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1NjY4XHJcblx0dGFibGVSZXNpemVyOiBUYWJsZVJlc2l6ZXI7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2M0QwXHU1M0Q2XHU1NjY4XHJcblx0dGFibGVEYXRhRXh0cmFjdG9yOiBUYWJsZURhdGFFeHRyYWN0b3I7XHJcblx0XHJcblx0Ly8gXHU2REZCXHU1MkEwXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHU3MkI2XHU2MDAxXHU4RERGXHU4RTJBXHJcblx0bGFzdFByZXZpZXdNb2RlU3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHR2aWV3TW9kZUNoYW5nZUhhbmRsZXI6ICgpID0+IHZvaWQ7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcblx0XHR0aGlzLmhhbmRsZVRhYmxlQ2xpY2sgPSB0aGlzLmhhbmRsZVRhYmxlQ2xpY2suYmluZCh0aGlzKTtcclxuXHRcdHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljayA9IHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljay5iaW5kKHRoaXMpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBcdTc5RkJcdTk2NjRcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdTUxRkRcdTY1NzBcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0xvYWRpbmcgQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIHRvb2xiYXJFbmFibGVkIFx1NUM1RVx1NjAyN1x1NUI1OFx1NTcyOFxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIGVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucyBcdTVDNUVcdTYwMjdcdTVCNThcdTU3MjhcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucyA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIHByZWZlckZpbGVTdG9yYWdlIFx1NUM1RVx1NjAyN1x1NUI1OFx1NTcyOFxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSA9IHRydWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREIGF1dG9FeHBvcnRUb0ZpbGUgXHU1QzVFXHU2MDI3XHU1QjU4XHU1NzI4XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9FeHBvcnRUb0ZpbGUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b0V4cG9ydFRvRmlsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIExvYWQgY3VzdG9tIGljb25zXHJcblx0XHRcdGxvYWRJY29ucygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBjb21wb25lbnRzIGluIGNvcnJlY3Qgb3JkZXJcclxuXHRcdFx0Y29uc29sZS5sb2coJ0luaXRpYWxpemluZyBwbHVnaW4gY29tcG9uZW50cycpO1xyXG5cdFx0XHR0aGlzLnRhYmxlSWRNYW5hZ2VyID0gbmV3IFRhYmxlSWRNYW5hZ2VyKHRoaXMpO1xyXG5cdFx0XHR0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yID0gbmV3IE1hcmtkb3duU291cmNlRWRpdG9yKHRoaXMpOyAvLyBJbml0aWFsaXplIGJlZm9yZSBUYWJsZVRvb2xiYXJcclxuXHRcdFx0dGhpcy50YWJsZURldGVjdG9yID0gbmV3IE1hcmtkb3duVGFibGVEZXRlY3Rvcih0aGlzKTtcclxuXHRcdFx0dGhpcy50YWJsZVRvb2xiYXIgPSBuZXcgVGFibGVUb29sYmFyKHRoaXMpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4ODY4XHU2ODNDXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1NjY4XHJcblx0XHRcdHRoaXMudGFibGVSZXNpemVyID0gbmV3IFRhYmxlUmVzaXplcih0aGlzKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjNEMFx1NTNENlx1NTY2OFxyXG5cdFx0XHR0aGlzLnRhYmxlRGF0YUV4dHJhY3RvciA9IG5ldyBUYWJsZURhdGFFeHRyYWN0b3IodGhpcyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgcmliYm9uIGljb24gZm9yIHRvb2xiYXIgdG9nZ2xlXHJcblx0XHRcdHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbigndGFibGUtdG9vbGJhci10b2dnbGUnLCAnXHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlVG9vbGJhclN0YXRlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRkIHJpYmJvbiBpY29uIGZvciBlZGl0IG1vZGUgb3BlcmF0aW9uc1xyXG5cdFx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3RhYmxlLWVkaXQtbW9kZScsICdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTY0Q0RcdTRGNUMnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdFx0aWYgKCFhY3RpdmVWaWV3KSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkUnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcblx0XHRcdFx0Y29uc3QgaXNFZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIWlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTIwN1x1NjM2Mlx1NTIzMFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEY3Rlx1NzUyOFx1NkI2NFx1NTI5Rlx1ODBGRCcpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTY2M0VcdTc5M0FcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTY0Q0RcdTRGNUNcdTgzRENcdTUzNTVcclxuXHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRCcpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCd0YWJsZS1pZCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmFkZFRhYmxlSWRUb01hcmtkb3duKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdtZXJnZS1yaWdodCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ3JpZ2h0Jyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdtZXJnZS1kb3duJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubWFya2Rvd25Tb3VyY2VFZGl0b3IubWVyZ2VDZWxscygnZG93bicpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTY2M0VcdTc5M0FcdTgzRENcdTUzNTVcclxuXHRcdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZ0KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgcmliYm9uIGljb24gc3RhdGVcclxuXHRcdFx0dGhpcy51cGRhdGVSaWJib25JY29uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTVERTVcdTUxNzdcdTY4MEZcdTU0MkZcdTc1MjhcdUZGMENcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQpIHtcclxuXHRcdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHU1M0Q4XHU1MzE2XHVGRjBDXHU5MUNEXHU2NUIwXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERFx1ODlDNlx1NTZGRVx1NURGMlx1NUI4Q1x1NTE2OFx1NTJBMFx1OEY3RFxyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHVwVGFibGVTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHRcdFx0fSwgMzAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU2NTg3XHU2ODYzXHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHVGRjBDXHU5MUNEXHU2NUIwXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCkge1xyXG5cdFx0XHRcdFx0XHQvLyBcdTVFRjZcdThGREZcdTYyNjdcdTg4NENcdUZGMENcdTc4NkVcdTRGRERcdTg5QzZcdTU2RkVcdTVERjJcdTVCOENcdTUxNjhcdTUyQTBcdThGN0RcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cFRhYmxlU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0XHRcdH0sIDMwMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NzZEMVx1NTQyQ1x1N0YxNlx1OEY5MVx1NTY2OFx1NTE0OVx1NjgwN1x1NkQzQlx1NTJBOFx1RkYwQ1x1NjhDMFx1NkQ0Qlx1ODg2OFx1NjgzQ1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgKGVkaXRvciwgdmlldykgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHJcblx0XHRcdFx0XHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJykge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1OTA3Rlx1NTE0RFx1OTg5MVx1N0U0MVx1ODlFNlx1NTNEMVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGVib3VuY2UoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU1MTQ5XHU2ODA3XHU2NjJGXHU1NDI2XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRhYmxlSW5mbykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBcdThCQkVcdTdGNkVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9LCA1MDApKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3NkQxXHU1NDJDXHU3RjE2XHU4RjkxXHU1NjY4XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHVGRjBDXHU2OEMwXHU2RDRCXHU4ODY4XHU2ODNDXHJcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcblx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcgJiYgYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERFx1NTE0OVx1NjgwN1x1NURGMlx1NjZGNFx1NjVCMFxyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuXHRcdFx0XHRcdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTUxNDlcdTY4MDdcdTY2MkZcdTU0MjZcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODVcclxuXHRcdFx0XHRcdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRcdFx0XHRcdGlmICh0YWJsZUluZm8pIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHJcblx0XHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdFx0aWQ6ICdhZGQtdGFibGUtaWQtaW4tZWRpdC1tb2RlJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQnLFxyXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5hZGRUYWJsZUlkVG9NYXJrZG93bigpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDXHU1REYyXHU3OTgxXHU3NTI4XHVGRjBDXHU4QkY3XHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU1NDJGXHU3NTI4Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnbWVyZ2UtY2VsbC1yaWdodC1pbi1lZGl0LW1vZGUnLFxyXG5cdFx0XHRcdG5hbWU6ICdcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnLFxyXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5tZXJnZUNlbGxzKCdyaWdodCcpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDXHU1REYyXHU3OTgxXHU3NTI4XHVGRjBDXHU4QkY3XHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU1NDJGXHU3NTI4Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNCAtIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnbWVyZ2UtY2VsbC1kb3duLWluLWVkaXQtbW9kZScsXHJcblx0XHRcdFx0bmFtZTogJ1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycsXHJcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ2Rvd24nKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjRDRFx1NEY1Q1x1NURGMlx1Nzk4MVx1NzUyOFx1RkYwQ1x1OEJGN1x1NTcyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NTQyRlx1NzUyOCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRFxyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnc2hvdy1jdXJyZW50LXRhYmxlLWlkJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDSUQnLFxyXG5cdFx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNob3dDdXJyZW50VGFibGVJZCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTYyQzZcdTUyMDZcdTVERjJcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0XHRpZDogJ3NwbGl0LW1lcmdlZC1jZWxscycsXHJcblx0XHRcdFx0bmFtZTogJ1x1NjJDNlx1NTIwNlx1NURGMlx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycsXHJcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLnNwbGl0TWVyZ2VkQ2VsbHMoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjRDRFx1NEY1Q1x1NURGMlx1Nzk4MVx1NzUyOFx1RkYwQ1x1OEJGN1x1NTcyOFx1OEJCRVx1N0Y2RVx1NEUyRFx1NTQyRlx1NzUyOCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTQgLSBcdTRGRUVcdTU5MERcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0XHRpZDogJ2ZpeC1tZXJnZS1tYXJrZXJzJyxcclxuXHRcdFx0XHRuYW1lOiAnXHU0RkVFXHU1OTBEXHU4ODY4XHU2ODNDXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwJyxcclxuXHRcdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubWFya2Rvd25Tb3VyY2VFZGl0b3IuZGV0ZWN0QW5kRml4TWVyZ2VNYXJrZXJzKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTg4NjhcdTY4M0NcdTY0Q0RcdTRGNUNcdTVERjJcdTc5ODFcdTc1MjhcdUZGMENcdThCRjdcdTU3MjhcdThCQkVcdTdGNkVcdTRFMkRcdTU0MkZcdTc1MjgnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2Q0U4XHU1MThDXHU1MTc2XHU0RUQ2XHU0RThCXHU0RUY2XHU1NDhDXHU1OTA0XHU3NDA2XHU1NjY4XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXHJcblx0XHRcdCdzaGVldCcsXHJcblx0XHRcdGFzeW5jIChcclxuXHRcdFx0XHRzb3VyY2U6IHN0cmluZyxcclxuXHRcdFx0XHRlbDogSFRNTFRhYmxlRWxlbWVudCxcclxuXHRcdFx0XHRjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcclxuXHRcdFx0KSA9PiB7XHJcblx0XHRcdFx0c291cmNlID0gc291cmNlLnRyaW0oKTtcclxuXHRcdFx0XHRjdHguYWRkQ2hpbGQoXHJcblx0XHRcdFx0XHRuZXcgU2hlZXRFbGVtZW50KFxyXG5cdFx0XHRcdFx0XHRlbCxcclxuXHRcdFx0XHRcdFx0c291cmNlLFxyXG5cdFx0XHRcdFx0XHRjdHgsXHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0XHR0aGlzXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblx0XHRcdC8vIFx1NkNFOFx1NTE4QyBNYXJrZG93biBcdTU0MEVcdTU5MDRcdTc0MDZcdTU2NjhcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoYXN5bmMgKGVsLCBjdHgpID0+IFxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubmF0aXZlUHJvY2Vzc2luZykgcmV0dXJuO1xyXG5cdFx0XHRpZiAoY3R4LmZyb250bWF0dGVyPy5bJ2Rpc2FibGUtc2hlZXQnXSA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgdGFibGVFbHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpO1xyXG5cdFx0XHRpZiAodGFibGVFbHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0Zm9yIChjb25zdCB0YWJsZUVsIG9mIEFycmF5LmZyb20odGFibGVFbHMpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmICghdGFibGVFbCkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0aWYgKHRhYmxlRWw/LmlkID09PSAnb2JzaWRpYW4tc2hlZXRzLXBhcnNlZCcpIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHQvLyBcdTc4NkVcdTRGRERcdTg4NjhcdTY4M0NcdTY3MDlJRFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODg2OFx1NjgzQ0lEXHU1MjlGXHU4MEZEXHVGRjA5XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVUYWJsZUlkcykge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnRhYmxlSWRNYW5hZ2VyLmVuc3VyZVRhYmxlSGFzSWQodGFibGVFbCBhcyBIVE1MRWxlbWVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFx1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgwN1x1OEJCMFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3Nlx1NTI5Rlx1ODBGRFx1RkYwOVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NTg5RVx1NUYzQVx1NzY4NFx1NkUzMlx1NjdEM1x1NjVCOVx1NkNENVxyXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlck1lcmdlZENlbGxzKHRhYmxlRWwgYXMgSFRNTFRhYmxlRWxlbWVudCwgY3R4KTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU4ODY4XHU2ODNDXHU2NzA5cm93c3Bhbi9jb2xzcGFuXHU1QzVFXHU2MDI3XHVGRjBDXHU0RTVGXHU1RTk0XHU3NTI4XHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGXHJcblx0XHRcdFx0XHRcdGlmICh0YWJsZUVsLnF1ZXJ5U2VsZWN0b3IoJ1tyb3dzcGFuXSwgW2NvbHNwYW5dJykpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhYmxlRGV0ZWN0b3IuYXBwbHlNZXJnZUNlbGxzTWFya2Vycyh0YWJsZUVsIGFzIEhUTUxFbGVtZW50KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQy4uLlxyXG5cdFx0XHRcdFx0Ly8gXHU4RkQ5XHU5MUNDXHU0RkREXHU3NTU5XHU4ODY4XHU2ODNDXHU1OTA0XHU3NDA2XHU5MDNCXHU4RjkxXHVGRjBDXHU0RjQ2XHU3OUZCXHU5NjY0XHU0RTBFXHU1REU1XHU1MTc3XHU2ODBGXHU2NjNFXHU3OTNBL1x1OTY5MFx1ODVDRlx1NzZGOFx1NTE3M1x1NzY4NFx1NEVFM1x1NzgwMVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdThCQkVcdTdGNkVcdTkwMDlcdTk4NzlcdTUzNjFcclxuXHRcdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTaGVldFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgQWR2YW5jZWQgVGFibGUgWFQgcGx1Z2luOicsIGVycm9yKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gXHU4QkJFXHU3RjZFXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHU1M0Q4XHU1MzE2XHU3NkQxXHU1NDJDXHJcblx0XHR0aGlzLnNldHVwVmlld01vZGVDaGFuZ2VMaXN0ZW5lcigpO1xyXG5cdFx0XHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcclxuXHRcdHRoaXMuY2hlY2tBbmRSZW5kZXJUYWJsZXMoKTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5sb2coJ0FkdmFuY2VkIFRhYmxlIFhUIFx1NjNEMlx1NEVGNlx1NURGMlx1NTJBMFx1OEY3RCcpO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBcdTk2MzJcdTYyOTZcdTUxRkRcdTY1NzBcclxuXHQgKiBAcGFyYW0gZnVuYyBcdTg5ODFcdTYyNjdcdTg4NENcdTc2ODRcdTUxRkRcdTY1NzBcclxuXHQgKiBAcGFyYW0gd2FpdCBcdTdCNDlcdTVGODVcdTY1RjZcdTk1RjRcdUZGMDhcdTZCRUJcdTc5RDJcdUZGMDlcclxuXHQgKi9cclxuXHRwcml2YXRlIGRlYm91bmNlKGZ1bmM6IEZ1bmN0aW9uLCB3YWl0OiBudW1iZXIpIHtcclxuXHRcdGxldCB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oLi4uYXJnczogYW55W10pIHtcclxuXHRcdFx0Y29uc3QgY29udGV4dCA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBsYXRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHRcclxuXHQvLyBcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEYgLSBcdTY1QjBcdTY1QjlcdTZDRDVcdUZGMENcdTUzRUFcdTU3MjhcdTk3MDBcdTg5ODFcdTY1RjZcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcclxuXHRjcmVhdGVUb29sYmFyKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REYyXHU2NzA5XHU3Njg0XHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRhaW5lcicpLmZvckVhY2goY29udGFpbmVyID0+IHtcclxuXHRcdFx0XHRjb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRcdGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0dG9vbGJhckNvbnRhaW5lci5jbGFzc05hbWUgPSAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb250YWluZXInO1xyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2xiYXJDb250YWluZXIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRcdHRoaXMudGFibGVUb29sYmFyLmNyZWF0ZVRvb2xiYXIodG9vbGJhckNvbnRhaW5lcik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTY4NjNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdUZGMENcdTc1MjhcdTRFOEVcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcdTU5MTZcdTcwQjlcdTUxRkJcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZURvY3VtZW50Q2xpY2spO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRpZiAoYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG5cdFx0XHRcdGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHRcdC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NjhDMFx1NjdFNVx1NTE0OVx1NjgwN1x1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVxyXG5cdFx0XHRcdFx0Y29uc3QgdGFibGVJbmZvID0gdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5sb2NhdGVUYWJsZUluTWFya2Rvd24oYWN0aXZlVmlldy5lZGl0b3IpO1xyXG5cdFx0XHRcdFx0aWYgKHRhYmxlSW5mbykge1xyXG5cdFx0XHRcdFx0XHQvLyBcdThCQkVcdTdGNkVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR1cEVkaXRNb2RlVGFibGVTZWxlY3Rpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcclxuXHRcdFx0XHRcdHRoaXMuc2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnXHU1REU1XHU1MTc3XHU2ODBGXHU1REYyXHU1MjFCXHU1RUZBJyk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTUyOUZcdTgwRkRcclxuXHQgKi9cclxuXHRzZXR1cFRhYmxlU2VsZWN0aW9uKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcblx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG5cdFx0XHRjb25zdCBpc0VkaXRNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnO1xyXG5cclxuXHRcdFx0aWYgKGlzRWRpdE1vZGUpIHtcclxuXHRcdFx0XHQvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTRGN0ZcdTc1MjhcdTdGMTZcdThGOTFcdTU2NjhcdTRFOEJcdTRFRjZcclxuXHRcdFx0XHR0aGlzLnNldHVwRWRpdE1vZGVUYWJsZVNlbGVjdGlvbihhY3RpdmVWaWV3LmVkaXRvcik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU0RjdGXHU3NTI4RE9NXHU0RThCXHU0RUY2XHJcblx0XHRcdFx0dGhpcy5zZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFxyXG5cdCAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcblx0ICovXHJcblx0c2V0dXBFZGl0TW9kZVRhYmxlU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuXHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFOiBcdTg4NEM9JHtjdXJzb3IubGluZX0sIFx1NTIxNz0ke2N1cnNvci5jaH1gKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NTE0OVx1NjgwN1x1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVxyXG5cdFx0XHRjb25zdCB0YWJsZUluZm8gPSB0aGlzLm1hcmtkb3duU291cmNlRWRpdG9yLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG5cdFx0XHRpZiAoIXRhYmxlSW5mbykge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0MnKTtcclxuXHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdUZGMENcdTZFMDVcdTk2NjRcdTVGNTNcdTUyNERcdTdGMTZcdThGOTFcdTg4NjhcdTY4M0NcdTcyQjZcdTYwMDFcclxuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50RWRpdGluZ1RhYmxlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRFZGl0aW5nVGFibGUgPSBudWxsO1xyXG5cdFx0XHRcdFx0Ly8gXHU2RTA1XHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU3Njg0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcblx0XHRcdFx0XHRpZiAodGhpcy50YWJsZVRvb2xiYXIpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy50YWJsZVRvb2xiYXIuY2xlYXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDOiBcdTgzMDNcdTU2RjQ9JHt0YWJsZUluZm8uc3RhcnRMaW5lfS0ke3RhYmxlSW5mby5lbmRMaW5lfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHVGRjA4XHU1OTgyXHU2NzlDXHU1QzFBXHU2NzJBXHU1MjFCXHU1RUZBXHVGRjA5XHJcblx0XHRcdGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkdmFuY2VkLXRhYmxlLXRvb2xiYXItY29udGFpbmVyJykpIHtcclxuXHRcdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU0RkREXHU1QjU4XHU1RjUzXHU1MjREXHU3RjE2XHU4RjkxXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcblx0XHRcdHRoaXMuY3VycmVudEVkaXRpbmdUYWJsZSA9IHtcclxuXHRcdFx0XHRzdGFydExpbmU6IHRhYmxlSW5mby5zdGFydExpbmUsXHJcblx0XHRcdFx0ZW5kTGluZTogdGFibGVJbmZvLmVuZExpbmUsXHJcblx0XHRcdFx0Y29udGVudDogdGFibGVJbmZvLmNvbnRlbnRcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHR0aGlzLnRhYmxlVG9vbGJhci5zZXRBY3RpdmVFZGl0TW9kZVRhYmxlKHRoaXMuY3VycmVudEVkaXRpbmdUYWJsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdUZGMDhcdTc1MjhcdTRFOEVcdThDMDNcdThCRDVcdUZGMDlcclxuXHRcdFx0Y29uc3QgY2VsbFBvc2l0aW9uID0gdGhpcy5tYXJrZG93blNvdXJjZUVkaXRvci5nZXRDZWxsUG9zaXRpb24oZWRpdG9yKTtcclxuXHRcdFx0aWYgKGNlbGxQb3NpdGlvbikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTUxNDlcdTY4MDdcdTRGNERcdTRFOEVcdTUzNTVcdTUxNDNcdTY4M0M6IFx1ODg0Qz0ke2NlbGxQb3NpdGlvbi5yb3dJbmRleH0sIFx1NTIxNz0ke2NlbGxQb3NpdGlvbi5jb2xJbmRleH1gKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTkwMDlcdTYyRTlcdTRFODZcdTg4NjhcdTY4M0M6JywgdGhpcy5jdXJyZW50RWRpdGluZ1RhYmxlKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1OEJCRVx1N0Y2RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdThCQkVcdTdGNkVcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTUyOUZcdTgwRkRcclxuXHQgKi9cclxuXHRzZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb24oKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTRGN0ZcdTc1MjhcdTcyRUNcdTdBQ0JcdTc2ODRzZXR1cFByZXZpZXdNb2RlVGFibGVTZWxlY3Rpb25cdTY1QjlcdTZDRDVcclxuXHRcdFx0c2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uKHRoaXMpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ1x1NTM3OFx1OEY3RCBBZHZhbmNlZCBUYWJsZSBYVCBcdTYzRDJcdTRFRjYnKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWR2YW5jZWQtdGFibGUtdG9vbGJhci1jb250YWluZXInKS5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XHJcblx0XHRcdGNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTlBRDhcdTRFQUVcdTU0OENcdTkwMDlcdTYyRTlcdTcyQjZcdTYwMDFcclxuXHRcdHRoaXMucmVtb3ZlQWxsVGFibGVIaWdobGlnaHRzKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1NkUwNVx1NzQwNlx1ODg2OFx1NjgzQ1x1NTkyN1x1NUMwRlx1OEMwM1x1NjU3NFx1NTY2OFxyXG5cdFx0dGhpcy50YWJsZVJlc2l6ZXIuY2xlYW51cCgpO1xyXG5cdFx0XHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTRFMEFcdTc2ODRcdTgxRUFcdTVCOUFcdTRFNDlcdTY1NzBcdTYzNkVcdTVDNUVcdTYwMjdcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlW2RhdGEtdGFibGUtcHJvY2Vzc2VkXScpLmZvckVhY2godGFibGUgPT4ge1xyXG5cdFx0XHRjb25zdCB0YWJsZUVsID0gdGFibGUgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGRlbGV0ZSB0YWJsZUVsLmRhdGFzZXQudGFibGVQcm9jZXNzZWQ7XHJcblx0XHRcdGRlbGV0ZSB0YWJsZUVsLmRhdGFzZXQudGFibGVTZWxlY3RlZDtcclxuXHRcdFx0dGFibGVFbC5zdHlsZS5vdXRsaW5lID0gJyc7XHJcblx0XHRcdHRhYmxlRWwuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHJcblx0XHRcdHRhYmxlRWwub25jbGljayA9IG51bGw7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU0RTBEXHU1MThEXHU5NzAwXHU4OTgxXHU3OUZCXHU5NjY0XHU2NTg3XHU2ODYzXHU3RUE3XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHVGRjBDXHU1NkUwXHU0RTNBXHU2MjExXHU0RUVDXHU1REYyXHU3RUNGXHU3OUZCXHU5NjY0XHU0RTg2XHU1QjgzXHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcclxuXHRcdFx0e30sXHJcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXHJcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cdFxyXG5cdGhpZ2hsaWdodFNlbGVjdGVkVGFibGUodGFibGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTc2ODRcdTlBRDhcdTRFQUVcclxuXHRcdHRoaXMucmVtb3ZlQWxsVGFibGVIaWdobGlnaHRzKCk7XHJcblx0XHRcclxuXHRcdC8vIFx1OUFEOFx1NEVBRVx1OTAwOVx1NEUyRFx1NzY4NFx1ODg2OFx1NjgzQ1xyXG5cdFx0dGFibGUuc3R5bGUub3V0bGluZSA9ICcycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XHJcblx0XHR0YWJsZS5zdHlsZS5vdXRsaW5lT2Zmc2V0ID0gJzJweCc7XHJcblx0XHR0YWJsZS5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQgPSAndHJ1ZSc7XHJcblx0fVxyXG5cdFxyXG5cdHJlbW92ZUFsbFRhYmxlSGlnaGxpZ2h0cygpOiB2b2lkIHtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlW2RhdGEtdGFibGUtc2VsZWN0ZWQ9XCJ0cnVlXCJdJykuZm9yRWFjaCh0YWJsZSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhYmxlRWwgPSB0YWJsZSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0dGFibGVFbC5zdHlsZS5vdXRsaW5lID0gJyc7XHJcblx0XHRcdHRhYmxlRWwuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG5cdFx0XHRkZWxldGUgdGFibGVFbC5kYXRhc2V0LnRhYmxlU2VsZWN0ZWQ7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Y3JlYXRlVGFibGVEYXRhKHRhYmxlOiBIVE1MRWxlbWVudCwgdGFibGVJZDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTlBOENcdThCQzFcdTg4NjhcdTY4M0NJRFx1NjYyRlx1NTQyNlx1Njc2NVx1ODFFQUhUTUxcdTZDRThcdTkxQ0FcclxuXHRcdFx0Y29uc3QgY29tbWVudElkID0gdGhpcy50YWJsZUlkTWFuYWdlci5nZXRUYWJsZUlkZW50aWZpZXIodGFibGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1ODNCN1x1NTNENlx1NTIzMElEXHVGRjBDXHU2MjE2XHU4MDA1XHU0RTBFXHU0RjIwXHU1MTY1XHU3Njg0SURcdTRFMERcdTUzMzlcdTkxNERcdUZGMENcdTUyMTlcdTRFMERcdTUyMUJcdTVFRkFcdTY1NzBcdTYzNkVcclxuXHRcdFx0aWYgKCFjb21tZW50SWQgfHwgY29tbWVudElkICE9PSB0YWJsZUlkKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKGBcdTg4NjhcdTY4M0NJRFx1OUE4Q1x1OEJDMVx1NTkzMVx1OEQyNTogXHU0RjIwXHU1MTY1SUQ9JHt0YWJsZUlkfSwgSFRNTFx1NkNFOFx1OTFDQUlEPSR7Y29tbWVudElkIHx8ICdcdTY1RTAnfWApO1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU1M0VBXHU2NzA5XHU1NzI4SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjYwRVx1Nzg2RVx1NUI5QVx1NEU0OVx1NzY4NFx1ODg2OFx1NjgzQ0lEXHU2MjREXHU4MEZEXHU1MjFCXHU1RUZBXHU2NTcwXHU2MzZFJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcclxuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGlmICghYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHVGRjBDXHU0RTBEXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhY3RpdmVWaWV3LmZpbGU/LnBhdGg7XHJcblx0XHRcdGlmICghZmlsZVBhdGgpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFx1RkYwQ1x1NEUwRFx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coYFx1NEUzQVx1NjcwOVx1NjU0OFx1NzY4NEhUTUxcdTZDRThcdTkxQ0FJRFx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RTogJHt0YWJsZUlkfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcblx0XHRcdHRoaXMudGFibGVUb29sYmFyLmV4dHJhY3RBbmRTdG9yZVRhYmxlSW5mbyh0YWJsZUlkLCB0YWJsZSwgZmlsZVBhdGgpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0YXN5bmMgc2F2ZVRhYmxlRGF0YSh0YWJsZURhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU5QThDXHU4QkMxXHU4ODY4XHU2ODNDSURcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuXHRcdFx0aWYgKCF0YWJsZURhdGEgfHwgIXRhYmxlRGF0YS5pZCkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignXHU2NUUwXHU2NTQ4XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHVGRjBDXHU3RjNBXHU1QzExSUQnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTgzQjdcdTUzRDZcdTc2ODRJRFxyXG5cdFx0XHQvLyBcdThGRDlcdTkxQ0NcdTYyMTFcdTRFRUNcdTY1RTBcdTZDRDVcdTc2RjRcdTYzQTVcdTlBOENcdThCQzFJRFx1Njc2NVx1NkU5MFx1RkYwQ1x1NEY0Nlx1NTNFRlx1NEVFNVx1OTAxQVx1OEZDN1x1NjVFNVx1NUZEN1x1NjNEMFx1OTE5MlxyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU1MUM2XHU1OTA3XHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFOiAke3RhYmxlRGF0YS5pZH1gKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1NjU4N1x1NEVGNlxyXG5cdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NUI1OFx1NTBBOFx1RkYwQ1x1NTIxOVx1NUMxRFx1OEJENVx1NUMwNlx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NTIzMFx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG5cdFx0XHRsZXQgc2F2ZWRUb0ZpbGUgPSBmYWxzZTtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucHJlZmVyRmlsZVN0b3JhZ2UgJiYgYWN0aXZlRmlsZSAmJiB0aGlzLnRhYmxlRGF0YUV4dHJhY3Rvcikge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnRhYmxlRGF0YUV4dHJhY3Rvci5leHBvcnRUYWJsZURhdGFUb0ZpbGUoYWN0aXZlRmlsZSwgdGFibGVEYXRhLmlkLCB0YWJsZURhdGEpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1NURGMlx1NUMwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NTIzMFx1NjU4N1x1NEVGNjogJHthY3RpdmVGaWxlLnBhdGh9YCk7XHJcblx0XHRcdFx0XHRzYXZlZFRvRmlsZSA9IHRydWU7XHJcblx0XHRcdFx0fSBjYXRjaCAoZmlsZUVycm9yKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTUyMzBcdTY1ODdcdTRFRjZcdTU5MzFcdThEMjVcdUZGMENcdTVDMDZcdTU2REVcdTkwMDBcdTUyMzBkYXRhLmpzb246JywgZmlsZUVycm9yKTtcclxuXHRcdFx0XHRcdHNhdmVkVG9GaWxlID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTY3MkFcdTRGRERcdTVCNThcdTUyMzBcdTY1ODdcdTRFRjZcdUZGMENcdTUyMTlcdTRGRERcdTVCNThcdTUyMzBkYXRhLmpzb25cclxuXHRcdFx0aWYgKCFzYXZlZFRvRmlsZSkge1xyXG5cdFx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NUI1OFx1NTBBOFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSB8fCB7fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTc4NkVcdTRGRERcdTVCNThcdTU3MjhcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcclxuXHRcdFx0XHRpZiAoIWV4aXN0aW5nRGF0YS50YWJsZXMpIHtcclxuXHRcdFx0XHRcdGV4aXN0aW5nRGF0YS50YWJsZXMgPSB7fTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gXHU2NkY0XHU2NUIwXHU3Mjc5XHU1QjlBXHU4ODY4XHU2ODNDXHU3Njg0XHU2NTcwXHU2MzZFXHJcblx0XHRcdFx0ZXhpc3RpbmdEYXRhLnRhYmxlc1t0YWJsZURhdGEuaWRdID0gdGFibGVEYXRhO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFx1NEZERFx1NUI1OFx1NjZGNFx1NjVCMFx1NTQwRVx1NzY4NFx1NjU3MFx1NjM2RVxyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEoZXhpc3RpbmdEYXRhKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhgXHU1REYyXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1MjMwZGF0YS5qc29uOiAke3RhYmxlRGF0YS5pZH1gKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdThCQkVcdTdGNkVcdTRFODZcdTgxRUFcdTUyQThcdTVCRkNcdTUxRkFcdTUyMzBcdTY1ODdcdTRFRjZcdTRGNDZcdTRFNEJcdTUyNERcdTY3MkFcdTRGRERcdTVCNThcdTUyMzBcdTY1ODdcdTRFRjZcdUZGMENcdTUyMTlcdTVDMURcdThCRDVcdTVDMDZcdTY1NzBcdTYzNkVcdTVCRkNcdTUxRkFcdTUyMzBcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcclxuXHRcdFx0XHRpZiAoIXNhdmVkVG9GaWxlICYmIHRoaXMuc2V0dGluZ3MuYXV0b0V4cG9ydFRvRmlsZSAmJiB0aGlzLnRhYmxlRGF0YUV4dHJhY3RvciAmJiBhY3RpdmVGaWxlKSB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnRhYmxlRGF0YUV4dHJhY3Rvci5leHBvcnRUYWJsZURhdGFUb0ZpbGUoYWN0aXZlRmlsZSwgdGFibGVEYXRhLmlkLCB0YWJsZURhdGEpO1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgXHU1REYyXHU4MUVBXHU1MkE4XHU1QzA2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QkZDXHU1MUZBXHU1MjMwXHU2NTg3XHU0RUY2OiAke2FjdGl2ZUZpbGUucGF0aH1gKTtcclxuXHRcdFx0XHRcdH0gY2F0Y2ggKGV4cG9ydEVycm9yKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1ODFFQVx1NTJBOFx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNlx1NTkzMVx1OEQyNTonLCBleHBvcnRFcnJvcik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIHVwZGF0ZVJpYmJvbkljb24oKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMucmliYm9uSWNvbikgcmV0dXJuO1xyXG5cdFx0XHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTczQjBcdTY3MDlcdTU2RkVcdTY4MDdcclxuXHRcdHRoaXMucmliYm9uSWNvbi5lbXB0eSgpO1xyXG5cdFx0XHJcblx0XHQvLyBcdTY4MzlcdTYzNkVcdTVERTVcdTUxNzdcdTY4MEZcdTcyQjZcdTYwMDFcdThCQkVcdTdGNkVcdTU2RkVcdTY4MDdcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkKSB7XHJcblx0XHRcdC8vIFx1NURFNVx1NTE3N1x1NjgwRlx1NTQyRlx1NzUyOCAtIFx1NjYzRVx1NzkzQVx1NUY2OVx1ODI3Mlx1NTZGRVx1NjgwN1xyXG5cdFx0XHRjb25zdCBpY29uRWwgPSB0aGlzLnJpYmJvbkljb24uY3JlYXRlRWwoJ2RpdicsIHtcclxuXHRcdFx0XHRjbHM6ICdyaWJib24taWNvbi1hY3RpdmUnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4QkJFXHU3RjZFXHU1NkZFXHU2ODA3XHJcblx0XHRcdGljb25FbC5pbm5lckhUTUwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb25cIj48cmVjdCB4PVwiM1wiIHk9XCIzXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgcng9XCIyXCIgcnk9XCIyXCI+PC9yZWN0PjxsaW5lIHgxPVwiM1wiIHkxPVwiOVwiIHgyPVwiMjFcIiB5Mj1cIjlcIj48L2xpbmU+PGxpbmUgeDE9XCIzXCIgeTE9XCIxNVwiIHgyPVwiMjFcIiB5Mj1cIjE1XCI+PC9saW5lPjxsaW5lIHgxPVwiOVwiIHkxPVwiM1wiIHgyPVwiOVwiIHkyPVwiMjFcIj48L2xpbmU+PGxpbmUgeDE9XCIxNVwiIHkxPVwiM1wiIHgyPVwiMTVcIiB5Mj1cIjIxXCI+PC9saW5lPjwvc3ZnPmA7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTZERkJcdTUyQTBcdTZGQzBcdTZEM0JcdTY4MzdcdTVGMEZcclxuXHRcdFx0aWNvbkVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gXHU1REU1XHU1MTc3XHU2ODBGXHU3OTgxXHU3NTI4IC0gXHU2NjNFXHU3OTNBXHU3MDcwXHU4MjcyXHU1NkZFXHU2ODA3XHJcblx0XHRcdGNvbnN0IGljb25FbCA9IHRoaXMucmliYm9uSWNvbi5jcmVhdGVFbCgnZGl2Jyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdThCQkVcdTdGNkVcdTU2RkVcdTY4MDdcclxuXHRcdFx0aWNvbkVsLmlubmVySFRNTCA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJzdmctaWNvblwiPjxyZWN0IHg9XCIzXCIgeT1cIjNcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiByeD1cIjJcIiByeT1cIjJcIj48L3JlY3Q+PGxpbmUgeDE9XCIzXCIgeTE9XCI5XCIgeDI9XCIyMVwiIHkyPVwiOVwiPjwvbGluZT48bGluZSB4MT1cIjNcIiB5MT1cIjE1XCIgeDI9XCIyMVwiIHkyPVwiMTVcIj48L2xpbmU+PGxpbmUgeDE9XCI5XCIgeTE9XCIzXCIgeDI9XCI5XCIgeTI9XCIyMVwiPjwvbGluZT48bGluZSB4MT1cIjE1XCIgeTE9XCIzXCIgeDI9XCIxNVwiIHkyPVwiMjFcIj48L2xpbmU+PC9zdmc+YDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0dG9nZ2xlVG9vbGJhclN0YXRlKCk6IHZvaWQge1xyXG5cdFx0Ly8gXHU1MjA3XHU2MzYyXHU1REU1XHU1MTc3XHU2ODBGXHU3MkI2XHU2MDAxXHJcblx0XHR0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkID0gIXRoaXMuc2V0dGluZ3MudG9vbGJhckVuYWJsZWQ7XHJcblx0XHRcclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1OEJCRVx1N0Y2RVxyXG5cdFx0dGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2NkY0XHU2NUIwXHU1NkZFXHU2ODA3XHU3MkI2XHU2MDAxXHJcblx0XHR0aGlzLnVwZGF0ZVJpYmJvbkljb24oKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2ODM5XHU2MzZFXHU3MkI2XHU2MDAxXHU1MjFCXHU1RUZBXHU2MjE2XHU3OUZCXHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy50b29sYmFyRW5hYmxlZCkge1xyXG5cdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHRcdFx0bmV3IE5vdGljZSgnXHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGXHU1REYyXHU1NDJGXHU3NTI4Jyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBcdTc5RkJcdTk2NjRcdTVERTVcdTUxNzdcdTY4MEZcdTVCQjlcdTU2NjhcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkdmFuY2VkLXRhYmxlLXRvb2xiYXItY29udGFpbmVyJykuZm9yRWFjaChjb250YWluZXIgPT4ge1xyXG5cdFx0XHRcdGNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ1x1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRlx1NURGMlx1Nzk4MVx1NzUyOCcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHJcblx0ICovXHJcblx0aGFuZGxlVGFibGVDbGljayA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU3MEI5XHU1MUZCXHU3Njg0XHU4ODY4XHU2ODNDXHJcblx0XHRcdGNvbnN0IHRhYmxlID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpO1xyXG5cdFx0XHRpZiAoIXRhYmxlKSByZXR1cm47XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTc2ODRcdTlBRDhcdTRFQUVcclxuXHRcdFx0dGhpcy5yZW1vdmVBbGxUYWJsZUhpZ2hsaWdodHMoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1OUFEOFx1NEVBRVx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ1xyXG5cdFx0XHR0aGlzLmhpZ2hsaWdodFNlbGVjdGVkVGFibGUodGFibGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRvb2xiYXJFbmFibGVkKSB7XHJcblx0XHRcdFx0dGhpcy50YWJsZVRvb2xiYXIuc2V0QWN0aXZlVGFibGUodGFibGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTU5MjdcdTVDMEZcdThDMDNcdTY1NzRcdTUyOUZcdTgwRkRcclxuXHRcdFx0dGhpcy50YWJsZVJlc2l6ZXIuc2V0dXBUYWJsZVJlc2l6ZSh0YWJsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZygnXHU4ODY4XHU2ODNDXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHU1REYyXHU1OTA0XHU3NDA2Jyk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NTkwNFx1NzQwNlx1NjU4N1x1Njg2M1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG5cdCAqIEBwYXJhbSBldmVudCBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcclxuXHQgKi9cclxuXHRoYW5kbGVEb2N1bWVudENsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTcwQjlcdTUxRkJcdTY2MkZcdTU0MjZcdTU3MjhcdTVERTVcdTUxNzdcdTY4MEZcdTUxODVcclxuXHRcdFx0Y29uc3QgaXNDbGlja0luVG9vbGJhciA9IGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIE5vZGUgJiYgXHJcblx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkdmFuY2VkLXRhYmxlLXRvb2xiYXItY29udGFpbmVyJyk/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTcwQjlcdTUxRkJcdTY2MkZcdTU0MjZcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODVcclxuXHRcdFx0Y29uc3QgaXNDbGlja0luVGFibGUgPSBldmVudC50YXJnZXQgaW5zdGFuY2VvZiBOb2RlICYmIFxyXG5cdFx0XHRcdChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ3RhYmxlJykgIT09IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTcwQjlcdTUxRkJcdTRFMERcdTU3MjhcdTVERTVcdTUxNzdcdTY4MEZcdTYyMTZcdTg4NjhcdTY4M0NcdTUxODVcdUZGMENcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcclxuXHRcdFx0aWYgKCFpc0NsaWNrSW5Ub29sYmFyICYmICFpc0NsaWNrSW5UYWJsZSkge1xyXG5cdFx0XHRcdC8vIFx1NkUwNVx1OTY2NFx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVxyXG5cdFx0XHRcdGlmICh0aGlzLnRhYmxlVG9vbGJhci5hY3RpdmVUYWJsZSkge1xyXG5cdFx0XHRcdFx0dGhpcy50YWJsZVRvb2xiYXIuY2xlYXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1NTkwNFx1NzQwNlx1NjU4N1x1Njg2M1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRFxyXG5cdCAqL1xyXG5cdGFzeW5jIHNob3dDdXJyZW50VGFibGVJZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRVxyXG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0aWYgKCFhY3RpdmVWaWV3KSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcclxuXHRcdFx0Y29uc3QgaXNFZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJztcclxuXHRcdFx0XHJcblx0XHRcdGxldCB0YWJsZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChpc0VkaXRNb2RlKSB7XHJcblx0XHRcdFx0Ly8gXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHJcblx0XHRcdFx0dGFibGVJZCA9IGF3YWl0IHRoaXMubWFya2Rvd25Tb3VyY2VFZGl0b3IuZ2V0Q3VycmVudFRhYmxlSWQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTRGN0ZcdTc1MjggVGFibGVJZE1hbmFnZXIgXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcclxuXHRcdFx0XHRpZiAodGhpcy50YWJsZVRvb2xiYXIuYWN0aXZlVGFibGUpIHtcclxuXHRcdFx0XHRcdHRhYmxlSWQgPSB0aGlzLnRhYmxlSWRNYW5hZ2VyLmdldFRhYmxlSWRlbnRpZmllcih0aGlzLnRhYmxlVG9vbGJhci5hY3RpdmVUYWJsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGFibGVJZCkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoYFx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ0lEOiAke3RhYmxlSWR9YCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ0lEOicsIHRhYmxlSWQpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU4QkY3XHU3ODZFXHU0RkREXHU1MTQ5XHU2ODA3XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1XHU2MjE2XHU1REYyXHU5MDA5XHU2MkU5XHU4ODY4XHU2ODNDJyk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1NjYzRVx1NzkzQVx1NUY1M1x1NTI0RFx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NkUzMlx1NjdEM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdCAqIEBwYXJhbSB0YWJsZUVsIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG5cdCAqIEBwYXJhbSBjdHggTWFya2Rvd25cdTU5MDRcdTc0MDZcdTRFMEFcdTRFMEJcdTY1ODdcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlck1lcmdlZENlbGxzKHRhYmxlRWw6IEhUTUxUYWJsZUVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1OTA0XHU3NDA2XHU4RkM3XHJcblx0XHRcdGlmICgodGFibGVFbCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC50YWJsZU1lcmdlUHJvY2Vzc2VkID09PSAndHJ1ZScpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG5cdFx0XHRjb25zdCByYXdNYXJrZG93biA9IGN0eC5nZXRTZWN0aW9uSW5mbyh0YWJsZUVsKT8udGV4dCB8fCBodG1sVG9NYXJrZG93bih0YWJsZUVsKTtcclxuXHRcdFx0aWYgKCFyYXdNYXJrZG93bikgcmV0dXJuO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU1MTg1XHU1QkI5XHJcblx0XHRcdGNvbnN0IGxpbmVzID0gcmF3TWFya2Rvd24uc3BsaXQoJ1xcbicpO1xyXG5cdFx0XHRjb25zdCB0YWJsZUxpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkuc3RhcnRzV2l0aCgnfCcpICYmIGxpbmUudHJpbSgpLmVuZHNXaXRoKCd8JykpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwXHU2NzA5XHU2NTQ4XHU3Njg0XHU4ODY4XHU2ODNDXHU4ODRDXHVGRjBDXHU4RkQ0XHU1NkRFXHJcblx0XHRcdGlmICh0YWJsZUxpbmVzLmxlbmd0aCA8IDIpIHJldHVybjtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NzlGQlx1OTY2NFx1ODg2OFx1NTkzNFx1NTIwNlx1OTY5NFx1ODg0Q1x1RkYwOFx1N0IyQ1x1NEU4Q1x1ODg0Q1x1RkYwOVxyXG5cdFx0XHRjb25zdCBjb250ZW50TGluZXMgPSBbdGFibGVMaW5lc1swXV0uY29uY2F0KHRhYmxlTGluZXMuc2xpY2UoMikpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3RUQzXHU2Nzg0XHJcblx0XHRcdGNvbnN0IHJvd3M6IHN0cmluZ1tdW10gPSBbXTtcclxuXHRcdFx0Zm9yIChjb25zdCBsaW5lIG9mIGNvbnRlbnRMaW5lcykge1xyXG5cdFx0XHRcdGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpXHJcblx0XHRcdFx0XHQuZmlsdGVyKChfLCBpLCBhcnIpID0+IGkgPiAwICYmIGkgPCBhcnIubGVuZ3RoIC0gMSlcclxuXHRcdFx0XHRcdC5tYXAoY2VsbCA9PiBjZWxsLnRyaW0oKSk7XHJcblx0XHRcdFx0cm93cy5wdXNoKGNlbGxzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDRE9NXHU3RUQzXHU2Nzg0XHJcblx0XHRcdGNvbnN0IGRvbVJvd3MgPSB0YWJsZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcblx0XHRcdGlmIChkb21Sb3dzLmxlbmd0aCAhPT0gcm93cy5sZW5ndGgpIHJldHVybjtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NTkwNFx1NzQwNlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG5cdFx0XHRmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgcm93cy5sZW5ndGg7IHJvd0luZGV4KyspIHtcclxuXHRcdFx0XHRjb25zdCByb3dDZWxscyA9IHJvd3Nbcm93SW5kZXhdO1xyXG5cdFx0XHRcdGNvbnN0IGRvbVJvdyA9IGRvbVJvd3Nbcm93SW5kZXhdO1xyXG5cdFx0XHRcdGNvbnN0IGRvbUNlbGxzID0gZG9tUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLCB0ZCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChkb21DZWxscy5sZW5ndGggIT09IHJvd0NlbGxzLmxlbmd0aCkgY29udGludWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Zm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IHJvd0NlbGxzLmxlbmd0aDsgY29sSW5kZXgrKykge1xyXG5cdFx0XHRcdFx0Y29uc3QgY2VsbENvbnRlbnQgPSByb3dDZWxsc1tjb2xJbmRleF07XHJcblx0XHRcdFx0XHRjb25zdCBkb21DZWxsID0gZG9tQ2VsbHNbY29sSW5kZXhdIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBcdTU5MDRcdTc0MDZcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcclxuXHRcdFx0XHRcdGlmICgoY2VsbENvbnRlbnQgPT09ICc8JyB8fCBjZWxsQ29udGVudCA9PT0gJ1xcXFw8JyB8fCBcclxuXHRcdFx0XHRcdFx0IGNlbGxDb250ZW50ID09PSAnIDwgJyB8fCBjZWxsQ29udGVudCA9PT0gJyBcXFxcPCAnKSAmJiBjb2xJbmRleCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbGVmdENlbGwgPSBkb21DZWxsc1tjb2xJbmRleCAtIDFdIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRsZWZ0Q2VsbC5jb2xTcGFuID0gKGxlZnRDZWxsLmNvbFNwYW4gfHwgMSkgKyAxO1xyXG5cdFx0XHRcdFx0XHRkb21DZWxsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdTRFODZcdTgxRUFcdTUyQThcdTVDNDVcdTRFMkRcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzKSB7XHJcblx0XHRcdFx0XHRcdFx0bGVmdENlbGwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcblx0XHRcdFx0XHRcdFx0bGVmdENlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcdTdDN0JcclxuXHRcdFx0XHRcdFx0bGVmdENlbGwuY2xhc3NMaXN0LmFkZCgnb2JzLW1lcmdlZC1jZWxsJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBcdTU5MDRcdTc0MDZcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcclxuXHRcdFx0XHRcdGVsc2UgaWYgKChjZWxsQ29udGVudCA9PT0gJ14nIHx8IGNlbGxDb250ZW50ID09PSAnXFxcXF4nIHx8IFxyXG5cdFx0XHRcdFx0XHRcdCAgY2VsbENvbnRlbnQgPT09ICcgXiAnIHx8IGNlbGxDb250ZW50ID09PSAnIFxcXFxeICcpICYmIHJvd0luZGV4ID4gMCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhYm92ZVJvdyA9IGRvbVJvd3Nbcm93SW5kZXggLSAxXTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWJvdmVDZWxscyA9IGFib3ZlUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLCB0ZCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGNvbEluZGV4IDwgYWJvdmVDZWxscy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBhYm92ZUNlbGwgPSBhYm92ZUNlbGxzW2NvbEluZGV4XSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRhYm92ZUNlbGwucm93U3BhbiA9IChhYm92ZUNlbGwucm93U3BhbiB8fCAxKSArIDE7XHJcblx0XHRcdFx0XHRcdFx0ZG9tQ2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFxyXG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscykge1xyXG5cdFx0XHRcdFx0XHRcdFx0YWJvdmVDZWxsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG5cdFx0XHRcdFx0XHRcdFx0YWJvdmVDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcblx0XHRcdFx0XHRcdFx0YWJvdmVDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY4MDdcdThCQjBcdTg4NjhcdTY4M0NcdTRFM0FcdTVERjJcdTU5MDRcdTc0MDZcclxuXHRcdFx0KHRhYmxlRWwgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQudGFibGVNZXJnZVByb2Nlc3NlZCA9ICd0cnVlJztcclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKCdcdTVERjJcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1NkUzMlx1NjdEM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1OEJGQlx1NTNENlx1ODg2OFx1NjgzQ0lEXHJcblx0ICogXHU4RkQ5XHU2NjJGXHU0RTAwXHU0RTJBXHU2NkY0XHU1M0VGXHU5NzYwXHU3Njg0XHU2NUI5XHU2Q0Q1XHVGRjBDXHU1NkUwXHU0RTNBXHU1QjgzXHU0RTBEXHU0RjlEXHU4RDU2XHU0RThFRE9NXHU3RUQzXHU2Nzg0XHJcblx0ICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG5cdCAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nIHwgbnVsbD5cclxuXHQgKi9cclxuXHRhc3luYyByZWFkVGFibGVJZEZyb21NYXJrZG93bih0YWJsZTogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIDEuIFx1OTk5Nlx1NTE0OFx1NUMxRFx1OEJENVx1NEVDRVx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NzY4NGRhdGEtdGFibGUtaWRcdTVDNUVcdTYwMjdcdTgzQjdcdTUzRDZJRFxyXG5cdFx0XHRjb25zdCBleGlzdGluZ0lkID0gdGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcblx0XHRcdGlmIChleGlzdGluZ0lkKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coYFx1NEVDRVx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NUM1RVx1NjAyN1x1NEUyRFx1ODNCN1x1NTNENklEOiAke2V4aXN0aW5nSWR9YCk7XHJcblx0XHRcdFx0cmV0dXJuIGV4aXN0aW5nSWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRVxyXG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0aWYgKCFhY3RpdmVWaWV3KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRScpO1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTY1ODdcdTRFRjZcclxuXHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTY1ODdcdTRFRjYnKTtcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coYFx1NUMxRFx1OEJENVx1NEVDRVx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NEUyRFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEOiAke2FjdGl2ZUZpbGUucGF0aH1gKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxyXG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG5cdFx0XHRjb25zdCB0YWJsZUZlYXR1cmUgPSB0aGlzLnRhYmxlSWRNYW5hZ2VyLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGUpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxOmAsIHRhYmxlRmVhdHVyZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjNEMFx1NTNENlx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG5cdFx0XHRjb25zdCB0YWJsZUluZm9zID0gdGhpcy50YWJsZUlkTWFuYWdlci5leHRyYWN0VGFibGVJZHNGcm9tTWFya2Rvd24oY29udGVudCk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGBcdTRFQ0VcdTY1ODdcdTRFRjZcdTRFMkRcdTYzRDBcdTUzRDZcdTc2ODRcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkY6YCwgdGFibGVJbmZvcyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTU3MjhET01cdTRFMkRcdTc2ODRcdTRGNERcdTdGNkVcclxuXHRcdFx0Y29uc3QgYWxsVGFibGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpKTtcclxuXHRcdFx0Y29uc3QgdGFibGVJbmRleCA9IGFsbFRhYmxlcy5pbmRleE9mKHRhYmxlIGFzIEhUTUxUYWJsZUVsZW1lbnQpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU1NzI4RE9NXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFOiBcdTdCMkMke3RhYmxlSW5kZXh9XHU0RTJBXHU4ODY4XHU2ODNDXHVGRjA4XHU1MTcxJHthbGxUYWJsZXMubGVuZ3RofVx1NEUyQVx1RkYwOWApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU3NkY4XHU0RjNDXHU1RUE2XHU5NjA4XHU1MDNDXHJcblx0XHRcdGNvbnN0IHNpbWlsYXJpdHlUaHJlc2hvbGQgPSB0aGlzLnNldHRpbmdzLmZlYXR1cmVTaW1pbGFyaXR5VGhyZXNob2xkIHx8IDAuNztcclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjgzOVx1NjM2RVx1OEJCRVx1N0Y2RVx1NTFCM1x1NUI5QVx1NTMzOVx1OTE0RFx1OTg3QVx1NUU4RlxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcmVmZXJGZWF0dXJlTWF0Y2hpbmcpIHtcclxuXHRcdFx0XHQvLyBcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyAxLiBcdTk5OTZcdTUxNDhcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcclxuXHRcdFx0XHRpZiAodGFibGVGZWF0dXJlKSB7XHJcblx0XHRcdFx0XHRsZXQgYmVzdE1hdGNoSWQgPSAnJztcclxuXHRcdFx0XHRcdGxldCBiZXN0TWF0Y2hTY29yZSA9IDA7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgeyBpZCwgZmVhdHVyZSB9IG9mIHRhYmxlSW5mb3MpIHtcclxuXHRcdFx0XHRcdFx0aWYgKCFpZCkgY29udGludWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBzY29yZSA9IHRoaXMudGFibGVJZE1hbmFnZXIuY2FsY3VsYXRlRmVhdHVyZVNpbWlsYXJpdHkodGFibGVGZWF0dXJlLCBmZWF0dXJlKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ0lEICR7aWR9IFx1NzY4NFx1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNjogJHtzY29yZS50b0ZpeGVkKDIpfWApO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHNjb3JlID4gYmVzdE1hdGNoU2NvcmUpIHtcclxuXHRcdFx0XHRcdFx0XHRiZXN0TWF0Y2hTY29yZSA9IHNjb3JlO1xyXG5cdFx0XHRcdFx0XHRcdGJlc3RNYXRjaElkID0gaWQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU4QkJFXHU3RjZFXHU0RTJEXHU3Njg0XHU3NkY4XHU0RjNDXHU1RUE2XHU5NjA4XHU1MDNDXHJcblx0XHRcdFx0XHRpZiAoYmVzdE1hdGNoSWQgJiYgYmVzdE1hdGNoU2NvcmUgPiBzaW1pbGFyaXR5VGhyZXNob2xkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTZcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtiZXN0TWF0Y2hJZH1cdUZGMDhcdTc2RjhcdTRGM0NcdTVFQTY6ICR7YmVzdE1hdGNoU2NvcmUudG9GaXhlZCgyKX1cdUZGMDlgKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1QzA2SURcdTRGRERcdTVCNThcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcdUZGMENcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTRGN0ZcdTc1MjhcclxuXHRcdFx0XHRcdFx0dGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgYmVzdE1hdGNoSWQpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYmVzdE1hdGNoSWQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIDIuIFx1NTk4Mlx1Njc5Q1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFx1NTkzMVx1OEQyNVx1RkYwQ1x1NUMxRFx1OEJENVx1OTAxQVx1OEZDN1x1NEY0RFx1N0Y2RVx1NTMzOVx1OTE0RFxyXG5cdFx0XHRcdGlmICh0YWJsZUluZGV4ICE9PSAtMSAmJiB0YWJsZUluZGV4IDwgdGFibGVJbmZvcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHsgaWQgfSA9IHRhYmxlSW5mb3NbdGFibGVJbmRleF07XHJcblx0XHRcdFx0XHRpZiAoaWQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1OTAxQVx1OEZDN1x1NEY0RFx1N0Y2RVx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG5cdFx0XHRcdFx0XHQvLyBcdTVDMDZJRFx1NEZERFx1NUI1OFx1NTIzMFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NEUwQVx1RkYwQ1x1NEVFNVx1NEZCRlx1NTQwRVx1N0VFRFx1NEY3Rlx1NzUyOFxyXG5cdFx0XHRcdFx0XHR0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBpZCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBpZDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gXHU5RUQ4XHU4QkE0XHU5ODdBXHU1RThGXHVGRjFBXHU1MTQ4XHU0RjREXHU3RjZFXHU1MzM5XHU5MTREXHVGRjBDXHU1MThEXHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gMS4gXHU5OTk2XHU1MTQ4XHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU0RjREXHU3RjZFXHU3Q0JFXHU3ODZFXHU1MzM5XHU5MTREXHJcblx0XHRcdFx0aWYgKHRhYmxlSW5kZXggIT09IC0xICYmIHRhYmxlSW5kZXggPCB0YWJsZUluZm9zLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgeyBpZCB9ID0gdGFibGVJbmZvc1t0YWJsZUluZGV4XTtcclxuXHRcdFx0XHRcdGlmIChpZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgXHU5MDFBXHU4RkM3XHU0RjREXHU3RjZFXHU3Q0JFXHU3ODZFXHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcblx0XHRcdFx0XHRcdC8vIFx1NUMwNklEXHU0RkREXHU1QjU4XHU1MjMwXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHVGRjBDXHU0RUU1XHU0RkJGXHU1NDBFXHU3RUVEXHU0RjdGXHU3NTI4XHJcblx0XHRcdFx0XHRcdHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIGlkKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGlkO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyAyLiBcdTU5ODJcdTY3OUNcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcdTU5MzFcdThEMjVcdUZGMENcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcclxuXHRcdFx0XHRpZiAodGFibGVGZWF0dXJlKSB7XHJcblx0XHRcdFx0XHRsZXQgYmVzdE1hdGNoSWQgPSAnJztcclxuXHRcdFx0XHRcdGxldCBiZXN0TWF0Y2hTY29yZSA9IDA7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgeyBpZCwgZmVhdHVyZSB9IG9mIHRhYmxlSW5mb3MpIHtcclxuXHRcdFx0XHRcdFx0aWYgKCFpZCkgY29udGludWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBzY29yZSA9IHRoaXMudGFibGVJZE1hbmFnZXIuY2FsY3VsYXRlRmVhdHVyZVNpbWlsYXJpdHkodGFibGVGZWF0dXJlLCBmZWF0dXJlKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ0lEICR7aWR9IFx1NzY4NFx1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNjogJHtzY29yZS50b0ZpeGVkKDIpfWApO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHNjb3JlID4gYmVzdE1hdGNoU2NvcmUpIHtcclxuXHRcdFx0XHRcdFx0XHRiZXN0TWF0Y2hTY29yZSA9IHNjb3JlO1xyXG5cdFx0XHRcdFx0XHRcdGJlc3RNYXRjaElkID0gaWQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU4QkJFXHU3RjZFXHU0RTJEXHU3Njg0XHU3NkY4XHU0RjNDXHU1RUE2XHU5NjA4XHU1MDNDXHJcblx0XHRcdFx0XHRpZiAoYmVzdE1hdGNoSWQgJiYgYmVzdE1hdGNoU2NvcmUgPiBzaW1pbGFyaXR5VGhyZXNob2xkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTc2RjhcdTRGM0NcdTVFQTZcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtiZXN0TWF0Y2hJZH1cdUZGMDhcdTc2RjhcdTRGM0NcdTVFQTY6ICR7YmVzdE1hdGNoU2NvcmUudG9GaXhlZCgyKX1cdUZGMDlgKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1QzA2SURcdTRGRERcdTVCNThcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcdUZGMENcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTRGN0ZcdTc1MjhcclxuXHRcdFx0XHRcdFx0dGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgYmVzdE1hdGNoSWQpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYmVzdE1hdGNoSWQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyAzLiBcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcdTUzMzlcdTkxNERcdUZGMDhcdTg4NENcdTY1NzBcdTU0OENcdTUyMTdcdTY1NzBcdUZGMDlcclxuXHRcdFx0aWYgKHRhYmxlRmVhdHVyZSkge1xyXG5cdFx0XHRcdGZvciAoY29uc3QgeyBpZCwgZmVhdHVyZSB9IG9mIHRhYmxlSW5mb3MpIHtcclxuXHRcdFx0XHRcdGlmICghaWQpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTg4NENcdTY1NzBcdTU0OENcdTUyMTdcdTY1NzBcdTkwRkRcdTUzMzlcdTkxNERcclxuXHRcdFx0XHRcdGlmIChmZWF0dXJlLnJvd3MgPT09IHRhYmxlRmVhdHVyZS5yb3dzICYmIGZlYXR1cmUuY29scyA9PT0gdGFibGVGZWF0dXJlLmNvbHMpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFx1OTAxQVx1OEZDN1x1ODg2OFx1NjgzQ1x1N0VEM1x1Njc4NFx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG5cdFx0XHRcdFx0XHQvLyBcdTVDMDZJRFx1NEZERFx1NUI1OFx1NTIzMFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFx1NEUwQVx1RkYwQ1x1NEVFNVx1NEZCRlx1NTQwRVx1N0VFRFx1NEY3Rlx1NzUyOFxyXG5cdFx0XHRcdFx0XHR0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBpZCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBpZDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIDQuIFx1NTk4Mlx1Njc5Q1x1NjI0MFx1NjcwOVx1NTMzOVx1OTE0RFx1OTBGRFx1NTkzMVx1OEQyNVx1RkYwQ1x1NEY0Nlx1ODg2OFx1NjgzQ0lEXHU1MjlGXHU4MEZEXHU1REYyXHU1NDJGXHU3NTI4XHVGRjBDXHU1MjE5XHU3NTFGXHU2MjEwXHU2NUIwSURcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlVGFibGVJZHMpIHtcclxuXHRcdFx0XHRjb25zdCBuZXdJZCA9IHRoaXMudGFibGVJZE1hbmFnZXIuZ2VuZXJhdGVUYWJsZUlkKCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coYFx1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU3NTFGXHU2MjEwXHU2NUIwSUQ6ICR7bmV3SWR9YCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gXHU1QzA2SURcdTRGRERcdTVCNThcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcdUZGMENcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTRGN0ZcdTc1MjhcclxuXHRcdFx0XHR0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBuZXdJZCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuIG5ld0lkO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTc5ODFcdTc1MjhcdTRFODZcdTg4NjhcdTY4M0NJRFx1NTI5Rlx1ODBGRFx1RkYwQ1x1NTIxOVx1OEZENFx1NTZERW51bGxcclxuXHRcdFx0Y29uc29sZS5sb2coJ1x1NjcyQVx1NTcyOE1hcmtkb3duXHU1MTg1XHU1QkI5XHU0RTJEXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdUZGMENcdTRFMTRcdTg4NjhcdTY4M0NJRFx1NTI5Rlx1ODBGRFx1NURGMlx1Nzk4MVx1NzUyOCcpO1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1NEVDRU1hcmtkb3duXHU1MTg1XHU1QkI5XHU4QkZCXHU1M0Q2XHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0XHJcblx0LyoqXHJcblx0ICogXHU4QkJFXHU3RjZFXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHU1M0Q4XHU1MzE2XHU3NkQxXHU1NDJDXHJcblx0ICovXHJcblx0c2V0dXBWaWV3TW9kZUNoYW5nZUxpc3RlbmVyKCk6IHZvaWQge1xyXG5cdFx0Ly8gXHU3OUZCXHU5NjY0XHU1M0VGXHU4MEZEXHU1QjU4XHU1NzI4XHU3Njg0XHU2NUU3XHU3NkQxXHU1NDJDXHU1NjY4XHJcblx0XHRpZiAodGhpcy52aWV3TW9kZUNoYW5nZUhhbmRsZXIpIHtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9mZignYWN0aXZlLWxlYWYtY2hhbmdlJywgdGhpcy52aWV3TW9kZUNoYW5nZUhhbmRsZXIpO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub2ZmKCdsYXlvdXQtY2hhbmdlJywgdGhpcy52aWV3TW9kZUNoYW5nZUhhbmRsZXIpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTU5MDRcdTc0MDZcdTUxRkRcdTY1NzBcclxuXHRcdHRoaXMudmlld01vZGVDaGFuZ2VIYW5kbGVyID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNoZWNrQW5kUmVuZGVyVGFibGVzKCk7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyBcdTZDRThcdTUxOENcdTc2RDFcdTU0MkNcdTU2NjhcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCB0aGlzLnZpZXdNb2RlQ2hhbmdlSGFuZGxlcilcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgdGhpcy52aWV3TW9kZUNoYW5nZUhhbmRsZXIpXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRjb25zb2xlLmxvZyhcIlx1NURGMlx1OEJCRVx1N0Y2RVx1ODlDNlx1NTZGRVx1NkEyMVx1NUYwRlx1NTNEOFx1NTMxNlx1NzZEMVx1NTQyQ1x1NTY2OFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlx1NUU3Nlx1NTcyOFx1OTcwMFx1ODk4MVx1NjVGNlx1NkUzMlx1NjdEM1x1ODg2OFx1NjgzQ1xyXG5cdCAqL1xyXG5cdGNoZWNrQW5kUmVuZGVyVGFibGVzKCk6IHZvaWQge1xyXG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xyXG5cdFx0XHJcblx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcclxuXHRcdGNvbnN0IGlzUHJldmlld01vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3ByZXZpZXcnO1xyXG5cdFx0XHJcblx0XHQvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdUZGMENcdTRFMTRcdTRFMEVcdTRFMEFcdTZCMjFcdTcyQjZcdTYwMDFcdTRFMERcdTU0MENcdUZGMENcdTg5RTZcdTUzRDFcdTZFMzJcdTY3RDNcclxuXHRcdGlmIChpc1ByZXZpZXdNb2RlICYmICF0aGlzLmxhc3RQcmV2aWV3TW9kZVN0YXRlKSB7XHJcblx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERERPTVx1NURGMlx1NUI4Q1x1NTE2OFx1NTJBMFx1OEY3RFxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRyZW5kZXJUYWJsZXNXaXRoU3RvcmVkU3R5bGVzKHRoaXMpO1xyXG5cdFx0XHR9LCAzMDApO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBcdThCQjBcdTVGNTVcdTVGNTNcdTUyNERcdTcyQjZcdTYwMDFcclxuXHRcdHRoaXMubGFzdFByZXZpZXdNb2RlU3RhdGUgPSBpc1ByZXZpZXdNb2RlO1xyXG5cdH1cclxufVxyXG5cclxuLy8gXHU5RUQ4XHU4QkE0XHU1QkZDXHU1MUZBXHU2M0QyXHU0RUY2XHU3QzdCXHJcbmV4cG9ydCBkZWZhdWx0IE9ic2lkaWFuU3ByZWFkc2hlZXQ7XHJcbiIsICJpbXBvcnQgeyBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBBcHAsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hlZXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIgXHJcbntcclxuXHRwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIFxyXG5cdHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIFxyXG5cdHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBZHZhbmNlZCBUYWJsZSBYVCBcdThCQkVcdTdGNkUnIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1MzlGXHU3NTFGXHU4ODY4XHU2ODNDXHU1NDBFXHU1OTA0XHU3NDA2JylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTQyRlx1NzUyOFx1NkI2NFx1OEJCRVx1N0Y2RVx1NEVFNVx1NEY3Rlx1NzUyOE9ic2lkaWFuIFNoZWV0c1x1NzY4NFx1NkUzMlx1NjdEM1x1NTY2OCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXRpdmVQcm9jZXNzaW5nKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXRpdmVQcm9jZXNzaW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yIHdvcmtzcGFjZS5hY3RpdmVMZWFmIGlzIGRlcHJlY2F0ZWQgYW5kIHRoZSBmb2xsb3dpbmcgXHJcblx0XHRcdFx0XHRcdC8vIGxpbmUgaXMgcHJlZmVyZWQgYnV0IHRoZSBmb2xsb3dpbmcgbGluZSBkb2VzIG5vdCBhY3R1YWxseSB3b3JrIG9uIG15IFxyXG5cdFx0XHRcdFx0XHQvLyBtYWNoaW5lIHNvIGRlcHJlY2F0ZWQgaXQgaXMgSSBndWVzc1xyXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZj8ucmVidWlsZFZpZXcoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8ucHJldmlld01vZGUucmVyZW5kZXIodHJ1ZSk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1NzI4XHU1MzU1XHU1MTQzXHU2ODNDXHU0RTJEXHU0RjdGXHU3NTI4XHU2QkI1XHU4NDNEJylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTQyRlx1NzUyOFx1NkI2NFx1OEJCRVx1N0Y2RVx1NEVFNVx1NTcyOFx1ODg2OFx1NjgzQ1x1NTM1NVx1NTE0M1x1NjgzQ1x1NEUyRFx1NEY3Rlx1NzUyOFx1NkJCNVx1ODQzRCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYXJhZ3JhcGhzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYXJhZ3JhcGhzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yIHdvcmtzcGFjZS5hY3RpdmVMZWFmIGlzIGRlcHJlY2F0ZWQgYW5kIHRoZSBmb2xsb3dpbmcgXHJcblx0XHRcdFx0XHRcdC8vIGxpbmUgaXMgcHJlZmVyZWQgYnV0IHRoZSBmb2xsb3dpbmcgbGluZSBkb2VzIG5vdCBhY3R1YWxseSB3b3JrIG9uIG15IFxyXG5cdFx0XHRcdFx0XHQvLyBtYWNoaW5lIHNvIGRlcHJlY2F0ZWQgaXQgaXMgSSBndWVzc1xyXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZj8ucmVidWlsZFZpZXcoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8ucHJldmlld01vZGUucmVyZW5kZXIodHJ1ZSk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NURFNVx1NTE3N1x1NjgwRlx1OEJCRVx1N0Y2RScgfSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1NDJGXHU3NTI4XHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGJylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTQyRlx1NzUyOFx1NjIxNlx1Nzk4MVx1NzUyOFx1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRlx1NTI5Rlx1ODBGRCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b29sYmFyRW5hYmxlZClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbGJhckVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5jcmVhdGVUb29sYmFyKCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gXHU3OUZCXHU5NjY0XHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkdmFuY2VkLXRhYmxlLXRvb2xiYXItY29udGFpbmVyJykuZm9yRWFjaChjb250YWluZXIgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NjRDRFx1NEY1QycgfSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1NDJGXHU3NTI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2NENEXHU0RjVDJylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTE0MVx1OEJCOFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NzZGNFx1NjNBNVx1NEZFRVx1NjUzOSBNYXJrZG93biBcdTZFOTBcdTc4MDFcdTRFMkRcdTc2ODRcdTg4NjhcdTY4M0MnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3NicgfSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1NDJGXHU3NTI4XHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2JylcclxuXHRcdFx0LnNldERlc2MoJ1x1NTQyRlx1NzUyOFx1NEY3Rlx1NzUyOCA8IFx1NTQ4QyBeIFx1NjgwN1x1OEJCMFx1OEZEQlx1ODg0Q1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTQwOFx1NUU3Nlx1NzY4NFx1NTI5Rlx1ODBGRCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDZWxsTWVyZ2luZylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ2VsbE1lcmdpbmcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LnByZXZpZXdNb2RlLnJlcmVuZGVyKHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTQwOFx1NUU3Nlx1OTc1RVx1N0E3QVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1Nzg2RVx1OEJBNCcpXHJcblx0XHRcdC5zZXREZXNjKCdcdTVGNTNcdTU0MDhcdTVFNzZcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjlcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTY2M0VcdTc5M0FcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDYnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpXHJcblx0XHRcdC5zZXREZXNjKCdcdTgxRUFcdTUyQThcdTVDMDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTRFMkRcdTc2ODRcdTUxODVcdTVCQjlcdTVDNDVcdTRFMkRcdTY2M0VcdTc5M0EnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LnByZXZpZXdNb2RlLnJlcmVuZGVyKHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTg4NjhcdTY4M0NJRFx1OEJCRVx1N0Y2RScgfSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU1NDJGXHU3NTI4XHU4ODY4XHU2ODNDSUQnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU4MUVBXHU1MkE4XHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSURcdTRGNUNcdTRFM0FIVE1MXHU2Q0U4XHU5MUNBJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVRhYmxlSWRzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVUYWJsZUlkcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTRGN0ZcdTc1MjhcdTg4NjhcdTY4M0NcdTZDRThcdTkxQ0FcdTU5MzlcdTZBMjFcdTVGMEYnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1NzI4XHU4ODY4XHU2ODNDXHU1MjREXHU1NDBFXHU2REZCXHU1MkEwXHU5MTREXHU1QkY5XHU3Njg0SFRNTFx1NkNFOFx1OTFDQVx1RkYwQ1x1NUY2Mlx1NjIxMFwiXHU2Q0U4XHU5MUNBXHU1OTM5XCJcdUZGMENcdTYzRDBcdTlBRDhcdTg4NjhcdTY4M0NJRFx1OEJDNlx1NTIyQlx1NzY4NFx1NTFDNlx1Nzg2RVx1NjAyNycpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VUYWJsZVdyYXBwZXJDb21tZW50cylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlVGFibGVXcmFwcGVyQ29tbWVudHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU4ODY4XHU2ODNDSURcdTUyNERcdTdGMDAnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU3NTFGXHU2MjEwXHU3Njg0XHU4ODY4XHU2ODNDSURcdTUyNERcdTdGMDAnKVxyXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWRQcmVmaXgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlkUHJlZml4ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RFx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQycpXHJcblx0XHRcdC5zZXREZXNjKCdcdTVGNTNcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcdTg4NjhcdTY4M0NcdTY1RjZcdUZGMENcdTk3MDBcdTg5ODFcdThGQkVcdTUyMzBcdTc2ODRcdTY3MDBcdTVDMEZcdTc2RjhcdTRGM0NcdTVFQTZcdUZGMDgwLTFcdTRFNEJcdTk1RjRcdUZGMENcdTlFRDhcdThCQTQwLjdcdUZGMDknKVxyXG5cdFx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiBcclxuXHRcdFx0XHRzbGlkZXJcclxuXHRcdFx0XHRcdC5zZXRMaW1pdHMoMC41LCAxLjAsIDAuMDUpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmVhdHVyZVNpbWlsYXJpdHlUaHJlc2hvbGQgfHwgMC43KVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZlYXR1cmVTaW1pbGFyaXR5VGhyZXNob2xkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NTMzOVx1OTE0RCcpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTU0MEVcdUZGMENcdTVDMDZcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTcyNzlcdTVGODFcdTUzMzlcdTkxNERcdTgwMENcdTk3NUVcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcdTY3NjVcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJGZWF0dXJlTWF0Y2hpbmcgfHwgZmFsc2UpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZlckZlYXR1cmVNYXRjaGluZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU2NTcwXHU2MzZFXHU1QjU4XHU1MEE4XHU4QkJFXHU3RjZFJyB9KTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTY1ODdcdTRFRjZcdTVCNThcdTUwQTgnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU1NDJGXHU3NTI4XHU1NDBFXHVGRjBDXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1QzA2XHU0RjE4XHU1MTQ4XHU1QjU4XHU1MEE4XHU1NzI4TWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdUZGMENcdTgwMENcdTRFMERcdTY2MkZkYXRhLmpzb25cdTY1ODdcdTRFRjZcdTRFMkQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZmVyRmlsZVN0b3JhZ2UgfHwgZmFsc2UpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4gXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZlckZpbGVTdG9yYWdlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1ODFFQVx1NTJBOFx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU0MkZcdTc1MjhcdTU0MEVcdUZGMENcdTUzNzNcdTRGN0ZcdTRGN0ZcdTc1MjhkYXRhLmpzb25cdTVCNThcdTUwQThcdTY1NzBcdTYzNkVcdUZGMENcdTRFNUZcdTRGMUFcdTgxRUFcdTUyQThcdTVDMDZcdTY1NzBcdTYzNkVcdTVCRkNcdTUxRkFcdTUyMzBNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvRXhwb3J0VG9GaWxlIHx8IGZhbHNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvRXhwb3J0VG9GaWxlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IE9ic2lkaWFuU3ByZWFkc2hlZXQgfSBmcm9tICdtYWluJztcclxuaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0TWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCxcclxuXHRNYXJrZG93blJlbmRlckNoaWxkLFxyXG5cdE1hcmtkb3duUmVuZGVyZXIsXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IFByb3BlcnRpZXMgfSBmcm9tICdjc3N0eXBlJztcclxuaW1wb3J0ICogYXMgSlNPTjUgZnJvbSAnanNvbjUnO1xyXG5cclxuLy8gVE9ETzogTW92ZSB0aGVzZSB0byBzZXR0aW5nc1xyXG5jb25zdCBNRVJHRV9VUF9TSUdOSUZJRVIgPSAnXicsXHJcblx0TUVSR0VfTEVGVF9TSUdOSUZJRVIgPSAnPCcsXHJcblx0SEVBREVSX0RFTElNRVRFUiA9ICctJyxcclxuXHRNRVRBX0RFTElNRVRFUiA9ICctLS0nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2hlZXRNZXRhRGF0YSB7XHJcblx0Y2xhc3NlczogeyBba2V5OiBzdHJpbmddOiBQcm9wZXJ0aWVzIH07XHJcblx0bG9nOiBib29sZWFuO1xyXG59XHJcblxyXG50eXBlIGdyb3VwU3R5bGVzID0ge1xyXG5cdGNsYXNzZXM6IHN0cmluZ1tdXHJcblx0c3R5bGVzOiBQcm9wZXJ0aWVzXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaGVldEVsZW1lbnQgZXh0ZW5kcyBNYXJrZG93blJlbmRlckNoaWxkIHtcclxuXHRwcml2YXRlIG5ld0xpbmVSRTogUmVnRXhwO1xyXG5cdHByaXZhdGUgY2VsbEJvcmRlclJFOiBSZWdFeHA7XHJcblx0cHJpdmF0ZSBtZXRhUkU6IFJlZ0V4cDtcclxuXHRwcml2YXRlIGhlYWRlclJFOiBSZWdFeHA7XHJcblx0cHJpdmF0ZSBjb250ZW50R3JpZDogc3RyaW5nW11bXTtcclxuXHRwcml2YXRlIG1ldGFkYXRhOiBQYXJ0aWFsPElTaGVldE1ldGFEYXRhPjtcclxuXHRwcml2YXRlIHN0eWxlczogUmVjb3JkPHN0cmluZywgUHJvcGVydGllcz47XHJcblx0cHJpdmF0ZSBnbG9iYWxTdHlsZTogUHJvcGVydGllcyA9IHt9O1xyXG5cdHByaXZhdGUgY2VsbE1heExlbmd0aCA9IDA7XHJcblx0cHJpdmF0ZSByb3dNYXhMZW5ndGggPSAwO1xyXG5cdHByaXZhdGUgaGVhZGVyUm93OiBudW1iZXI7XHJcblx0cHJpdmF0ZSBoZWFkZXJDb2w6IG51bWJlcjtcclxuXHRwcml2YXRlIHJvd1N0eWxlczogZ3JvdXBTdHlsZXNbXSA9IFtdO1xyXG5cdHByaXZhdGUgY29sU3R5bGVzOiBncm91cFN0eWxlc1tdID0gW107XHJcblx0cHJpdmF0ZSB0YWJsZTogSFRNTFRhYmxlRWxlbWVudDtcclxuXHRwcml2YXRlIHRhYmxlSGVhZDogSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0YWJsZUJvZHk6IEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xyXG5cdHByaXZhdGUgZG9tR3JpZDogSFRNTFRhYmxlQ2VsbEVsZW1lbnRbXVtdID0gW107XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBlbDogSFRNTFRhYmxlRWxlbWVudCxcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc291cmNlOiBzdHJpbmcsXHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCxcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCxcclxuXHQpIHtcclxuXHRcdHN1cGVyKGVsKTtcclxuXHRcdC8vIFRPRE86IEhhbmRsZSBzZXR0aW5ncyBoZXJlIC0+IG1vdmUgOjExLTEyXHJcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdHRoaXMubWV0YVJFID0gbmV3IFJlZ0V4cChTdHJpbmcucmF3YF4ke01FVEFfREVMSU1FVEVSfVxccyo/KD86figuKj8pKT9cXHMqP1xcbitgLCAnbWcnKTtcclxuXHRcdHRoaXMubmV3TGluZVJFID0gbmV3IFJlZ0V4cChTdHJpbmcucmF3YFxcbmApO1xyXG5cdFx0dGhpcy5jZWxsQm9yZGVyUkUgPSBuZXcgUmVnRXhwKFN0cmluZy5yYXdgKD88IVxcXFwpXFx8YCk7XHJcblx0XHR0aGlzLmhlYWRlclJFID0gbmV3IFJlZ0V4cChTdHJpbmcucmF3YF5cXHMqPyg6KT8oPzoke0hFQURFUl9ERUxJTUVURVJ9KSs/KDopP1xccyo/KD86KD88IVxcXFwpfiguKj8pKT8kYCk7XHJcblxyXG5cdFx0Ly8gUGFyc2UgY29kZSBibG9jayBpbnB1dFxyXG5cdFx0dGhpcy5wYXJzZUlucHV0VG9HcmlkKCk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgZ3JpZCBpcyB2YWxpZCAoZXZlcnkgbGluZSBzdGFydHMgYW5kIGVuZHMgd2l0aCBgfGApXHJcblx0XHR0aGlzLnZhbGlkYXRlSW5wdXQoKTtcclxuXHJcblx0XHQvLyBGaW5kIGFuZCBmaXggZ3JpZCBkaW1lbnNpb25zXHJcblx0XHR0aGlzLm5vcm1hbGl6ZUdyaWQoKTtcclxuXHJcblx0XHQvLyBTdGFydCBidWlsZGluZyBET00gZWxlbWVudFxyXG5cdFx0dGhpcy50YWJsZSA9IHRoaXMuZWw7XHJcblx0XHR0aGlzLnRhYmxlLmlkID0gJ29ic2lkaWFuLXNoZWV0cy1wYXJzZWQnO1xyXG5cdFx0dGhpcy50YWJsZUhlYWQgPSB0aGlzLnRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xyXG5cdFx0dGhpcy50YWJsZUJvZHkgPSB0aGlzLnRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xyXG5cclxuXHRcdC8vIEZpbmQgaGVhZGVyIGJvdW5kYXJpZXNcclxuXHRcdHRoaXMuZ2V0SGVhZGVyQm91bmRhcmllcygpO1xyXG5cclxuXHRcdC8vIEZpbmQgaGVhZGVyIHN0eWxlc1xyXG5cdFx0dGhpcy5nZXRIZWFkZXJTdHlsZXMoKTtcclxuXHJcblx0XHQvLyBCdWlsZCBjZWxscyBpbnRvIERPTVxyXG5cdFx0dGhpcy5idWlsZERvbVRhYmxlKCk7XHJcblxyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpc0dyaWQpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7IH1cclxuXHJcblx0ZGlzcGxheUVycm9yKGVycm9yPzogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmVsLmNyZWF0ZURpdih7XHJcblx0XHRcdHRleHQ6IGBcXG5FcnJvcjogXFxgJHtlcnJvcn1cXGBcXG5cXG5gLFxyXG5cdFx0XHRjbHM6ICdvYnMtc2hlZXRzX2Vycm9yJyxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy51bmxvYWQoKTtcclxuXHR9XHJcblxyXG5cdHBhcnNlSW5wdXRUb0dyaWQoKSB7XHJcblx0XHRpZiAoIXRoaXMubWV0YVJFLnRlc3QodGhpcy5zb3VyY2UpKSByZXR1cm4gdGhpcy5jb250ZW50R3JpZCA9XHJcblx0XHRcdHRoaXMuc291cmNlLnNwbGl0KHRoaXMubmV3TGluZVJFKVxyXG5cdFx0XHRcdC5maWx0ZXIoKHJvdykgPT4gdGhpcy5jZWxsQm9yZGVyUkUudGVzdChyb3cpKVxyXG5cdFx0XHRcdC5tYXAoKHJvdykgPT4gcm93LnNwbGl0KHRoaXMuY2VsbEJvcmRlclJFKVxyXG5cdFx0XHRcdFx0Lm1hcChjZWxsID0+IGNlbGwudHJpbSgpKSk7XHJcblxyXG5cdFx0Y29uc3QgW21ldGEsIHVucGFyc2VkU3R5bGUsIHNvdXJjZV0gPSB0aGlzLnNvdXJjZS5zcGxpdCh0aGlzLm1ldGFSRSk7XHJcblxyXG5cdFx0dGhpcy5wYXJzZU1ldGFkYXRhKG1ldGEpO1xyXG5cclxuXHRcdGlmICh1bnBhcnNlZFN0eWxlKSB7XHJcblx0XHRcdGxldCBjZWxsU3R5bGU6IFByb3BlcnRpZXMgPSB7fTtcclxuXHRcdFx0Y29uc3QgY2xzID0gdW5wYXJzZWRTdHlsZS5tYXRjaCgvXFwuXFxTKy9nKSB8fCBbXTtcclxuXHRcdFx0Y2xzLmZvckVhY2goY3NzQ2xhc3MgPT4ge1xyXG5cdFx0XHRcdGNlbGxTdHlsZSA9IHsgLi4uY2VsbFN0eWxlLCAuLi4odGhpcy5zdHlsZXM/Lltjc3NDbGFzcy5zbGljZSgxKV0gfHwge30pIH07XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgaW5saW5lU3R5bGUgPSB1bnBhcnNlZFN0eWxlLm1hdGNoKC9cXHsuKlxcfS8pPy5bMF0gfHwgJ3t9JztcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4uSlNPTjUucGFyc2UoaW5saW5lU3R5bGUpIH07XHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2hcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEludmFsaWQgY2VsbCBzdHlsZSBcXGAke2lubGluZVN0eWxlfVxcYGApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLmdsb2JhbFN0eWxlID0gY2VsbFN0eWxlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLmNvbnRlbnRHcmlkID0gc291cmNlLnNwbGl0KHRoaXMubmV3TGluZVJFKVxyXG5cdFx0XHQubWFwKChyb3cpID0+IHJvdy5zcGxpdCh0aGlzLmNlbGxCb3JkZXJSRSlcclxuXHRcdFx0XHQubWFwKGNlbGwgPT4gY2VsbC50cmltKCkpKTtcclxuXHR9XHJcblxyXG5cdHBhcnNlTWV0YWRhdGEobWV0YTogc3RyaW5nKSB7XHJcblx0XHRsZXQgbWV0YWRhdGE6IFBhcnRpYWw8SVNoZWV0TWV0YURhdGE+O1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdG1ldGFkYXRhID0gSlNPTjUucGFyc2UobWV0YSk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZGlzcGxheUVycm9yKCdNZXRhZGF0YSBpcyBub3QgcHJvcGVyIEpTT04nKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGE7XHJcblxyXG5cdFx0Ly8gU2VwYXJhdGUgdGhpcyBvdXQgd2hlbiBtb3JlIG1ldGFkYXRhIGlzIGludHJvZHVjZWRcclxuXHRcdGlmIChtZXRhZGF0YS5jbGFzc2VzKSB7XHJcblx0XHRcdHRoaXMuc3R5bGVzID0gbWV0YWRhdGEuY2xhc3NlcztcclxuXHRcdH1cclxuXHRcdC8vIFRPRE86IEFkZCBsb2dnaW5nIGFuZCBkZWJ1Z2dpbmcgaW4gbWV0YWRhdGFcclxuXHRcdC8vIGlmIChtZXRhZGF0YS5sb2cpIHRoaXMubG9nZ2luZyA9IHRydWVcclxuXHR9XHJcblxyXG5cdHZhbGlkYXRlSW5wdXQoKSB7XHJcblx0XHRpZiAoXHJcblx0XHRcdCF0aGlzLmNvbnRlbnRHcmlkLmV2ZXJ5KFxyXG5cdFx0XHRcdChyb3cpID0+ICFyb3cucG9wKCk/LnRyaW0oKSAmJiAhcm93LnNoaWZ0KCk/LnRyaW0oKVxyXG5cdFx0XHQpXHJcblx0XHQpIHJldHVybiB0aGlzLmRpc3BsYXlFcnJvcignTWFsZm9ybWVkIHRhYmxlJyk7XHJcblx0fVxyXG5cclxuXHRub3JtYWxpemVHcmlkKCkge1xyXG5cdFx0Zm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHRoaXMuY29udGVudEdyaWQubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcblx0XHRcdGNvbnN0IHJvdyA9IHRoaXMuY29udGVudEdyaWRbcm93SW5kZXhdO1xyXG5cdFx0XHRpZiAodGhpcy5yb3dNYXhMZW5ndGggPCByb3cubGVuZ3RoKSB0aGlzLnJvd01heExlbmd0aCA9IHJvdy5sZW5ndGg7XHJcblxyXG5cdFx0XHRmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgcm93Lmxlbmd0aDsgY29sSW5kZXgrKylcclxuXHRcdFx0XHRpZiAodGhpcy5jZWxsTWF4TGVuZ3RoIDwgcm93W2NvbEluZGV4XS50cmltKCkubGVuZ3RoKVxyXG5cdFx0XHRcdFx0dGhpcy5jZWxsTWF4TGVuZ3RoID0gcm93W2NvbEluZGV4XS50cmltKCkubGVuZ3RoO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY29udGVudEdyaWQgPSB0aGlzLmNvbnRlbnRHcmlkLm1hcCgobGluZSkgPT5cclxuXHRcdFx0QXJyYXkuZnJvbShcclxuXHRcdFx0XHR7IC4uLmxpbmUsIGxlbmd0aDogdGhpcy5yb3dNYXhMZW5ndGggfSxcclxuXHRcdFx0XHQoY2VsbCkgPT4gY2VsbCB8fCAnJ1xyXG5cdFx0XHQpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0Z2V0SGVhZGVyQm91bmRhcmllcygpIHtcclxuXHRcdHRoaXMuaGVhZGVyUm93ID0gdGhpcy5jb250ZW50R3JpZC5maW5kSW5kZXgoXHJcblx0XHRcdChoZWFkZXJSb3cpID0+XHJcblx0XHRcdFx0aGVhZGVyUm93LmV2ZXJ5KChoZWFkZXJDb2wpID0+IHRoaXMuaGVhZGVyUkUudGVzdChoZWFkZXJDb2wpKVxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyB0cmFuc3Bvc2UgZ3JpZFxyXG5cdFx0dGhpcy5oZWFkZXJDb2wgPSB0aGlzLmNvbnRlbnRHcmlkWzBdLm1hcCgoXywgaSkgPT5cclxuXHRcdFx0dGhpcy5jb250ZW50R3JpZC5tYXAocm93ID0+IHJvd1tpXSlcclxuXHRcdClcclxuXHRcdFx0LmZpbmRJbmRleChcclxuXHRcdFx0XHQoaGVhZGVyQ29sKSA9PlxyXG5cdFx0XHRcdFx0aGVhZGVyQ29sLmV2ZXJ5KChoZWFkZXJDb2wpID0+IHRoaXMuaGVhZGVyUkUudGVzdChoZWFkZXJDb2wpKVxyXG5cdFx0XHQpO1xyXG5cdH1cclxuXHJcblx0Z2V0SGVhZGVyU3R5bGVzKCkge1xyXG5cdFx0Ly8gVE9ETzogQWRkIHNhbWUgc3ludGF4IG9mIGN1c3RvbSBzdHlsaW5nIGFzIGNlbGxzXHJcblx0XHRpZiAodGhpcy5oZWFkZXJSb3cgIT09IC0xKSB0aGlzLmNvbFN0eWxlcyA9IHRoaXMuY29udGVudEdyaWRbdGhpcy5oZWFkZXJSb3ddLm1hcChyb3dIZWFkID0+IHtcclxuXHRcdFx0bGV0IHN0eWxlczogUHJvcGVydGllcyA9IHt9O1xyXG5cclxuXHRcdFx0Y29uc3QgYWxpZ25tZW50ID0gcm93SGVhZC5tYXRjaCh0aGlzLmhlYWRlclJFKTtcclxuXHRcdFx0aWYgKCFhbGlnbm1lbnQpIHJldHVybiB7IGNsYXNzZXM6IFtdLCBzdHlsZXMgfTtcclxuXHRcdFx0ZWxzZSBpZiAoYWxpZ25tZW50WzFdICYmIGFsaWdubWVudFsyXSkgc3R5bGVzWyd0ZXh0QWxpZ24nXSA9ICdjZW50ZXInO1xyXG5cdFx0XHRlbHNlIGlmIChhbGlnbm1lbnRbMV0pIHN0eWxlc1sndGV4dEFsaWduJ10gPSAnbGVmdCc7XHJcblx0XHRcdGVsc2UgaWYgKGFsaWdubWVudFsyXSkgc3R5bGVzWyd0ZXh0QWxpZ24nXSA9ICdyaWdodCc7XHJcblxyXG5cdFx0XHQvLyBQYXJzZSB+XHJcblx0XHRcdGNvbnN0IGNsYXNzZXMgPSBhbGlnbm1lbnRbM10/Lm1hdGNoKC9cXC5cXFMrL2cpPy5tYXAoU3RyaW5nKSB8fCBbXTtcclxuXHRcdFx0Y2xhc3Nlcy5mb3JFYWNoKGNzc0NsYXNzID0+IFxyXG5cdFx0XHRcdHN0eWxlcyA9IHtcclxuXHRcdFx0XHRcdC4uLnN0eWxlcyxcclxuXHRcdFx0XHRcdC4uLih0aGlzLnN0eWxlcz8uW2Nzc0NsYXNzLnNsaWNlKDEpXVxyXG5cdFx0XHRcdFx0XHRcdHx8IHt9XHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRyZXR1cm4geyBjbGFzc2VzLCBzdHlsZXMgfTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICh0aGlzLmhlYWRlckNvbCAhPT0gLTEpIHRoaXMucm93U3R5bGVzID0gdGhpcy5jb250ZW50R3JpZFswXS5tYXAoKF8sIGkpID0+XHJcblx0XHRcdHRoaXMuY29udGVudEdyaWQubWFwKHJvdyA9PiByb3dbaV0pXHJcblx0XHQpW3RoaXMuaGVhZGVyQ29sXS5tYXAocm93SGVhZCA9PiB7XHJcblx0XHRcdGxldCBzdHlsZXM6IFByb3BlcnRpZXMgPSB7fTtcclxuXHJcblx0XHRcdGNvbnN0IGFsaWdubWVudCA9IHJvd0hlYWQubWF0Y2godGhpcy5oZWFkZXJSRSk7XHJcblx0XHRcdGlmICghYWxpZ25tZW50KSByZXR1cm4geyBjbGFzc2VzOiBbXSwgc3R5bGVzIH07XHJcblx0XHRcdGVsc2UgaWYgKGFsaWdubWVudFsxXSAmJiBhbGlnbm1lbnRbMl0pIHN0eWxlc1sndGV4dEFsaWduJ10gPSAnY2VudGVyJztcclxuXHRcdFx0ZWxzZSBpZiAoYWxpZ25tZW50WzFdKSBzdHlsZXNbJ3RleHRBbGlnbiddID0gJ2xlZnQnO1xyXG5cdFx0XHRlbHNlIGlmIChhbGlnbm1lbnRbMl0pIHN0eWxlc1sndGV4dEFsaWduJ10gPSAncmlnaHQnO1xyXG5cclxuXHRcdFx0Ly8gUGFyc2UgflxyXG5cdFx0XHRjb25zdCBjbGFzc2VzID0gYWxpZ25tZW50WzNdPy5tYXRjaCgvXFwuXFxTKy9nKT8ubWFwKFN0cmluZykgfHwgW107XHJcblx0XHRcdGNsYXNzZXMuZm9yRWFjaChjc3NDbGFzcyA9PiBcclxuXHRcdFx0XHRzdHlsZXMgPSB7XHJcblx0XHRcdFx0XHQuLi5zdHlsZXMsXHJcblx0XHRcdFx0XHQuLi4odGhpcy5zdHlsZXM/Lltjc3NDbGFzcy5zbGljZSgxKV1cclxuXHRcdFx0XHRcdFx0XHR8fCB7fVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdFx0cmV0dXJuIHsgY2xhc3Nlcywgc3R5bGVzIH07XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGJ1aWxkRG9tVGFibGUoKSB7XHJcblx0XHRmb3IgKFxyXG5cdFx0XHRsZXQgcm93SW5kZXggPSAwO1xyXG5cdFx0XHRyb3dJbmRleCA8IHRoaXMuY29udGVudEdyaWQubGVuZ3RoO1xyXG5cdFx0XHRyb3dJbmRleCsrXHJcblx0XHQpIHRoaXMuYnVpbGREb21Sb3cocm93SW5kZXgpO1xyXG5cdH1cclxuXHJcblx0YnVpbGREb21Sb3cocm93SW5kZXg6IG51bWJlcikge1xyXG5cdFx0Y29uc3Qgcm93Q29udGVudHMgPSB0aGlzLmNvbnRlbnRHcmlkW3Jvd0luZGV4XTtcclxuXHRcdGxldCByb3dOb2RlID0gdGhpcy50YWJsZUJvZHkuY3JlYXRlRWwoJ3RyJyk7XHJcblxyXG5cdFx0aWYgKHJvd0luZGV4IDwgdGhpcy5oZWFkZXJSb3cpIHJvd05vZGUgPSB0aGlzLnRhYmxlSGVhZC5jcmVhdGVFbCgndHInKTtcclxuXHRcdGVsc2UgaWYgKHJvd0luZGV4ID09PSB0aGlzLmhlYWRlclJvdykgcmV0dXJuO1xyXG5cclxuXHRcdHRoaXMuZG9tR3JpZFtyb3dJbmRleF0gPSBbXTtcclxuXHJcblx0XHRmb3IgKFxyXG5cdFx0XHRsZXQgY29sdW1uSW5kZXggPSAwO1xyXG5cdFx0XHRjb2x1bW5JbmRleCA8IHJvd0NvbnRlbnRzLmxlbmd0aDtcclxuXHRcdFx0Y29sdW1uSW5kZXgrK1xyXG5cdFx0KSB0aGlzLmJ1aWxkRG9tQ2VsbChyb3dJbmRleCwgY29sdW1uSW5kZXgsIHJvd05vZGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgYnVpbGREb21DZWxsKHJvd0luZGV4OiBudW1iZXIsIGNvbHVtbkluZGV4OiBudW1iZXIsIHJvd05vZGU6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRjb25zdCBbXHJcblx0XHRcdGNlbGxDb250ZW50LFxyXG5cdFx0XHRjZWxsU3R5bGVzXHJcblx0XHRdID0gdGhpcy5jb250ZW50R3JpZFtyb3dJbmRleF1bY29sdW1uSW5kZXhdLnNwbGl0KC8oPzwhW1xcXFx+XSl+KD8hfikvKTtcclxuXHJcblx0XHRsZXQgY2xzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0bGV0IGNlbGxTdHlsZTogUHJvcGVydGllcyA9IHRoaXMuZ2xvYmFsU3R5bGU7XHJcblxyXG5cdFx0aWYgKHRoaXMucm93U3R5bGVzW3Jvd0luZGV4XSkge1xyXG5cdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4udGhpcy5yb3dTdHlsZXNbcm93SW5kZXhdLnN0eWxlcyB9OyBcclxuXHRcdFx0Y2xzLnB1c2goLi4udGhpcy5yb3dTdHlsZXNbcm93SW5kZXhdLmNsYXNzZXMpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29sU3R5bGVzW2NvbHVtbkluZGV4XSkge1xyXG5cdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4udGhpcy5jb2xTdHlsZXNbY29sdW1uSW5kZXhdLnN0eWxlcyB9OyBcclxuXHRcdFx0Y2xzLnB1c2goLi4udGhpcy5jb2xTdHlsZXNbY29sdW1uSW5kZXhdLmNsYXNzZXMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChjZWxsU3R5bGVzKSB7XHJcblx0XHRcdGNscyA9IGNlbGxTdHlsZXMubWF0Y2goLyg/PD1cXC4pXFxTKy9nKSB8fCBbXTtcclxuXHRcdFx0Y2xzLmZvckVhY2goY3NzQ2xhc3MgPT4ge1xyXG5cdFx0XHRcdGNlbGxTdHlsZSA9IHsgLi4uY2VsbFN0eWxlLCAuLi4odGhpcy5zdHlsZXM/Lltjc3NDbGFzc10gfHwge30pIH07XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgaW5saW5lU3R5bGUgPSBjZWxsU3R5bGVzLm1hdGNoKC9cXHsuKlxcfS8pPy5bMF0gfHwgJ3t9JztcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjZWxsU3R5bGUgPSB7IC4uLmNlbGxTdHlsZSwgLi4uSlNPTjUucGFyc2UoaW5saW5lU3R5bGUpIH07XHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2hcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEludmFsaWQgY2VsbCBzdHlsZSBcXGAke2lubGluZVN0eWxlfVxcYGApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGNlbGxUYWc6IGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcCA9ICd0ZCc7XHJcblx0XHRsZXQgY2VsbDogSFRNTFRhYmxlQ2VsbEVsZW1lbnQ7XHJcblxyXG5cdFx0aWYgKGNvbHVtbkluZGV4ID09PSB0aGlzLmhlYWRlckNvbCB8fCByb3dJbmRleCA9PT0gdGhpcy5oZWFkZXJSb3cpIHJldHVybjtcclxuXHRcdGVsc2UgaWYgKGNvbHVtbkluZGV4IDwgdGhpcy5oZWFkZXJDb2wgfHwgcm93SW5kZXggPCB0aGlzLmhlYWRlclJvdykgY2VsbFRhZyA9ICd0aCc7XHJcblxyXG5cdFx0aWYgKGNlbGxDb250ZW50ID09IE1FUkdFX0xFRlRfU0lHTklGSUVSICYmIHRoaXMuZG9tR3JpZD8uW3Jvd0luZGV4XT8uW2NvbHVtbkluZGV4IC0gMV0pIHtcclxuXHRcdFx0Y2VsbCA9IHRoaXMuZG9tR3JpZFtyb3dJbmRleF1bY29sdW1uSW5kZXggLSAxXTtcclxuXHRcdFx0Y2VsbD8uY29sU3BhbiB8fCBPYmplY3QuYXNzaWduKGNlbGwsIHsgY29sU3BhbjogMSB9KTtcclxuXHRcdFx0Y2VsbC5jb2xTcGFuID0gY29sdW1uSW5kZXggLSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgY29sdW1uSW5kZXgudG9TdHJpbmcoKSkgKyAxO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoY2VsbENvbnRlbnQgPT0gTUVSR0VfVVBfU0lHTklGSUVSICYmIHRoaXMuZG9tR3JpZD8uW3Jvd0luZGV4IC0gMV0/Lltjb2x1bW5JbmRleF0pIHtcclxuXHRcdFx0Y2VsbCA9IHRoaXMuZG9tR3JpZFtyb3dJbmRleCAtIDFdW2NvbHVtbkluZGV4XTtcclxuXHRcdFx0Y2VsbD8ucm93U3BhbiB8fCBPYmplY3QuYXNzaWduKGNlbGwsIHsgcm93U3BhbjogMSB9KTtcclxuXHRcdFx0Y2VsbC5yb3dTcGFuID0gcm93SW5kZXggLSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKSArIDE7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChcclxuXHRcdFx0dGhpcy5kb21HcmlkPy5bcm93SW5kZXggLSAxXT8uW2NvbHVtbkluZGV4XSAmJiB0aGlzLmRvbUdyaWQ/Lltyb3dJbmRleF0/Lltjb2x1bW5JbmRleCAtIDFdICYmXHJcblx0XHRcdHRoaXMuZG9tR3JpZFtyb3dJbmRleF1bY29sdW1uSW5kZXggLSAxXSA9PT0gdGhpcy5kb21HcmlkW3Jvd0luZGV4IC0gMV1bY29sdW1uSW5kZXhdXHJcblx0XHQpIGNlbGwgPSB0aGlzLmRvbUdyaWRbcm93SW5kZXhdW2NvbHVtbkluZGV4IC0gMV07XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Ly8gY29uc3QgY29udGVudENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0Ly8gY29udGVudENlbGwuY2xhc3NMaXN0LmFkZCgndGFibGUtY2VsbC13cmFwcGVyJyk7XHJcblxyXG5cdFx0XHRjZWxsID0gcm93Tm9kZS5jcmVhdGVFbChjZWxsVGFnLCB7IGNscyB9KTtcclxuXHRcdFx0Y2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcsIHJvd0luZGV4LnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRjZWxsLnNldEF0dHJpYnV0ZSgnY29sLWluZGV4JywgY29sdW1uSW5kZXgudG9TdHJpbmcoKSk7XHJcblxyXG5cdFx0XHRNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuXHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHQnXFx1MjAwQiAnICsgKGNlbGxDb250ZW50IHx8ICdcXHUyMDBCJyksIC8vIE1ha2Ugc3VyZSBtYXJrZG93biB0aGF0IHJlcXVpcmVzIHRvIGJlIGF0IHRoZSBzdGFydCBvZiBhIGxpbmUgaXMgbm90IHJlbmRlcmVkXHJcblx0XHRcdFx0Y2VsbCxcclxuXHRcdFx0XHQnJyxcclxuXHRcdFx0XHR0aGlzXHJcblx0XHRcdCkudGhlbigoKSA9PiB7XHJcblx0XHRcdFx0Y2VsbC5pbm5lckhUTUwgPVxyXG5cdFx0XHRcdFx0Y2VsbFxyXG5cdFx0XHRcdFx0XHQuY2hpbGRyZW5bMF1cclxuXHRcdFx0XHRcdFx0LmlubmVySFRNTFxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZSgvXlxcdTIwMEIgL2csICcnKTtcclxuXHRcdFx0XHQvLyBjZWxsLmFwcGVuZChjb250ZW50Q2VsbCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRPYmplY3QuYXNzaWduKGNlbGwuc3R5bGUsIGNlbGxTdHlsZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZG9tR3JpZFtyb3dJbmRleF1bY29sdW1uSW5kZXhdID0gY2VsbDtcclxuXHR9XHJcbn1cclxuIiwgIi8vIEB0cy1ub2NoZWNrXHJcbi8vIFx1NEUwQVx1OTc2Mlx1NzY4NFx1NjMwN1x1NEVFNFx1NEYxQVx1Nzk4MVx1NzUyOFx1NjU3NFx1NEUyQVx1NjU4N1x1NEVGNlx1NzY4NFx1N0M3Qlx1NTc4Qlx1NjhDMFx1NjdFNVxyXG5cclxuaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDZcdTdDN0IgLSBcdTc1MjhcdTRFOEVcdTY2M0VcdTc5M0FcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcclxuICovXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgcmVzdWx0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG9uQ2xvc2U6IChyZXN1bHQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbWVzc2FnZTogc3RyaW5nLCBvbkNsb3NlOiAocmVzdWx0OiBib29sZWFuKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMub25DbG9zZSA9IG9uQ2xvc2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTc4NkVcdThCQTRcdTY0Q0RcdTRGNUMnIH0pO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSlcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU3ODZFXHU4QkE0JywgY2xzOiAnbW9kLWN0YScgfSlcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIHRoaXMub25DbG9zZSh0aGlzLnJlc3VsdCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXJrZG93blx1ODg2OFx1NjgzQ1x1NjhDMFx1NkQ0Qlx1NTY2OCAtIFx1OEQxRlx1OEQyM1x1NjhDMFx1NkQ0Qlx1MzAwMVx1NTIwNlx1Njc5MFx1NTQ4Q1x1NTkwNFx1NzQwNk1hcmtkb3duXHU4ODY4XHU2ODNDXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFya2Rvd25UYWJsZURldGVjdG9yIHtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG4gICAgXHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWFya2Rvd25UYWJsZURldGVjdG9yIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcclxuICAgICAqIEByZXR1cm5zIFx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1Nzg2RVx1OEJBNFxyXG4gICAgICovXHJcbiAgICBhc3luYyBzaG93Q29uZmlybURpYWxvZyhtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKHRoaXMuZ2V0QXBwKCksIG1lc3NhZ2UsIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQUhUTUxcdTY4M0NcdTVGMEZcdTc2ODRcdTg4NjhcdTY4M0NcdUZGMDhcdTgwMENcdTk3NUVNYXJrZG93blx1NzUxRlx1NjIxMFx1NzY4NFx1ODg2OFx1NjgzQ1x1RkYwOVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NEUzQUhUTUxcdTY4M0NcdTVGMEZcdTc2ODRcdTg4NjhcdTY4M0NcclxuICAgICAqL1xyXG4gICAgaXNIdG1sRm9ybWF0dGVkVGFibGUodGFibGU6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU3QjU2XHU3NTY1MTogXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU3Mjc5XHU1QjlBSFRNTFx1ODg2OFx1NjgzQ1x1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICBpZiAodGFibGUuaGFzQXR0cmlidXRlKCdib3JkZXInKSB8fCBcclxuICAgICAgICAgICAgICAgIHRhYmxlLmhhc0F0dHJpYnV0ZSgnY2VsbHBhZGRpbmcnKSB8fCBcclxuICAgICAgICAgICAgICAgIHRhYmxlLmhhc0F0dHJpYnV0ZSgnY2VsbHNwYWNpbmcnKSB8fFxyXG4gICAgICAgICAgICAgICAgdGFibGUuaGFzQXR0cmlidXRlKCd3aWR0aCcpIHx8XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5oYXNBdHRyaWJ1dGUoJ2hlaWdodCcpIHx8XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5oYXNBdHRyaWJ1dGUoJ2JnY29sb3InKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1N0I1Nlx1NzU2NTI6IFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQkhUTUxcdTcyNzlcdTVCOUFcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSB0YWJsZS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZSAmJiAoXHJcbiAgICAgICAgICAgICAgICBzdHlsZS5pbmNsdWRlcygnYm9yZGVyLWNvbGxhcHNlJykgfHxcclxuICAgICAgICAgICAgICAgIHN0eWxlLmluY2x1ZGVzKCd0ZXh0LWFsaWduJykgfHxcclxuICAgICAgICAgICAgICAgIHN0eWxlLmluY2x1ZGVzKCdmb250LWZhbWlseScpIHx8XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5pbmNsdWRlcygnYmFja2dyb3VuZC1jb2xvcicpXHJcbiAgICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTdCNTZcdTc1NjUzOiBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTU5MERcdTY3NDJIVE1MXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBBcnJheS5mcm9tKGNlbGxzKS5zbGljZSgwLCAxMCkpIHsgLy8gXHU1M0VBXHU2OEMwXHU2N0U1XHU1MjREMTBcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWwgPSAoY2VsbCBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCSFRNTFx1NjgwN1x1N0I3RVx1RkYwOFx1NEY0Nlx1NjM5Mlx1OTY2NE9ic2lkaWFuXHU2M0QyXHU1MTY1XHU3Njg0XHU3QjgwXHU1MzU1XHU2ODNDXHU1RjBGXHU2ODA3XHU3QjdFXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBpZiAoaHRtbC5pbmNsdWRlcygnPCcpICYmIGh0bWwuaW5jbHVkZXMoJz4nKSAmJiBcclxuICAgICAgICAgICAgICAgICAgICAhaHRtbC5tYXRjaCgvXjwoZW18c3Ryb25nfHN8Y29kZXxhfHNwYW4pW14+XSo+Lio8XFwvKGVtfHN0cm9uZ3xzfGNvZGV8YXxzcGFuKT4kLykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3QjU2XHU3NTY1NDogXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU3RUQzXHU2Nzg0XHU2NjJGXHU1NDI2XHU3QjI2XHU1NDA4TWFya2Rvd25cdTg4NjhcdTY4M0NcdTc1MUZcdTYyMTBcdTg5QzRcdTUyMTlcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1hcmtkb3duXHU4ODY4XHU2ODNDXHU3Njg0XHU3QjJDXHU0RThDXHU4ODRDXHU5MDFBXHU1RTM4XHU2NjJGXHU1MjA2XHU5Njk0XHU4ODRDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRSb3cgPSByb3dzWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VwYXJhdG9yQ2VsbHMgPSBzZWNvbmRSb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIwNlx1OTY5NFx1ODg0Q1x1NzY4NFx1NjI0MFx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVx1OTAxQVx1NUUzOFx1NTNFQVx1NTMwNVx1NTQyQiAtLS0tIFx1NjIxNiA6LS0tLTogXHU3QjQ5XHU1RjYyXHU1RjBGXHJcbiAgICAgICAgICAgICAgICBsZXQgaXNTZXBhcmF0b3JSb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIEFycmF5LmZyb20oc2VwYXJhdG9yQ2VsbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGNlbGwudGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU2NjJGXHU1MjA2XHU5Njk0XHU3QjI2XHU2ODNDXHU1RjBGXHVGRjBDXHU1M0VGXHU4MEZEXHU0RTBEXHU2NjJGTWFya2Rvd25cdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRleHQubWF0Y2goL146Py0rOj8kLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTZXBhcmF0b3JSb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTRFMERcdTdCMjZcdTU0MDhNYXJrZG93blx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1RkYwQ1x1NTNFRlx1ODBGRFx1NjYyRkhUTUxcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmICghaXNTZXBhcmF0b3JSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5RUQ4XHU4QkE0XHU0RTBEXHU2NjJGSFRNTFx1NjgzQ1x1NUYwRlx1NzY4NFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2OEMwXHU2RDRCSFRNTFx1ODg2OFx1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gXHU5NTE5XHU4QkVGXHU2NUY2XHU5RUQ4XHU4QkE0XHU0RTNBXHU1NDI2XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBzZXR1cFRhYmxlSW5kaWNlcyh0YWJsZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCByb3dzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IGNlbGxzLmxlbmd0aDsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NTcwXHU2MzZFXHU1QzVFXHU2MDI3XHU1QjU4XHU1MEE4XHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5kYXRhc2V0LnJvd0luZGV4ID0gcm93SW5kZXgudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLmRhdGFzZXQuY29sSW5kZXggPSBjb2xJbmRleC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RXJvdy1pbmRleFx1NTQ4Q2NvbC1pbmRleFx1NUM1RVx1NjAyN1x1RkYwQ1x1Nzg2RVx1NEZERFx1NEUwRW1haW4udHNcdTRFMkRcdTRGN0ZcdTc1MjhcdTc2ODRcdTVDNUVcdTYwMjdcdTRFMDBcdTgxRjRcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93LWluZGV4Jywgcm93SW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcsIGNvbEluZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEUzQVx1NTM1NVx1NTE0M1x1NjgzQ1x1NkRGQlx1NTJBMFx1N0M3Qlx1NEVFNVx1NEZCRlx1NjgzN1x1NUYwRlx1OEMwM1x1NjU3NFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnYWR2YW5jZWQtdGFibGUtY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1ODg2OFx1NTkzNFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NkRGQlx1NTJBMFx1NzI3OVx1NkI4QVx1N0M3QlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RoJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2FkdmFuY2VkLXRhYmxlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTdBN0FcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTUzNjBcdTRGNERcdTdCMjZcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGwuaW5uZXJIVE1MLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmlubmVySFRNTCA9ICcmbmJzcDsnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEJCRVx1N0Y2RVx1ODg2OFx1NjgzQ1x1N0QyMlx1NUYxNVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2N0U1XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgKiBAcGFyYW0gY2VsbCBcdTUzNTVcdTUxNDNcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSBtYXJrZXIgXHU2ODA3XHU4QkIwXHU3QjI2XHU1M0Y3XHU3QzdCXHU1NzhCICgnXicgXHU2MjE2ICc8JylcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NEUzQVx1NjMwN1x1NUI5QVx1N0M3Qlx1NTc4Qlx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICovXHJcbiAgICBpc01lcmdlTWFya2VyKGNlbGw6IEhUTUxFbGVtZW50LCBtYXJrZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU2MzA3XHU1QjlBXHU3QzdCXHU1NzhCXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHVGRjA4XHU2NTJGXHU2MzAxXHU1OTFBXHU0RTJBXHU4RkRFXHU3RUVEXHU2ODA3XHU4QkIwXHVGRjA5XHJcbiAgICAgICAgaWYgKG1hcmtlciA9PT0gJ14nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAvXihcXF4rfFxcXFxcXF58XFxzKlxcXitcXHMqKSQvLnRlc3QoY29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXJrZXIgPT09ICc8Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gL14oPCt8XFxcXDx8XFxzKjwrXFxzKikkLy50ZXN0KGNvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTY3RTVcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTk3NUVcdTdBN0FcdTRFMTRcdTY3MDlcdTY3MDlcdTY1NDhcdTUxODVcdTVCQjlcclxuICAgICAqIEBwYXJhbSBjZWxsIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICogQHJldHVybnMgXHU2NjJGXHU1NDI2XHU2NzA5XHU2NzA5XHU2NTQ4XHU1MTg1XHU1QkI5XHJcbiAgICAgKi9cclxuICAgIGhhc01lYW5pbmdmdWxDb250ZW50KGNlbGw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTdBN0FcdTYyMTZcdTUzRUFcdTY3MDlcdTdBN0FcdTY4M0NcdTMwMDFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICByZXR1cm4gY29udGVudCAhPT0gJycgJiYgXHJcbiAgICAgICAgICAgICAgIGNvbnRlbnQgIT09ICcmbmJzcDsnICYmIFxyXG4gICAgICAgICAgICAgICAhL14oXFxeK3xcXFxcXFxefFxccypcXF4rXFxzKikkLy50ZXN0KGNvbnRlbnQpICYmIFxyXG4gICAgICAgICAgICAgICAhL14oPCt8XFxcXDx8XFxzKjwrXFxzKikkLy50ZXN0KGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4OUUzXHU2NzkwXHU4ODY4XHU2ODNDXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBhc3luYyBwYXJzZU1lcmdlQ2VsbE1hcmtlcnModGFibGU6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDZWxsTWVyZ2luZykgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5OTk2XHU1MTQ4XHU2N0U1XHU2MjdFXHU2MjQwXHU2NzA5XHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlVXA6IHtjZWxsOiBIVE1MRWxlbWVudCwgY291bnQ6IG51bWJlcn1bXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtZXJnZUxlZnQ6IHtjZWxsOiBIVE1MRWxlbWVudCwgY291bnQ6IG51bWJlcn1bXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY2VsbHMubGVuZ3RoOyBjb2xJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcXispJC8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENl5cdTc2ODRcdTY1NzBcdTkxQ0ZcdUZGMENcdTg4NjhcdTc5M0FcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSB1cE1hdGNoWzFdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTNEMVx1NzNCMFx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NjgwN1x1OEJCMFx1NjU3MFx1OTFDRj0ke2NvdW50fSwgXHU1MTg1XHU1QkI5PVwiJHtjb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlVXAucHVzaCh7Y2VsbCwgY291bnR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oPCspJC8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0TWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2PFx1NzY4NFx1NjU3MFx1OTFDRlx1RkYwQ1x1ODg2OFx1NzkzQVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTIxN1x1NjU3MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGxlZnRNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRDFcdTczQjBcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTY4MDdcdThCQjBcdTY1NzBcdTkxQ0Y9JHtjb3VudH0sIFx1NTE4NVx1NUJCOT1cIiR7Y29udGVudH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUxlZnQucHVzaCh7Y2VsbCwgY291bnR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1OEY2Q1x1NEU0OVx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ID09PSAnXFxcXF4nIHx8IGNvbnRlbnQgPT09ICcgXiAnIHx8IGNvbnRlbnQgPT09ICcgXFxcXF4gJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1M0QxXHU3M0IwXHU4RjZDXHU0RTQ5XHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU1MTg1XHU1QkI5PVwiJHtjb250ZW50fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlVXAucHVzaCh7Y2VsbCwgY291bnQ6IDF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnQgPT09ICdcXFxcPCcgfHwgY29udGVudCA9PT0gJyA8ICcgfHwgY29udGVudCA9PT0gJyBcXFxcPCAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRDFcdTczQjBcdThGNkNcdTRFNDlcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTUxODVcdTVCQjk9XCIke2NvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VMZWZ0LnB1c2goe2NlbGwsIGNvdW50OiAxfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgZm9yIChjb25zdCB7Y2VsbCwgY291bnR9IG9mIG1lcmdlVXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5yb3dJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgY2VsbC5kYXRhc2V0LmNvbEluZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU5MDRcdTc0MDZcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzY6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTU0MDhcdTVFNzZcdTY1NzBcdTkxQ0Y9JHtjb3VudH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU5NzAwXHU4OTgxXHU2MjdFXHU1MjMwXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAocm93SW5kZXggPj0gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRSb3dJbmRleCA9IHJvd0luZGV4IC0gY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Um93ID0gcm93c1t0YXJnZXRSb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxscyA9IHRhcmdldFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4IDwgdGFyZ2V0Q2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gdGFyZ2V0Q2VsbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTVCOUVcdTk2NDVcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01lYW5pbmdmdWxDb250ZW50KHRhcmdldENlbGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NTM2XHU5NkM2XHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHNUb01lcmdlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQoY2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNUb01lcmdlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg6IGNvbEluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTRFMkRcdTk1RjRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkUm93SW5kZXggPSByb3dJbmRleCAtIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRSb3dJbmRleCA+IHRhcmdldFJvd0luZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWRSb3cgPSByb3dzW21pZFJvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZENlbGxzID0gbWlkUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4IDwgbWlkQ2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkQ2VsbCA9IG1pZENlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNNZWFuaW5nZnVsQ29udGVudChtaWRDZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1RvTWVyZ2UucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogbWlkUm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xJbmRleDogY29sSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtaWRDZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1OEJBNFx1NjYyRlx1NTQyNlx1ODk4Nlx1NzZENlx1OTc1RVx1N0E3QVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSAmJiBjZWxsc1RvTWVyZ2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcdUZGMENcdTUzMDVcdTU0MkJcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTg5ODZcdTc2RDZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gY2VsbHNUb01lcmdlLm1hcChjID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFske2Mucm93SW5kZXgrMX0sJHtjLmNvbEluZGV4KzF9XTogXCIke2MuY29udGVudH1cImBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5qb2luKCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1NZXJnZSA9IGF3YWl0IHRoaXMuc2hvd0NvbmZpcm1EaWFsb2coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHU0RUU1XHU0RTBCXHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XHU1QzA2XHU4OEFCXHU4OTg2XHU3NkQ2OlxcbiR7Y2VsbENvbnRlbnRzfVxcblxcblx1Nzg2RVx1NUI5QVx1ODk4MVx1NTQwOFx1NUU3Nlx1OEZEOVx1NEU5Qlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQxN1x1RkYxRmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybU1lcmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU3NTI4XHU2MjM3XHU1M0Q2XHU2RDg4XHU0RTg2XHU1MzU1XHU1MTQzXHU2ODNDXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTVGNTNcdTUyNERcdTc2ODRyb3dzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvd1NwYW4gPSBwYXJzZUludCh0YXJnZXRDZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpIHx8ICcxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2NUIwXHU3Njg0cm93c3Bhblx1RkYxQVx1NUY1M1x1NTI0RHJvd3NwYW4gKyBjb3VudFx1RkYwOFx1NTQwOFx1NUU3Nlx1NzY4NFx1ODg0Q1x1NjU3MFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1NwYW4gPSByb3dTcGFuICsgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEJCRVx1N0Y2RXJvd3NwYW46IFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQygke3RhcmdldFJvd0luZGV4fSwke2NvbEluZGV4fSksIHJvd3NwYW49JHtyb3dTcGFufWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NHJvd3NwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLnNldEF0dHJpYnV0ZSgncm93c3BhbicsIHJvd1NwYW4udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5yb3dTcGFuID0gcm93U3BhbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcdTdDN0JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OTY5MFx1ODVDRlx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTU5MzFcdThEMjU6IFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NkNBMVx1NjcwOVx1NjcwOVx1NjU0OFx1NTE4NVx1NUJCOScsIHRhcmdldENlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgZm9yIChjb25zdCB7Y2VsbCwgY291bnR9IG9mIG1lcmdlTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgY2VsbC5kYXRhc2V0LnJvd0luZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCBjZWxsLmRhdGFzZXQuY29sSW5kZXggfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTkwNFx1NzQwNlx1NTQxMVx1NURFNlx1NTQwOFx1NUU3NjogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NTQwOFx1NUU3Nlx1NjU3MFx1OTFDRj0ke2NvdW50fWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTk3MDBcdTg5ODFcdTYyN0VcdTUyMzBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA+PSBjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbEluZGV4ID0gY29sSW5kZXggLSBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gcm93c1tyb3dJbmRleF0/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpW3RhcmdldENvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTVCOUVcdTk2NDVcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQodGFyZ2V0Q2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1OTcwMFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHNUb01lcmdlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOVx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQoY2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1RvTWVyZ2UucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg6IGNvbEluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU0RTJEXHU5NUY0XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWRDb2xJbmRleCA9IGNvbEluZGV4IC0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkQ29sSW5kZXggPiB0YXJnZXRDb2xJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWRDZWxsID0gcm93c1tyb3dJbmRleF0/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpW21pZENvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZENlbGwgJiYgdGhpcy5oYXNNZWFuaW5nZnVsQ29udGVudChtaWRDZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNUb01lcmdlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xJbmRleDogbWlkQ29sSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWlkQ2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU4QkE0XHU2NjJGXHU1NDI2XHU4OTg2XHU3NkQ2XHU5NzVFXHU3QTdBXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkgJiYgY2VsbHNUb01lcmdlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcdUZGMENcdTUzMDVcdTU0MkJcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTg5ODZcdTc2RDZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsQ29udGVudHMgPSBjZWxsc1RvTWVyZ2UubWFwKGMgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBbJHtjLnJvd0luZGV4KzF9LCR7Yy5jb2xJbmRleCsxfV06IFwiJHtjLmNvbnRlbnR9XCJgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5qb2luKCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTWVyZ2UgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHU0RUU1XHU0RTBCXHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XHU1QzA2XHU4OEFCXHU4OTg2XHU3NkQ2OlxcbiR7Y2VsbENvbnRlbnRzfVxcblxcblx1Nzg2RVx1NUI5QVx1ODk4MVx1NTQwOFx1NUU3Nlx1OEZEOVx1NEU5Qlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTQxN1x1RkYxRmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybU1lcmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTc1MjhcdTYyMzdcdTUzRDZcdTZEODhcdTRFODZcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTVGNTNcdTUyNERcdTc2ODRjb2xzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sU3BhbiA9IHBhcnNlSW50KHRhcmdldENlbGwuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgfHwgJzEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2NUIwXHU3Njg0Y29sc3Bhblx1RkYxQVx1NUY1M1x1NTI0RGNvbHNwYW4gKyBjb3VudFx1RkYwOFx1NTQwOFx1NUU3Nlx1NzY4NFx1NTIxN1x1NjU3MFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3BhbiA9IGNvbFNwYW4gKyBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVjb2xzcGFuOiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0MoJHtyb3dJbmRleH0sJHt0YXJnZXRDb2xJbmRleH0pLCBjb2xzcGFuPSR7Y29sU3Bhbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NUIwXHU3Njg0Y29sc3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC5jb2xTcGFuID0gY29sU3BhbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDA4XHU1RTc2XHU2ODM3XHU1RjBGXHU3QzdCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTVGNTNcdTUyNERcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU1OTMxXHU4RDI1OiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTZDQTFcdTY3MDlcdTY3MDlcdTY1NDhcdTUxODVcdTVCQjknLCB0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NDJGXHU3NTI4XHU0RTg2XHU4MUVBXHU1MkE4XHU1QzQ1XHU0RTJEXHVGRjBDXHU1QkY5XHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1RTk0XHU3NTI4XHU1QzQ1XHU0RTJEXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZENlbGxzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgnW3Jvd3NwYW5dLCBbY29sc3Bhbl0nKTtcclxuICAgICAgICAgICAgICAgIG1lcmdlZENlbGxzLmZvckVhY2goY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaHRtbENlbGwgPSBjZWxsIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChodG1sQ2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nKSB8fCAnMScpID4gMSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoaHRtbENlbGwuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgfHwgJzEnKSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbENlbGwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbENlbGwuY2xhc3NMaXN0LmFkZCgnb2JzLW1lcmdlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1ODg2OFx1NjgzQ1x1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NTIzME1hcmtkb3duXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBhcHBseU1lcmdlQ2VsbHNNYXJrZXJzKHRhYmxlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NTkwNFx1NzQwNlx1OEZDN1xyXG4gICAgICAgICAgICBpZiAodGFibGUuZGF0YXNldC50YWJsZU1lcmdlUHJvY2Vzc2VkID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTZCQ0ZcdTRFMkFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY2VsbHMubGVuZ3RoOyBjb2xJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsQ29udGVudCA9IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0TWF0Y2ggPSBjZWxsQ29udGVudC5tYXRjaCgvXig8K3xcXFxcPHxcXHMqPCtcXHMqKSQvKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdE1hdGNoICYmIGNvbEluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTU0MDhcdTVFNzZcdTc2ODRcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lcmdlQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbENvbnRlbnQubWF0Y2goL148KyQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VDb3VudCA9IGNlbGxDb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RTk0XHU3NTI4XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU2ODA3XHU4QkIwXHU2NTcwXHU5MUNGPSR7bWVyZ2VDb3VudH0sIFx1NTE4NVx1NUJCOT1cIiR7Y2VsbENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDb2xJbmRleCA9IGNvbEluZGV4IC0gbWVyZ2VDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENvbEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRDZWxsID0gY2VsbHNbdGFyZ2V0Q29sSW5kZXhdIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVjb2xzcGFuXHVGRjFBXHU1NDA4XHU1RTc2XHU3Njg0XHU1MjE3XHU2NTcwICsgMVx1RkYwOFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjcyQ1x1OEVBQlx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sU3BhbiA9IG1lcmdlQ291bnQgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEJCRVx1N0Y2RWNvbHNwYW46IFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQygke3Jvd0luZGV4fSwke3RhcmdldENvbEluZGV4fSksIGNvbHNwYW49JHtjb2xTcGFufWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdENlbGwuY29sU3BhbiA9IGNvbFNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0Q2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTVGNTNcdTUyNERcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NDJGXHU3NTI4XHU0RTg2XHU4MUVBXHU1MkE4XHU1QzQ1XHU0RTJEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ2VudGVyTWVyZ2VkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRDZWxsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdENlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcdTdDN0JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdENlbGwuY2xhc3NMaXN0LmFkZCgnb2JzLW1lcmdlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU1NDExXHU0RTBBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBNYXRjaCA9IGNlbGxDb250ZW50Lm1hdGNoKC9eKFxcXit8XFxcXFxcXnxcXHMqXFxeK1xccyopJC8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cE1hdGNoICYmIHJvd0luZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lcmdlQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbENvbnRlbnQubWF0Y2goL15cXF4rJC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUNvdW50ID0gY2VsbENvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVFOTRcdTc1MjhcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6IFx1ODg0Qz0ke3Jvd0luZGV4fSwgXHU1MjE3PSR7Y29sSW5kZXh9LCBcdTY4MDdcdThCQjBcdTY1NzBcdTkxQ0Y9JHttZXJnZUNvdW50fSwgXHU1MTg1XHU1QkI5PVwiJHtjZWxsQ29udGVudH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFJvd0luZGV4ID0gcm93SW5kZXggLSBtZXJnZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Um93SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJvdmVSb3cgPSByb3dzW3RhcmdldFJvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJvdmVDZWxscyA9IGFib3ZlUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4IDwgYWJvdmVDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3ZlQ2VsbCA9IGFib3ZlQ2VsbHNbY29sSW5kZXhdIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RXJvd3NwYW5cdUZGMUFcdTU0MDhcdTVFNzZcdTc2ODRcdTg4NENcdTY1NzAgKyAxXHVGRjA4XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NzJDXHU4RUFCXHVGRjA5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93U3BhbiA9IG1lcmdlQ291bnQgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdThCQkVcdTdGNkVyb3dzcGFuOiBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0MoJHt0YXJnZXRSb3dJbmRleH0sJHtjb2xJbmRleH0pLCByb3dzcGFuPSR7cm93U3Bhbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm92ZUNlbGwucm93U3BhbiA9IHJvd1NwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvdmVDZWxsLnNldEF0dHJpYnV0ZSgncm93c3BhbicsIHJvd1NwYW4udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1RjUzXHU1MjREXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3ZlQ2VsbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm92ZUNlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcdTdDN0JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3ZlQ2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZyb3dzcGFuXHU1NDhDY29sc3BhblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd1NwYW4gPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpIHx8ICcxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sU3BhbiA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgfHwgJzEnKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTU0MDhcdTVFNzZcdUZGMENcdTRFM0FcdTRFMEJcdTY1QjlcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAoXilcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93U3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dTcGFuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dJbmRleCArIGkgPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFJvdyA9IHJvd3Nbcm93SW5kZXggKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxscyA9IHRhcmdldFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPCB0YXJnZXRDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VsbCA9IHRhcmdldENlbGxzW2NvbEluZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5MUNEXHU1OTBEXHU3Njg0Xlx1ODg2OFx1NzkzQVx1NTQwOFx1NUU3Nlx1NzY4NFx1ODg0Q1x1NjU3MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXJUZXh0ID0gJ14nLnJlcGVhdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NkRGQlx1NTJBMFx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU0RjREXHU3RjZFKCR7cm93SW5kZXgraX0sJHtjb2xJbmRleH0pLCBcdTY4MDdcdThCQjA9XCIke21hcmtlclRleHR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2VsbC50ZXh0Q29udGVudCA9IG1hcmtlclRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZCgnbWVyZ2UtbWFya2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NTQwOFx1NUU3Nlx1RkYwQ1x1NEUzQVx1NTNGM1x1NEZBN1x1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NkRGQlx1NTJBMFx1NTQxMVx1NURFNlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCg8KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvbFNwYW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENlbGwgPSBjZWxsc1tjb2xJbmRleCArIGldIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTFDRFx1NTkwRFx1NzY4NDxcdTg4NjhcdTc5M0FcdTU0MDhcdTVFNzZcdTc2ODRcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXJUZXh0ID0gJzwnLnJlcGVhdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2REZCXHU1MkEwXHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTRGNERcdTdGNkUoJHtyb3dJbmRleH0sJHtjb2xJbmRleCtpfSksIFx1NjgwN1x1OEJCMD1cIiR7bWFya2VyVGV4dH1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwudGV4dENvbnRlbnQgPSBtYXJrZXJUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZCgnbWVyZ2UtbWFya2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1ODg2OFx1NjgzQ1x1NEUzQVx1NURGMlx1NTkwNFx1NzQwNlxyXG4gICAgICAgICAgICB0YWJsZS5kYXRhc2V0LnRhYmxlTWVyZ2VQcm9jZXNzZWQgPSAndHJ1ZSc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTU5MDRcdTc0MDZcdTVCOENcdTYyMTBcdUZGMENcdTVERjJcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODA3XHU4QkIwXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTU5MUFcdTkwMDlcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzZcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSBzZWxlY3RlZENlbGxzIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjU3MFx1N0VDNFxyXG4gICAgICogQHJldHVybnMgXHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHU1NDA4XHU1RTc2XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG1lcmdlU2VsZWN0ZWRDZWxscyh0YWJsZTogSFRNTEVsZW1lbnQsIHNlbGVjdGVkQ2VsbHM6IEhUTUxFbGVtZW50W10pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkQ2VsbHMgfHwgc2VsZWN0ZWRDZWxscy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1ODFGM1x1NUMxMTJcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdThGREJcdTg4NENcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU5MDA5XHU0RTJEXHU1MzNBXHU1N0RGXHU3Njg0XHU4RkI5XHU3NTRDXHJcbiAgICAgICAgICAgIGxldCBtaW5Sb3cgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICAgICAgbGV0IG1heFJvdyA9IDA7XHJcbiAgICAgICAgICAgIGxldCBtaW5Db2wgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICAgICAgbGV0IG1heENvbCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNDBcdTY3MDlcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTVFNzZcdThCQjBcdTVGNTVcdThGQjlcdTc1NENcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHNlbGVjdGVkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5yb3dJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgY2VsbC5kYXRhc2V0LmNvbEluZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1pblJvdyA9IE1hdGgubWluKG1pblJvdywgcm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgbWF4Um93ID0gTWF0aC5tYXgobWF4Um93LCByb3dJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBtaW5Db2wgPSBNYXRoLm1pbihtaW5Db2wsIGNvbEluZGV4KTtcclxuICAgICAgICAgICAgICAgIG1heENvbCA9IE1hdGgubWF4KG1heENvbCwgY29sSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTY2MkZcdTU0MjZcdTVGNjJcdTYyMTBcdTVCOENcdTY1NzRcdTc3RTlcdTVGNjJcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRDZWxsQ291bnQgPSAobWF4Um93IC0gbWluUm93ICsgMSkgKiAobWF4Q29sIC0gbWluQ29sICsgMSk7XHJcbiAgICAgICAgICAgIGlmIChleHBlY3RlZENlbGxDb3VudCAhPT0gc2VsZWN0ZWRDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTNFQVx1ODBGRFx1NTQwOFx1NUU3Nlx1NUY2Mlx1NjIxMFx1NUI4Q1x1NjU3NFx1NzdFOVx1NUY2Mlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTVERTZcdTRFMEFcdTg5RDJcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNUNcdTRFM0FcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgbWFpbkNlbGwgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHttaW5Sb3d9XCJdW2NvbC1pbmRleD1cIiR7bWluQ29sfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoIW1haW5DZWxsKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTYyN0VcdTUyMzBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5NzVFXHU3QTdBXHU1MzU1XHU1MTQzXHU2ODNDXHU5NzAwXHU4OTgxXHU3ODZFXHU4QkE0XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2NTM2XHU5NkM2XHU2MjQwXHU2NzA5XHU5NzAwXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU5NzVFXHU3QTdBXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA4XHU5NjY0XHU0RTg2XHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub25FbXB0eUNlbGxzID0gW107XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBzZWxlY3RlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwgPT09IG1haW5DZWxsKSBjb250aW51ZTsgLy8gXHU1RkZEXHU3NTY1XHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTWVhbmluZ2Z1bENvbnRlbnQoY2VsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgY2VsbC5kYXRhc2V0LnJvd0luZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbC1pbmRleCcpIHx8IGNlbGwuZGF0YXNldC5jb2xJbmRleCB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uRW1wdHlDZWxscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbEluZGV4OiBjb2xJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChub25FbXB0eUNlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTc4NkVcdThCQTRcdTZEODhcdTYwNkZcdUZGMENcdTUzMDVcdTU0MkJcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTg5ODZcdTc2RDZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsQ29udGVudHMgPSBub25FbXB0eUNlbGxzLm1hcChjID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgWyR7Yy5yb3dJbmRleCsxfSwke2MuY29sSW5kZXgrMX1dOiBcIiR7Yy5jb250ZW50fVwiYFxyXG4gICAgICAgICAgICAgICAgICAgICkuam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1RTc2XHU2NjNFXHU3OTNBXHU3ODZFXHU4QkE0XHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybU1lcmdlID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1NEVFNVx1NEUwQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQlx1NTE4NVx1NUJCOVx1NUMwNlx1ODhBQlx1ODk4Nlx1NzZENjpcXG4ke2NlbGxDb250ZW50c31cXG5cXG5cdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdThGRDlcdTRFOUJcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1NZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTUzRDZcdTZEODhcdTU0MDhcdTVFNzZcdTY0Q0RcdTRGNUMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd1NwYW5WYWx1ZSA9IG1heFJvdyAtIG1pblJvdyArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbFNwYW5WYWx1ZSA9IG1heENvbCAtIG1pbkNvbCArIDE7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1Mjhyb3dzcGFuXHU1NDhDY29sc3Bhblx1NTIzMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBtYWluQ2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dTcGFuVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIG1haW5DZWxsLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbFNwYW5WYWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgbWFpbkNlbGwucm93U3BhbiA9IHJvd1NwYW5WYWx1ZTtcclxuICAgICAgICAgICAgbWFpbkNlbGwuY29sU3BhbiA9IGNvbFNwYW5WYWx1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQwOFx1NUU3Nlx1NjgzN1x1NUYwRlx1N0M3QlxyXG4gICAgICAgICAgICBtYWluQ2VsbC5jbGFzc0xpc3QuYWRkKCdvYnMtbWVyZ2VkLWNlbGwnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1NEU4Nlx1ODFFQVx1NTJBOFx1NUM0NVx1NEUyRFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NlbnRlck1lcmdlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBtYWluQ2VsbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgIG1haW5DZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1MTc2XHU0RUQ2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBzZWxlY3RlZENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCAhPT0gbWFpbkNlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgwN1x1OEJCMFx1NTIzMFx1NTMzQVx1NTdERlxyXG4gICAgICAgICAgICB0aGlzLmFwcGx5TWVyZ2VDZWxsc01hcmtlcnNGb3JBcmVhKHRhYmxlLCBtaW5Sb3csIG1pbkNvbCwgbWF4Um93LCBtYXhDb2wpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NDA4XHU1RTc2XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEUzQVx1NzI3OVx1NUI5QVx1NTMzQVx1NTdERlx1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICogQHBhcmFtIHN0YXJ0Um93IFx1OEQ3N1x1NTlDQlx1ODg0Q1xyXG4gICAgICogQHBhcmFtIHN0YXJ0Q29sIFx1OEQ3N1x1NTlDQlx1NTIxN1xyXG4gICAgICogQHBhcmFtIGVuZFJvdyBcdTdFRDNcdTY3NUZcdTg4NENcclxuICAgICAqIEBwYXJhbSBlbmRDb2wgXHU3RUQzXHU2NzVGXHU1MjE3XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlNZXJnZUNlbGxzTWFya2Vyc0ZvckFyZWEodGFibGU6IEhUTUxFbGVtZW50LCBzdGFydFJvdzogbnVtYmVyLCBzdGFydENvbDogbnVtYmVyLCBlbmRSb3c6IG51bWJlciwgZW5kQ29sOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NTMzQVx1NTdERlx1NTE4NVx1OTY2NFx1NEU4Nlx1NURFNlx1NEUwQVx1ODlEMlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkxNlx1NzY4NFx1NjI0MFx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBmb3IgKGxldCByb3dJbmRleCA9IHN0YXJ0Um93OyByb3dJbmRleCA8PSBlbmRSb3c7IHJvd0luZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dJbmRleCA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tyb3dJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29sSW5kZXggPSBzdGFydENvbDsgY29sSW5kZXggPD0gZW5kQ29sOyBjb2xJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA8IGNlbGxzLmxlbmd0aCAmJiAhKHJvd0luZGV4ID09PSBzdGFydFJvdyAmJiBjb2xJbmRleCA9PT0gc3RhcnRDb2wpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbY29sSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdCMkNcdTRFMDBcdTUyMTdcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTRGN0ZcdTc1MjhcdTU0MTFcdTRFMEFcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAoXilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gc3RhcnRDb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gJ14nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWVyZ2UtbWFya2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3QjJDXHU0RTAwXHU4ODRDXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjdGXHU3NTI4XHU1NDExXHU1REU2XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwKDwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3dJbmRleCA9PT0gc3RhcnRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gJzwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWVyZ2UtbWFya2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUxNzZcdTRFRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTk2OEZcdTY3M0FcdTRGN0ZcdTc1MjhcdTRFMDBcdTc5Q0RcdTY4MDdcdThCQjBcdUZGMENcdTRGRERcdThCQzFcdTRFMERcdTRGMUFcdTc3MEJcdTUyMzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAoTWF0aC5yYW5kb20oKSA+IDAuNSkgPyAnXicgOiAnPCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtZXJnZS1tYXJrZXInLCAnaGlkZGVuLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1RTk0XHU3NTI4XHU1MzNBXHU1N0RGXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiLy8gQHRzLW5vY2hlY2tcclxuLy8gXHU0RTBBXHU5NzYyXHU3Njg0XHU2MzA3XHU0RUU0XHU0RjFBXHU3OTgxXHU3NTI4XHU2NTc0XHU0RTJBXHU2NTg3XHU0RUY2XHU3Njg0XHU3QzdCXHU1NzhCXHU2OEMwXHU2N0U1XHJcblxyXG5pbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBKU09ONSBmcm9tICdqc29uNSc7XHJcbmltcG9ydCB7IFRhYmxlRmVhdHVyZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIFx1ODg2OFx1NjgzQ0lEXHU3QkExXHU3NDA2XHU1NjY4IC0gXHU4RDFGXHU4RDIzXHU4ODY4XHU2ODNDSURcdTc2ODRcdTc1MUZcdTYyMTBcdTMwMDFcdTgzQjdcdTUzRDZcdTMwMDFcdTg5RTNcdTY3OTBcdTU0OENcdTYzMDFcdTRFNDVcdTUzMTZcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUYWJsZUlkTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIHByaXZhdGUgc3RhdGljIGlzUHJvY2Vzc2luZ1RhYmxlSWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgc3RhdGljIGlzQ3JlYXRpbmdUYWJsZUlkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0KSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlSWRNYW5hZ2VyIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1OEY4NVx1NTJBOVx1NjVCOVx1NkNENVx1RkYwQ1x1ODNCN1x1NTNENmFwcFx1NUJGOVx1OEM2MVxyXG4gICAgcHJpdmF0ZSBnZXRBcHAoKTogQXBwIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luKS5hcHA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTY4MDdcdThCQzZcdTdCMjZcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NIVE1MXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gdXNlRmFsbGJhY2sgXHU2NjJGXHU1NDI2XHU1NzI4XHU2NzJBXHU2MjdFXHU1MjMwSFRNTFx1NkNFOFx1OTFDQUlEXHU2NUY2XHU0RjdGXHU3NTI4XHU1MTc2XHU0RUQ2SURcdTY3NjVcdTZFOTBcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBnZXRUYWJsZUlkZW50aWZpZXIodGFibGU6IEhUTUxFbGVtZW50LCB1c2VGYWxsYmFjazogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKFRhYmxlSWRNYW5hZ2VyLmlzUHJvY2Vzc2luZ1RhYmxlSWQpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc1Byb2Nlc3NpbmdUYWJsZUlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVGMDBcdTU5Q0JcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMS4gXHU5OTk2XHU1MTQ4XHU0RUNFXHU4ODY4XHU2ODNDRE9NXHU1QzVFXHU2MDI3XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjRESURcdUZGMDhcdTRFQzVcdTc1MjhcdTRFOEVcdTY1RTVcdTVGRDdcdTU0OENcdTZCRDRcdThGODNcdUZGMDlcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudERvbUlkID0gdGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50RG9tSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTVGNTNcdTUyNERET01cdTVDNUVcdTYwMjdJRDogJHtjdXJyZW50RG9tSWR9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDIuIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NzUyOFx1NEU4RVx1OUE4Q1x1OEJDMVxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUZlYXR1cmUgPSB0aGlzLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGUpO1xyXG4gICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2M0QwXHU1M0Q2XHU3Njg0XHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxOmAsIHRhYmxlRmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIFx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTgzQjdcdTUzRDZJRFx1RkYwOFx1NjcwMFx1OUFEOFx1NEYxOFx1NTE0OFx1N0VBN1x1RkYwOVxyXG4gICAgICAgICAgICBsZXQgY29tbWVudElkID0gdGhpcy5nZXRUYWJsZUlkRnJvbUNvbW1lbnQodGFibGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNC4gXHU2QkQ0XHU4RjgzRE9NXHU1QzVFXHU2MDI3SURcdTU0OENIVE1MXHU2Q0U4XHU5MUNBSURcclxuICAgICAgICAgICAgaWYgKGNvbW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTgzQjdcdTUzRDZcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q0RPTVx1NUM1RVx1NjAyN0lEXHU0RTBFSFRNTFx1NkNFOFx1OTFDQUlEXHU0RTBEXHU1MzM5XHU5MTREXHVGRjBDXHU2NkY0XHU2NUIwRE9NXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudERvbUlkICYmIGN1cnJlbnREb21JZCAhPT0gY29tbWVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEI2Nlx1NTQ0QTogRE9NXHU0RTJEXHU3Njg0SUQoJHtjdXJyZW50RG9tSWR9KVx1NEUwRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTc2ODRJRCgke2NvbW1lbnRJZH0pXHU0RTBEXHU1MzM5XHU5MTREYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NkI2M1x1NTcyOFx1NjZGNFx1NjVCMERPTVx1NUM1RVx1NjAyN1x1RkYwQ1x1NEY3Rlx1NzUyOEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTc2ODRJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgY29tbWVudElkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWN1cnJlbnREb21JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q0RPTVx1NkNBMVx1NjcwOUlEXHU1QzVFXHU2MDI3XHVGRjBDXHU4QkJFXHU3RjZFXHU1QjgzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEJCRVx1N0Y2RURPTVx1NUM1RVx1NjAyN0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBjb21tZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZUZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtZmVhdHVyZScsIEpTT04uc3RyaW5naWZ5KHRhYmxlRmVhdHVyZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc1Byb2Nlc3NpbmdUYWJsZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA1LiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBIVE1MXHU2Q0U4XHU5MUNBSURcdUZGMENcdTRGNDZcdTUxNDFcdThCQjhcdTU2REVcdTkwMDBcdUZGMENcdTUyMTlcdTRGN0ZcdTc1MjhET01cdTVDNUVcdTYwMjdJRFxyXG4gICAgICAgICAgICBpZiAodXNlRmFsbGJhY2sgJiYgY3VycmVudERvbUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NzJBXHU1NzI4SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU1NkRFXHU5MDAwXHU0RjdGXHU3NTI4RE9NXHU1QzVFXHU2MDI3SUQ6ICR7Y3VycmVudERvbUlkfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZUZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtZmVhdHVyZScsIEpTT04uc3RyaW5naWZ5KHRhYmxlRmVhdHVyZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc1Byb2Nlc3NpbmdUYWJsZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERvbUlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA2LiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBIVE1MXHU2Q0U4XHU5MUNBSURcdUZGMENcdTRFMTRcdTRFMERcdTUxNDFcdThCQjhcdTU2REVcdTkwMDBcdTYyMTZET01cdTRFMkRcdTZDQTFcdTY3MDlJRFx1RkYwQ1x1NTIxOVx1NEUwRFx1OEZENFx1NTZERVx1NEVGQlx1NEY1NUlEXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTU3MjhIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdUZGMENcdTRFMERcdTRGN0ZcdTc1MjhcdTUxNzZcdTRFRDZJRFx1Njc2NVx1NkU5MCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNy4gXHU1OTgyXHU2NzlDRE9NXHU0RTJEXHU2NzA5SURcdTRGNDZcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBIVE1MXHU2Q0U4XHU5MUNBSURcdTRFMTRcdTRFMERcdTUxNDFcdThCQjhcdTU2REVcdTkwMDBcdUZGMENcdTZFMDVcdTk2NjRET01cdTRFMkRcdTc2ODRJRFx1NEVFNVx1OTA3Rlx1NTE0RFx1NkRGN1x1NkRDNlxyXG4gICAgICAgICAgICBpZiAoIXVzZUZhbGxiYWNrICYmIGN1cnJlbnREb21JZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEI2Nlx1NTQ0QTogXHU4ODY4XHU2ODNDRE9NXHU0RTJEXHU2NzA5SUQoJHtjdXJyZW50RG9tSWR9KVx1RkYwQ1x1NEY0Nlx1NjcyQVx1NTcyOEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTYyN0VcdTUyMzBcdTVCRjlcdTVFOTRJRGApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NkUwNVx1OTY2NERPTVx1NEUyRFx1NzY4NElEXHU1QzVFXHU2MDI3XHVGRjBDXHU0RUU1XHU5MDdGXHU1MTREXHU0RjdGXHU3NTI4XHU4RkM3XHU2NUY2XHU2MjE2XHU0RTBEXHU2QjYzXHU3ODZFXHU3Njg0SUQnKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc1Byb2Nlc3NpbmdUYWJsZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNQcm9jZXNzaW5nVGFibGVJZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTYyMTZcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKi9cclxuICAgIGdldE9yQ3JlYXRlVGFibGVJZCh0YWJsZTogSFRNTEVsZW1lbnQpOiBzdHJpbmcge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChUYWJsZUlkTWFuYWdlci5pc0NyZWF0aW5nVGFibGVJZCkgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICBUYWJsZUlkTWFuYWdlci5pc0NyZWF0aW5nVGFibGVJZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTgzQjdcdTUzRDZIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU3Njg0SURcdUZGMENcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTUyMTlcdTU2REVcdTkwMDBcdTUyMzBET01cdTVDNUVcdTYwMjdJRFxyXG4gICAgICAgICAgICBsZXQgdGFibGVJZCA9IHRoaXMuZ2V0VGFibGVJZGVudGlmaWVyKHRhYmxlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOUlEXHVGRjBDXHU1MjE5XHU4RkQ0XHU1NkRFXHU3QTdBXHU1QjU3XHU3QjI2XHU0RTMyXHVGRjBDXHU0RjQ2XHU2M0QwXHU3OTNBXHU3NTI4XHU2MjM3XHU1M0VGXHU0RUU1XHU1MjFCXHU1RUZBSURcclxuICAgICAgICAgICAgaWYgKCF0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdUZGMENcdTUzRUZcdTRFRTVcdTRGN0ZcdTc1Mjhjb25maXJtQW5kQ3JlYXRlVGFibGVJZFx1NjVCOVx1NkNENVx1NTIxQlx1NUVGQVx1NjVCMElEJyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1OEJGN1x1NEY3Rlx1NzUyOFx1ODg2OFx1NjgzQ1x1NURFNVx1NTE3N1x1NjgwRlx1NEUyRFx1NzY4NFwiXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDSURcIlx1NTI5Rlx1ODBGRFx1NTIxQlx1NUVGQVx1NjVCMElEJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRhYmxlSWRNYW5hZ2VyLmlzQ3JlYXRpbmdUYWJsZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJsZUlkIHx8ICcnO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgVGFibGVJZE1hbmFnZXIuaXNDcmVhdGluZ1RhYmxlSWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1Nzg2RVx1OEJBNFx1NUU3Nlx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICogQHJldHVybnMgXHU1MjFCXHU1RUZBXHU3Njg0XHU4ODY4XHU2ODNDSURcclxuICAgICAqL1xyXG4gICAgY29uZmlybUFuZENyZWF0ZVRhYmxlSWQodGFibGU6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTUxNDhcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0lkID0gdGhpcy5nZXRUYWJsZUlkZW50aWZpZXIodGFibGUsIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NURGMlx1NjcwOUlEOiAke2V4aXN0aW5nSWR9XHVGRjBDXHU0RTBEXHU5NzAwXHU4OTgxXHU1MjFCXHU1RUZBXHU2NUIwSURgKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1ODg2OFx1NjgzQ1x1NURGMlx1NjcwOUlEOiAke2V4aXN0aW5nSWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3NTFGXHU2MjEwXHU2NUIwSURcclxuICAgICAgICAgICAgY29uc3QgbmV3SWQgPSB0aGlzLmdlbmVyYXRlVGFibGVJZCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RTNBXHU4ODY4XHU2ODNDXHU3NTFGXHU2MjEwXHU2NUIwSUQ6ICR7bmV3SWR9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICB0aGlzLmFkZFRhYmxlSWRDb21tZW50KHRhYmxlLCBuZXdJZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThGRDRcdTU2REVcdTY1QjBJRFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3SWQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU3ODZFXHU4QkE0XHU1RTc2XHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VGFibGVJZEZyb21Db21tZW50KHRhYmxlOiBIVE1MRWxlbWVudCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVGMDBcdTU5Q0JcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDSUQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1ODg2OFx1NjgzQ0RPTTonLCB0YWJsZS5vdXRlckhUTUwuc3Vic3RyaW5nKDAsIDEwMCkgKyAnLi4uJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NEUyRFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgICAgICAgIC8vIFx1OEZEOVx1NjYyRlx1NEUwMFx1NEUyQVx1NjZGNFx1NTNFRlx1OTc2MFx1NzY4NFx1NjVCOVx1NkNENVx1RkYwQ1x1NTZFMFx1NEUzQVx1NUI4M1x1NEUwRFx1NEY5RFx1OEQ1Nlx1NEU4RURPTVx1N0VEM1x1Njc4NFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1QzFEXHU4QkQ1XHU0RUNFXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU0RTJEXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDSUQ6ICR7YWN0aXZlRmlsZS5wYXRofWApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlUG9zaXRpb24gPSB0aGlzLmdldFRhYmxlUG9zaXRpb25JbkRPTSh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NEY0RFx1N0Y2RTogXHU3QjJDJHt0YWJsZVBvc2l0aW9uLmluZGV4fVx1NEUyQVx1ODg2OFx1NjgzQ2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkZCXHU1M0Q2XHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU1RTc2XHU1OTA0XHU3NDA2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXBwKCkudmF1bHQucmVhZChhY3RpdmVGaWxlKS50aGVuKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjA2XHU2NzkwXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHVGRjBDXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDXHU1NDhDXHU1QkY5XHU1RTk0XHU3Njg0SURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlSW5mb3MgPSB0aGlzLmV4dHJhY3RUYWJsZUlkc0Zyb21NYXJrZG93bihjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjNEMFx1NTNENlx1NzY4NFx1ODg2OFx1NjgzQ0lEOmAsIHRhYmxlSW5mb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTRFODZcdTVCRjlcdTVFOTRcdTRGNERcdTdGNkVcdTc2ODRcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NUI4M1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlSW5mb3MubGVuZ3RoID4gdGFibGVQb3NpdGlvbi5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHRhYmxlSW5mb3NbdGFibGVQb3NpdGlvbi5pbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMDZJRFx1OEJCRVx1N0Y2RVx1NTIzMFx1ODg2OFx1NjgzQ0RPTVx1NUM1RVx1NjAyN1x1NEUyRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCRkJcdTUzRDZcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU0RUNFXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTUyNERcdTk3NjJcdTc2ODRcdTZDRThcdTkxQ0FcdTgyODJcdTcwQjlcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSB0YWJsZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgIGxldCBub2RlQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUYwMFx1NTlDQlx1OTA0RFx1NTM4Nlx1NTI0RFx1N0Y2RVx1ODI4Mlx1NzBCOS4uLicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5MDREXHU1Mzg2XHU1MjREXHU5NzYyXHU3Njg0XHU2MjQwXHU2NzA5XHU4MjgyXHU3MEI5XHVGRjBDXHU3NkY0XHU1MjMwXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdTYyMTZcdThGQkVcdTUyMzBcdTY3MDBcdTU5MjdcdTY4QzBcdTY3RTVcdTY1NzBcdTkxQ0ZcclxuICAgICAgICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZUNvdW50IDwgMzApIHsgLy8gXHU1ODlFXHU1MkEwXHU2OEMwXHU2N0U1XHU4MjgyXHU3MEI5XHU2NTcwXHU5MUNGXHU1MjMwMzBcdTRFMkFcdUZGMENcdThGREJcdTRFMDBcdTZCNjVcdTYzRDBcdTlBRDhcdTY3RTVcdTYyN0VcdTgzMDNcdTU2RjRcclxuICAgICAgICAgICAgICAgIG5vZGVDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdThCQjBcdTVGNTVcdTgyODJcdTcwQjlcdTdDN0JcdTU3OEJcdTU0OENcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVUeXBlID0gbm9kZS5ub2RlVHlwZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVUeXBlU3RyID0gbm9kZVR5cGUgPT09IE5vZGUuQ09NTUVOVF9OT0RFID8gJ0NPTU1FTlQnIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFID8gJ1RFWFQnIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFID8gJ0VMRU1FTlQnIDogJ09USEVSJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1ODI4Mlx1NzBCOSAjJHtub2RlQ291bnR9OiBcdTdDN0JcdTU3OEI9JHtub2RlVHlwZVN0cn1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZVR5cGUgPT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudFRleHQgPSBub2RlLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTNEMVx1NzNCMFx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOTogXCIke2NvbW1lbnRUZXh0fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MzM5XHU5MTREXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHU2Q0U4XHU5MUNBXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVnaW5NYXRjaCA9IGNvbW1lbnRUZXh0Lm1hdGNoKC90YWJsZS1iZWdpbjpcXHMqKFthLXpBLVowLTlfXFwtOi5dKykvaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlZ2luTWF0Y2ggJiYgYmVnaW5NYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSBiZWdpbk1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHU2Q0U4XHU5MUNBXHU0RTJEXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUzMzlcdTkxNERcdTU5MUFcdTc5Q0RcdTUzRUZcdTgwRkRcdTc2ODRcdTY4M0NcdTVGMEZcdUZGMENcdTY2RjRcdTVCQkRcdTY3N0VcdTc2ODRcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAvLyAxLiA8IS0tIHRhYmxlLWlkOiB4eHggLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gPCEtLSB0YWJsZS1pZDp4eHggLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMy4gPCEtLXRhYmxlLWlkOiB4eHgtLT5cclxuICAgICAgICAgICAgICAgICAgICAvLyA0LiA8IS0tdGFibGUtaWQ6eHh4LS0+XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRNYXRjaCA9IGNvbW1lbnRUZXh0Lm1hdGNoKC90YWJsZVstX10/aWQ6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKS9pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWRNYXRjaCAmJiBpZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGlkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU2MjEwXHU1MjlGXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTUxNzZcdTRFRDZcdTUzRUZcdTgwRkRcdTc2ODRcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAvLyA1LiA8IS0tIGlkOiB4eHggLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWx0SWRNYXRjaCA9IGNvbW1lbnRUZXh0Lm1hdGNoKC9pZDo/XFxzKihbYS16QS1aMC05X1xcLTouXSspL2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHRJZE1hdGNoICYmIGFsdElkTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gYWx0SWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NjZGRlx1NEVFM1x1NjgzQ1x1NUYwRkhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tZW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDYuIDwhLS0gdGJsOiB4eHggLS0+IFx1NjIxNiA8IS0tIHRhYmxlOiB4eHggLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGJsTWF0Y2ggPSBjb21tZW50VGV4dC5tYXRjaCgvKHRibHx0YWJsZSk6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKS9pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGJsTWF0Y2ggJiYgdGJsTWF0Y2hbMl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gdGJsTWF0Y2hbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0V0YmwvdGFibGVcdTY4M0NcdTVGMEZIVE1MXHU2Q0U4XHU5MUNBXHU0RTJEXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU2NTg3XHU2NzJDXHU4MjgyXHU3MEI5XHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCSFRNTFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gbm9kZS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NTg3XHU2NzJDXHU4MjgyXHU3MEI5XHU1MTg1XHU1QkI5OiBcIiR7dGV4dENvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKX0ke3RleHRDb250ZW50Lmxlbmd0aCA+IDMwID8gJy4uLicgOiAnJ31cImApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjU4N1x1NjcyQ1x1NEUyRFx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQkhUTUxcdTZDRThcdTkxQ0FcdTY4M0NcdTVGMEZcdTc2ODRJRFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxDb21tZW50TWF0Y2ggPSB0ZXh0Q29udGVudC5tYXRjaCgvPCEtLVxccyp0YWJsZVstX10/aWQ6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh0bWxDb21tZW50TWF0Y2ggJiYgaHRtbENvbW1lbnRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSBodG1sQ29tbWVudE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU2NTg3XHU2NzJDXHU4MjgyXHU3MEI5XHU0RTJEXHU3Njg0SFRNTFx1NkNFOFx1OTFDQVx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NkZGXHU0RUUzXHU2ODNDXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWx0SHRtbENvbW1lbnRNYXRjaCA9IHRleHRDb250ZW50Lm1hdGNoKC88IS0tXFxzKmlkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHRIdG1sQ29tbWVudE1hdGNoICYmIGFsdEh0bWxDb21tZW50TWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gYWx0SHRtbENvbW1lbnRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NjU4N1x1NjcyQ1x1ODI4Mlx1NzBCOVx1NEUyRFx1NzY4NFx1NjZGRlx1NEVFM0hUTUxcdTZDRThcdTkxQ0FcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tZW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNXRibC90YWJsZVx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRibEh0bWxDb21tZW50TWF0Y2ggPSB0ZXh0Q29udGVudC5tYXRjaCgvPCEtLVxccyoodGJsfHRhYmxlKTo/XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGJsSHRtbENvbW1lbnRNYXRjaCAmJiB0YmxIdG1sQ29tbWVudE1hdGNoWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IHRibEh0bWxDb21tZW50TWF0Y2hbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTY1ODdcdTY3MkNcdTgyODJcdTcwQjlcdTRFMkRcdTc2ODR0YmwvdGFibGUgSFRNTFx1NkNFOFx1OTFDQVx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRDb250ZW50LnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3QTdBXHU3NjdEXHU4MjgyXHU3MEI5XHVGRjBDXHU3RUU3XHU3RUVEXHU2OEMwXHU2N0U1XHU1MjREXHU0RTAwXHU0RTJBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTUxNDNcdTdEMjBcdTgyODJcdTcwQjlcdUZGMENcdThCQjBcdTVGNTVcdTY4MDdcdTdCN0VcdTU0MERcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdOYW1lID0gKG5vZGUgYXMgRWxlbWVudCkudGFnTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1MTQzXHU3RDIwXHU4MjgyXHU3MEI5OiA8JHt0YWdOYW1lLnRvTG93ZXJDYXNlKCl9PmApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTE0M1x1N0QyMFx1NzY4NGRhdGEtaWRcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtRGF0YUlkID0gKG5vZGUgYXMgRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfHwgKG5vZGUgYXMgRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1EYXRhSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NTE0M1x1N0QyMFx1NUM1RVx1NjAyN1x1NEUyRFx1NjI3RVx1NTIzMElEOiAke2VsZW1EYXRhSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtRGF0YUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxNDNcdTdEMjBcdTUxODVcdTVCQjlcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJIVE1MXHU2Q0U4XHU5MUNBXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbUNvbnRlbnQgPSAobm9kZSBhcyBFbGVtZW50KS5pbm5lckhUTUwgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1Db250ZW50LmluY2x1ZGVzKCc8IS0tJykgJiYgZWxlbUNvbnRlbnQuaW5jbHVkZXMoJy0tPicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUxNDNcdTdEMjBcdTUxODVcdTVCQjlcdTUzMDVcdTU0MkJIVE1MXHU2Q0U4XHU5MUNBOiBcIiR7ZWxlbUNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0ke2VsZW1Db250ZW50Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJ31cImApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1NDA0XHU3OUNEXHU2ODNDXHU1RjBGXHU3Njg0SFRNTFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBodG1sQ29tbWVudE1hdGNoID0gZWxlbUNvbnRlbnQubWF0Y2goLzwhLS1cXHMqdGFibGVbLV9dP2lkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaHRtbENvbW1lbnRNYXRjaCAmJiBodG1sQ29tbWVudE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSBodG1sQ29tbWVudE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEVDRVx1NTE0M1x1N0QyMFx1NTE4NVx1NUJCOVx1NEUyRFx1NzY4NEhUTUxcdTZDRThcdTkxQ0FcdThCQzZcdTUyMkJcdTg4NjhcdTY4M0NJRDogJHtjb21tZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NkJCNVx1ODQzRFx1MzAwMVx1NjM2Mlx1ODg0Q1x1NjIxNlx1NTIwNlx1OTY5NFx1N0VCRlx1RkYwQ1x1N0VFN1x1N0VFRFx1NjhDMFx1NjdFNVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChbJ0JSJywgJ0hSJywgJ1AnLCAnRElWJywgJ1NQQU4nXS5pbmNsdWRlcyh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTkwNDdcdTUyMzBcdTUxNzZcdTRFRDZcdTUxNDNcdTdEMjBcdUZGMENcdTUwNUNcdTZCNjJcdTY4QzBcdTY3RTVcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU5MDQ3XHU1MjMwXHU1MTQzXHU3RDIwXHU4MjgyXHU3MEI5ICR7dGFnTmFtZX1cdUZGMENcdTUwNUNcdTZCNjJcdTY3RTVcdTYyN0VgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MjREXHU0RTAwXHU0RTJBXHU1MTQ0XHU1RjFGXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjI3RVx1NTIzMFx1RkYwQ1x1NUMxRFx1OEJENVx1NjhDMFx1NjdFNVx1NzIzNlx1ODI4Mlx1NzBCOVx1NzY4NFx1NTI0RFx1NEUwMFx1NEUyQVx1NTE0NFx1NUYxRlx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAvLyBcdThGRDlcdTVCRjlcdTRFOEVcdTU5MDRcdTc0MDZcdTVENENcdTU5NTdcdTU3MjhkaXZcdTYyMTZcdTUxNzZcdTRFRDZcdTVCQjlcdTU2NjhcdTRFMkRcdTc2ODRcdTg4NjhcdTY4M0NcdTVGODhcdTY3MDlcdTc1MjhcclxuICAgICAgICAgICAgaWYgKHRhYmxlLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVDMURcdThCRDVcdTY4QzBcdTY3RTVcdTcyMzZcdTUxNDNcdTdEMjBcdTUzQ0FcdTUxNzZcdTUyNERcdTdGNkVcdTgyODJcdTcwQjkuLi4nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3MjM2XHU1MTQzXHU3RDIwXHU3Njg0ZGF0YS1pZFx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50RGF0YUlkID0gdGFibGUucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSB8fCB0YWJsZS5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudERhdGFJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTcyMzZcdTUxNDNcdTdEMjBcdTVDNUVcdTYwMjdcdTRFMkRcdTYyN0VcdTUyMzBJRDogJHtwYXJlbnREYXRhSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudERhdGFJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3MjM2XHU1MTQzXHU3RDIwXHU3Njg0XHU1MjREXHU0RTAwXHU0RTJBXHU1MTQ0XHU1RjFGXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50UHJldk5vZGUgPSB0YWJsZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50UHJldk5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFByZXZOb2RlLm5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudFRleHQgPSBwYXJlbnRQcmV2Tm9kZS50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTNEMVx1NzNCMFx1NzIzNlx1NTE0M1x1N0QyMFx1NTI0RFx1NzY4NFx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOTogXCIke2NvbW1lbnRUZXh0fVwiYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkTWF0Y2ggPSBjb21tZW50VGV4dC5tYXRjaCgvdGFibGVbLV9dP2lkOj9cXHMqKFthLXpBLVowLTlfXFwtOi5dKykvaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRNYXRjaCAmJiBpZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gaWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU3MjM2XHU1MTQzXHU3RDIwXHU1MjREXHU3Njg0SFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1OEJDNlx1NTIyQlx1ODg2OFx1NjgzQ0lEOiAke2NvbW1lbnRJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudFByZXZOb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NTg3XHU2NzJDXHU0RTJEXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCSFRNTFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBwYXJlbnRQcmV2Tm9kZS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxDb21tZW50TWF0Y2ggPSB0ZXh0Q29udGVudC5tYXRjaCgvPCEtLVxccyp0YWJsZVstX10/aWQ6P1xccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaHRtbENvbW1lbnRNYXRjaCAmJiBodG1sQ29tbWVudE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gaHRtbENvbW1lbnRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFXHU3MjM2XHU1MTQzXHU3RDIwXHU1MjREXHU3Njg0XHU2NTg3XHU2NzJDXHU4MjgyXHU3MEI5XHU0RTJEXHU4QkM2XHU1MjJCXHU4ODY4XHU2ODNDSUQ6ICR7Y29tbWVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tZW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzIzNlx1NTE0M1x1N0QyMFx1NzY4NFx1NzIzNlx1NTE0M1x1N0QyMFx1RkYwOFx1NTQxMVx1NEUwQVx1NEUyNFx1N0VBN1x1RkYwOVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYW5kUGFyZW50RGF0YUlkID0gdGFibGUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyYW5kUGFyZW50RGF0YUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTc5NTZcdTcyMzZcdTUxNDNcdTdEMjBcdTVDNUVcdTYwMjdcdTRFMkRcdTYyN0VcdTUyMzBJRDogJHtncmFuZFBhcmVudERhdGFJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyYW5kUGFyZW50RGF0YUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NTcyOEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRFQ0VcdTZDRThcdTkxQ0FcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHU2Q0U4XHU5MUNBXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gICAgICogQHBhcmFtIGlkIFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWRkVGFibGVJZENvbW1lbnQodGFibGU6IEhUTUxFbGVtZW50LCBpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRmVhdHVyZSA9IHRoaXMuZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVKc29uID0gSlNPTi5zdHJpbmdpZnkodGFibGVGZWF0dXJlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1NTQyRlx1NzUyOFx1NEU4Nlx1NkNFOFx1OTFDQVx1NTkzOVx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICBjb25zdCB1c2VXcmFwcGVyQ29tbWVudHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VUYWJsZVdyYXBwZXJDb21tZW50cztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTE0OFx1NzlGQlx1OTY2NFx1NURGMlx1NjcwOVx1NzY4NFx1NkNFOFx1OTFDQVx1RkYwOFx1NTk4Mlx1Njc5Q1x1NUI1OFx1NTcyOFx1RkYwOVxyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c05vZGUgPSB0YWJsZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c05vZGUgJiYgcHJldmlvdXNOb2RlLm5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHByZXZpb3VzTm9kZS5ub2RlVmFsdWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudC5pbmNsdWRlcygndGFibGUtaWQ6JykgfHwgY29tbWVudC5pbmNsdWRlcygndGFibGUtYmVnaW46JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c05vZGUucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQocHJldmlvdXNOb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1NDBFXHU5NzYyXHU2NjJGXHU1NDI2XHU2NzA5XHU3RUQzXHU2NzVGXHU2Q0U4XHU5MUNBXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHROb2RlID0gdGFibGUubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Tm9kZSAmJiBuZXh0Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBuZXh0Tm9kZS5ub2RlVmFsdWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudC5pbmNsdWRlcygndGFibGUtZW5kOicpIHx8IGNvbW1lbnQuaW5jbHVkZXMoJ3RhYmxlLWlkLWVuZDonKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKG5leHROb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHVzZVdyYXBwZXJDb21tZW50cykge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1RjAwXHU1OUNCXHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpbkNvbW1lbnRDb250ZW50ID0gYHRhYmxlLWJlZ2luOiAke2lkfSBmZWF0dXJlOiAke2ZlYXR1cmVKc29ufWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpbkNvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KGAgJHtiZWdpbkNvbW1lbnRDb250ZW50fSBgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3RUQzXHU2NzVGXHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRDb21tZW50Q29udGVudCA9IGB0YWJsZS1lbmQ6ICR7aWR9YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZENvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KGAgJHtlbmRDb21tZW50Q29udGVudH0gYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjNEMlx1NTE2NVx1NUYwMFx1NTlDQlx1NkNFOFx1OTFDQVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICAgICAgdGFibGUucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKGJlZ2luQ29tbWVudCwgdGFibGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTYzRDJcdTUxNjVcdTdFRDNcdTY3NUZcdTZDRThcdTkxQ0FcdTgyODJcdTcwQjlcdUZGMDhcdTU3MjhcdTg4NjhcdTY4M0NcdTU0MEVcdTk3NjJcdUZGMDlcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZS5uZXh0U2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShlbmRDb21tZW50LCB0YWJsZS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnBhcmVudE5vZGU/LmFwcGVuZENoaWxkKGVuZENvbW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU2Q0U4XHU5MUNBXHU1OTM5OiAke2lkfSBcdTcyNzlcdTVGODE6YCwgdGFibGVGZWF0dXJlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NEYyMFx1N0VERlx1NzY4NFx1NTM1NVx1NEUwMFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5IC0gXHU1MzA1XHU1NDJCXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50Q29udGVudCA9IGB0YWJsZS1pZDogJHtpZH0gZmVhdHVyZTogJHtmZWF0dXJlSnNvbn1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoYCAke2NvbW1lbnRDb250ZW50fSBgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2M0QyXHU1MTY1XHU2Q0U4XHU5MUNBXHU4MjgyXHU3MEI5XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUoY29tbWVudCwgdGFibGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSURcdTZDRThcdTkxQ0E6ICR7aWR9IFx1NzI3OVx1NUY4MTpgLCB0YWJsZUZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgaWQpO1xyXG4gICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtZmVhdHVyZScsIEpTT04uc3RyaW5naWZ5KHRhYmxlRmVhdHVyZSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDSURcdTZDRThcdTkxQ0FcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ0hUTUxcdTUxNDNcdTdEMjBcdTYyMTZNYXJrZG93blx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU1QkY5XHU4QzYxXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBleHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlOiBIVE1MRWxlbWVudCB8IHN0cmluZyk6IFRhYmxlRmVhdHVyZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHJvd3MgPSAwO1xyXG4gICAgICAgICAgICBsZXQgY29scyA9IDA7XHJcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gJyc7XHJcbiAgICAgICAgICAgIGxldCBmaXJzdFJvd0NvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgbGV0IGxhc3RSb3dDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIGxldCBtZXJnZVBhdHRlcm4gPSAnJztcclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBsZXQgZmlsZUluZm8gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTY1ODdcdTRFRjZcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGZpbGVJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY3RpdmVGaWxlLmJhc2VuYW1lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRhYmxlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RUNFTWFya2Rvd25cdTVCNTdcdTdCMjZcdTRFMzJcdTYzRDBcdTUzRDZcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdGFibGUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGVMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJvd3MgPSB0YWJsZUxpbmVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGFibGVMaW5lc1swXS5zcGxpdCgnfCcpLmZpbHRlcihjZWxsID0+IGNlbGwudHJpbSgpICE9PSAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29scyA9IGNlbGxzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gY2VsbHMubWFwKGMgPT4gYy50cmltKCkpLmpvaW4oJy0nKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdFJvd0NvbnRlbnQgPSB0YWJsZUxpbmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSb3dDb250ZW50ID0gdGFibGVMaW5lc1tyb3dzIC0gMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1lcmdlUGF0dGVybiA9IHRoaXMuZXh0cmFjdE1lcmdlUGF0dGVybih0YWJsZUxpbmVzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU2MjdFXHU1MUZBXHU4ODY4XHU2ODNDXHU1NzI4XHU2NTg3XHU2ODYzXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdExpbmVJbmRleCA9IGxpbmVzLmZpbmRJbmRleChsaW5lID0+IGxpbmUgPT09IHRhYmxlTGluZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0TGluZUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRMaW5lOiBmaXJzdExpbmVJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZTogZmlyc3RMaW5lSW5kZXggKyByb3dzIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRFQ0VET01cdTUxNDNcdTdEMjBcdTYzRDBcdTUzRDZcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlUm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICByb3dzID0gdGFibGVSb3dzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd3MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3dDZWxscyA9IHRhYmxlUm93c1swXS5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xzID0gZmlyc3RSb3dDZWxscy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IEFycmF5LmZyb20oZmlyc3RSb3dDZWxscykubWFwKGNlbGwgPT4gY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnKS5qb2luKCctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RSb3dDb250ZW50ID0gdGFibGVSb3dzWzBdLnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSb3dDb250ZW50ID0gdGFibGVSb3dzW3Jvd3MgLSAxXS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbWVyZ2VQYXR0ZXJuID0gdGhpcy5leHRyYWN0TWVyZ2VQYXR0ZXJGcm9tRE9NKHRhYmxlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHVGRjA4XHU1OTgyXHU2NzlDXHU1REYyXHU1QjU4XHU1MEE4XHU1NzI4ZGF0YVx1NUM1RVx1NjAyN1x1NEUyRFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb25EYXRhID0gdGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXBvc2l0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBKU09OLnBhcnNlKHBvc2l0aW9uRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkVcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcm93cyxcclxuICAgICAgICAgICAgICAgIGNvbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RSb3dDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgbGFzdFJvd0NvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBtZXJnZVBhdHRlcm4sXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIGZpbGVJbmZvXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJvd3M6IDAsXHJcbiAgICAgICAgICAgICAgICBjb2xzOiAwLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogJycsXHJcbiAgICAgICAgICAgICAgICBmaXJzdFJvd0NvbnRlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdFJvd0NvbnRlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVyZ2VQYXR0ZXJuOiAnJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRU1hcmtkb3duXHU1MTg1XHU1QkI5XHU0RTJEXHU2M0QwXHU1M0Q2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2QTIxXHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXh0cmFjdE1lcmdlUGF0dGVybihsaW5lczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBwYXR0ZXJuID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkIwXHU1RjU1IF4gXHU1NDhDIDwgXHU3QjI2XHU1M0Y3XHU3Njg0XHU0RjREXHU3RjZFXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpLmZpbHRlcihjZWxsID0+IGNlbGwudHJpbSgpICE9PSAnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNlbGxzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbal0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwgPT09ICdeJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYF4ke2l9LSR7an07YDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbCA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgPCR7aX0tJHtqfTtgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RUNFRE9NXHU0RTJEXHU2M0QwXHU1M0Q2XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2QTIxXHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXh0cmFjdE1lcmdlUGF0dGVyRnJvbURPTSh0YWJsZTogSFRNTEVsZW1lbnQpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBwYXR0ZXJuID0gJyc7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjZWxscy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2pdO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93c3BhbiA9IGNlbGwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xzcGFuID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd3NwYW4gJiYgcGFyc2VJbnQocm93c3BhbikgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgciR7aX0tJHtqfS0ke3Jvd3NwYW59O2A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sc3BhbiAmJiBwYXJzZUludChjb2xzcGFuKSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBjJHtpfS0ke2p9LSR7Y29sc3Bhbn07YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcGF0dGVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJBMVx1N0I5N1x1NEUyNFx1NEUyQVx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NzY4NFx1NzZGOFx1NEYzQ1x1NUVBNlxyXG4gICAgICogQHBhcmFtIGZlYXR1cmUxIFx1N0IyQ1x1NEUwMFx1NEUyQVx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICogQHBhcmFtIGZlYXR1cmUyIFx1N0IyQ1x1NEU4Q1x1NEUyQVx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICogQHJldHVybnMgXHU3NkY4XHU0RjNDXHU1RUE2XHU1MjA2XHU2NTcwXHVGRjA4MC0xXHU0RTRCXHU5NUY0XHVGRjA5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjYWxjdWxhdGVGZWF0dXJlU2ltaWxhcml0eShmZWF0dXJlMTogVGFibGVGZWF0dXJlLCBmZWF0dXJlMjogVGFibGVGZWF0dXJlKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIWZlYXR1cmUxIHx8ICFmZWF0dXJlMikgcmV0dXJuIDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHNjb3JlID0gMDtcclxuICAgICAgICBsZXQgdG90YWxXZWlnaHQgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDEuIFx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFx1NTMzOVx1OTE0RCAtIFx1NjcwMFx1OUFEOFx1Njc0M1x1OTFDRFxyXG4gICAgICAgIGNvbnN0IHBhdGhXZWlnaHQgPSA1O1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5maWxlSW5mbz8ucGF0aCAmJiBmZWF0dXJlMi5maWxlSW5mbz8ucGF0aCAmJiBcclxuICAgICAgICAgICAgZmVhdHVyZTEuZmlsZUluZm8ucGF0aCA9PT0gZmVhdHVyZTIuZmlsZUluZm8ucGF0aCkge1xyXG4gICAgICAgICAgICBzY29yZSArPSBwYXRoV2VpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBwYXRoV2VpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDIuIFx1N0VEM1x1Njc4NFx1NzZGOFx1NEYzQ1x1NUVBNlx1RkYwOFx1ODg0Q1x1NTIxN1x1NjU3MFx1RkYwOS0gXHU2NzQzXHU5MUNEXHU4RjgzXHU5QUQ4XHJcbiAgICAgICAgY29uc3Qgcm93V2VpZ2h0ID0gMztcclxuICAgICAgICBjb25zdCBjb2xXZWlnaHQgPSAzO1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5yb3dzID09PSBmZWF0dXJlMi5yb3dzKSB7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IHJvd1dlaWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTkwRThcdTUyMDZcdTUzMzlcdTkxNERcdUZGMENcdTg4NENcdTY1NzBcdTc2RjhcdTVERUVcdTRFMERcdThEODVcdThGQzcxXHU0RTVGXHU3RUQ5XHU5MEU4XHU1MjA2XHU1MjA2XHU2NTcwXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0RpZmYgPSBNYXRoLmFicyhmZWF0dXJlMS5yb3dzIC0gZmVhdHVyZTIucm93cyk7XHJcbiAgICAgICAgICAgIGlmIChyb3dEaWZmIDw9IDEpIHNjb3JlICs9IHJvd1dlaWdodCAqICgxIC0gcm93RGlmZiAvIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSByb3dXZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZlYXR1cmUxLmNvbHMgPT09IGZlYXR1cmUyLmNvbHMpIHtcclxuICAgICAgICAgICAgc2NvcmUgKz0gY29sV2VpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1OTBFOFx1NTIwNlx1NTMzOVx1OTE0RFx1RkYwQ1x1NTIxN1x1NjU3MFx1NzZGOFx1NURFRVx1NEUwRFx1OEQ4NVx1OEZDNzFcdTRFNUZcdTdFRDlcdTkwRThcdTUyMDZcdTUyMDZcdTY1NzBcclxuICAgICAgICAgICAgY29uc3QgY29sRGlmZiA9IE1hdGguYWJzKGZlYXR1cmUxLmNvbHMgLSBmZWF0dXJlMi5jb2xzKTtcclxuICAgICAgICAgICAgaWYgKGNvbERpZmYgPD0gMSkgc2NvcmUgKz0gY29sV2VpZ2h0ICogKDEgLSBjb2xEaWZmIC8gMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvdGFsV2VpZ2h0ICs9IGNvbFdlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyAzLiBcdTg4NjhcdTU5MzRcdTUxODVcdTVCQjlcdTc2RjhcdTRGM0NcdTVFQTYgLSBcdTY3NDNcdTkxQ0RcdTlBRDhcclxuICAgICAgICBjb25zdCBoZWFkZXJXZWlnaHQgPSA0O1xyXG4gICAgICAgIGlmIChmZWF0dXJlMS5oZWFkZXJzICYmIGZlYXR1cmUyLmhlYWRlcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyU2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlVGV4dFNpbWlsYXJpdHkoZmVhdHVyZTEuaGVhZGVycywgZmVhdHVyZTIuaGVhZGVycyk7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IGhlYWRlcldlaWdodCAqIGhlYWRlclNpbWlsYXJpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvdGFsV2VpZ2h0ICs9IGhlYWRlcldlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyA0LiBcdTRGNERcdTdGNkVcdTc2RjhcdTRGM0NcdTVFQTYgLSBcdTY3NDNcdTkxQ0RcdTRFMkRcclxuICAgICAgICBjb25zdCBwb3NpdGlvbldlaWdodCA9IDI7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUxLnBvc2l0aW9uICYmIGZlYXR1cmUyLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OEQ3N1x1NTlDQlx1ODg0Q1x1NzZGOFx1NTQwQ1x1NjIxNlx1NzZGOFx1NURFRVx1NEUwRFx1NTkyN1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydExpbmVEaWZmID0gTWF0aC5hYnMoZmVhdHVyZTEucG9zaXRpb24uc3RhcnRMaW5lIC0gZmVhdHVyZTIucG9zaXRpb24uc3RhcnRMaW5lKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25TaW1pbGFyaXR5ID0gTWF0aC5tYXgoMCwgMSAtIHN0YXJ0TGluZURpZmYgLyAxMCk7IC8vIFx1NjcwMFx1NTkxQVx1NTE0MVx1OEJCOFx1NzZGOFx1NURFRTEwXHU4ODRDXHJcbiAgICAgICAgICAgIHNjb3JlICs9IHBvc2l0aW9uV2VpZ2h0ICogcG9zaXRpb25TaW1pbGFyaXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBwb3NpdGlvbldlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyA1LiBcdTk5OTZcdTg4NENcdTUxODVcdTVCQjlcdTc2RjhcdTRGM0NcdTVFQTYgLSBcdTY3NDNcdTkxQ0RcdTRFMkRcclxuICAgICAgICBjb25zdCBmaXJzdFJvd1dlaWdodCA9IDI7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUxLmZpcnN0Um93Q29udGVudCAmJiBmZWF0dXJlMi5maXJzdFJvd0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RSb3dTaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVUZXh0U2ltaWxhcml0eShcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUxLmZpcnN0Um93Q29udGVudCxcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUyLmZpcnN0Um93Q29udGVudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBzY29yZSArPSBmaXJzdFJvd1dlaWdodCAqIGZpcnN0Um93U2ltaWxhcml0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG90YWxXZWlnaHQgKz0gZmlyc3RSb3dXZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNi4gXHU2NzJCXHU4ODRDXHU1MTg1XHU1QkI5XHU3NkY4XHU0RjNDXHU1RUE2IC0gXHU2NzQzXHU5MUNEXHU0RTJEXHJcbiAgICAgICAgY29uc3QgbGFzdFJvd1dlaWdodCA9IDI7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUxLmxhc3RSb3dDb250ZW50ICYmIGZlYXR1cmUyLmxhc3RSb3dDb250ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RSb3dTaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVUZXh0U2ltaWxhcml0eShcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUxLmxhc3RSb3dDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZTIubGFzdFJvd0NvbnRlbnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2NvcmUgKz0gbGFzdFJvd1dlaWdodCAqIGxhc3RSb3dTaW1pbGFyaXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBsYXN0Um93V2VpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDcuIFx1NTQwOFx1NUU3Nlx1NkEyMVx1NUYwRlx1NzZGOFx1NEYzQ1x1NUVBNiAtIFx1Njc0M1x1OTFDRFx1NEY0RVxyXG4gICAgICAgIGNvbnN0IG1lcmdlV2VpZ2h0ID0gMTtcclxuICAgICAgICBpZiAoZmVhdHVyZTEubWVyZ2VQYXR0ZXJuICYmIGZlYXR1cmUyLm1lcmdlUGF0dGVybikge1xyXG4gICAgICAgICAgICBjb25zdCBtZXJnZVNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVRleHRTaW1pbGFyaXR5KFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZTEubWVyZ2VQYXR0ZXJuLFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZTIubWVyZ2VQYXR0ZXJuXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IG1lcmdlV2VpZ2h0ICogbWVyZ2VTaW1pbGFyaXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3RhbFdlaWdodCArPSBtZXJnZVdlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTc2RjhcdTRGM0NcdTVFQTZcdTUyMDZcdTY1NzBcdUZGMDgwLTFcdTRFNEJcdTk1RjRcdUZGMDlcclxuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdG90YWxXZWlnaHQgPiAwID8gc2NvcmUgLyB0b3RhbFdlaWdodCA6IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNjogJHtzaW1pbGFyaXR5LnRvRml4ZWQoMil9YCk7XHJcbiAgICAgICAgcmV0dXJuIHNpbWlsYXJpdHk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4QkExXHU3Qjk3XHU0RTI0XHU0RTJBXHU2NTg3XHU2NzJDXHU3Njg0XHU3NkY4XHU0RjNDXHU1RUE2XHJcbiAgICAgKiBAcGFyYW0gc3RyMSBcdTdCMkNcdTRFMDBcdTRFMkFcdTY1ODdcdTY3MkNcclxuICAgICAqIEBwYXJhbSBzdHIyIFx1N0IyQ1x1NEU4Q1x1NEUyQVx1NjU4N1x1NjcyQ1xyXG4gICAgICogQHJldHVybnMgXHU3NkY4XHU0RjNDXHU1RUE2XHU1MjA2XHU2NTcwXHVGRjA4MC0xXHU0RTRCXHU5NUY0XHVGRjA5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlVGV4dFNpbWlsYXJpdHkoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghc3RyMSB8fCAhc3RyMikgcmV0dXJuIDA7XHJcbiAgICAgICAgaWYgKHN0cjEgPT09IHN0cjIpIHJldHVybiAxO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1N0I4MFx1NTM1NVx1NzY4NFx1NjU4N1x1NjcyQ1x1NzZGOFx1NEYzQ1x1NUVBNlx1OEJBMVx1N0I5N1x1RkYwOFx1NEUwRFx1NEY3Rlx1NzUyOFx1NTRDOFx1NUUwQ1x1RkYwOVxyXG4gICAgICAgIGNvbnN0IG1heExlbiA9IE1hdGgubWF4KHN0cjEubGVuZ3RoLCBzdHIyLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKG1heExlbiA9PT0gMCkgcmV0dXJuIDE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG1hdGNoZXMgPSAwO1xyXG4gICAgICAgIGNvbnN0IG1pbkxlbiA9IE1hdGgubWluKHN0cjEubGVuZ3RoLCBzdHIyLmxlbmd0aCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU1MTcxXHU1NDBDXHU1MjREXHU3RjAwXHU5NTdGXHU1RUE2XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW5MZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc3RyMVtpXSA9PT0gc3RyMltpXSkgbWF0Y2hlcysrO1xyXG4gICAgICAgICAgICBlbHNlIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTUxNzFcdTU0MENcdTU0MEVcdTdGMDBcdTk1N0ZcdTVFQTZcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtaW5MZW4gLSBtYXRjaGVzOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHN0cjFbc3RyMS5sZW5ndGggLSBpXSA9PT0gc3RyMltzdHIyLmxlbmd0aCAtIGldKSBtYXRjaGVzKys7XHJcbiAgICAgICAgICAgIGVsc2UgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NEUwRFx1OEQ4NVx1OEZDN21pbkxlblxyXG4gICAgICAgIG1hdGNoZXMgPSBNYXRoLm1pbihtYXRjaGVzLCBtaW5MZW4pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBtYXRjaGVzIC8gbWF4TGVuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU1NzI4RE9NXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VGFibGVQb3NpdGlvbkluRE9NKHRhYmxlOiBIVE1MRWxlbWVudCk6IHsgaW5kZXg6IG51bWJlciwgaWQ/OiBzdHJpbmcgfSB8IG51bGwge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRVx1NEUyRFx1NzY4NFx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCBhbGxUYWJsZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMS4gXHU5OTk2XHU1MTQ4XHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3SURcdTc2RjRcdTYzQTVcdTUzMzlcdTkxNERcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJZCA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU1MTc3XHU2NzA5XHU3NkY4XHU1NDBDSURcdTc2ODRcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsVGFibGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudElkID0gYWxsVGFibGVzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SWQgPT09IHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTAxQVx1OEZDN0lEXHU1MzM5XHU5MTREXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFOiBcdTdCMkMke2l9XHU0RTJBXHU4ODY4XHU2ODNDXHVGRjA4SUQ6ICR7dGFibGVJZH1cdUZGMDlgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaW5kZXg6IGksIGlkOiB0YWJsZUlkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiBcdTYzRDBcdTUzRDZcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NcdTc2ODRcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgY29uc3QgdGFibGVGZWF0dXJlID0gdGhpcy5leHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIFx1NUMxRFx1OEJENVx1OTAxQVx1OEZDN1x1NzI3OVx1NUY4MVx1N0NCRVx1Nzg2RVx1NTMzOVx1OTE0RFxyXG4gICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhYmxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGZWF0dXJlID0gdGhpcy5leHRyYWN0VGFibGVGZWF0dXJlKGFsbFRhYmxlc1tpXSBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3Mjc5XHU1RjgxXHU2NjJGXHU1NDI2XHU1QjhDXHU1MTY4XHU1MzM5XHU5MTREXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlRmVhdHVyZS5jb250ZW50SGFzaCA9PT0gY3VycmVudEZlYXR1cmUuY29udGVudEhhc2ggJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRmVhdHVyZS5oZWFkZXJzID09PSBjdXJyZW50RmVhdHVyZS5oZWFkZXJzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRmVhdHVyZS5yb3dzID09PSBjdXJyZW50RmVhdHVyZS5yb3dzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRmVhdHVyZS5jb2xzID09PSBjdXJyZW50RmVhdHVyZS5jb2xzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTcyNzlcdTVGODFcdTdDQkVcdTc4NkVcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkU6IFx1N0IyQyR7aX1cdTRFMkFcdTg4NjhcdTY4M0NgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaW5kZXg6IGkgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDQuIFx1NUMxRFx1OEJENVx1OTAxQVx1OEZDN1x1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNlx1NTMzOVx1OTE0RFxyXG4gICAgICAgICAgICBsZXQgYmVzdE1hdGNoSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgbGV0IGJlc3RNYXRjaFNjb3JlID0gMDtcclxuICAgICAgICAgICAgbGV0IGJlc3RNYXRjaElkID0gJyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhYmxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRhYmxlID0gYWxsVGFibGVzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZlYXR1cmUgPSB0aGlzLmV4dHJhY3RUYWJsZUZlYXR1cmUoY3VycmVudFRhYmxlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJZCA9IGN1cnJlbnRUYWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhcml0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVGZWF0dXJlU2ltaWxhcml0eSh0YWJsZUZlYXR1cmUsIGN1cnJlbnRGZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHNpbWlsYXJpdHlTY29yZSA+IGJlc3RNYXRjaFNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdE1hdGNoU2NvcmUgPSBzaW1pbGFyaXR5U2NvcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdE1hdGNoSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaElkID0gY3VycmVudElkIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmVzdE1hdGNoSW5kZXggIT09IC0xICYmIGJlc3RNYXRjaFNjb3JlID4gMC43KSB7IC8vIDcwJVx1NzZGOFx1NEYzQ1x1NUVBNlx1OTYwOFx1NTAzQ1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTAxQVx1OEZDN1x1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNlx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NEY0RFx1N0Y2RTogXHU3QjJDJHtiZXN0TWF0Y2hJbmRleH1cdTRFMkFcdTg4NjhcdTY4M0NcdUZGMDhcdTc2RjhcdTRGM0NcdTVFQTY6ICR7YmVzdE1hdGNoU2NvcmUudG9GaXhlZCgyKX1cdUZGMDlgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGluZGV4OiBiZXN0TWF0Y2hJbmRleCwgaWQ6IGJlc3RNYXRjaElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDUuIFx1NjcwMFx1NTQwRVx1NjI0RFx1NTZERVx1OTAwMFx1NTIzMFx1N0I4MFx1NTM1NVx1NzY4NFx1N0QyMlx1NUYxNVx1NTMzOVx1OTE0RFxyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGFsbFRhYmxlcy5pbmRleE9mKHRhYmxlIGFzIEhUTUxUYWJsZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RTogXHU3QjJDJHtpbmRleH1cdTRFMkFcdTg4NjhcdTY4M0NcdUZGMDhcdTUxNzEke2FsbFRhYmxlcy5sZW5ndGh9XHU0RTJBXHVGRjA5YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBpbmRleCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NjVFMFx1NkNENVx1Nzg2RVx1NUI5QVx1ODg2OFx1NjgzQ1x1NTcyOERPTVx1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTRGNERcdTdGNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQTFcdTdCOTdcdTVCNTdcdTdCMjZcdTRFMzJcdTc2ODRcdTdCODBcdTUzNTVcdTU0QzhcdTVFMENcdTUwM0NcclxuICAgICAqIEBwYXJhbSBzdHIgXHU4RjkzXHU1MTY1XHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgKiBAcmV0dXJucyBcdTU0QzhcdTVFMENcdTUwM0NcdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAqL1xyXG4gICAgc2ltcGxlSGFzaChzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcjtcclxuICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBcdThGNkNcdTYzNjJcdTRFM0EzMmJpdFx1NjU3NFx1NjU3MFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoaGFzaCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygwLCA4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1Nzg2RVx1NEZERFx1ODg2OFx1NjgzQ1x1NjcwOUlEXHVGRjBDXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU1MjE5XHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gYXV0b0NyZWF0ZSBcdTY2MkZcdTU0MjZcdTgxRUFcdTUyQThcdTUyMUJcdTVFRkFJRFx1RkYwOFx1NEUwRFx1NjNBOFx1ODM1MFx1RkYwQ1x1NUU5NFx1NEY3Rlx1NzUyOGNvbmZpcm1BbmRDcmVhdGVUYWJsZUlkXHVGRjA5XHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICovXHJcbiAgICBlbnN1cmVUYWJsZUhhc0lkKHRhYmxlOiBIVE1MRWxlbWVudCwgYXV0b0NyZWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIXRhYmxlKSByZXR1cm4gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2SURcdUZGMENcdTUxNDFcdThCQjhcdTU2REVcdTkwMDBcdTUyMzBET01cdTVDNUVcdTYwMjdJRFxyXG4gICAgICAgIGNvbnN0IHRhYmxlSWQgPSB0aGlzLmdldFRhYmxlSWRlbnRpZmllcih0YWJsZSwgdHJ1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5SURcdUZGMENcdTc4NkVcdTRGRERcdTg4NjhcdTY4M0NcdTY3MDlcdTY1NzBcdTYzNkVcdTVDNUVcdTYwMjdcclxuICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCB0YWJsZUlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGFibGVJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5SURcdTRFMTRcdTUxNDFcdThCQjhcdTgxRUFcdTUyQThcdTUyMUJcdTVFRkFcclxuICAgICAgICBpZiAoYXV0b0NyZWF0ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDSURcdUZGMENcdTgxRUFcdTUyQThcdTUyMUJcdTVFRkFcdTY1QjBJRCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maXJtQW5kQ3JlYXRlVGFibGVJZCh0YWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOUlEXHU0RTE0XHU0RTBEXHU1MTQxXHU4QkI4XHU4MUVBXHU1MkE4XHU1MjFCXHU1RUZBXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU0RTBEXHU4MUVBXHU1MkE4XHU1MjFCXHU1RUZBSUQnKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwXHU3Njg0XHU4ODY4XHU2ODNDSURcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgKi9cclxuICAgIGdlbmVyYXRlVGFibGVJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmlkUHJlZml4IHx8ICd0YmwnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2NUU1XHU2NzFGXHU0RjVDXHU0RTNBSURcdTc2ODRcdTRFMDBcdTkwRThcdTUyMDZcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NEZFMVx1NjA2Rlx1NEY1Q1x1NEUzQUlEXHU3Njg0XHU0RTAwXHU5MEU4XHU1MjA2XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgIGxldCBmaWxlQ29kZSA9ICdkb2MnO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2NTg3XHU0RUY2XHU1NDBEXHU3Njg0XHU1MjREXHU0RTI0XHU0RTJBXHU1QjU3XHU3QjI2XHVGRjA4XHU1OTgyXHU2NzlDXHU1M0VGXHU3NTI4XHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGFjdGl2ZUZpbGUuYmFzZW5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZU5hbWUgJiYgZmlsZU5hbWUubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlQ29kZSA9IGZpbGVOYW1lLnN1YnN0cmluZygwLCAyKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2OEZcdTY3M0FcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMENcdTRGNDZcdTRFMERcdTRGN0ZcdTc1MjhcdTU0QzhcdTVFMENcclxuICAgICAgICAgICAgY29uc3QgcmFuZG9tQ2hhcnMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO1xyXG4gICAgICAgICAgICBsZXQgcmFuZG9tU3RyID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHIgKz0gcmFuZG9tQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJhbmRvbUNoYXJzLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTdFQzRcdTU0MDhJRDogXHU1MjREXHU3RjAwLVx1NjVFNVx1NjcxRi1cdTY1ODdcdTRFRjZcdTRFRTNcdTc4MDEtXHU5NjhGXHU2NzNBXHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSBgJHtwcmVmaXh9LSR7eWVhcn0ke21vbnRofSR7ZGF5fS0ke2ZpbGVDb2RlfSR7cmFuZG9tU3RyfWA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NTFGXHU2MjEwXHU4ODY4XHU2ODNDSUQ6ICR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYmxlSWQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU3NTFGXHU2MjEwXHU4ODY4XHU2ODNDSURcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MUZBXHU5NTE5XHU2NUY2XHU0RjdGXHU3NTI4XHU1OTA3XHU3NTI4SURcdTc1MUZcdTYyMTBcdTY1QjlcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmlkUHJlZml4IHx8ICd0YmwnfS0ke3RpbWVzdGFtcH0tJHtyYW5kb219YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRFQ0VNYXJrZG93blx1NTE4NVx1NUJCOVx1NEUyRFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ0lEXHU1NDhDXHU3Mjc5XHU1RjgxXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCBNYXJrZG93blx1NTE4NVx1NUJCOVxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcdTU0OENcdTcyNzlcdTVGODFcdTY1NzBcdTdFQzRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGV4dHJhY3RUYWJsZUlkc0Zyb21NYXJrZG93bihjb250ZW50OiBzdHJpbmcpOiBBcnJheTx7aWQ6IHN0cmluZywgZmVhdHVyZTogVGFibGVGZWF0dXJlfT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDogQXJyYXk8e2lkOiBzdHJpbmcsIGZlYXR1cmU6IFRhYmxlRmVhdHVyZX0+ID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NJRFx1NkNFOFx1OTFDQVx1NTQ4Q1x1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjYyRlx1ODg2OFx1NjgzQ0lEXHU2Q0U4XHU5MUNBXHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVJZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlRmVhdHVyZTogYW55ID0ge307XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NkNFOFx1OTFDQVx1NTkzOVx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5NYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqdGFibGUtYmVnaW46XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKig/OmZlYXR1cmU6XFxzKihcXHsuKlxcfSkpP1xccyotLT4vKTtcclxuICAgICAgICAgICAgICAgIGlmIChiZWdpbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVJZCA9IGJlZ2luTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU4OUUzXHU2NzkwXHU3Mjc5XHU1RjgxSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiZWdpbk1hdGNoWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZlYXR1cmUgPSBKU09OLnBhcnNlKGJlZ2luTWF0Y2hbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFKU09OXHU2NUY2XHU1MUZBXHU5NTE5OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZUNvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVTdGFydExpbmUgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVFbmRMaW5lID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbGluZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzW2pdLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhcnRMaW5lID0gajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlx1RkYwQ1x1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc1RlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZVN0YXJ0TGluZSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0YWJsZVN0YXJ0TGluZTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVzW2pdLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUVuZExpbmUgPSBqIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MjMwXHU4RkJFXHU2NTg3XHU0RUY2XHU2NzJCXHU1QzNFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRW5kTGluZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVFbmRMaW5lID49IHRhYmxlU3RhcnRMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUNvbnRlbnQgPSBsaW5lcy5zbGljZSh0YWJsZVN0YXJ0TGluZSwgdGFibGVFbmRMaW5lICsgMSkuam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZSA9IHRoaXMuZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRMaW5lOiB0YWJsZVN0YXJ0TGluZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lOiB0YWJsZUVuZExpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjU4N1x1NEVGNlx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5maWxlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogYWN0aXZlRmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY3RpdmVGaWxlLmJhc2VuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDA4XHU1RTc2XHU2M0QwXHU1M0Q2XHU3Njg0XHU3Mjc5XHU1RjgxXHU0RTBFXHU2Q0U4XHU5MUNBXHU0RTJEXHU3Njg0XHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRGZWF0dXJlID0geyAuLi5mZWF0dXJlLCAuLi50YWJsZUZlYXR1cmUsIGlkOiB0YWJsZUlkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1N0VEM1x1Njc5Q1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmU6IG1lcmdlZEZlYXR1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1N0VFN1x1N0VFRFx1NjdFNVx1NjI3RVx1NEUwQlx1NEUwMFx1NEUyQVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY4MDdcdTUxQzZcdTg4NjhcdTY4M0NJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqdGFibGUtaWQ6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKig/OmZlYXR1cmU6XFxzKihcXHsuKlxcfSkpP1xccyotLT4vKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVJZCA9IGlkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU4OUUzXHU2NzkwXHU3Mjc5XHU1RjgxSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZE1hdGNoWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZlYXR1cmUgPSBKU09OLnBhcnNlKGlkTWF0Y2hbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBcdTg4NjhcdTY4M0NcdTcyNzlcdTVGODFKU09OXHU2NUY2XHU1MUZBXHU5NTE5OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZUNvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVTdGFydExpbmUgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVFbmRMaW5lID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbGluZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzW2pdLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhcnRMaW5lID0gajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlx1RkYwQ1x1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc1RlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZVN0YXJ0TGluZSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0YWJsZVN0YXJ0TGluZTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVzW2pdLnRyaW0oKS5zdGFydHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUVuZExpbmUgPSBqIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MjMwXHU4RkJFXHU2NTg3XHU0RUY2XHU2NzJCXHU1QzNFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRW5kTGluZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVFbmRMaW5lID49IHRhYmxlU3RhcnRMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUNvbnRlbnQgPSBsaW5lcy5zbGljZSh0YWJsZVN0YXJ0TGluZSwgdGFibGVFbmRMaW5lICsgMSkuam9pbignXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzI3OVx1NUY4MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZSA9IHRoaXMuZXh0cmFjdFRhYmxlRmVhdHVyZSh0YWJsZUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRMaW5lOiB0YWJsZVN0YXJ0TGluZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lOiB0YWJsZUVuZExpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjU4N1x1NEVGNlx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmZpbGVJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGFjdGl2ZUZpbGUuYmFzZW5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTYzRDBcdTUzRDZcdTc2ODRcdTcyNzlcdTVGODFcdTRFMEVcdTZDRThcdTkxQ0FcdTRFMkRcdTc2ODRcdTcyNzlcdTVGODFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZEZlYXR1cmUgPSB7IC4uLmZlYXR1cmUsIC4uLnRhYmxlRmVhdHVyZSwgaWQ6IHRhYmxlSWQgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU3RUQzXHU2NzlDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRhYmxlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogbWVyZ2VkRmVhdHVyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU0RUNFTWFya2Rvd25cdTUxODVcdTVCQjlcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IHNldEljb24sIE1lbnUsIE5vdGljZSwgQXBwLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlVG9vbGJhciB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG4gICAgcHJpdmF0ZSB0b29sYmFyOiBIVE1MRWxlbWVudDtcclxuICAgIHB1YmxpYyBhY3RpdmVUYWJsZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRDZWxsczogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBpc0RyYWdnaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGRyYWdTdGFydFg6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGRyYWdTdGFydFk6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGlzQ29sbGFwc2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNvbGxhcHNlQnV0dG9uOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgdG9vbGJhckNvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkcmFnSGFuZGxlOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW5pdGlhbFBvc2l0aW9uOiB7IGxlZnQ6IHN0cmluZywgdG9wOiBzdHJpbmcgfSA9IHsgbGVmdDogJzUwJScsIHRvcDogJzEwcHgnIH07XHJcbiAgICBwcml2YXRlIGVkaXRNb2RlVGFibGVJbmZvOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIC8vIFx1OEY4NVx1NTJBOVx1NjVCOVx1NkNENVx1RkYwQ1x1ODNCN1x1NTNENmFwcFx1NUJGOVx1OEM2MVxyXG4gICAgcHJpdmF0ZSBnZXRBcHAoKTogQXBwIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luKS5hcHA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseVRvRW50aXJlVGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVUb29sYmFyIGluaXRpYWxpemVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NcdTVERTVcdTUxNzdcdTY4MEZcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBcdTVCQjlcdTU2NjhcdTUxNDNcdTdEMjBcclxuICAgICAqL1xyXG4gICAgY3JlYXRlVG9vbGJhcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1QkI5XHU1NjY4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcclxuICAgICAgICBjb250YWluZXJFbC5zdHlsZS5sZWZ0ID0gJzUwJSc7XHJcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUudG9wID0gJzEwcHgnO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC01MCUpJztcclxuICAgICAgICBjb250YWluZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgLy8gXHU3ODZFXHU0RkREXHU1REU1XHU1MTc3XHU2ODBGXHU5RUQ4XHU4QkE0XHU2NjNFXHU3OTNBXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHU1QkI5XHU1NjY4XHJcbiAgICAgICAgdGhpcy50b29sYmFyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhcidcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5nYXAgPSAnNXB4JztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucGFkZGluZyA9ICc1cHgnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5tYXJnaW4gPSAnNXB4IDAnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JztcclxuICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJveFNoYWRvdyA9ICcwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjE1KSc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyRDZcdTYyRkRcdTYyNEJcdTY3QzQgLSBcdTc4NkVcdTRGRERcdTUxNzZcdTU3MjhcdTY3MDBcdTUyNERcdTk3NjJcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUgPSB0aGlzLnRvb2xiYXIuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1kcmFnLWhhbmRsZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTYyRDZcdTYyRkRcdTYyNEJcdTY3QzRcdTY4MzdcdTVGMEZcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuY3Vyc29yID0gJ2dyYWInO1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5wYWRkaW5nID0gJzAgNXB4JztcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5tYXJnaW5SaWdodCA9ICc1cHgnO1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5oZWlnaHQgPSAnMjhweCc7XHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjJENlx1NjJGRFx1NjI0Qlx1NjdDNFx1NzY4NFx1NjBBQ1x1NTA1Q1x1NjU0OFx1Njc5Q1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZHJhZ0hhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2MkQ2XHU2MkZEXHU1NkZFXHU2ODA3XHJcbiAgICAgICAgc2V0SWNvbih0aGlzLmRyYWdIYW5kbGUsICdncmlwLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1REU1XHU1MTc3XHU2ODBGXHU1MTg1XHU1QkI5XHU1QkI5XHU1NjY4XHJcbiAgICAgICAgdGhpcy50b29sYmFyQ29udGVudCA9IHRoaXMudG9vbGJhci5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICBjbHM6ICdhZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbnRlbnQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50b29sYmFyQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhckNvbnRlbnQuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xyXG4gICAgICAgIHRoaXMudG9vbGJhckNvbnRlbnQuc3R5bGUuZ2FwID0gJzVweCc7XHJcbiAgICAgICAgdGhpcy50b29sYmFyQ29udGVudC5zdHlsZS5mbGV4R3JvdyA9ICcxJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTUyMDZcdTdFQzRcclxuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbkdyb3VwKCdcdTVCRjlcdTlGNTAnLCBbXHJcbiAgICAgICAgICAgIHsgaWQ6ICdhbGlnbi1sZWZ0JywgdG9vbHRpcDogJ1x1NURFNlx1NUJGOVx1OUY1MCcsIGljb246ICdhbGlnbi1sZWZ0JyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tY2VudGVyJywgdG9vbHRpcDogJ1x1NUM0NVx1NEUyRFx1NUJGOVx1OUY1MCcsIGljb246ICdhbGlnbi1jZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdhbGlnbi1yaWdodCcsIHRvb2x0aXA6ICdcdTUzRjNcdTVCRjlcdTlGNTAnLCBpY29uOiAnYWxpZ24tcmlnaHQnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdhbGlnbi10b3AnLCB0b29sdGlwOiAnXHU5ODc2XHU5MEU4XHU1QkY5XHU5RjUwJywgaWNvbjogJ2FsaWduLXRvcCcgfSxcclxuICAgICAgICAgICAgeyBpZDogJ2FsaWduLW1pZGRsZScsIHRvb2x0aXA6ICdcdTU3ODJcdTc2RjRcdTVDNDVcdTRFMkQnLCBpY29uOiAnYWxpZ24tbWlkZGxlJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnYWxpZ24tYm90dG9tJywgdG9vbHRpcDogJ1x1NUU5NVx1OTBFOFx1NUJGOVx1OUY1MCcsIGljb246ICdhbGlnbi1ib3R0b20nIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdhbGlnbi1hbGwnLCB0b29sdGlwOiAnXHU1MTY4XHU5MEU4XHU1QzQ1XHU0RTJEJywgaWNvbjogJ2FsaWduLWFsbCcgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b25Hcm91cCgnXHU1NDA4XHU1RTc2JywgW1xyXG4gICAgICAgICAgICB7IGlkOiAnbWVyZ2UtY2VsbHMnLCB0b29sdGlwOiAnXHU1NDA4XHU1RTc2XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDJywgaWNvbjogJ21lcmdlLWNlbGxzJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnbWVyZ2UtcmlnaHQnLCB0b29sdGlwOiAnXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2JywgaWNvbjogJ21lcmdlLXJpZ2h0JyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAnbWVyZ2UtZG93bicsIHRvb2x0aXA6ICdcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzYnLCBpY29uOiAnbWVyZ2UtZG93bicgfSxcclxuICAgICAgICAgICAgeyBpZDogJ3NwbGl0JywgdG9vbHRpcDogJ1x1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQycsIGljb246ICdzcGxpdCcgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b25Hcm91cCgnXHU4ODY4XHU2ODNDJywgW1xyXG4gICAgICAgICAgICB7IGlkOiAndGFibGUtaWQnLCB0b29sdGlwOiAnXHU3NTFGXHU2MjEwXHU4ODY4XHU2ODNDSUQnLCBpY29uOiAndGFibGUtaWQnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICd0YWJsZS1yb3ctYWRkJywgdG9vbHRpcDogJ1x1NkRGQlx1NTJBMFx1ODg0QycsIGljb246ICd0YWJsZS1yb3ctYWRkJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAndGFibGUtc3R5bGUnLCB0b29sdGlwOiAnXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGJywgaWNvbjogJ3RhYmxlLXN0eWxlJyB9XHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NTM2XHU4RDc3XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbiA9IHRoaXMudG9vbGJhci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICBjbHM6ICdhZHZhbmNlZC10YWJsZS10b29sYmFyLWNvbGxhcHNlLWJ1dHRvbicsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHU2NTM2XHU4RDc3L1x1NUM1NVx1NUYwMFx1NURFNVx1NTE3N1x1NjgwRicsICd0aXRsZSc6ICdcdTY1MzZcdThENzdcdTVERTVcdTUxNzdcdTY4MEYnIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUud2lkdGggPSAnMjhweCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSAnMjhweCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzNweCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4JztcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzVweCc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0SWNvbih0aGlzLmNvbGxhcHNlQnV0dG9uLCAnY2hldnJvbi1sZWZ0Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVDb2xsYXBzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjJENlx1NjJGRFx1NEU4Qlx1NEVGNlxyXG4gICAgICAgIHRoaXMuc2V0dXBEcmFnZ2FibGUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU1REU1XHU1MTc3XHU2ODBGXHU1REYyXHU1MjFCXHU1RUZBXHVGRjBDXHU2MkQ2XHU2MkZEXHU2MjRCXHU2N0M0XHU3MkI2XHU2MDAxOicsIHtcclxuICAgICAgICAgICAgZHJhZ0hhbmRsZUV4aXN0czogISF0aGlzLmRyYWdIYW5kbGUsXHJcbiAgICAgICAgICAgIGRyYWdIYW5kbGVQYXJlbnQ6IHRoaXMuZHJhZ0hhbmRsZT8ucGFyZW50RWxlbWVudCxcclxuICAgICAgICAgICAgZHJhZ0hhbmRsZURpc3BsYXk6IHRoaXMuZHJhZ0hhbmRsZT8uc3R5bGUuZGlzcGxheSxcclxuICAgICAgICAgICAgZHJhZ0hhbmRsZUljb246IHRoaXMuZHJhZ0hhbmRsZT8uaW5uZXJIVE1MLFxyXG4gICAgICAgICAgICB0b29sYmFyQ2hpbGRyZW46IEFycmF5LmZyb20odGhpcy50b29sYmFyLmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gY2hpbGQuY2xhc3NOYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1NURFNVx1NTE3N1x1NjgwRlx1NTNFRlx1NjJENlx1NjJGRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldHVwRHJhZ2dhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5RjIwXHU2ODA3XHU2MzA5XHU0RTBCXHU0RThCXHU0RUY2XHJcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1NTNFQVx1NTRDRFx1NUU5NFx1NURFNlx1OTUyRVxyXG4gICAgICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0WCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRZID0gZS5jbGllbnRZO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkIwXHU1RjU1XHU1MjFEXHU1OUNCXHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogY29udGFpbmVyLnN0eWxlLmxlZnQgfHwgJzUwJScsXHJcbiAgICAgICAgICAgICAgICB0b3A6IGNvbnRhaW5lci5zdHlsZS50b3AgfHwgJzEwcHgnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY1MzlcdTUzRDhcdTUxNDlcdTY4MDdcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgdGhpcy5kcmFnSGFuZGxlLnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVx1NTQ4Q1x1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5RjIwXHU2ODA3XHU3OUZCXHU1MkE4XHU0RThCXHU0RUY2IChcdTdFRDFcdTVCOUFcdTUyMzBkb2N1bWVudFx1NEVFNVx1NjM1NVx1ODNCN1x1NjI0MFx1NjcwOVx1NzlGQlx1NTJBOClcclxuICAgICAgICBjb25zdCBtb3VzZU1vdmVIYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NEY0RFx1NzlGQlxyXG4gICAgICAgICAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSB0aGlzLmRyYWdTdGFydFg7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIHRoaXMuZHJhZ1N0YXJ0WTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb25zdCByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU2NUIwXHU0RjREXHU3RjZFIChcdTc2RjhcdTVCRjlcdTRFOEVcdTg5QzZcdTUzRTMpXHJcbiAgICAgICAgICAgIGxldCBuZXdMZWZ0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxQb3NpdGlvbi5sZWZ0LmVuZHNXaXRoKCclJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIxRFx1NTlDQlx1NEY0RFx1N0Y2RVx1NjYyRlx1NzY3RVx1NTIwNlx1NkJENFx1RkYwQ1x1OEY2Q1x1NjM2Mlx1NEUzQVx1NTBDRlx1N0QyMFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxMZWZ0UHggPSAocGFyc2VGbG9hdCh0aGlzLmluaXRpYWxQb3NpdGlvbi5sZWZ0KSAvIDEwMCkgKiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgbmV3TGVmdCA9IGAke2luaXRpYWxMZWZ0UHggKyBkZWx0YVh9cHhgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MjFEXHU1OUNCXHU0RjREXHU3RjZFXHU2NjJGXHU1MENGXHU3RDIwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsTGVmdFB4ID0gcGFyc2VGbG9hdCh0aGlzLmluaXRpYWxQb3NpdGlvbi5sZWZ0KTtcclxuICAgICAgICAgICAgICAgIG5ld0xlZnQgPSBgJHtpbml0aWFsTGVmdFB4ICsgZGVsdGFYfXB4YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbmV3VG9wID0gYCR7cGFyc2VGbG9hdCh0aGlzLmluaXRpYWxQb3NpdGlvbi50b3ApICsgZGVsdGFZfXB4YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjVCMFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9IG5ld0xlZnQ7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSBuZXdUb3A7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc5RkJcdTUyQThcdTY1RjZcdTUzRDZcdTZEODh0cmFuc2Zvcm1cdTVDNDVcdTRFMkRcclxuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVx1NTQ4Q1x1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTlGMjBcdTY4MDdcdTkxQ0FcdTY1M0VcdTRFOEJcdTRFRjZcclxuICAgICAgICBjb25zdCBtb3VzZVVwSGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnaW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NTE0OVx1NjgwN1x1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICB0aGlzLmRyYWdIYW5kbGUuc3R5bGUuY3Vyc29yID0gJ2dyYWInO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5NjNCXHU2QjYyXHU0RThCXHU0RUY2XHU1MTkyXHU2Q0UxXHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTdFRDFcdTVCOUFcdTUxNjhcdTVDNDBcdTRFOEJcdTRFRjZcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcEhhbmRsZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NTcyOFx1NjNEMlx1NEVGNlx1NTM3OFx1OEY3RFx1NjVGNlx1NkUwNVx1NzQwNlx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxyXG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMDdcdTYzNjJcdTVERTVcdTUxNzdcdTY4MEZcdTc2ODRcdTY1MzZcdThENzcvXHU1QzU1XHU1RjAwXHU3MkI2XHU2MDAxXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdG9nZ2xlQ29sbGFwc2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9ICF0aGlzLmlzQ29sbGFwc2VkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NjUzNlx1OEQ3N1x1NURFNVx1NTE3N1x1NjgwRlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHNldEljb24odGhpcy5jb2xsYXBzZUJ1dHRvbiwgJ2NoZXZyb24tcmlnaHQnKTtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThDMDNcdTY1NzRcdTVCQjlcdTU2NjhcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS53aWR0aCA9ICdhdXRvJztcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzRDBcdTc5M0FcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ1x1NUM1NVx1NUYwMFx1NURFNVx1NTE3N1x1NjgwRicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NUM1NVx1NUYwMFx1NURFNVx1NTE3N1x1NjgwRlxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIHNldEljb24odGhpcy5jb2xsYXBzZUJ1dHRvbiwgJ2NoZXZyb24tbGVmdCcpO1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAnJztcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU1QkI5XHU1NjY4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc3R5bGUud2lkdGggPSAnJztcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5oZWlnaHQgPSAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjNEMFx1NzkzQVxyXG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnXHU2NTM2XHU4RDc3XHU1REU1XHU1MTc3XHU2ODBGJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTIxQlx1NUVGQVx1NjMwOVx1OTRBRVx1N0VDNFxyXG4gICAgICogQHBhcmFtIGdyb3VwTmFtZSBcdTdFQzRcdTU0MERcclxuICAgICAqIEBwYXJhbSBidXR0b25zIFx1NjMwOVx1OTRBRVx1OTE0RFx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJ1dHRvbkdyb3VwKGdyb3VwTmFtZTogc3RyaW5nLCBidXR0b25zOiB7aWQ6IHN0cmluZywgdG9vbHRpcDogc3RyaW5nLCBpY29uOiBzdHJpbmd9W10pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBncm91cCA9IHRoaXMudG9vbGJhckNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgY2xzOiAnYWR2YW5jZWQtdGFibGUtdG9vbGJhci1ncm91cCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGdyb3VwLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcclxuICAgICAgICBncm91cC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU3RUM0XHU2ODA3XHU3QjdFXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBncm91cC5jcmVhdGVFbCgnc3BhbicsIHtcclxuICAgICAgICAgICAgdGV4dDogZ3JvdXBOYW1lLFxyXG4gICAgICAgICAgICBjbHM6ICdhZHZhbmNlZC10YWJsZS10b29sYmFyLWdyb3VwLWxhYmVsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzEycHgnO1xyXG4gICAgICAgIGxhYmVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzVweCc7XHJcbiAgICAgICAgbGFiZWwuc3R5bGUub3BhY2l0eSA9ICcwLjcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBncm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICAgICAgY2xzOiBgYWR2YW5jZWQtdGFibGUtdG9vbGJhci1idXR0b24gJHtidG4uaWR9YCxcclxuICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiBidG4udG9vbHRpcCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICcyOHB4JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmhlaWdodCA9ICcyOHB4JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnM3B4JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnO1xyXG4gICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTZGRVx1NjgwN1xyXG4gICAgICAgICAgICBzZXRJY29uKGJ1dHRvbiwgYnRuLmljb24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MEFDXHU1MDVDXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJ1dHRvbkNsaWNrKGJ0bi5pZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MEFDXHU1MDVDXHU2M0QwXHU3OTNBXHJcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgYnRuLnRvb2x0aXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTIxQlx1NUVGQVx1NTIwNlx1OTY5NFx1N0VCRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNlcGFyYXRvcigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSB0aGlzLnRvb2xiYXJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ2FkdmFuY2VkLXRhYmxlLXRvb2xiYXItc2VwYXJhdG9yJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS53aWR0aCA9ICcxcHgnO1xyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5oZWlnaHQgPSAnMjRweCc7XHJcbiAgICAgICAgc2VwYXJhdG9yLnN0eWxlLm1hcmdpbiA9ICcwIDVweCc7XHJcbiAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTkwNFx1NzQwNlx1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgICogQHBhcmFtIGJ1dHRvbklkIFx1NjMwOVx1OTRBRUlEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlQnV0dG9uQ2xpY2soYnV0dG9uSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1OEJCMFx1NUY1NVx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3MEI5XHU1MUZCXHU0RTg2XHU2MzA5XHU5NEFFOiAke2J1dHRvbklkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHJcbiAgICAgICAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSB0aGlzLmlzSW5FZGl0TW9kZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3dpdGNoIChidXR0b25JZCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tbGVmdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscygnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tY2VudGVyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKCdjZW50ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsaWduLXJpZ2h0JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKCdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tdG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKHVuZGVmaW5lZCwgJ3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tbWlkZGxlJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKHVuZGVmaW5lZCwgJ21pZGRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tYm90dG9tJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKHVuZGVmaW5lZCwgJ2JvdHRvbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24tYWxsJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50VG9TZWxlY3RlZENlbGxzKCdjZW50ZXInLCAnbWlkZGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZS1jZWxscyc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NjY4Mlx1NEUwRFx1NjUyRlx1NjMwMVx1NTkxQVx1OTAwOVx1NTQwOFx1NUU3NlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTY2ODJcdTRFMERcdTY1MkZcdTYzMDFcdTU5MUFcdTkwMDlcdTU0MDhcdTVFNzZcdUZGMENcdThCRjdcdTRGN0ZcdTc1MjhcdTU0MTFcdTUzRjNcdTYyMTZcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlQ2VsbHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZS1yaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZS1kb3duJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc3BsaXQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTRGN0ZcdTc1MjggTWFya2Rvd25Tb3VyY2VFZGl0b3IgXHU4RkRCXHU4ODRDXHU2MkM2XHU1MjA2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm1hcmtkb3duU291cmNlRWRpdG9yLnNwbGl0TWVyZ2VkQ2VsbHMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU5MDA5XHU2MkU5XHVGRjBDXHU1NkUwXHU0RTNBXHU2RTkwXHU3ODAxXHU1REYyXHU3RUNGXHU0RkVFXHU2NTM5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2MkM2XHU1MjA2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRDZWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGFibGUtaWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVUYWJsZUlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0YWJsZS1yb3ctYWRkJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2NjgyXHU0RTBEXHU2NTJGXHU2MzAxXHU2REZCXHU1MkEwXHU4ODRDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NjY4Mlx1NEUwRFx1NjUyRlx1NjMwMVx1OTAxQVx1OEZDN1x1NURFNVx1NTE3N1x1NjgwRlx1NkRGQlx1NTJBMFx1ODg0Q1x1RkYwQ1x1OEJGN1x1NzZGNFx1NjNBNVx1N0YxNlx1OEY5MU1hcmtkb3duXHU2RTkwXHU3ODAxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Um93QWRkTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYmxlLXN0eWxlJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU2NjgyXHU0RTBEXHU2NTJGXHU2MzAxXHU2ODM3XHU1RjBGXHU4QkJFXHU3RjZFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NjY4Mlx1NEUwRFx1NjUyRlx1NjMwMVx1NjgzN1x1NUYwRlx1OEJCRVx1N0Y2RScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0eWxlTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjcyQVx1NTkwNFx1NzQwNlx1NzY4NFx1NjMwOVx1OTRBRUlEOiAke2J1dHRvbklkfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHU1OTA0XHU3NDA2XHU2MzA5XHU5NEFFXHU3MEI5XHU1MUZCXHU2NUY2XHU1MUZBXHU5NTE5OiAke2J1dHRvbklkfWAsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4QkIwXHU1RjU1XHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9nRGVidWdJbmZvKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjU4N1x1Njg2M1x1NEUyRFx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgIGNvbnN0IGFsbFRhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1NURGMlx1OTAwOVx1NjJFOVx1NzY4NFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGFibGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlW2RhdGEtdGFibGUtc2VsZWN0ZWQ9XCJ0cnVlXCJdJykubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTVGNTNcdTUyNERcdTcyQjZcdTYwMDE6Jywge1xyXG4gICAgICAgICAgICBhY3RpdmVUYWJsZTogdGhpcy5hY3RpdmVUYWJsZSxcclxuICAgICAgICAgICAgYWxsVGFibGVzOiBhbGxUYWJsZXMsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHM6IHRoaXMuc2VsZWN0ZWRDZWxscyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRUYWJsZUVsZW1lbnRzOiBzZWxlY3RlZFRhYmxlRWxlbWVudHMsXHJcbiAgICAgICAgICAgIHRvb2xiYXJDb250YWluZXI6IHRoaXMuY29udGFpbmVyRWxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTVCRjlcdTlGNTBcdTY4MzdcdTVGMEZcdTUyMzBcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIEBwYXJhbSBob3Jpem9udGFsQWxpZ24gXHU2QzM0XHU1RTczXHU1QkY5XHU5RjUwXHU2NUI5XHU1RjBGXHJcbiAgICAgKiBAcGFyYW0gdmVydGljYWxBbGlnbiBcdTU3ODJcdTc2RjRcdTVCRjlcdTlGNTBcdTY1QjlcdTVGMEZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseUFsaWdubWVudFRvU2VsZWN0ZWRDZWxscyhob3Jpem9udGFsQWxpZ24/OiBzdHJpbmcsIHZlcnRpY2FsQWxpZ24/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RTk0XHU3NTI4XHU1QkY5XHU5RjUwOicsIHtob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsQWxpZ259KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTk5Nlx1NTE0OFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlx1NTIzMERPTVx1NTE0M1x1N0QyMFx1RkYwQ1x1Nzg2RVx1NEZERFx1NzUyOFx1NjIzN1x1N0FDQlx1NTM3M1x1NzcwQlx1NTIzMFx1NjU0OFx1Njc5Q1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5QWxpZ25tZW50U3R5bGVzT25seShob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsQWxpZ24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU2MjE2XHU2Q0ExXHU2NzA5XHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHVGRjBDXHU1MjE5XHU3NkY0XHU2M0E1XHU4RkQ0XHU1NkRFXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSB8fCAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA9PT0gMCAmJiAhdGhpcy5hcHBseVRvRW50aXJlVGFibGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NkNBMVx1NjcwOVx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxNlx1NkQzQlx1NTJBOFx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTY1QjBcdTY1QjlcdTZDRDVcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1OEJGQlx1NTNENlx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlYWRUYWJsZUlkRnJvbU1hcmtkb3duKHRoaXMuYWN0aXZlVGFibGUpLnRoZW4odGFibGVJZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRDogJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1ODNCN1x1NTNENlx1NTIzMFx1NjcwOVx1NjU0OFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU1MjE5XHU1M0VBXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHU0RjQ2XHU0RTBEXHU0RkREXHU1QjU4XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NjcyQVx1NjI3RVx1NTIzMEhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTVCOUFcdTRFNDlcdTc2ODRcdTg4NjhcdTY4M0NJRFx1RkYwQ1x1NUMwNlx1NTNFQVx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlx1NEY0Nlx1NEUwRFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEXHVGRjBDXHU2ODM3XHU1RjBGXHU1REYyXHU1RTk0XHU3NTI4XHU0RjQ2XHU2NzJBXHU0RkREXHU1QjU4XHU1MjMwXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTUyMzBcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYmxlKSB7IC8vIFx1Nzg2RVx1NEZERGFjdGl2ZVRhYmxlXHU0RUNEXHU3MTM2XHU1QjU4XHU1NzI4XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFibGUgPSB0aGlzLmFjdGl2ZVRhYmxlOyAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTVGMTVcdTc1MjhcdUZGMENcdTc4NkVcdTRGRERcdTU3MjhcdTVGMDJcdTZCNjVcdTY0Q0RcdTRGNUNcdTRFMkRcdTRFMERcdTRGMUFcdTRFM0FudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdThERUZcdTVGODQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENlbGxQb3NpdGlvbnMgPSB0aGlzLmdldFNlbGVjdGVkQ2VsbFBvc2l0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkU6Jywgc2VsZWN0ZWRDZWxsUG9zaXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpLnRoZW4oKGV4aXN0aW5nRGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NUI1OFx1NTcyOFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nRGF0YS50YWJsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRGF0YS50YWJsZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlRGF0YSA9IGV4aXN0aW5nRGF0YS50YWJsZXNbdGFibGVJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFMERcdTVCNThcdTU3MjhcdUZGMENcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTY1QjBcdTc2ODRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkU6ICR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU3Njg0XHU4ODRDXHU2NTcwXHU1NDhDXHU1MjE3XHU2NTcwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0NvdW50ID0gcm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gcm93c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xDb3VudCA9IGZpcnN0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRhYmxlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudDogcm93Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbENvdW50OiBjb2xDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogcm93cy5sZW5ndGggPiAwICYmIHJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgnKS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IEFycmF5KHJvd0NvdW50KS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoczogQXJyYXkoY29sQ291bnQpLmZpbGwoJ2F1dG8nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBcnJheShjb2xDb3VudCkuZmlsbCgnbGVmdCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsU3R5bGVzOiBbXSAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTc1MjhcdTRFOEVcdTVCNThcdTUwQThcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMDZcdTY1QjBcdTUyMUJcdTVFRkFcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTZERkJcdTUyQTBcdTUyMzBleGlzdGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRGF0YS50YWJsZXNbdGFibGVJZF0gPSB0YWJsZURhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU4QkIwXHU1RjU1OiAke3RhYmxlSWR9YCwgdGFibGVEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTYyN0VcdTUyMzBcdTczQjBcdTY3MDlcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkU6ICR7dGFibGVJZH1gLCB0YWJsZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTdFRDNcdTY3ODRcdTY1NzBcdTYzNkVcdTVCNThcdTU3MjhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFibGVEYXRhLnN0cnVjdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBhY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0NvdW50ID0gcm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93Q291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gcm93c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sQ291bnQgPSBmaXJzdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHJ1Y3R1cmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0NvdW50OiByb3dDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sQ291bnQ6IGNvbENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNIZWFkZXJzOiByb3dzLmxlbmd0aCA+IDAgJiYgcm93c1swXS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERzdHlsaW5nXHU2NTcwXHU2MzZFXHU1QjU4XHU1NzI4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhYmxlRGF0YS5zdHlsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IEFycmF5KHRhYmxlRGF0YS5zdHJ1Y3R1cmUucm93Q291bnQpLmZpbGwoJ2F1dG8nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzOiBBcnJheSh0YWJsZURhdGEuc3RydWN0dXJlLmNvbENvdW50KS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogQXJyYXkodGFibGVEYXRhLnN0cnVjdHVyZS5jb2xDb3VudCkuZmlsbCgnbGVmdCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsU3R5bGVzOiBbXSAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTc1MjhcdTRFOEVcdTVCNThcdTUwQThcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERjZWxsU3R5bGVzXHU2NTcwXHU3RUM0XHU1QjU4XHU1NzI4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERGxvY2F0aW9uc1x1NjU3MFx1NjM2RVx1NTMwNVx1NTQyQlx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEubG9jYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLmxvY2F0aW9ucyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU2NjJGXHU1NDI2XHU1REYyXHU1NzI4bG9jYXRpb25zXHU0RTJEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGhFeGlzdHMgPSB0YWJsZURhdGEubG9jYXRpb25zLnNvbWUoKGxvYzoge3BhdGg6IHN0cmluZ30pID0+IGxvYy5wYXRoID09PSBhY3RpdmVGaWxlLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZVBhdGhFeGlzdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLmxvY2F0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5MDA5XHU2MkU5XHU0RTg2XHU1RTk0XHU3NTI4XHU1MjMwXHU2NTc0XHU0RTJBXHU4ODY4XHU2ODNDXHVGRjBDXHU1MjE5XHU2NkY0XHU2NUIwXHU1MjE3XHU1QkY5XHU5RjUwXHU2NUI5XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwIHx8IHRoaXMuYXBwbHlUb0VudGlyZVRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9yaXpvbnRhbEFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREc3R5bGluZ1x1NTQ4Q2FsaWdubWVudFx1NUI1OFx1NTcyOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nID0gdGFibGVEYXRhLnN0eWxpbmcgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50ID0gdGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50IHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjI0MFx1NjcwOVx1NTIxN1x1NzY4NFx1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbENvdW50ID0gdGFibGVEYXRhLnN0cnVjdHVyZT8uY29sQ291bnQgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50W2ldID0gaG9yaXpvbnRhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NkY0XHU2NUIwXHU4ODY4XHU2ODNDXHU1QkY5XHU5RjUwXHU2NTcwXHU2MzZFOiAke3RhYmxlSWR9YCwgdGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDI2XHU1MjE5XHVGRjBDXHU1M0VBXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxQb3NpdGlvbnMuZm9yRWFjaChwb3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1NjYyRlx1NTQyNlx1NURGMlx1NjcwOVx1NkI2NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU3R5bGVJbmRleCA9IHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXMuZmluZEluZGV4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3R5bGU6IGFueSkgPT4gc3R5bGUucm93ID09PSBwb3Mucm93ICYmIHN0eWxlLmNvbCA9PT0gcG9zLmNvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU2NzA5XHU2ODM3XHU1RjBGXHVGRjBDXHU2NkY0XHU2NUIwXHU1QjgzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nU3R5bGVJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvcml6b250YWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlc1tleGlzdGluZ1N0eWxlSW5kZXhdLnRleHRBbGlnbiA9IGhvcml6b250YWxBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVydGljYWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlc1tleGlzdGluZ1N0eWxlSW5kZXhdLnZlcnRpY2FsQWxpZ24gPSB2ZXJ0aWNhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU0MjZcdTUyMTlcdUZGMENcdTZERkJcdTUyQTBcdTY1QjBcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3R5bGU6IGFueSA9IHsgcm93OiBwb3Mucm93LCBjb2w6IHBvcy5jb2wgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvcml6b250YWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGUudGV4dEFsaWduID0gaG9yaXpvbnRhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNhbEFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdHlsZS52ZXJ0aWNhbEFsaWduID0gdmVydGljYWxBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzLnB1c2gobmV3U3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2NkY0XHU2NUIwXHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFOiAke3RhYmxlSWR9YCwgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NjZGNFx1NjVCMFx1NTQwRVx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlRGF0YShleGlzdGluZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTYyMTBcdTUyOUZcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1QzA2JHtob3Jpem9udGFsQWxpZ24gfHwgJyd9JHtob3Jpem9udGFsQWxpZ24gJiYgdmVydGljYWxBbGlnbiA/ICdcdTU0OEMnIDogJyd9JHt2ZXJ0aWNhbEFsaWduIHx8ICcnfVx1NUJGOVx1OUY1MFx1NUU5NFx1NzUyOFx1NTIzMCR7dGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA+IDAgPyAnXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDJyA6ICdcdTY1NzRcdTRFMkFcdTg4NjhcdTY4M0MnfVx1NUU3Nlx1NEZERFx1NUI1OFx1NTIzMFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU1OTMxXHU4RDI1OiAke2Vyci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVx1NjVGNlx1ODg2OFx1NjgzQ1x1NEUwRFx1NTE4RFx1NUI1OFx1NTcyOCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVCRjlcdTlGNTBcdTVFOTRcdTc1MjhcdTVCOENcdTYyMTAnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTVFOTRcdTc1MjhcdTVCRjlcdTlGNTBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVFOTRcdTc1MjhcdTVCRjlcdTlGNTBcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHVGRjA4XHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHVGRjA5XHJcbiAgICAgKiBAcmV0dXJucyBcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTRGNERcdTdGNkVcdTY1NzBcdTdFQzRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRTZWxlY3RlZENlbGxQb3NpdGlvbnMoKTogQXJyYXk8e3JvdzogbnVtYmVyLCBjb2w6IG51bWJlcn0+IHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnM6IEFycmF5PHtyb3c6IG51bWJlciwgY29sOiBudW1iZXJ9PiA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSB8fCB0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTA0RFx1NTM4Nlx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyNDBcdTU3MjhcdTc2ODRcdTg4NENcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gY2VsbC5jbG9zZXN0KCd0cicpO1xyXG4gICAgICAgICAgICBpZiAoIXJvdykgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gQXJyYXkuZnJvbSh0aGlzLmFjdGl2ZVRhYmxlIS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKS5pbmRleE9mKHJvdyk7XHJcbiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gLTEpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTcyOFx1ODg0Q1x1NEUyRFx1NzY4NFx1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IEFycmF5LmZyb20ocm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpKS5pbmRleE9mKGNlbGwpO1xyXG4gICAgICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMzBcdTRGNERcdTdGNkVcdTY1NzBcdTdFQzRcclxuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goeyByb3c6IHJvd0luZGV4LCBjb2w6IGNvbEluZGV4IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU0RUM1XHU1RTk0XHU3NTI4XHU1QkY5XHU5RjUwXHU2ODM3XHU1RjBGXHVGRjBDXHU0RTBEXHU0RkREXHU1QjU4XHU2NTcwXHU2MzZFXHJcbiAgICAgKiBAcGFyYW0gaG9yaXpvbnRhbEFsaWduIFx1NkMzNFx1NUU3M1x1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICogQHBhcmFtIHZlcnRpY2FsQWxpZ24gXHU1NzgyXHU3NkY0XHU1QkY5XHU5RjUwXHU2NUI5XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlBbGlnbm1lbnRTdHlsZXNPbmx5KGhvcml6b250YWxBbGlnbj86IHN0cmluZywgdmVydGljYWxBbGlnbj86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NTIxOVx1NUU5NFx1NzUyOFx1NTIzMFx1NjU3NFx1NEUyQVx1ODg2OFx1NjgzQ1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwICYmIHRoaXMuYWN0aXZlVGFibGUpIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbEVsID0gY2VsbCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChob3Jpem9udGFsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsRWwuc3R5bGUudGV4dEFsaWduID0gaG9yaXpvbnRhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2FsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsRWwuc3R5bGUudmVydGljYWxBbGlnbiA9IHZlcnRpY2FsQWxpZ247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTVDMDYke2hvcml6b250YWxBbGlnbiB8fCAnJ30ke2hvcml6b250YWxBbGlnbiAmJiB2ZXJ0aWNhbEFsaWduID8gJ1x1NTQ4QycgOiAnJ30ke3ZlcnRpY2FsQWxpZ24gfHwgJyd9XHU1QkY5XHU5RjUwXHU1RTk0XHU3NTI4XHU1MjMwXHU2NTc0XHU0RTJBXHU4ODY4XHU2ODNDYCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MjMwXHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhvcml6b250YWxBbGlnbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dEFsaWduID0gaG9yaXpvbnRhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2FsQWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSB2ZXJ0aWNhbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1QzA2JHtob3Jpem9udGFsQWxpZ24gfHwgJyd9JHtob3Jpem9udGFsQWxpZ24gJiYgdmVydGljYWxBbGlnbiA/ICdcdTU0OEMnIDogJyd9JHt2ZXJ0aWNhbEFsaWduIHx8ICcnfVx1NUJGOVx1OUY1MFx1NUU5NFx1NzUyOFx1NTIzMFx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ2ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU0MDhcdTVFNzZcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBtZXJnZUNlbGxzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVDMURcdThCRDVcdTU0MDhcdTVFNzZcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRVxyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODlDNlx1NTZGRScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgaXNFZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRjogJHtpc0VkaXRNb2RlID8gJ1x1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRicgOiAnXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGJ31gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRNb2RlT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEY3Rlx1NzUyOCBNYXJrZG93blNvdXJjZUVkaXRvciBcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy5wbHVnaW4ubWFya2Rvd25Tb3VyY2VFZGl0b3IubWVyZ2VDZWxscygncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XHVGRjBDXHU1NkUwXHU0RTNBXHU2RTkwXHU3ODAxXHU1REYyXHU3RUNGXHU0RkVFXHU2NTM5XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2MjEwXHU1MjlGJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU5MDA5XHU2MkU5XHU4MUYzXHU1QzExMlx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1OEZEQlx1ODg0Q1x1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU4RkI5XHU3NTRDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZGFyeSA9IHRoaXMuZ2V0U2VsZWN0ZWRDZWxsc0JvdW5kYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU3ODZFXHU1QjlBXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU4RkI5XHU3NTRDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1pblJvdywgbWF4Um93LCBtaW5Db2wsIG1heENvbCB9ID0gYm91bmRhcnk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUY2Mlx1NjIxMFx1NUI4Q1x1NjU3NFx1NzY4NFx1NzdFOVx1NUY2MlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRDZWxsQ291bnQgPSAobWF4Um93IC0gbWluUm93ICsgMSkgKiAobWF4Q29sIC0gbWluQ29sICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwZWN0ZWRDZWxsQ291bnQgIT09IHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTUzRUFcdTgwRkRcdTU0MDhcdTVFNzZcdTVGNjJcdTYyMTBcdTVCOENcdTY1NzRcdTc3RTlcdTVGNjJcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOFx1NURFNlx1NEUwQVx1ODlEMlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFpbkNlbGwgPSB0aGlzLmFjdGl2ZVRhYmxlPy5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHttaW5Sb3d9XCJdW2NvbC1pbmRleD1cIiR7bWluQ29sfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtYWluQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1NjI3RVx1NTIzMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU5NzVFXHU3QTdBXHU1MTg1XHU1QkI5XHU5NzAwXHU4OTgxXHU3ODZFXHU4QkE0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub25FbXB0eUNlbGxzID0gdGhpcy5zZWxlY3RlZENlbGxzLmZpbHRlcihjZWxsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwgPT09IG1haW5DZWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50ICE9PSAnJyAmJiBjb250ZW50ICE9PSAnPCcgJiYgY29udGVudCAhPT0gJ14nO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub25FbXB0eUNlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gbm9uRW1wdHlDZWxscy5tYXAoY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFwiJHtjZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyhcdTdBN0EpJ31cImA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTWVyZ2UgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTMwNVx1NTQyQlx1NTE4NVx1NUJCOSR7Y2VsbENvbnRlbnRzfVx1RkYwQ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTQwOFx1NUU3Nlx1NTQxN1x1RkYxRmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtTWVyZ2UpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1OTcwMFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1ODg0Q1x1NjU3MFx1NTQ4Q1x1NTIxN1x1NjU3MFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93U3BhblZhbHVlID0gbWF4Um93IC0gbWluUm93ICsgMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbFNwYW5WYWx1ZSA9IG1heENvbCAtIG1pbkNvbCArIDE7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NTQwOFx1NUU3Nlx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd1NwYW5WYWx1ZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluQ2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dTcGFuVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuVmFsdWUgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbkNlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sU3BhblZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTUxNzZcdTRFRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTZERkJcdTUyQTBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiB0aGlzLnNlbGVjdGVkQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbCA9PT0gbWFpbkNlbGwpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTRGNERcdTdGNkVcdThCQkVcdTdGNkVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93SW5kZXggPT09IG1pblJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU0MENcdTRFMDBcdTg4NENcdUZGMENcdThCQkVcdTdGNkVcdTZDMzRcdTVFNzNcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyQ291bnQgPSBjb2xJbmRleCAtIG1pbkNvbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICc8Jy5yZXBlYXQobWFya2VyQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1jb3VudCcsIG1hcmtlckNvdW50LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sSW5kZXggPT09IG1pbkNvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU0MENcdTRFMDBcdTUyMTdcdUZGMENcdThCQkVcdTdGNkVcdTU3ODJcdTc2RjRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyQ291bnQgPSByb3dJbmRleCAtIG1pblJvdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICdeJy5yZXBlYXQobWFya2VyQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAndXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtY291bnQnLCBtYXJrZXJDb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUxNzZcdTRFRDZcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTY4MzlcdTYzNkVcdTYwQzVcdTUxQjVcdThCQkVcdTdGNkVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4ID4gbWluUm93ICYmIGNvbEluZGV4ID4gbWluQ29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUzRUZcdTRFRTVcdTkwMDlcdTYyRTlcdTU0MTFcdTRFMEFcdTYyMTZcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdUZGMENcdThGRDlcdTkxQ0NcdTkwMDlcdTYyRTlcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlckNvdW50ID0gY29sSW5kZXggLSBtaW5Db2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gJzwnLnJlcGVhdChtYXJrZXJDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtZGlyZWN0aW9uJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlLWNvdW50JywgbWFya2VyQ291bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU4OEFCXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlNZXJnZWRDZWxsU3R5bGVzKG1haW5DZWxsLCB0aGlzLnNlbGVjdGVkQ2VsbHMuZmlsdGVyKGNlbGwgPT4gY2VsbCAhPT0gbWFpbkNlbGwpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU2MjEwXHU1MjlGXHU1NDA4XHU1RTc2JHt0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RofVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ2ApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDlcdTYyRTlcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgbWVyZ2VSaWdodCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1QzFEXHU4QkQ1XHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVGNTNcdTUyNERcdTZBMjFcdTVGMEY6ICR7aXNFZGl0TW9kZSA/ICdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEYnIDogJ1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRid9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTRGN0ZcdTc1MjggTWFya2Rvd25Tb3VyY2VFZGl0b3IgXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1NEY3Rlx1NzUyOCBNYXJrZG93blNvdXJjZUVkaXRvclxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMucGx1Z2luLm1hcmtkb3duU291cmNlRWRpdG9yLm1lcmdlQ2VsbHMoJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1RkYwQ1x1NTZFMFx1NEUzQVx1NkU5MFx1NzgwMVx1NURGMlx1N0VDRlx1NEZFRVx1NjUzOVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU5MUFcdTRFMkFcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTYwQzVcdTUxQjVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NTcyOFx1NTQwQ1x1NEUwMFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGljZXMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuc2VsZWN0ZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRpY2VzLmFkZChyb3dJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dJbmRpY2VzLnNpemUgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU5NzAwXHU4OTgxXHU5MDA5XHU2MkU5XHU1NDBDXHU0RTAwXHU4ODRDXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MjE3XHU3RDIyXHU1RjE1XHU1RTc2XHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHNXaXRoSW5kaWNlcyA9IHRoaXMuc2VsZWN0ZWRDZWxscy5tYXAoY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXg6IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCAnMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5jb2xJbmRleCAtIGIuY29sSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1OEZERVx1N0VFRFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY2VsbHNXaXRoSW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbHNXaXRoSW5kaWNlc1tpXS5jb2xJbmRleCAhPT0gY2VsbHNXaXRoSW5kaWNlc1tpLTFdLmNvbEluZGV4ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU5NzAwXHU4OTgxXHU5MDA5XHU2MkU5XHU4RkRFXHU3RUVEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4RkRCXHU4ODRDXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA4XHU2NzAwXHU1REU2XHU0RkE3XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA5XHU1NDhDXHU1NDA4XHU1RTc2XHU2NTcwXHU5MUNGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpbkNlbGwgPSBjZWxsc1dpdGhJbmRpY2VzWzBdLmNlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VDb3VudCA9IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTk3NUVcdTdBN0FcdTUxODVcdTVCQjlcdTk3MDBcdTg5ODFcdTc4NkVcdThCQTRcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9uRW1wdHlDZWxscyA9IGNlbGxzV2l0aEluZGljZXMuc2xpY2UoMSkuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQgIT09ICcnICYmIGNvbnRlbnQgIT09ICc8JyAmJiBjb250ZW50ICE9PSAnXic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vbkVtcHR5Q2VsbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gbm9uRW1wdHlDZWxscy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcIiR7aXRlbS5jZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyhcdTdBN0EpJ31cImA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTWVyZ2UgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjkke2NlbGxDb250ZW50c31cdUZGMENcdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtTWVyZ2UpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdThCQkVcdTdGNkVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzV2l0aEluZGljZXNbaV0uY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHVGRjBDXHU0RjdGXHU3NTI4XHU4RkRFXHU3RUVEXHU3Njg0IDwgXHU3QjI2XHU1M0Y3XHU4ODY4XHU3OTNBXHU1NDA4XHU1RTc2XHU1OTFBXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnPCcucmVwZWF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1jb3VudCcsIGkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTQwOFx1NUU3Nlx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlNZXJnZWRDZWxsU3R5bGVzKG1haW5DZWxsLCBjZWxsc1dpdGhJbmRpY2VzLnNsaWNlKDEpLm1hcChpdGVtID0+IGl0ZW0uY2VsbCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3NiR7bWVyZ2VDb3VudH1cdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2JHttZXJnZUNvdW50fVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RmApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTUzNTVcdTRFMkFcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMDhcdTUzOUZcdTY3MDlcdTkwM0JcdThGOTFcdUZGMDlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnNlbGVjdGVkQ2VsbHNbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NENcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvdy1pbmRleCcpIHx8ICcwJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTUzRjNcdTRGQTdcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q2VsbCA9IHRoaXMuYWN0aXZlVGFibGU/LnF1ZXJ5U2VsZWN0b3IoYFtyb3ctaW5kZXg9XCIke3Jvd0luZGV4fVwiXVtjb2wtaW5kZXg9XCIke2NvbEluZGV4ICsgMX1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICghcmlnaHRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1M0YzXHU0RkE3XHU2Q0ExXHU2NzA5XHU1MzU1XHU1MTQzXHU2ODNDXHU1M0VGXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUzRjNcdTRGQTdcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q29udGVudCA9IHJpZ2h0Q2VsbC50ZXh0Q29udGVudD8udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5ICYmIFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Q29udGVudCAmJiByaWdodENvbnRlbnQgIT09ICc8JyAmJiByaWdodENvbnRlbnQgIT09ICdeJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHRoaXMuc2hvd0NvbmZpcm1EaWFsb2coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjlcIiR7cmlnaHRDb250ZW50fVwiXHVGRjBDXHU3ODZFXHU1QjlBXHU4OTgxXHU1NDA4XHU1RTc2XHU1NDE3XHVGRjFGYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHU0RTNBXHU2QzM0XHU1RTczXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICByaWdodENlbGwudGV4dENvbnRlbnQgPSAnPCc7XHJcbiAgICAgICAgICAgICAgICByaWdodENlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByaWdodENlbGwuc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlLWRpcmVjdGlvbicsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseU1lcmdlZENlbGxTdHlsZXMoY2VsbCwgW3JpZ2h0Q2VsbF0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQxMVx1NTNGM1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBtZXJnZURvd24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NUMxRFx1OEJENVx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU4OUM2XHU1NkZFJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICBjb25zdCBpc0VkaXRNb2RlID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09ICdzb3VyY2UnO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGOiAke2lzRWRpdE1vZGUgPyAnXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGJyA6ICdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEYnfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdE1vZGVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU0RjdGXHU3NTI4IE1hcmtkb3duU291cmNlRWRpdG9yIFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTRGN0ZcdTc1MjggTWFya2Rvd25Tb3VyY2VFZGl0b3JcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5tYXJrZG93blNvdXJjZUVkaXRvci5tZXJnZUNlbGxzKCdkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1RkYwQ1x1NTZFMFx1NEUzQVx1NkU5MFx1NzgwMVx1NURGMlx1N0VDRlx1NEZFRVx1NjUzOVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdUZGMENcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU5MUFcdTRFMkFcdTkwMDlcdTRFMkRcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTYwQzVcdTUxQjVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NTcyOFx1NTQwQ1x1NEUwMFx1NTIxN1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEluZGljZXMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuc2VsZWN0ZWRDZWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xJbmRpY2VzLmFkZChjb2xJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRpY2VzLnNpemUgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU5NzAwXHU4OTgxXHU5MDA5XHU2MkU5XHU1NDBDXHU0RTAwXHU1MjE3XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU3RDIyXHU1RjE1XHU1RTc2XHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHNXaXRoSW5kaWNlcyA9IHRoaXMuc2VsZWN0ZWRDZWxscy5tYXAoY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5yb3dJbmRleCAtIGIucm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1OEZERVx1N0VFRFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY2VsbHNXaXRoSW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbHNXaXRoSW5kaWNlc1tpXS5yb3dJbmRleCAhPT0gY2VsbHNXaXRoSW5kaWNlc1tpLTFdLnJvd0luZGV4ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU5NzAwXHU4OTgxXHU5MDA5XHU2MkU5XHU4RkRFXHU3RUVEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4RkRCXHU4ODRDXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA4XHU2NzAwXHU0RTBBXHU2NUI5XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjA5XHU1NDhDXHU1NDA4XHU1RTc2XHU2NTcwXHU5MUNGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpbkNlbGwgPSBjZWxsc1dpdGhJbmRpY2VzWzBdLmNlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VDb3VudCA9IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTk3NUVcdTdBN0FcdTUxODVcdTVCQjlcdTk3MDBcdTg5ODFcdTc4NkVcdThCQTRcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybU1lcmdlTm9uRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9uRW1wdHlDZWxscyA9IGNlbGxzV2l0aEluZGljZXMuc2xpY2UoMSkuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQgIT09ICcnICYmIGNvbnRlbnQgIT09ICc8JyAmJiBjb250ZW50ICE9PSAnXic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vbkVtcHR5Q2VsbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnRzID0gbm9uRW1wdHlDZWxscy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcIiR7aXRlbS5jZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyhcdTdBN0EpJ31cImA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTWVyZ2UgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjkke2NlbGxDb250ZW50c31cdUZGMENcdTc4NkVcdTVCOUFcdTg5ODFcdTU0MDhcdTVFNzZcdTU0MTdcdUZGMUZgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtTWVyZ2UpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTYyNDBcdTY3MDlcdTk3MDBcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdThCQkVcdTdGNkVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNlbGxzV2l0aEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzV2l0aEluZGljZXNbaV0uY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHVGRjBDXHU0RjdGXHU3NTI4XHU4RkRFXHU3RUVEXHU3Njg0IF4gXHU3QjI2XHU1M0Y3XHU4ODY4XHU3OTNBXHU1NDA4XHU1RTc2XHU1OTFBXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnXicucmVwZWF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAndXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2UtY291bnQnLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5TWVyZ2VkQ2VsbFN0eWxlcyhtYWluQ2VsbCwgY2VsbHNXaXRoSW5kaWNlcy5zbGljZSgxKS5tYXAoaXRlbSA9PiBpdGVtLmNlbGwpKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzYke21lcmdlQ291bnR9XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3NiR7bWVyZ2VDb3VudH1cdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTYyMTBcdTUyOUZgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1MzU1XHU0RTJBXHU5MDA5XHU0RTJEXHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU2MEM1XHU1MUI1XHVGRjA4XHU1MzlGXHU2NzA5XHU5MDNCXHU4RjkxXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5zZWxlY3RlZENlbGxzWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODRDXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RTogXHU4ODRDPSR7cm93SW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RTBCXHU2NUI5XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWxvd0NlbGwgPSB0aGlzLmFjdGl2ZVRhYmxlPy5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHtyb3dJbmRleCArIDF9XCJdW2NvbC1pbmRleD1cIiR7Y29sSW5kZXh9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJlbG93Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NEUwQlx1NjVCOVx1NkNBMVx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTNFRlx1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU0RTBCXHU2NUI5XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWxvd0NvbnRlbnQgPSBiZWxvd0NlbGwudGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSAmJiBcclxuICAgICAgICAgICAgICAgICAgICBiZWxvd0NvbnRlbnQgJiYgYmVsb3dDb250ZW50ICE9PSAnPCcgJiYgYmVsb3dDb250ZW50ICE9PSAnXicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgXHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MzA1XHU1NDJCXHU1MTg1XHU1QkI5XCIke2JlbG93Q29udGVudH1cIlx1RkYwQ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTQwOFx1NUU3Nlx1NTQxN1x1RkYxRmBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NEUwQlx1NjVCOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NEUzQVx1NTc4Mlx1NzZGNFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgYmVsb3dDZWxsLnRleHRDb250ZW50ID0gJ14nO1xyXG4gICAgICAgICAgICAgICAgYmVsb3dDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgYmVsb3dDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZS1kaXJlY3Rpb24nLCAndXAnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5TWVyZ2VkQ2VsbFN0eWxlcyhjZWxsLCBbYmVsb3dDZWxsXSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NURGMlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNwbGl0Q2VsbCgpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1OTcwMFx1ODk4MVx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1OEZEQlx1ODg0Q1x1NjJDNlx1NTIwNicpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU4RkRCXHU4ODRDXHU2MkM2XHU1MjA2Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVGMDBcdTU5Q0JcdTYyQzZcdTUyMDZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLnNlbGVjdGVkQ2VsbHNbMF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NENcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgncm93LWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sLWluZGV4JykgfHwgJzAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1ODhBQlx1NTQwOFx1NUU3Nlx1RkYwOFx1OTAxQVx1OEZDNyBjb2xzcGFuIFx1NjIxNiByb3dzcGFuIFx1NUM1RVx1NjAyN1x1RkYwOVxyXG4gICAgICAgICAgICBjb25zdCBjb2xTcGFuID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcclxuICAgICAgICAgICAgY29uc3Qgcm93U3BhbiA9IGNlbGwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0NjhcdTU2RjRcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTY3MDlcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgY29uc3QgdGFibGUgPSBjZWxsLmNsb3Nlc3QoJ3RhYmxlJyk7XHJcbiAgICAgICAgICAgIGxldCBoYXNNZXJnZU1hcmtlcnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENlbGwgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHtyb3dJbmRleH1cIl1bY29sLWluZGV4PVwiJHtjb2xJbmRleCArIDF9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRDZWxsICYmIHJpZ2h0Q2VsbC50ZXh0Q29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q29udGVudCA9IHJpZ2h0Q2VsbC50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0Q29udGVudCA9PT0gJzwnIHx8IHJpZ2h0Q29udGVudCA9PT0gJ14nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01lcmdlTWFya2VycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Q2VsbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU2RTA1XHU5NjY0XHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTRFMEJcdTY1QjlcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlbG93Q2VsbCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoYFtyb3ctaW5kZXg9XCIke3Jvd0luZGV4ICsgMX1cIl1bY29sLWluZGV4PVwiJHtjb2xJbmRleH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChiZWxvd0NlbGwgJiYgYmVsb3dDZWxsLnRleHRDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVsb3dDb250ZW50ID0gYmVsb3dDZWxsLnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmVsb3dDb250ZW50ID09PSAnPCcgfHwgYmVsb3dDb250ZW50ID09PSAnXicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWVyZ2VNYXJrZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVsb3dDZWxsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTZFMDVcdTk2NjRcdTRFMEJcdTY1QjlcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1OTAxMlx1NUY1Mlx1NjhDMFx1NjdFNVx1NTQ4Q1x1NkUwNVx1OTY2NFx1NTNGM1x1NEZBN1x1OEZERVx1N0VFRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNvbEluZGV4ICsgMTsgaSA8IGNvbEluZGV4ICsgMTA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDZWxsID0gdGFibGUucXVlcnlTZWxlY3RvcihgW3Jvdy1pbmRleD1cIiR7cm93SW5kZXh9XCJdW2NvbC1pbmRleD1cIiR7aX1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENlbGwgJiYgbmV4dENlbGwudGV4dENvbnRlbnQgJiYgbmV4dENlbGwudGV4dENvbnRlbnQudHJpbSgpID09PSAnPCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENlbGwudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWVyZ2VNYXJrZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NURGMlx1NkUwNVx1OTY2NFx1NEY0RFx1N0Y2RSAoJHtyb3dJbmRleH0sICR7aX0pIFx1NzY4NFx1NkMzNFx1NUU3M1x1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU5MDEyXHU1RjUyXHU2OEMwXHU2N0U1XHU1NDhDXHU2RTA1XHU5NjY0XHU0RTBCXHU2NUI5XHU4RkRFXHU3RUVEXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gcm93SW5kZXggKyAxOyBpIDwgcm93SW5kZXggKyAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENlbGwgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGBbcm93LWluZGV4PVwiJHtpfVwiXVtjb2wtaW5kZXg9XCIke2NvbEluZGV4fVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Q2VsbCAmJiBuZXh0Q2VsbC50ZXh0Q29udGVudCAmJiBuZXh0Q2VsbC50ZXh0Q29udGVudC50cmltKCkgPT09ICdeJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2VsbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNZXJnZU1hcmtlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU2RTA1XHU5NjY0XHU0RjREXHU3RjZFICgke2l9LCAke2NvbEluZGV4fSkgXHU3Njg0XHU1NzgyXHU3NkY0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNvbFNwYW4gJiYgIXJvd1NwYW4gJiYgIWhhc01lcmdlTWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NkNBMVx1NjcwOVx1NTQwOFx1NUU3Nlx1NUM1RVx1NjAyN1x1RkYwQ1x1NjVFMFx1OTcwMFx1NjJDNlx1NTIwNicpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU5MDA5XHU0RTJEXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2Q0ExXHU2NzA5XHU1NDA4XHU1RTc2XHU1QzVFXHU2MDI3XHVGRjBDXHU2NUUwXHU5NzAwXHU2MkM2XHU1MjA2Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTcyOCBIVE1MIFx1OTg4NFx1ODlDOFx1NEUyRFx1RkYwQ1x1NjIxMVx1NEVFQ1x1NTNFQVx1ODBGRFx1OTAxQVx1OEZDN1x1NEZFRVx1NjUzOSBET00gXHU2NzY1XHU2QTIxXHU2MkRGXHU2MkM2XHU1MjA2XHJcbiAgICAgICAgICAgIC8vIFx1NUI5RVx1OTY0NVx1NEUwQVx1OTcwMFx1ODk4MVx1NEZFRVx1NjUzOSBNYXJrZG93biBcdTZFOTBcdTc4MDFcdTYyNERcdTgwRkRcdTc3MUZcdTZCNjNcdTYyQzZcdTUyMDZcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NTQwOFx1NUU3Nlx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICBpZiAoY29sU3Bhbikge1xyXG4gICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm93U3Bhbikge1xyXG4gICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ3Jvd3NwYW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU0RTRCXHU1MjREXHU5NjkwXHU4NUNGXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGlmICh0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGlkZGVuQ2VsbHMgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZFtzdHlsZSo9XCJkaXNwbGF5OiBub25lXCJdLCB0aFtzdHlsZSo9XCJkaXNwbGF5OiBub25lXCJdJyk7XHJcbiAgICAgICAgICAgICAgICBoaWRkZW5DZWxscy5mb3JFYWNoKGhpZGRlbkNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIChoaWRkZW5DZWxsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU2MkM2XHU1MjA2XHU1MzU1XHU1MTQzXHU2ODNDJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTUzNTVcdTUxNDNcdTY4M0NcdTYyQzZcdTUyMDZcdTVCOENcdTYyMTAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NjJDNlx1NTIwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdTY3MkFcdTc3RTVcdTk1MTlcdThCRUYnfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlVGFibGVJZCgpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkVcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg5QzZcdTU2RkUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1RjUzXHU1MjREXHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSBhY3RpdmVWaWV3LmdldE1vZGUoKSA9PT0gJ3NvdXJjZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0TW9kZU9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NEY3Rlx1NzUyOFx1Nzg2RVx1OEJBNFx1NUJGOVx1OEJERFx1Njg0Nlx1OEJFMlx1OTVFRVx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1ODk4MVx1NTIxQlx1NUVGQUlEXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDb25maXJtRGlhbG9nKCdcdTY2MkZcdTU0MjZcdTRFM0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NcdTUyMUJcdTVFRkFJRFx1RkYxRlx1NTIxQlx1NUVGQVx1NTQwRVx1NUMwNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTI0RFx1NkRGQlx1NTJBMEhUTUxcdTZDRThcdTkxQ0FcdTMwMDInKS50aGVuKGNvbmZpcm1lZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU3RjE2XHU4RjkxXHU1NjY4XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1QjlBXHU0RjREXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUluZm8gPSB0aGlzLnBsdWdpbi5tYXJrZG93blNvdXJjZUVkaXRvci5sb2NhdGVUYWJsZUluTWFya2Rvd24oZWRpdG9yKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUluZm8udGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTg4NjhcdTY4M0NcdTVERjJcdTY3MDlJRDogJHt0YWJsZUluZm8udGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NEUwMFx1NEUyQVx1NjVCMElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gdGhpcy5nZW5lcmF0ZVVuaXF1ZVRhYmxlSWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NcdTVGMDBcdTU5Q0JcdTg4NENcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZVN0YXJ0TGluZSA9IHRhYmxlSW5mby5zdGFydExpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1ODg2OFx1NjgzQ1x1NTI0RFx1NjNEMlx1NTE2NVx1N0E3QVx1ODg0Q1x1NTQ4Q1x1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQb3MgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYDwhLS0gdGFibGUtaWQ6ICR7bmV3SWR9IC0tPlxcbmAsIHsgbGluZTogdGFibGVTdGFydExpbmUsIGNoOiAwIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3VycmVudFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEOiAke25ld0lkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1REYyXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwSUQ6JywgbmV3SWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdUZGMENcdThCRjdcdTc4NkVcdTRGRERcdTUxNDlcdTY4MDdcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1Nzg2RVx1OEJBNFx1NUJGOVx1OEJERFx1Njg0Nlx1OEJFMlx1OTVFRVx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1ODk4MVx1NTIxQlx1NUVGQUlEXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDb25maXJtRGlhbG9nKCdcdTY2MkZcdTU0MjZcdTRFM0FcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NcdTUyMUJcdTVFRkFJRFx1RkYxRicpLnRoZW4oY29uZmlybWVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFRhYmxlSWRNYW5hZ2VyXHU3Njg0Y29uZmlybUFuZENyZWF0ZVRhYmxlSWRcdTY1QjlcdTZDRDVcdTUyMUJcdTVFRkFJRFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSB0aGlzLmFjdGl2ZVRhYmxlID8gdGhpcy5wbHVnaW4udGFibGVJZE1hbmFnZXIuY29uZmlybUFuZENyZWF0ZVRhYmxlSWQodGhpcy5hY3RpdmVUYWJsZSkgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTk4ODRcdTg5QzhcdTRFRTVcdTY2M0VcdTc5M0FcdTY1QjBcdTZERkJcdTUyQTBcdTc2ODRJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5nZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVmlldy5wcmV2aWV3TW9kZS5yZXJlbmRlcih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NURGMlx1NEUzQVx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEOicsIHRhYmxlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ0lEXHU1OTMxXHU4RDI1Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ0lEXHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU2REZCXHU1MkEwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTc1MUZcdTYyMTBcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NzUxRlx1NjIxMFx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMFx1NzY4NFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcmV0dXJucyBcdTY4M0NcdTVGMEZcdTRFM0EgdGJsLVlZWVlNTURELXh4eHh4eHh4IFx1NzY4NFx1NTUyRlx1NEUwMElEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVVbmlxdWVUYWJsZUlkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NUU1XHU2NzFGXHU1RTc2XHU2ODNDXHU1RjBGXHU1MzE2XHU0RTNBWVlZWU1NRERcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9JHttb250aH0ke2RheX1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NzUxRlx1NjIxMDhcdTRGNERcdTk2OEZcdTY3M0FcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMDhcdTVCNTdcdTZCQ0RcdTU0OENcdTY1NzBcdTVCNTdcdUZGMDlcclxuICAgICAgICBjb25zdCByYW5kb21DaGFycyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xyXG4gICAgICAgIGxldCByYW5kb21TdHIgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xyXG4gICAgICAgICAgICByYW5kb21TdHIgKz0gcmFuZG9tQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJhbmRvbUNoYXJzLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTdFQzRcdTU0MDhJRFxyXG4gICAgICAgIHJldHVybiBgdGJsLSR7ZGF0ZVN0cn0tJHtyYW5kb21TdHJ9YDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRFxyXG4gICAgICogQHBhcmFtIGVkaXRvciBcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdTRGOEJcclxuICAgICAqIEByZXR1cm5zIFx1NURGMlx1NjcwOUlEXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoZWNrRXhpc3RpbmdUYWJsZUlkKGVkaXRvcjogRWRpdG9yKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU1RjAwXHU1OUNCXHU3Njg0XHU4ODRDXHJcbiAgICAgICAgbGV0IHRhYmxlU3RhcnRMaW5lID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGluZXNbaV0udHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSAmJiBsaW5lc1tpXS5pbmNsdWRlcygnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTg4NjhcdTY4M0NcdTc2ODRcdTdCMkNcdTRFMDBcdTg4NENcclxuICAgICAgICAgICAgICAgIGlmIChpICsgMSA8IGxpbmVzLmxlbmd0aCAmJiBsaW5lc1tpICsgMV0udHJpbSgpLm1hdGNoKC9eXFx8Wy06XFxzfF0qXFx8JC8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVTdGFydExpbmUgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0YWJsZVN0YXJ0TGluZSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFx1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NcdTUyNERcdTY2MkZcdTU0MjZcdTVERjJcdTY3MDlJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgIGxldCBpZENvbW1lbnRMaW5lID0gdGFibGVTdGFydExpbmUgLSAxO1xyXG4gICAgICAgIHdoaWxlIChpZENvbW1lbnRMaW5lID49IDAgJiYgKGxpbmVzW2lkQ29tbWVudExpbmVdLnRyaW0oKSA9PT0gJycgfHwgbGluZXNbaWRDb21tZW50TGluZV0udHJpbSgpLnN0YXJ0c1dpdGgoJzwhLS0nKSkpIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2lkQ29tbWVudExpbmVdLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ3RhYmxlLWlkOicpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZJRFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC90YWJsZS1pZDpcXHMqKFteXFxzPl0rKS8pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlkQ29tbWVudExpbmUtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2M0QwXHU1M0Q2XHU1RTc2XHU1QjU4XHU1MEE4XHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJZCBcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHBhcmFtIHRhYmxlRWxlbWVudCBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSBmaWxlUGF0aCBcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuICAgICAqL1xyXG4gICAgZXh0cmFjdEFuZFN0b3JlVGFibGVJbmZvKHRhYmxlSWQ6IHN0cmluZywgdGFibGVFbGVtZW50OiBIVE1MRWxlbWVudCwgZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc4NFx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0NvdW50ID0gcm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCBjb2xDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBoYXNIZWFkZXJzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTUyMTdcdTY1NzBcdTU0OENcdTg4NjhcdTU5MzRcdTcyQjZcdTYwMDFcclxuICAgICAgICAgICAgaWYgKHJvd0NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3QjJDXHU0RTAwXHU4ODRDXHU2NjJGXHU1NDI2XHU2NzA5dGhcdTUxNDNcdTdEMjBcdUZGMDhcdTg4NjhcdTU5MzRcdUZGMDlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gcm93c1swXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNlbGxzID0gZmlyc3RSb3cucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcclxuICAgICAgICAgICAgICAgIGhhc0hlYWRlcnMgPSBoZWFkZXJDZWxscy5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTg4NENcdTc2ODRcdTY3MDBcdTU5MjdcdTUyMTdcdTY1NzBcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIEFycmF5LmZyb20ocm93cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsQ291bnQgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbENvdW50ID0gTWF0aC5tYXgoY29sQ291bnQsIGNlbGxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NTQwOFx1NUU3Nlx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZUluZm8gPSB0aGlzLmV4dHJhY3RNZXJnZUluZm8odGFibGVFbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NTQwOFx1NUU3Nlx1NEZFMVx1NjA2RjpgLCBtZXJnZUluZm8pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3QjgwXHU1MzE2XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU3RUQzXHU2Nzg0XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgc3RydWN0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ6IHJvd0NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbENvdW50OiBjb2xDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBoYXNIZWFkZXJzOiBoYXNIZWFkZXJzXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3R5bGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IEFycmF5KHJvd0NvdW50KS5maWxsKCdhdXRvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzOiBBcnJheShjb2xDb3VudCkuZmlsbCgnYXV0bycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogQXJyYXkoY29sQ291bnQpLmZpbGwoJ2xlZnQnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RjogSUQ9JHt0YWJsZUlkfSwgXHU4ODRDXHU2NTcwPSR7cm93Q291bnR9LCBcdTUyMTdcdTY1NzA9JHtjb2xDb3VudH0sIFx1ODg2OFx1NTkzND0ke2hhc0hlYWRlcnN9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVRhYmxlRGF0YSh0YWJsZUluZm8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2Rlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NFx1NTQwOFx1NUU3Nlx1NEZFMVx1NjA2RlxyXG4gICAgICogQHBhcmFtIHRhYmxlRWxlbWVudCBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEByZXR1cm5zIFx1NTQwOFx1NUU3Nlx1NEZFMVx1NjA2Rlx1NUJGOVx1OEM2MVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4dHJhY3RNZXJnZUluZm8odGFibGVFbGVtZW50OiBIVE1MRWxlbWVudCk6IGFueSB7XHJcbiAgICAgICAgaW50ZXJmYWNlIE1lcmdlQ2VsbCB7XHJcbiAgICAgICAgICAgIHJvdzogbnVtYmVyO1xyXG4gICAgICAgICAgICBjb2w6IG51bWJlcjtcclxuICAgICAgICAgICAgY291bnQ6IG51bWJlcjtcclxuICAgICAgICAgICAgY29udGVudDogc3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBtZXJnZUluZm86IHtcclxuICAgICAgICAgICAgaG9yaXpvbnRhbDogTWVyZ2VDZWxsW107XHJcbiAgICAgICAgICAgIHZlcnRpY2FsOiBNZXJnZUNlbGxbXTtcclxuICAgICAgICB9ID0ge1xyXG4gICAgICAgICAgICBob3Jpem9udGFsOiBbXSxcclxuICAgICAgICAgICAgdmVydGljYWw6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByb3dzID0gdGFibGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3Nbcm93SW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNvbEluZGV4ID0gMDsgY29sSW5kZXggPCBjZWxscy5sZW5ndGg7IGNvbEluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0MTFcdTVERTZcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oPCspJC8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlZnRNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbGVmdE1hdGNoWzFdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZUluZm8uaG9yaXpvbnRhbC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sOiBjb2xJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IGNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQxMVx1NEUwQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oXFxeKykkLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXBNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdXBNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VJbmZvLnZlcnRpY2FsLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3c6IHJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2w6IGNvbEluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1Y29sc3Bhblx1NTQ4Q3Jvd3NwYW5cdTVDNUVcdTYwMjdcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbHNwYW4gPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpIHx8ICcxJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dzcGFuID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ3Jvd3NwYW4nKSB8fCAnMScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sc3BhbiA+IDEgfHwgcm93c3BhbiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1M0QxXHU3M0IwXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDOiBcdTRGNERcdTdGNkUoJHtyb3dJbmRleH0sJHtjb2xJbmRleH0pLCBjb2xzcGFuPSR7Y29sc3Bhbn0sIHJvd3NwYW49JHtyb3dzcGFufWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBtZXJnZUluZm87XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2NjNFXHU3OTNBXHU2REZCXHU1MkEwXHU4ODRDXHU4M0RDXHU1MzU1XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd1Jvd0FkZE1lbnUoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUUwXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHVGRjBDXHU2NUUwXHU2Q0Q1XHU2REZCXHU1MkEwXHU4ODRDJyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjYzRVx1NzkzQVx1NkRGQlx1NTJBMFx1ODg0Q1x1ODNEQ1x1NTM1NScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4M0RDXHU1MzU1XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4M0RDXHU1MzU1XHU5ODc5XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogYW55KSA9PiBcclxuICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ1x1NTcyOFx1NEUwQVx1NjVCOVx1NkRGQlx1NTJBMFx1ODg0QycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ2Fycm93LXVwJylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmFkZFJvdygnYWJvdmUnKSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogYW55KSA9PiBcclxuICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ1x1NTcyOFx1NEUwQlx1NjVCOVx1NkRGQlx1NTJBMFx1ODg0QycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ2Fycm93LWRvd24nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuYWRkUm93KCdiZWxvdycpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU4M0RDXHU1MzU1XHJcbiAgICAgICAgICAgIGNvbnN0IHRvb2xiYXJFbCA9IHRoaXMudG9vbGJhcjtcclxuICAgICAgICAgICAgaWYgKHRvb2xiYXJFbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRvb2xiYXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiByZWN0LmxlZnQsIHk6IHJlY3QuYm90dG9tIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50IGFzIE1vdXNlRXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2NjNFXHU3OTNBXHU2REZCXHU1MkEwXHU4ODRDXHU4M0RDXHU1MzU1XHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2NjNFXHU3OTNBXHU2REZCXHU1MkEwXHU4ODRDXHU4M0RDXHU1MzU1XHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NkRGQlx1NTJBMFx1ODg0Q1xyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIFx1NEY0RFx1N0Y2RVx1RkYwQ2Fib3ZlIFx1NjIxNiBiZWxvd1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFkZFJvdyhwb3NpdGlvbjogJ2Fib3ZlJyB8ICdiZWxvdycpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY1RTBcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcdUZGMENcdTY1RTBcdTZDRDVcdTZERkJcdTUyQTBcdTg4NEMnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjAwXHU1OUNCXHU2REZCXHU1MkEwXHU4ODRDOicsIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjIxNlx1N0IyQ1x1NEUwMFx1ODg0Q1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0Um93OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTYyNDBcdTU3MjhcdTg4NENcclxuICAgICAgICAgICAgICAgIHRhcmdldFJvdyA9IHRoaXMuc2VsZWN0ZWRDZWxsc1swXS5jbG9zZXN0KCd0cicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU4ODY4XHU2ODNDXHU3Njg0XHU3QjJDXHU0RTAwXHU4ODRDXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRSb3cgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghdGFyZ2V0Um93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTY1RTBcdTZDRDVcdTYyN0VcdTUyMzBcdTc2RUVcdTY4MDdcdTg4NEMnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1NjI3RVx1NTIzMFx1NzZFRVx1NjgwN1x1ODg0QycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NENcdTRFMkRcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTY1NzBcdTkxQ0ZcclxuICAgICAgICAgICAgY29uc3QgY2VsbENvdW50ID0gdGFyZ2V0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgbmV3Um93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTYzRDJcdTUxNjVcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnYWJvdmUnKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRSb3cucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKG5ld1JvdywgdGFyZ2V0Um93KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFJvdy5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUobmV3Um93LCB0YXJnZXRSb3cubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTU3Mjgke3Bvc2l0aW9uID09PSAnYWJvdmUnID8gJ1x1NEUwQVx1NjVCOScgOiAnXHU0RTBCXHU2NUI5J31cdTZERkJcdTUyQTBcdTg4NENgKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NkRGQlx1NTJBMFx1ODg0Q1x1NUI4Q1x1NjIxMDonLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU2REZCXHU1MkEwXHU4ODRDXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2REZCXHU1MkEwXHU4ODRDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjZGNFx1NjVCMFx1ODg0Q1x1N0QyMlx1NUYxNVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVJvd0luZGljZXMoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICByb3dzLmZvckVhY2goKHJvdywgcm93SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGNvbEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93LWluZGV4Jywgcm93SW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sLWluZGV4JywgY29sSW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NjYzRVx1NzkzQVx1NjgzN1x1NUYwRlx1ODNEQ1x1NTM1NVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dTdHlsZU1lbnUoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtOiBhbnkpID0+IFxyXG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEYnKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2JydXNoJylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEZcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY4MzdcdTVGMEZcdThCQkVcdTdGNkVcdTUyOUZcdTgwRkRcdTZCNjNcdTU3MjhcdTVGMDBcdTUzRDFcdTRFMkQnKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IGFueSkgPT4gXHJcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ1x1OEJCRVx1N0Y2RVx1Njc2MVx1N0VCOVx1NjgzN1x1NUYwRicpXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbignbGluZXMnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5hcHBseVN0cmlwZWRTdHlsZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtOiBhbnkpID0+IFxyXG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdThCQkVcdTdGNkVcdThGQjlcdTY4NDZcdTY4MzdcdTVGMEYnKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2JveCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmFwcGx5Qm9yZGVyZWRTdHlsZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU5RjIwXHU2ODA3XHU0RjREXHU3RjZFXHU2NjNFXHU3OTNBXHU4M0RDXHU1MzU1XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy50b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1zdHlsZScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IHJlY3QubGVmdCwgeTogcmVjdC5ib3R0b20gfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU2NzYxXHU3RUI5XHU2ODM3XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlTdHJpcGVkU3R5bGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3csIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgaW5kZXggJSAyID09PSAxKSB7IC8vIFx1OERGM1x1OEZDN1x1ODg2OFx1NTkzNFx1ODg0Q1x1RkYwQ1x1NTNFQVx1OEJCRVx1N0Y2RVx1NTk0N1x1NjU3MFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKTtcclxuICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGNlbGwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTVFOTRcdTc1MjhcdTY3NjFcdTdFQjlcdTY4MzdcdTVGMEYnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdThGQjlcdTY4NDZcdTY4MzdcdTVGMEZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseUJvcmRlcmVkU3R5bGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1ODg2OFx1NjgzQycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCwgdGgnKTtcclxuICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAoY2VsbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgICAgICAoY2VsbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUucGFkZGluZyA9ICc0cHggOHB4JztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTVFOTRcdTc1MjhcdThGQjlcdTY4NDZcdTY4MzdcdTVGMEYnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQkVcdTdGNkVcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuICAgICAqIEBwYXJhbSB0YWJsZSBcdTg4NjhcdTY4M0NIVE1MXHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIHNldEFjdGl2ZVRhYmxlKHRhYmxlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdThCQkVcdTdGNkVcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0MnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJCMFx1NUY1NVx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU4ODY4XHU2ODNDRE9NXHU3RUQzXHU2Nzg0OicsIHRhYmxlLm91dGVySFRNTC5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NjcwOUlEXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSWQgPSB0aGlzLnBsdWdpbi50YWJsZUlkTWFuYWdlci5nZXRUYWJsZUlkZW50aWZpZXIodGFibGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDSURcdTY4QzBcdTY3RTVcdTdFRDNcdTY3OUM6ICR7dGFibGVJZCB8fCAnXHU2NzJBXHU2MjdFXHU1MjMwJ31gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NzY4NFx1NTI0RFx1N0Y2RVx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICBsZXQgcHJldk5vZGUgPSB0YWJsZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgICAgIGxldCBub2RlQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU4ODY4XHU2ODNDXHU1MjREXHU3RjZFXHU4MjgyXHU3MEI5XHU2OEMwXHU2N0U1OicpO1xyXG4gICAgICAgICAgICB3aGlsZSAocHJldk5vZGUgJiYgbm9kZUNvdW50IDwgNSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlVHlwZSA9IHByZXZOb2RlLm5vZGVUeXBlO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZVR5cGVTdHIgPSBub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUgPyAnQ09NTUVOVCcgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSA/ICdURVhUJyA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFID8gJ0VMRU1FTlQnIDogJ09USEVSJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFx1NTI0RFx1N0Y2RVx1ODI4Mlx1NzBCOSMke25vZGVDb3VudH06IFx1N0M3Qlx1NTc4Qj0ke25vZGVUeXBlU3RyfSwgXHU1MTg1XHU1QkI5PVwiJHtwcmV2Tm9kZS50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnfVwiYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBwcmV2Tm9kZS50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFx1NTI0RFx1N0Y2RVx1ODI4Mlx1NzBCOSMke25vZGVDb3VudH06IFx1N0M3Qlx1NTc4Qj0ke25vZGVUeXBlU3RyfSwgXHU1MTg1XHU1QkI5PVwiJHt0ZXh0LnN1YnN0cmluZygwLCAyMCl9JHt0ZXh0Lmxlbmd0aCA+IDIwID8gJy4uLicgOiAnJ31cImApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICBcdTUyNERcdTdGNkVcdTgyODJcdTcwQjkjJHtub2RlQ291bnR9OiBcdTdDN0JcdTU3OEI9JHtub2RlVHlwZVN0cn0sIFx1NjgwN1x1N0I3RT08JHsocHJldk5vZGUgYXMgRWxlbWVudCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpfT5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHByZXZOb2RlID0gcHJldk5vZGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IHRhYmxlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU4ODY4XHU2ODNDXHU5QUQ4XHU0RUFFXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlbW92ZUFsbFRhYmxlSGlnaGxpZ2h0cygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5QUQ4XHU0RUFFXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmhpZ2hsaWdodFNlbGVjdGVkVGFibGUodGFibGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4ODY4XHU2ODNDXHU1MzU1XHU1MTQzXHU2ODNDXHU5MDA5XHU2MkU5XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHU4QkJFXHU3RjZFXHU1QjhDXHU2MjEwJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4QkJFXHU3RjZFXHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4QkJFXHU3RjZFXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU2RDNCXHU1MkE4XHU4ODY4XHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJbmZvIFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBzZXRBY3RpdmVFZGl0TW9kZVRhYmxlKHRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcgfSk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1NzY4NFx1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU0RTRCXHU1MjREXHU4ODY4XHU2ODNDXHU3Njg0XHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLmRhdGFzZXQudGFibGVTZWxlY3RlZCA9ICdmYWxzZSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnN0eWxlLm91dGxpbmUgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlx1RkYwQ1x1NjIxMVx1NEVFQ1x1NkNBMVx1NjcwOVx1NUI5RVx1OTY0NVx1NzY4NFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICAgICAgICAvLyBcdTRGNDZcdTUzRUZcdTRFRTVcdThCQjBcdTVGNTVcdTg4NjhcdTY4M0NcdTc2ODRcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kZVRhYmxlSW5mbyA9IHRhYmxlSW5mbztcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4QkIwXHU1RjU1XHU2NUU1XHU1RkQ3XHU0RUU1XHU0RkJGXHU4QzAzXHU4QkQ1XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTkwMDlcdTYyRTlcdTRFODZcdTg4NjhcdTY4M0M6JywgdGFibGVJbmZvKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCQkVcdTdGNkVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTY2MkZcdTU0MjZcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUwQlxyXG4gICAgICovXHJcbiAgICBpc0luRWRpdE1vZGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICByZXR1cm4gYWN0aXZlVmlldyA/IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJyA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldHVwQ2VsbFNlbGVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5XHU1QzVFXHU2MDI3XHU0RUU1XHU2ODA3XHU4QkM2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxFbCA9IGNlbGwgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICAgICAgY2VsbEVsLm9uY2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHRoaXMuaGFuZGxlQ2VsbENsaWNrKGNlbGxFbCwgZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFx1NTkwNFx1NzQwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgICogQHBhcmFtIGNlbGwgXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgXHU0RThCXHU0RUY2XHU1QkY5XHU4QzYxXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlQ2VsbENsaWNrKGNlbGw6IEhUTUxFbGVtZW50LCBldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVx1RkYwQ1x1Nzg2RVx1NEZERFx1NEUwRFx1NEYxQVx1ODlFNlx1NTNEMVx1ODg2OFx1NjgzQ1x1NzY4NFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjMwOVx1NEY0Rlx1NEU4NkN0cmxcdTk1MkVcdUZGMDhcdTU5MUFcdTkwMDlcdUZGMDlcclxuICAgICAgICBpZiAoIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU0RTRCXHU1MjREXHU3Njg0XHU5MDA5XHU2MkU5XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIwN1x1NjM2Mlx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1NjJFOVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZWxlY3RlZENlbGxzLmluZGV4T2YoY2VsbCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMucHVzaChjZWxsKTtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZC1jZWxsJyk7XHJcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLXRleHQtc2VsZWN0aW9uKSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTdCODBcdTc3RURcdTYzRDBcdTc5M0FcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnNlbGVjdGVkQ2VsbHMubGVuZ3RoID4gMSA/ICdcdTU5MUFcdTkwMDlcdTZBMjFcdTVGMEYnIDogJ1x1NURGMlx1OTAwOVx1NjJFOVx1NTM1NVx1NTE0M1x1NjgzQyc7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7cG9zaXRpb259ICgke3RoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGh9KWAsIDEwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDZWxscy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLWNlbGwnKTtcclxuICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NTNENlx1NkQ4OFx1OTAwOVx1NjJFOVx1NjNEMFx1NzkzQVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NURGMlx1OTAwOVx1NjJFOSAke3RoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGh9IFx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ2AsIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCMFx1NUY1NVx1OTAwOVx1NjJFOVx1NzJCNlx1NjAwMVx1NEVFNVx1NEZCRlx1OEMwM1x1OEJENVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTkwMDlcdTYyRTlcdTUzNTVcdTUxNDNcdTY4M0M6JywgdGhpcy5zZWxlY3RlZENlbGxzLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU2RTA1XHU5NjY0XHU1MzU1XHU1MTQzXHU2ODNDXHU5MDA5XHU2MkU5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2xlYXJDZWxsU2VsZWN0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLWNlbGwnKTtcclxuICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2VsbHMgPSBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2M0VcdTc5M0FcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFx1Nzg2RVx1OEJBNFx1NkQ4OFx1NjA2RlxyXG4gICAgICogQHJldHVybnMgXHU3NTI4XHU2MjM3XHU2NjJGXHU1NDI2XHU3ODZFXHU4QkE0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd0NvbmZpcm1EaWFsb2cobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1NEUwRFx1NEYxQVx1ODFFQVx1NTJBOFx1NkQ4OFx1NTkzMVx1NzY4NFx1OTAxQVx1NzdFNVxyXG4gICAgICAgICAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKG1lc3NhZ2UsIDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSAnXHU1M0Q2XHU2RDg4JztcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub3RpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTc4NkVcdThCQTRcdTYzMDlcdTk0QUVcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gJ1x1Nzg2RVx1NUI5QSc7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4JztcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTUyMzBcdTVCQjlcdTU2NjhcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb25maXJtQnV0dG9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFx1NTIzMFx1OTAxQVx1NzdFNVxyXG4gICAgICAgICAgICBub3RpY2Uubm90aWNlRWwuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTY4MzdcdTVGMEZcclxuICAgICAqIEBwYXJhbSBtYWluQ2VsbCBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDhcdTRGRERcdTc1NTlcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDlcclxuICAgICAqIEBwYXJhbSBtZXJnZWRDZWxscyBcdTg4QUJcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMDhcdTVDMDZcdTg4QUJcdTk2OTBcdTg1Q0ZcdUZGMDlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseU1lcmdlZENlbGxTdHlsZXMobWFpbkNlbGw6IEhUTUxFbGVtZW50LCBtZXJnZWRDZWxsczogSFRNTEVsZW1lbnRbXSk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1NEUzQVx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NkRGQlx1NTJBMFx1NTQwOFx1NUU3Nlx1NjgzN1x1NUYwRlxyXG4gICAgICAgIG1haW5DZWxsLmNsYXNzTGlzdC5hZGQoJ29icy1tZXJnZWQtY2VsbC1tYWluJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4QkJFXHU3RjZFXHU0RTg2XHU4MUVBXHU1MkE4XHU1QzQ1XHU0RTJEXHVGRjBDXHU1MjE5XHU1RTk0XHU3NTI4XHU1QzQ1XHU0RTJEXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DZW50ZXJNZXJnZWRDZWxscykge1xyXG4gICAgICAgICAgICBtYWluQ2VsbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgbWFpbkNlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTg4QUJcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2YgbWVyZ2VkQ2VsbHMpIHtcclxuICAgICAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4MDdcdThCQjBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTRFM0FcdTVERjJcdTU0MDhcdTVFNzZcclxuICAgICAgICBtYWluQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkLW1haW4nLCAndHJ1ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2RTA1XHU5NjY0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcbiAgICAgKi9cclxuICAgIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1NjJFOVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLmRhdGFzZXQudGFibGVTZWxlY3RlZCA9ICdmYWxzZSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnN0eWxlLm91dGxpbmUgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFibGUuc3R5bGUub3V0bGluZU9mZnNldCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICB0aGlzLmVkaXRNb2RlVGFibGVJbmZvID0gbnVsbDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTknKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTZFMDVcdTk2NjRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1OTAwOVx1NEUyRFx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1OEZCOVx1NzU0Q1xyXG4gICAgICogQHJldHVybnMgXHU4RkI5XHU3NTRDXHU0RkUxXHU2MDZGIHttaW5Sb3csIG1heFJvdywgbWluQ29sLCBtYXhDb2x9XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U2VsZWN0ZWRDZWxsc0JvdW5kYXJ5KCk6IHsgbWluUm93OiBudW1iZXIsIG1heFJvdzogbnVtYmVyLCBtaW5Db2w6IG51bWJlciwgbWF4Q29sOiBudW1iZXIgfSB8IG51bGwge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZENlbGxzIHx8IHRoaXMuc2VsZWN0ZWRDZWxscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtaW5Sb3cgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBsZXQgbWF4Um93ID0gMDtcclxuICAgICAgICBsZXQgbWluQ29sID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgbGV0IG1heENvbCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuc2VsZWN0ZWRDZWxscykge1xyXG4gICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdyb3ctaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdjb2wtaW5kZXgnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWluUm93ID0gTWF0aC5taW4obWluUm93LCByb3dJbmRleCk7XHJcbiAgICAgICAgICAgIG1heFJvdyA9IE1hdGgubWF4KG1heFJvdywgcm93SW5kZXgpO1xyXG4gICAgICAgICAgICBtaW5Db2wgPSBNYXRoLm1pbihtaW5Db2wsIGNvbEluZGV4KTtcclxuICAgICAgICAgICAgbWF4Q29sID0gTWF0aC5tYXgobWF4Q29sLCBjb2xJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IG1pblJvdywgbWF4Um93LCBtaW5Db2wsIG1heENvbCB9O1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogTWFya2Rvd25cdTZFOTBcdTc4MDFcdTdGMTZcdThGOTFcdTU2NjggLSBcdThEMUZcdThEMjNcdTU3MjhcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTRFMEJcdTc2RjRcdTYzQTVcdTRGRUVcdTY1MzlNYXJrZG93blx1NkU5MFx1NzgwMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1hcmtkb3duU291cmNlRWRpdG9yIHtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG4gICAgXHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWFya2Rvd25Tb3VyY2VFZGl0b3IgaW5pdGlhbGl6ZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1NzY4NFx1N0YxNlx1OEY5MVx1NTY2OFxyXG4gICAgICogQHJldHVybnMgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBnZXRBY3RpdmVFZGl0b3IoKTogRWRpdG9yIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoYWN0aXZlVmlldyAmJiBhY3RpdmVWaWV3LmVkaXRvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlVmlldy5lZGl0b3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1NzI4TWFya2Rvd25cdTZFOTBcdTc4MDFcdTRFMkRcdTVCOUFcdTRGNERcdTg4NjhcdTY4M0NcclxuICAgICAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcdTYyMTZudWxsXHJcbiAgICAgKi9cclxuICAgIGxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3I6IEVkaXRvcik6IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nLCB0YWJsZUlkPzogc3RyaW5nIH0gfCBudWxsIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTE0OVx1NjgwN1x1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NVxyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3JMaW5lID0gbGluZXNbY3Vyc29yLmxpbmVdO1xyXG4gICAgICAgICAgICBjb25zdCBpc0luVGFibGVSb3cgPSBjdXJzb3JMaW5lICYmIGN1cnNvckxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSAmJiBjdXJzb3JMaW5lLnRyaW0oKS5lbmRzV2l0aCgnfCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MTQ5XHU2ODA3XHU0RTBEXHU1NzI4XHU4ODY4XHU2ODNDXHU4ODRDXHU1MTg1XHVGRjBDXHU4RkQ0XHU1NkRFbnVsbFxyXG4gICAgICAgICAgICBpZiAoIWlzSW5UYWJsZVJvdykgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU0MTFcdTRFMEFcdTY0MUNcdTdEMjJcdTg4NjhcdTY4M0NcdTVGMDBcdTU5Q0JcclxuICAgICAgICAgICAgbGV0IHN0YXJ0TGluZSA9IGN1cnNvci5saW5lO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3RhcnRMaW5lID4gMCAmJiBsaW5lc1tzdGFydExpbmUgLSAxXS50cmltKCkuc3RhcnRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydExpbmUtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1NDExXHU0RTBCXHU2NDFDXHU3RDIyXHU4ODY4XHU2ODNDXHU3RUQzXHU2NzVGXHJcbiAgICAgICAgICAgIGxldCBlbmRMaW5lID0gY3Vyc29yLmxpbmU7XHJcbiAgICAgICAgICAgIHdoaWxlIChlbmRMaW5lIDwgbGluZXMubGVuZ3RoIC0gMSAmJiBsaW5lc1tlbmRMaW5lICsgMV0udHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSkge1xyXG4gICAgICAgICAgICAgICAgZW5kTGluZSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTY2MkZcdTU0MjZcdTYyN0VcdTUyMzBcdTY3MDlcdTY1NDhcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUYWJsZShsaW5lcy5zbGljZShzdGFydExpbmUsIGVuZExpbmUgKyAxKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NjhcdTY4M0NJRFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gdGhpcy5maW5kVGFibGVJZEFib3ZlKGVkaXRvciwgc3RhcnRMaW5lKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydExpbmUsXHJcbiAgICAgICAgICAgICAgICBlbmRMaW5lLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogbGluZXMuc2xpY2Uoc3RhcnRMaW5lLCBlbmRMaW5lICsgMSkuam9pbignXFxuJyksXHJcbiAgICAgICAgICAgICAgICB0YWJsZUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1QjlBXHU0RjRETWFya2Rvd25cdTg4NjhcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU1NzI4XHU4ODY4XHU2ODNDXHU0RTBBXHU2NUI5XHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDSURcclxuICAgICAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcbiAgICAgKiBAcGFyYW0gdGFibGVMaW5lIFx1ODg2OFx1NjgzQ1x1OEQ3N1x1NTlDQlx1ODg0Q1xyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcdTYyMTZ1bmRlZmluZWRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaW5kVGFibGVJZEFib3ZlKGVkaXRvcjogRWRpdG9yLCB0YWJsZUxpbmU6IG51bWJlcik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEOiBcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTg4NEM9JHt0YWJsZUxpbmV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1NDExXHU0RTBBXHU2NzAwXHU1OTFBXHU2N0U1XHU2MjdFMTBcdTg4NENcclxuICAgICAgICBjb25zdCBtYXhMaW5lc1RvQ2hlY2sgPSAxMDtcclxuICAgICAgICBsZXQgY3VycmVudExpbmUgPSB0YWJsZUxpbmUgLSAxO1xyXG4gICAgICAgIGNvbnN0IG1pbkxpbmUgPSBNYXRoLm1heCgwLCB0YWJsZUxpbmUgLSBtYXhMaW5lc1RvQ2hlY2spO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50TGluZSA+PSBtaW5MaW5lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50TGluZSk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2OEMwXHU2N0U1XHU4ODRDICR7Y3VycmVudExpbmV9OiBcIiR7bGluZX1cImApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1OTFBXHU3OUNEXHU1M0VGXHU4MEZEXHU3Njg0SURcdTZDRThcdTkxQ0FcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIDwhLS0gdGFibGUtaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgc3RhbmRhcmRJZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyp0YWJsZS1pZDpcXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAoc3RhbmRhcmRJZE1hdGNoICYmIHN0YW5kYXJkSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBzdGFuZGFyZElkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1NjgwN1x1NTFDNlx1NjgzQ1x1NUYwRlx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiA8IS0tIHRhYmxlaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgbm9IeXBoZW5JZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyp0YWJsZWlkOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChub0h5cGhlbklkTWF0Y2ggJiYgbm9IeXBoZW5JZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG5vSHlwaGVuSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU2NUUwXHU4RkRFXHU1QjU3XHU3QjI2XHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIDwhLS0gaWQ6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3Qgc2ltcGxlSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqaWQ6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKHNpbXBsZUlkTWF0Y2ggJiYgc2ltcGxlSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBzaW1wbGVJZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTdCODBcdTUzMTZcdTY4M0NcdTVGMEZcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNC4gPCEtLSB0YWJsZTogeHh4IC0tPiBcdTYyMTYgPCEtLSB0Ymw6IHh4eCAtLT5cclxuICAgICAgICAgICAgY29uc3QgdGFibGVOYW1lSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS1cXHMqKHRhYmxlfHRibCk6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlTmFtZUlkTWF0Y2ggJiYgdGFibGVOYW1lSWRNYXRjaFsyXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0YWJsZU5hbWVJZE1hdGNoWzJdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTU0MERcdTc5RjBcdTY4M0NcdTVGMEZJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNS4gXHU2OEMwXHU2N0U1XHU0RTBEXHU1RTI2XHU3QTdBXHU2ODNDXHU3Njg0XHU2ODNDXHU1RjBGIDwhLS10YWJsZS1pZDp4eHgtLT5cclxuICAgICAgICAgICAgY29uc3Qgbm9TcGFjZUlkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tdGFibGUtaWQ6KFthLXpBLVowLTlfXFwtOi5dKyktLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChub1NwYWNlSWRNYXRjaCAmJiBub1NwYWNlSWRNYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBub1NwYWNlSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU2NUUwXHU3QTdBXHU2ODNDXHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTA0N1x1NTIzMFx1OTc1RVx1N0E3QVx1ODg0Q1x1NEUxNFx1NEUwRFx1NjYyRlx1NkNFOFx1OTFDQVx1ODg0Q1x1RkYwQ1x1NTIxOVx1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMlxyXG4gICAgICAgICAgICAvLyBcdTRGNDZcdTUxNDFcdThCQjhcdTdBN0FcdTg4NENcdTU0OENcdTUxNzZcdTRFRDZcdTZDRThcdTkxQ0FcdTg4NENcclxuICAgICAgICAgICAgaWYgKGxpbmUudHJpbSgpICE9PSAnJyAmJiAhbGluZS50cmltKCkuc3RhcnRzV2l0aCgnPCEtLScpICYmICFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCcvLycpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1OTA0N1x1NTIzMFx1OTc1RVx1N0E3QVx1OTc1RVx1NkNFOFx1OTFDQVx1ODg0Q1x1RkYwQ1x1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMmApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGN1cnJlbnRMaW5lLS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRCcpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTlBOENcdThCQzFNYXJrZG93blx1ODg2OFx1NjgzQ1x1N0VEM1x1Njc4NFx1NjYyRlx1NTQyNlx1NjcwOVx1NjU0OFxyXG4gICAgICogQHBhcmFtIGxpbmVzIFx1ODg2OFx1NjgzQ1x1ODg0Q1x1NjU3MFx1N0VDNFxyXG4gICAgICogQHJldHVybnMgXHU2NjJGXHU1NDI2XHU0RTNBXHU2NzA5XHU2NTQ4XHU4ODY4XHU2ODNDXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNWYWxpZFRhYmxlKGxpbmVzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3QjJDXHU0RTAwXHU4ODRDXHU2NjJGXHU1NDI2XHU2NjJGXHU4ODY4XHU1OTM0XHJcbiAgICAgICAgY29uc3QgZmlyc3RMaW5lID0gbGluZXNbMF0udHJpbSgpO1xyXG4gICAgICAgIGlmICghZmlyc3RMaW5lLnN0YXJ0c1dpdGgoJ3wnKSB8fCAhZmlyc3RMaW5lLmVuZHNXaXRoKCd8JykpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTdCMkNcdTRFOENcdTg4NENcdTY2MkZcdTU0MjZcdTY2MkZcdTUyMDZcdTk2OTRcdTg4NENcclxuICAgICAgICBjb25zdCBzZWNvbmRMaW5lID0gbGluZXNbMV0udHJpbSgpO1xyXG4gICAgICAgIGlmICghc2Vjb25kTGluZS5zdGFydHNXaXRoKCd8JykgfHwgIXNlY29uZExpbmUuZW5kc1dpdGgoJ3wnKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIwNlx1OTY5NFx1ODg0Q1x1NUZDNVx1OTg3Qlx1NTMwNVx1NTQyQiAtIFx1NUI1N1x1N0IyNlxyXG4gICAgICAgIGNvbnN0IHNlcGFyYXRvckNlbGxzID0gc2Vjb25kTGluZS5zcGxpdCgnfCcpLnNsaWNlKDEsIC0xKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2Ygc2VwYXJhdG9yQ2VsbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgdHJpbW1lZENlbGwgPSBjZWxsLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCF0cmltbWVkQ2VsbC5tYXRjaCgvXjo/LSs6PyQvKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjI0MFx1NjcwOVx1ODg0Q1x1NzY4NFx1NjgzQ1x1NUYwRlx1NjYyRlx1NTQyNlx1NEUwMFx1ODFGNFx1RkYwOFx1OTBGRFx1NEVFNSB8IFx1NUYwMFx1NTkzNFx1NTQ4Q1x1N0VEM1x1NUMzRVx1RkYwOVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAyOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lLnN0YXJ0c1dpdGgoJ3wnKSB8fCAhbGluZS5lbmRzV2l0aCgnfCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRFM0FNYXJrZG93blx1ODg2OFx1NjgzQ1x1NkRGQlx1NTJBMElEXHJcbiAgICAgKiBAcmV0dXJucyBcdTZERkJcdTUyQTBcdTc2ODRcdTg4NjhcdTY4M0NJRFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkVGFibGVJZFRvTWFya2Rvd24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdGhpcy5nZXRBY3RpdmVFZGl0b3IoKTtcclxuICAgICAgICAgICAgaWYgKCFlZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1N0YxNlx1OEY5MVx1NTY2OCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUluZm8gPSB0aGlzLmxvY2F0ZVRhYmxlSW5NYXJrZG93bihlZGl0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHVGRjBDXHU4QkY3XHU1QzA2XHU1MTQ5XHU2ODA3XHU2NTNFXHU1NzI4XHU4ODY4XHU2ODNDXHU1MTg1Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1MjREXHU2NjJGXHU1NDI2XHU1REYyXHU2NzA5SURcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJZCA9IHRoaXMuY2hlY2tFeGlzdGluZ1RhYmxlSWQoZWRpdG9yLCB0YWJsZUluZm8uc3RhcnRMaW5lKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1ODg2OFx1NjgzQ1x1NURGMlx1NjcwOUlEOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVJZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU3NTFGXHU2MjEwXHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDSURcclxuICAgICAgICAgICAgY29uc3QgbmV3VGFibGVJZCA9IHRoaXMuZ2VuZXJhdGVVbmlxdWVUYWJsZUlkKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU2NUIwSUQ6ICR7bmV3VGFibGVJZH0sIFx1ODg2OFx1NjgzQ1x1OEQ3N1x1NTlDQlx1ODg0QzogJHt0YWJsZUluZm8uc3RhcnRMaW5lfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU1MjREXHU2NjJGXHU1NDI2XHU2NzA5XHU3QTdBXHU4ODRDXHJcbiAgICAgICAgICAgIGxldCBpbnNlcnRQb3NpdGlvbiA9IHsgbGluZTogdGFibGVJbmZvLnN0YXJ0TGluZSwgY2g6IDAgfTtcclxuICAgICAgICAgICAgbGV0IGluc2VydENvbnRlbnQgPSBgPCEtLSB0YWJsZS1pZDogJHtuZXdUYWJsZUlkfSAtLT5cXG5gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4ODY4XHU2ODNDXHU1MjREXHU2Q0ExXHU2NzA5XHU3QTdBXHU4ODRDXHVGRjBDXHU2REZCXHU1MkEwXHU0RTAwXHU0RTJBXHU3QTdBXHU4ODRDXHJcbiAgICAgICAgICAgIGlmICh0YWJsZUluZm8uc3RhcnRMaW5lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldkxpbmUgPSBlZGl0b3IuZ2V0TGluZSh0YWJsZUluZm8uc3RhcnRMaW5lIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldkxpbmUgJiYgcHJldkxpbmUudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydENvbnRlbnQgPSBgXFxuPCEtLSB0YWJsZS1pZDogJHtuZXdUYWJsZUlkfSAtLT5cXG5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU3MjhcdTg4NjhcdTY4M0NcdTUyNERcdTYzRDJcdTUxNjVJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGluc2VydENvbnRlbnQsIGluc2VydFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2Rlx1NTIzMFx1NjNEMlx1NEVGNlx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICB0aGlzLnNhdmVUYWJsZUluZm8obmV3VGFibGVJZCwgdGFibGVJbmZvKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVERjJcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRDogJHtuZXdUYWJsZUlkfWApO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBJRDogJHtuZXdUYWJsZUlkfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3VGFibGVJZDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTZERkJcdTUyQTBcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcdTUyMzBcdTYzRDJcdTRFRjZcdTY1NzBcdTYzNkVcclxuICAgICAqIEBwYXJhbSB0YWJsZUlkIFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJbmZvIFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNhdmVUYWJsZUluZm8odGFibGVJZDogc3RyaW5nLCB0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgY29udGVudDogc3RyaW5nIH0pOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QXBwKCkud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3IHx8ICFhY3RpdmVWaWV3LmZpbGUpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYWN0aXZlVmlldy5maWxlLnBhdGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTg5RTNcdTY3OTBcdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcclxuICAgICAgICAgICAgY29uc3QgeyByb3dzLCBoYXNIZWFkZXIgfSA9IHRoaXMucGFyc2VUYWJsZVN0cnVjdHVyZSh0YWJsZUluZm8uY29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRhYmxlSWQsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGZpbGVQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICByb3dDb3VudDogcm93cy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sQ291bnQ6IHJvd3MubGVuZ3RoID4gMCA/IHJvd3NbMF0ubGVuZ3RoIDogMCxcclxuICAgICAgICAgICAgICAgICAgICBoYXNIZWFkZXJzOiBoYXNIZWFkZXJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdHlsaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93SGVpZ2h0czogQXJyYXkocm93cy5sZW5ndGgpLmZpbGwoJ2F1dG8nKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aHM6IHJvd3MubGVuZ3RoID4gMCA/IEFycmF5KHJvd3NbMF0ubGVuZ3RoKS5maWxsKCdhdXRvJykgOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IHJvd3MubGVuZ3RoID4gMCA/IEFycmF5KHJvd3NbMF0ubGVuZ3RoKS5maWxsKCdsZWZ0JykgOiBbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVUYWJsZURhdGEodGFibGVEYXRhKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1NjcwOUlEXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlTGluZSBcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTg4NENcclxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ0lEXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoZWNrRXhpc3RpbmdUYWJsZUlkKGVkaXRvcjogRWRpdG9yLCB0YWJsZUxpbmU6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIGlmICh0YWJsZUxpbmUgPD0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1NjcwOUlEOiBcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTg4NEM9JHt0YWJsZUxpbmV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1NDExXHU0RTBBXHU2N0U1XHU2MjdFXHU2NzAwXHU1OTFBMTBcdTg4NENcdUZGMENcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlJRFx1NkNFOFx1OTFDQVxyXG4gICAgICAgIGNvbnN0IG1heExpbmVzVG9DaGVjayA9IDEwO1xyXG4gICAgICAgIGxldCBjdXJyZW50TGluZSA9IHRhYmxlTGluZSAtIDE7XHJcbiAgICAgICAgY29uc3QgbWluTGluZSA9IE1hdGgubWF4KDAsIHRhYmxlTGluZSAtIG1heExpbmVzVG9DaGVjayk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRMaW5lID49IG1pbkxpbmUpIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnJlbnRMaW5lKTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY4QzBcdTY3RTVcdTg4NEMgJHtjdXJyZW50TGluZX06IFwiJHtsaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU5MUFcdTc5Q0RcdTUzRUZcdTgwRkRcdTc2ODRJRFx1NkNFOFx1OTFDQVx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMS4gPCEtLSB0YWJsZS1pZDogeHh4IC0tPlxyXG4gICAgICAgICAgICBjb25zdCBzdGFuZGFyZElkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKnRhYmxlLWlkOlxccyooW2EtekEtWjAtOV9cXC06Ll0rKVxccyotLT4vaSk7XHJcbiAgICAgICAgICAgIGlmIChzdGFuZGFyZElkTWF0Y2ggJiYgc3RhbmRhcmRJZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHN0YW5kYXJkSWRNYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU2MjdFXHU1MjMwXHU2ODA3XHU1MUM2XHU2ODNDXHU1RjBGXHU4ODY4XHU2ODNDSUQ6ICR7aWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDIuIDwhLS0gdGFibGVpZDogeHh4IC0tPlxyXG4gICAgICAgICAgICBjb25zdCBub0h5cGhlbklkTWF0Y2ggPSBsaW5lLm1hdGNoKC88IS0tXFxzKnRhYmxlaWQ6XFxzKihbYS16QS1aMC05X1xcLTouXSspXFxzKi0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKG5vSHlwaGVuSWRNYXRjaCAmJiBub0h5cGhlbklkTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gbm9IeXBoZW5JZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTY1RTBcdThGREVcdTVCNTdcdTdCMjZcdTY4M0NcdTVGMEZcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMy4gPCEtLSBpZDogeHh4IC0tPlxyXG4gICAgICAgICAgICBjb25zdCBzaW1wbGVJZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyppZDpcXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAoc2ltcGxlSWRNYXRjaCAmJiBzaW1wbGVJZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHNpbXBsZUlkTWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1N0I4MFx1NTMxNlx1NjgzQ1x1NUYwRlx1ODg2OFx1NjgzQ0lEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA0LiA8IS0tIHRhYmxlOiB4eHggLS0+IFx1NjIxNiA8IS0tIHRibDogeHh4IC0tPlxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZU5hbWVJZE1hdGNoID0gbGluZS5tYXRjaCgvPCEtLVxccyoodGFibGV8dGJsKTpcXHMqKFthLXpBLVowLTlfXFwtOi5dKylcXHMqLS0+L2kpO1xyXG4gICAgICAgICAgICBpZiAodGFibGVOYW1lSWRNYXRjaCAmJiB0YWJsZU5hbWVJZE1hdGNoWzJdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRhYmxlTmFtZUlkTWF0Y2hbMl07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1NzI4XHU4ODRDICR7Y3VycmVudExpbmV9IFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NTQwRFx1NzlGMFx1NjgzQ1x1NUYwRklEOiAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA1LiBcdTY4QzBcdTY3RTVcdTRFMERcdTVFMjZcdTdBN0FcdTY4M0NcdTc2ODRcdTY4M0NcdTVGMEYgPCEtLXRhYmxlLWlkOnh4eC0tPlxyXG4gICAgICAgICAgICBjb25zdCBub1NwYWNlSWRNYXRjaCA9IGxpbmUubWF0Y2goLzwhLS10YWJsZS1pZDooW2EtekEtWjAtOV9cXC06Ll0rKS0tPi9pKTtcclxuICAgICAgICAgICAgaWYgKG5vU3BhY2VJZE1hdGNoICYmIG5vU3BhY2VJZE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG5vU3BhY2VJZE1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTcyOFx1ODg0QyAke2N1cnJlbnRMaW5lfSBcdTYyN0VcdTUyMzBcdTY1RTBcdTdBN0FcdTY4M0NcdTY4M0NcdTVGMEZcdTg4NjhcdTY4M0NJRDogJHtpZH1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5MDQ3XHU1MjMwXHU5NzVFXHU3QTdBXHU4ODRDXHU0RTE0XHU0RTBEXHU2NjJGXHU2Q0U4XHU5MUNBXHU4ODRDXHVGRjBDXHU1MjE5XHU1MDVDXHU2QjYyXHU2NDFDXHU3RDIyXHJcbiAgICAgICAgICAgIC8vIFx1NEY0Nlx1NTE0MVx1OEJCOFx1N0E3QVx1ODg0Q1x1NTQ4Q1x1NTE3Nlx1NEVENlx1NkNFOFx1OTFDQVx1ODg0Q1xyXG4gICAgICAgICAgICBpZiAobGluZS50cmltKCkgIT09ICcnICYmICFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCc8IS0tJykgJiYgIWxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJy8vJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU3MjhcdTg4NEMgJHtjdXJyZW50TGluZX0gXHU5MDQ3XHU1MjMwXHU5NzVFXHU3QTdBXHU5NzVFXHU2Q0U4XHU5MUNBXHU4ODRDXHVGRjBDXHU1MDVDXHU2QjYyXHU2NDFDXHU3RDIyYCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY3VycmVudExpbmUtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDBcdTc2ODRcdTg4NjhcdTY4M0NJRFxyXG4gICAgICogQHJldHVybnMgXHU4ODY4XHU2ODNDSURcdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVVuaXF1ZVRhYmxlSWQoKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBwcmVmaXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZFByZWZpeCB8fCAndGJsJztcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLnJlcGxhY2UoLy0vZywgJycpO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbUlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpO1xyXG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9LSR7dGltZXN0YW1wfS0ke3JhbmRvbUlkfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTg5RTNcdTY3OTBcdTg4NjhcdTY4M0NcdTdFRDNcdTY3ODRcclxuICAgICAqIEBwYXJhbSB0YWJsZUNvbnRlbnQgXHU4ODY4XHU2ODNDXHU1MTg1XHU1QkI5XHU1QjU3XHU3QjI2XHU0RTMyXHJcbiAgICAgKiBAcmV0dXJucyBcdTg5RTNcdTY3OTBcdTU0MEVcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAqL1xyXG4gICAgcGFyc2VUYWJsZVN0cnVjdHVyZSh0YWJsZUNvbnRlbnQ6IHN0cmluZyk6IHsgcm93czogc3RyaW5nW11bXSwgaGFzSGVhZGVyOiBib29sZWFuIH0ge1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gdGFibGVDb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBjb25zdCByb3dzOiBzdHJpbmdbXVtdID0gW107XHJcbiAgICAgICAgbGV0IGhhc0hlYWRlciA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lLnN0YXJ0c1dpdGgoJ3wnKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMDZcdTk2OTRcdTg4NENcdTU5MDRcdTc0MDZcclxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJy0nKSAmJiBpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBoYXNIZWFkZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODlFM1x1Njc5MFx1ODg0Q1x1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoY2VsbCwgaW5kZXgsIGFycmF5KSA9PiBpbmRleCA+IDAgJiYgaW5kZXggPCBhcnJheS5sZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAgLm1hcChjZWxsID0+IGNlbGwudHJpbSgpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJvd3MucHVzaChjZWxscyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IHJvd3MsIGhhc0hlYWRlciB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgKiBAcGFyYW0gdGFibGVSb3dzIFx1ODg2OFx1NjgzQ1x1ODg0Q1x1NjU3MFx1N0VDNFxyXG4gICAgICogQHBhcmFtIHJvd0luZGV4IFx1ODg0Q1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIGNvbEluZGV4IFx1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHJldHVybnMgXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgKi9cclxuICAgIGdldENlbGxDb250ZW50KHRhYmxlUm93czogc3RyaW5nW11bXSwgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHJvd0luZGV4ID49IDAgJiYgcm93SW5kZXggPCB0YWJsZVJvd3MubGVuZ3RoICYmIFxyXG4gICAgICAgICAgICBjb2xJbmRleCA+PSAwICYmIGNvbEluZGV4IDwgdGFibGVSb3dzW3Jvd0luZGV4XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYmxlUm93c1tyb3dJbmRleF1bY29sSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThCQkVcdTdGNkVcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJbmZvIFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICogQHBhcmFtIHJvd0luZGV4IFx1ODg0Q1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIGNvbEluZGV4IFx1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQgXHU2NUIwXHU1MTg1XHU1QkI5XHJcbiAgICAgKi9cclxuICAgIHNldENlbGxDb250ZW50KGVkaXRvcjogRWRpdG9yLCB0YWJsZUluZm86IHsgc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciB9LCBcclxuICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVJbmRleCA9IHRhYmxlSW5mby5zdGFydExpbmUgKyByb3dJbmRleDtcclxuICAgICAgICAgICAgaWYgKGxpbmVJbmRleCA+IHRhYmxlSW5mby5lbmRMaW5lKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMDZcdTUyNzJcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPj0gY2VsbHMubGVuZ3RoIC0gMSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGNlbGxzW2NvbEluZGV4ICsgMV0gPSBgICR7Y29udGVudH0gYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjU3NFx1ODg0Q1xyXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgY2VsbHMuam9pbignfCcpLFxyXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiAwIH0sXHJcbiAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IGxpbmUubGVuZ3RoIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdThCQkVcdTdGNkVcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiBcdTU0MDhcdTVFNzZcdTY1QjlcdTU0MTEgKCdyaWdodCcgXHU2MjE2ICdkb3duJylcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbWVyZ2VDZWxscyhkaXJlY3Rpb246ICdyaWdodCcgfCAnZG93bicpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1QzFEXHU4QkQ1JHtkaXJlY3Rpb24gPT09ICdyaWdodCcgPyAnXHU1NDExXHU1M0YzJyA6ICdcdTU0MTFcdTRFMEInfVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ2ApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdGhpcy5nZXRBY3RpdmVFZGl0b3IoKTtcclxuICAgICAgICAgICAgaWYgKCFlZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTdGMTZcdThGOTFcdTU2NjgnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1N0YxNlx1OEY5MVx1NTY2OCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgY29uc3QgY2VsbFBvc2l0aW9uID0gdGhpcy5nZXRDZWxsUG9zaXRpb24oZWRpdG9yKTtcclxuICAgICAgICAgICAgaWYgKCFjZWxsUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTYyMTZcdTY1RTBcdTZDRDVcdTc4NkVcdTVCOUFcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkUnKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NjIxNlx1NjVFMFx1NkNENVx1Nzg2RVx1NUI5QVx1NTM1NVx1NTE0M1x1NjgzQ1x1NEY0RFx1N0Y2RVx1RkYwQ1x1OEJGN1x1NUMwNlx1NTE0OVx1NjgwN1x1NjUzRVx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB7IHRhYmxlSW5mbywgcm93SW5kZXgsIGNvbEluZGV4IH0gPSBjZWxsUG9zaXRpb247XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUxQzZcdTU5MDcke2RpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/ICdcdTU0MTFcdTUzRjMnIDogJ1x1NTQxMVx1NEUwQid9XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU2NUI5XHU1NDExXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5tZXJnZUNlbGxzUmlnaHQoZWRpdG9yLCB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMubWVyZ2VDZWxsc0Rvd24oZWRpdG9yLCB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke2RpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/ICdcdTU0MTFcdTUzRjMnIDogJ1x1NTQxMVx1NEUwQid9XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2MjEwXHU1MjlGYCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtkaXJlY3Rpb24gPT09ICdyaWdodCcgPyAnXHU1NDExXHU1M0YzJyA6ICdcdTU0MTFcdTRFMEInfVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTkzMVx1OEQyNWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1NjVGNlx1NTFGQVx1OTUxOSgke2RpcmVjdGlvbn0pOmAsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTc2ODRcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBsaW5lIFx1ODg0Q1x1NjU4N1x1NjcyQ1xyXG4gICAgICogQHBhcmFtIGN1cnNvckNoIFx1NTE0OVx1NjgwN1x1NUI1N1x1N0IyNlx1NEY0RFx1N0Y2RVxyXG4gICAgICogQHJldHVybnMgXHU1MjE3XHU3RDIyXHU1RjE1XHU2MjE2LTFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRDdXJzb3JDb2x1bW5JbmRleChsaW5lOiBzdHJpbmcsIGN1cnNvckNoOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1ODg0Q1x1NjYyRlx1ODg2OFx1NjgzQ1x1ODg0Q1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3wnKSB8fCAhbGluZS50cmltKCkuZW5kc1dpdGgoJ3wnKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1ODg0Q1x1NEUwRFx1NjYyRlx1NjcwOVx1NjU0OFx1NzY4NFx1ODg2OFx1NjgzQ1x1ODg0QzonLCBsaW5lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MjA2XHU1MjcyXHU4ODRDXHU0RTNBXHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU5OTk2XHU1QzNFXHU3QTdBXHU1MTQzXHU3RDIwXHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XHJcbiAgICAgICAgICAgIGlmIChjZWxsc1swXS50cmltKCkgPT09ICcnKSBjZWxscy5zaGlmdCgpO1xyXG4gICAgICAgICAgICBpZiAoY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV0udHJpbSgpID09PSAnJykgY2VsbHMucG9wKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTZCQ0ZcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdThENzdcdTU5Q0JcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRQb3MgPSBsaW5lLmluZGV4T2YoJ3wnKTsgLy8gXHU3QjJDXHU0RTAwXHU0RTJBXHU1MjA2XHU5Njk0XHU3QjI2XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTkwNERcdTUzODZcdTZCQ0ZcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTYyN0VcdTUyMzBcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbFdpZHRoID0gY2VsbHNbaV0ubGVuZ3RoICsgMTsgLy8gKzEgZm9yIHRoZSAnfCcgY2hhcmFjdGVyXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0UG9zID0gY3VycmVudFBvcyArIGNlbGxXaWR0aDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjhDMFx1NjdFNVx1NTM1NVx1NTE0M1x1NjgzQyAke2l9OiBcdTgzMDNcdTU2RjQ9JHtjdXJyZW50UG9zfS0ke25leHRQb3N9LCBcdTUxODVcdTVCQjk9XCIke2NlbGxzW2ldfVwiYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChjdXJzb3JDaCA+IGN1cnJlbnRQb3MgJiYgY3Vyc29yQ2ggPD0gbmV4dFBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUxNDlcdTY4MDdcdTU3MjhcdTUzNTVcdTUxNDNcdTY4M0MgJHtpfSBcdTUxODU6IFx1NEY0RFx1N0Y2RT0ke2N1cnNvckNofWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9zID0gbmV4dFBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjcyQVx1NjI3RVx1NTIzMFx1NTE0OVx1NjgwN1x1NjI0MFx1NTcyOFx1NTM1NVx1NTE0M1x1NjgzQzogY3Vyc29yQ2g9JHtjdXJzb3JDaH0sIGxpbmU9XCIke2xpbmV9XCJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1NTE0OVx1NjgwN1x1NjI0MFx1NTcyOFx1NTIxN1x1N0QyMlx1NUYxNVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHJldHVybnMgXHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHU2MjE2bnVsbFxyXG4gICAgICovXHJcbiAgICBnZXRDZWxsUG9zaXRpb24oZWRpdG9yOiBFZGl0b3IpOiB7IHRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIHRhYmxlSWQ/OiBzdHJpbmcgfSwgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciB9IHwgbnVsbCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU1QjlBXHU0RjREXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IHRoaXMubG9jYXRlVGFibGVJbk1hcmtkb3duKGVkaXRvcik7XHJcbiAgICAgICAgICAgIGlmICghdGFibGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBjdXJzb3IubGluZSAtIHRhYmxlSW5mby5zdGFydExpbmU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NENcdTdEMjJcdTVGMTVcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuICAgICAgICAgICAgaWYgKHJvd0luZGV4IDwgMCB8fCByb3dJbmRleCA+IHRhYmxlSW5mby5lbmRMaW5lIC0gdGFibGVJbmZvLnN0YXJ0TGluZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg0Q1x1N0QyMlx1NUYxNVx1OEQ4NVx1NTFGQVx1ODMwM1x1NTZGNDogcm93SW5kZXg9JHtyb3dJbmRleH0sIHRhYmxlUmFuZ2U9JHt0YWJsZUluZm8uc3RhcnRMaW5lfS0ke3RhYmxlSW5mby5lbmRMaW5lfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTg4NENcdTUxODVcdTVCQjknKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTg4NENcdTY2MkZcdTU0MjZcdTY2MkZcdTY3MDlcdTY1NDhcdTc2ODRcdTg4NjhcdTY4M0NcdTg4NENcclxuICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCd8JykgfHwgIWxpbmUudHJpbSgpLmVuZHNXaXRoKCd8JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVGNTNcdTUyNERcdTg4NENcdTRFMERcdTY2MkZcdTY3MDlcdTY1NDhcdTc2ODRcdTg4NjhcdTY4M0NcdTg4NEMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTVCOUFcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTc2ODRcdTUyMTdcclxuICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSB0aGlzLmdldEN1cnNvckNvbHVtbkluZGV4KGxpbmUsIGN1cnNvci5jaCk7XHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY1RTBcdTZDRDVcdTc4NkVcdTVCOUFcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTUyMTcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2MjEwXHU1MjlGXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU4ODY4XHU2ODNDXHU4MzAzXHU1NkY0PSR7dGFibGVJbmZvLnN0YXJ0TGluZX0tJHt0YWJsZUluZm8uZW5kTGluZX1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZUluZm8sXHJcbiAgICAgICAgICAgICAgICByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgIGNvbEluZGV4XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBtZXJnZUNvdW50IFx1NURGMlx1NTQwOFx1NUU3Nlx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjU3MFx1OTFDRlx1RkYwQ1x1OUVEOFx1OEJBNFx1NEUzQTBcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG1lcmdlQ2VsbHNSaWdodChlZGl0b3I6IEVkaXRvciwgdGFibGVJbmZvOiB7IHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIGNvbnRlbnQ6IHN0cmluZywgdGFibGVJZD86IHN0cmluZyB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciwgbWVyZ2VDb3VudDogbnVtYmVyID0gMCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVJbmRleCA9IHRhYmxlSW5mby5zdGFydExpbmUgKyByb3dJbmRleDtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1ODg0Q1x1NTE4NVx1NUJCOTogbGluZUluZGV4PSR7bGluZUluZGV4fWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1QzFEXHU4QkQ1XHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDOiBcdTg4NEM9JHtsaW5lSW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NURGMlx1NTQwOFx1NUU3Nj0ke21lcmdlQ291bnR9LCBcdTg4NENcdTUxODVcdTVCQjk9XCIke2xpbmV9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIwNlx1NTI3Mlx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgaWYgKGNvbEluZGV4ICsgMiA+PSBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUyMTdcdTdEMjJcdTVGMTVcdThEODVcdTUxRkFcdTgzMDNcdTU2RjQ6IGNvbEluZGV4PSR7Y29sSW5kZXh9LCBjZWxscy5sZW5ndGg9JHtjZWxscy5sZW5ndGh9YCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTUzRjNcdTRGQTdcdTZDQTFcdTY3MDlcdTUzNTVcdTUxNDNcdTY4M0NcdTUzRUZcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGNvbnN0IG1haW5Db250ZW50ID0gY2VsbHNbY29sSW5kZXggKyAxXS50cmltKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbnRlbnQgPSBjZWxsc1tjb2xJbmRleCArIDJdLnRyaW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke21haW5Db250ZW50fVwiLCBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk9XCIke3RhcmdldENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NjYyRlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBjb25zdCBpc01lcmdlTWFya2VyID0gL14oPCt8XFxeK3xcXFxcPHxcXFxcXnxcXHMqPCtcXHMqfFxccypcXF4rXFxzKikkLy50ZXN0KHRhcmdldENvbnRlbnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiAke2lzTWVyZ2VNYXJrZXJ9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgbWVyZ2VBY3Rpb24gPSAncmVwbGFjZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc4NkVcdThCQTRcdTU0MDhcdTVFNzZcdTk3NUVcdTdBN0FcdTRFMTRcdTk3NUVcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgaWYgKHRhcmdldENvbnRlbnQgJiYgIWlzTWVyZ2VNYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtTWVyZ2VOb25FbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTAwOVx1OTg3OVx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlQWN0aW9uID0gYXdhaXQgdGhpcy5zaG93TWVyZ2VDZWxsT3B0aW9uc0RpYWxvZyhtYWluQ29udGVudCwgdGFyZ2V0Q29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzUyOFx1NjIzN1x1OTAwOVx1NjJFOVx1NzY4NFx1NTQwOFx1NUU3Nlx1NjRDRFx1NEY1QzogJHttZXJnZUFjdGlvbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VBY3Rpb24gPT09ICdjYW5jZWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTc1MjhcdTYyMzdcdTUzRDZcdTZEODhcdTRFODZcdTU0MDhcdTVFNzZcdTY0Q0RcdTRGNUMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU5MDA5XHU2MkU5XHU3Njg0XHU2NENEXHU0RjVDXHU1OTA0XHU3NDA2XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGlmIChtZXJnZUFjdGlvbiA9PT0gJ21lcmdlJyAmJiBtYWluQ29udGVudCAmJiB0YXJnZXRDb250ZW50ICYmICFpc01lcmdlTWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTRFMjRcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTc2ODRcdTUxODVcdTVCQjlcdTUyMzBcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgIGNlbGxzW2NvbEluZGV4ICsgMV0gPSBgICR7bWFpbkNvbnRlbnR9ICR7dGFyZ2V0Q29udGVudH0gYDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU0MDhcdTVFNzZcdTUxODVcdTVCQjk6IFx1NjVCMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOT1cIiR7Y2VsbHNbY29sSW5kZXggKyAxXX1cImApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY1NzBcdTkxQ0YgLSBcdTRFQ0VcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUyMzBcdTVGNTNcdTUyNERcdTUyMTdcdTc2ODRcdThERERcdTc5QkJcclxuICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3NkY0XHU2M0E1XHU3NkY4XHU5MEJCXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU0RjdGXHU3NTI4XHU1MzU1XHU0RTJBIDxcclxuICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3QjJDXHU0RTA5XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU0RjdGXHU3NTI4IDw8XHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1N0IyQ1x1NTZEQlx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOCA8PDwgXHU0RUU1XHU2QjY0XHU3QzdCXHU2M0E4XHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlRGlzdGFuY2UgPSBtZXJnZUNvdW50ICsgMTsgLy8gXHU1RjUzXHU1MjREXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4REREXHU3OUJCXHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlTWFya2VyID0gJzwnLnJlcGVhdChtZXJnZURpc3RhbmNlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzUxRlx1NjIxMFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU4REREXHU3OUJCPSR7bWVyZ2VEaXN0YW5jZX0sIFx1NjgwN1x1OEJCMD1cIiR7bWVyZ2VNYXJrZXJ9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOSAtIFx1NEY3Rlx1NzUyOFx1NjgwN1x1NTFDNlx1NTMxNlx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBjZWxsc1tjb2xJbmRleCArIDJdID0gYCAke21lcmdlTWFya2VyfSBgO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU2NUIwXHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0xpbmUgPSBjZWxscy5qb2luKCd8Jyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1QjBcdTg4NENcdTUxODVcdTVCQjk9XCIke25ld0xpbmV9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjU3NFx1ODg0Q1xyXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgbmV3TGluZSxcclxuICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTk3MDBcdTg5ODFcdTdFRTdcdTdFRURcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdUZGMDhcdTU5MDRcdTc0MDZcdTU5MUFcdTUyMTdcdTU0MDhcdTVFNzZcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMDlcclxuICAgICAgICAgICAgaWYgKGNvbEluZGV4ICsgMyA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENlbGxDb250ZW50ID0gY2VsbHNbY29sSW5kZXggKyAzXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2OEMwXHU2N0U1XHU0RTBCXHU0RTAwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTUxODVcdTVCQjk9XCIke25leHRDZWxsQ29udGVudH1cImApO1xyXG4gICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICBpZiAoL14oPCt8XFxeK3xcXFxcPHxcXFxcXnxcXHMqPCtcXHMqfFxccypcXF4rXFxzKikkLy50ZXN0KG5leHRDZWxsQ29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2OEMwXHU2RDRCXHU1MjMwXHU1M0YzXHU0RkE3XHU2NzA5XHU4RkRFXHU3RUVEXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU3RUU3XHU3RUVEXHU1NDA4XHU1RTc2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tZXJnZUNlbGxzUmlnaHQoZWRpdG9yLCB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCArIDEsIG1lcmdlRGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTU0MTFcdTUzRjNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDExXHU1M0YzXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIEBwYXJhbSBlZGl0b3IgXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHU0RjhCXHJcbiAgICAgKiBAcGFyYW0gdGFibGVJbmZvIFx1ODg2OFx1NjgzQ1x1NEZFMVx1NjA2RlxyXG4gICAgICogQHBhcmFtIHJvd0luZGV4IFx1ODg0Q1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIGNvbEluZGV4IFx1NTIxN1x1N0QyMlx1NUYxNVxyXG4gICAgICogQHBhcmFtIG1lcmdlQ291bnQgXHU1REYyXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU2NTcwXHU5MUNGXHVGRjBDXHU5RUQ4XHU4QkE0XHU0RTNBMFxyXG4gICAgICogQHJldHVybnMgXHU2NjJGXHU1NDI2XHU2MjEwXHU1MjlGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgbWVyZ2VDZWxsc0Rvd24oZWRpdG9yOiBFZGl0b3IsIHRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIHRhYmxlSWQ/OiBzdHJpbmcgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogbnVtYmVyLCBjb2xJbmRleDogbnVtYmVyLCBtZXJnZUNvdW50OiBudW1iZXIgPSAwKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmVJbmRleCA9IHRhYmxlSW5mby5zdGFydExpbmUgKyByb3dJbmRleDtcclxuICAgICAgICAgICAgY29uc3QgbmV4dExpbmVJbmRleCA9IGN1cnJlbnRMaW5lSW5kZXggKyAxO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG5leHRMaW5lSW5kZXggPiB0YWJsZUluZm8uZW5kTGluZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUwQlx1NEUwMFx1ODg0Q1x1OEQ4NVx1NTFGQVx1ODg2OFx1NjgzQ1x1ODMwM1x1NTZGNDogbmV4dExpbmVJbmRleD0ke25leHRMaW5lSW5kZXh9LCB0YWJsZUVuZExpbmU9JHt0YWJsZUluZm8uZW5kTGluZX1gKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NEUwQlx1NjVCOVx1NkNBMVx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTNFRlx1NTQwOFx1NUU3NicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnJlbnRMaW5lSW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0TGluZSA9IGVkaXRvci5nZXRMaW5lKG5leHRMaW5lSW5kZXgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50TGluZSB8fCAhbmV4dExpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTg4NENcdTUxODVcdTVCQjk6IGN1cnJlbnRMaW5lPSR7ISFjdXJyZW50TGluZX0sIG5leHRMaW5lPSR7ISFuZXh0TGluZX1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUMxRFx1OEJENVx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQzogXHU1RjUzXHU1MjREXHU4ODRDPSR7Y3VycmVudExpbmVJbmRleH0sIFx1NEUwQlx1NEUwMFx1ODg0Qz0ke25leHRMaW5lSW5kZXh9LCBcdTUyMTc9JHtjb2xJbmRleH0sIFx1NURGMlx1NTQwOFx1NUU3Nj0ke21lcmdlQ291bnR9YCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVGNTNcdTUyNERcdTg4NENcdTUxODVcdTVCQjk9XCIke2N1cnJlbnRMaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFMEJcdTRFMDBcdTg4NENcdTUxODVcdTVCQjk9XCIke25leHRMaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMDZcdTUyNzJcdTg4NENcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudENlbGxzID0gY3VycmVudExpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dENlbGxzID0gbmV4dExpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPj0gY3VycmVudENlbGxzLmxlbmd0aCB8fCBjb2xJbmRleCArIDEgPj0gbmV4dENlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NTIxN1x1N0QyMlx1NUYxNVx1OEQ4NVx1NTFGQVx1ODMwM1x1NTZGNDogY29sSW5kZXg9JHtjb2xJbmRleH0sIGN1cnJlbnRDZWxscy5sZW5ndGg9JHtjdXJyZW50Q2VsbHMubGVuZ3RofSwgbmV4dENlbGxzLmxlbmd0aD0ke25leHRDZWxscy5sZW5ndGh9YCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTUyMTdcdTdEMjJcdTVGMTVcdThEODVcdTUxRkFcdTgzMDNcdTU2RjQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGNvbnN0IG1haW5Db250ZW50ID0gY3VycmVudENlbGxzW2NvbEluZGV4ICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRDb250ZW50ID0gbmV4dENlbGxzW2NvbEluZGV4ICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOT1cIiR7bWFpbkNvbnRlbnR9XCIsIFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOT1cIiR7dGFyZ2V0Q29udGVudH1cImApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU2NjJGXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWVyZ2VNYXJrZXIgPSAvXig8K3xcXF4rfFxcXFw8fFxcXFxefFxccyo8K1xccyp8XFxzKlxcXitcXHMqKSQvLnRlc3QodGFyZ2V0Q29udGVudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTY2MkZcdTU0MjZcdTRFM0FcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjA6ICR7aXNNZXJnZU1hcmtlcn1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBtZXJnZUFjdGlvbiA9ICdyZXBsYWNlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1OEJBNFx1NTQwOFx1NUU3Nlx1OTc1RVx1N0E3QVx1NEUxNFx1OTc1RVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NzY4NFx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0Q29udGVudCAmJiAhaXNNZXJnZU1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1NZXJnZU5vbkVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5MDA5XHU5ODc5XHU1QkY5XHU4QkREXHU2ODQ2XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VBY3Rpb24gPSBhd2FpdCB0aGlzLnNob3dNZXJnZUNlbGxPcHRpb25zRGlhbG9nKG1haW5Db250ZW50LCB0YXJnZXRDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NTI4XHU2MjM3XHU5MDA5XHU2MkU5XHU3Njg0XHU1NDA4XHU1RTc2XHU2NENEXHU0RjVDOiAke21lcmdlQWN0aW9ufWApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZUFjdGlvbiA9PT0gJ2NhbmNlbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NzUyOFx1NjIzN1x1NTNENlx1NkQ4OFx1NEU4Nlx1NTQwOFx1NUU3Nlx1NjRDRFx1NEY1QycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTkwMDlcdTYyRTlcdTc2ODRcdTY0Q0RcdTRGNUNcdTU5MDRcdTc0MDZcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgaWYgKG1lcmdlQWN0aW9uID09PSAnbWVyZ2UnICYmIG1haW5Db250ZW50ICYmIHRhcmdldENvbnRlbnQgJiYgIWlzTWVyZ2VNYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1NEUyNFx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1NzY4NFx1NTE4NVx1NUJCOVx1NTIzMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY3VycmVudENlbGxzW2NvbEluZGV4ICsgMV0gPSBgICR7bWFpbkNvbnRlbnR9ICR7dGFyZ2V0Q29udGVudH0gYDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTU0MDhcdTVFNzZcdTUxODVcdTVCQjk6IFx1NjVCMFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOT1cIiR7Y3VycmVudENlbGxzW2NvbEluZGV4ICsgMV19XCJgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU0RTNCXHU1MzU1XHU1MTQzXHU2ODNDXHU2MjQwXHU1NzI4XHU4ODRDXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxscy5qb2luKCd8JyksXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBjdXJyZW50TGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgbGluZTogY3VycmVudExpbmVJbmRleCwgY2g6IGN1cnJlbnRMaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY1NzBcdTkxQ0YgLSBcdTRFQ0VcdTRFM0JcdTUzNTVcdTUxNDNcdTY4M0NcdTUyMzBcdTVGNTNcdTUyNERcdTg4NENcdTc2ODRcdThERERcdTc5QkJcclxuICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3NkY0XHU2M0E1XHU3NkY4XHU5MEJCXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU0RjdGXHU3NTI4XHU1MzU1XHU0RTJBIF5cclxuICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3QjJDXHU0RTA5XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU0RjdGXHU3NTI4IF5eXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1N0IyQ1x1NTZEQlx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwQ1x1NEY3Rlx1NzUyOCBeXl4gXHU0RUU1XHU2QjY0XHU3QzdCXHU2M0E4XHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlRGlzdGFuY2UgPSBtZXJnZUNvdW50ICsgMTsgLy8gXHU1RjUzXHU1MjREXHU1NDA4XHU1RTc2XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU4REREXHU3OUJCXHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlTWFya2VyID0gJ14nLnJlcGVhdChtZXJnZURpc3RhbmNlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NzUxRlx1NjIxMFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMDogXHU4REREXHU3OUJCPSR7bWVyZ2VEaXN0YW5jZX0sIFx1NjgwN1x1OEJCMD1cIiR7bWVyZ2VNYXJrZXJ9XCJgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NzZFRVx1NjgwN1x1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOSAtIFx1NEY3Rlx1NzUyOFx1NjgwN1x1NTFDNlx1NTMxNlx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICBuZXh0Q2VsbHNbY29sSW5kZXggKyAxXSA9IGAgJHttZXJnZU1hcmtlcn0gYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NjVCMFx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBuZXdOZXh0TGluZSA9IG5leHRDZWxscy5qb2luKCd8Jyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTY1QjBcdTRFMEJcdTRFMDBcdTg4NENcdTUxODVcdTVCQjk9XCIke25ld05leHRMaW5lfVwiYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTc2RUVcdTY4MDdcdTg4NENcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgIG5ld05leHRMaW5lLFxyXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBuZXh0TGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBuZXh0TGluZUluZGV4LCBjaDogbmV4dExpbmUubGVuZ3RoIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1OTcwMFx1ODk4MVx1N0VFN1x1N0VFRFx1NTQxMVx1NEUwQlx1NTQwOFx1NUU3Nlx1RkYwOFx1NTkwNFx1NzQwNlx1NTkxQVx1ODg0Q1x1NTQwOFx1NUU3Nlx1NzY4NFx1NjBDNVx1NTFCNVx1RkYwOVxyXG4gICAgICAgICAgICBpZiAobmV4dExpbmVJbmRleCArIDEgPD0gdGFibGVJbmZvLmVuZExpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHROZXh0TGluZSA9IGVkaXRvci5nZXRMaW5lKG5leHRMaW5lSW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0TmV4dExpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0TmV4dENlbGxzID0gbmV4dE5leHRMaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4ICsgMSA8IG5leHROZXh0Q2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHROZXh0Q2VsbENvbnRlbnQgPSBuZXh0TmV4dENlbGxzW2NvbEluZGV4ICsgMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2OEMwXHU2N0U1XHU0RTBCXHU0RTAwXHU4ODRDXHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwOiBcdTUxODVcdTVCQjk9XCIke25leHROZXh0Q2VsbENvbnRlbnR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXig8K3xcXF4rfFxcXFw8fFxcXFxefFxccyo8K1xccyp8XFxzKlxcXitcXHMqKSQvLnRlc3QobmV4dE5leHRDZWxsQ29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTY4QzBcdTZENEJcdTUyMzBcdTRFMEJcdTY1QjlcdTY3MDlcdThGREVcdTdFRURcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTdFRTdcdTdFRURcdTU0MDhcdTVFNzYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWVyZ2VDZWxsc0Rvd24oZWRpdG9yLCB0YWJsZUluZm8sIHJvd0luZGV4ICsgMSwgY29sSW5kZXgsIG1lcmdlRGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTU0MTFcdTRFMEJcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDExXHU0RTBCXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRid9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2M0VcdTc5M0FcdTc4NkVcdThCQTRcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFx1Nzg2RVx1OEJBNFx1NkQ4OFx1NjA2RlxyXG4gICAgICogQHJldHVybnMgXHU3NTI4XHU2MjM3XHU2NjJGXHU1NDI2XHU3ODZFXHU4QkE0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd0NvbmZpcm1EaWFsb2cobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1NEUwRFx1NEYxQVx1ODFFQVx1NTJBOFx1NkQ4OFx1NTkzMVx1NzY4NFx1OTAxQVx1NzdFNVxyXG4gICAgICAgICAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKG1lc3NhZ2UsIDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSAnXHU1M0Q2XHU2RDg4JztcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub3RpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTc4NkVcdThCQTRcdTYzMDlcdTk0QUVcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gJ1x1Nzg2RVx1NUI5QSc7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4JztcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTUyMzBcdTVCQjlcdTU2NjhcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb25maXJtQnV0dG9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFx1NTIzMFx1OTAxQVx1NzdFNVxyXG4gICAgICAgICAgICBub3RpY2Uubm90aWNlRWwuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjYzRVx1NzkzQVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1x1OTAwOVx1OTg3OVx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICogQHBhcmFtIG1haW5Db250ZW50IFx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxyXG4gICAgICogQHBhcmFtIHRhcmdldENvbnRlbnQgXHU3NkVFXHU2ODA3XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1XHU1QkI5XHJcbiAgICAgKiBAcmV0dXJucyBcdTkwMDlcdTYyRTlcdTc2ODRcdTY0Q0RcdTRGNUNcdUZGMUEnbWVyZ2UnPVx1NTQwOFx1NUU3Nlx1NUU3Nlx1NEZERFx1NzU1OVx1NEUyNFx1NEUyQVx1NTE4NVx1NUJCOSwgJ3JlcGxhY2UnPVx1NEVDNVx1NEY3Rlx1NzUyOFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCwgJ2NhbmNlbCc9XHU1M0Q2XHU2RDg4XHU2NENEXHU0RjVDXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd01lcmdlQ2VsbE9wdGlvbnNEaWFsb2cobWFpbkNvbnRlbnQ6IHN0cmluZywgdGFyZ2V0Q29udGVudDogc3RyaW5nKTogUHJvbWlzZTwnbWVyZ2UnfCdyZXBsYWNlJ3wnY2FuY2VsJz4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTRFMERcdTRGMUFcdTgxRUFcdTUyQThcdTZEODhcdTU5MzFcdTc2ODRcdTkwMUFcdTc3RTVcclxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU5MDA5XHU5ODc5JywgMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUxODVcdTVCQjlcdTVCQjlcdTU2NjhcclxuICAgICAgICAgICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb250ZW50Q29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcclxuICAgICAgICAgICAgY29udGVudENvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8cD5cdTc2RUVcdTY4MDdcdTUzNTVcdTUxNDNcdTY4M0NcdTUzMDVcdTU0MkJcdTUxODVcdTVCQjlcdUZGMUFcIiR7dGFyZ2V0Q29udGVudH1cIjwvcD5cclxuICAgICAgICAgICAgICAgIDxwPlx1OEJGN1x1OTAwOVx1NjJFOVx1NTQwOFx1NUU3Nlx1NjVCOVx1NUYwRlx1RkYxQTwvcD5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnNXB4JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQwOFx1NUU3Nlx1NUU3Nlx1NEZERFx1NzU1OVx1NTE4NVx1NUJCOVx1NjMwOVx1OTRBRVxyXG4gICAgICAgICAgICBjb25zdCBtZXJnZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBtZXJnZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTU0MDhcdTVFNzZcdTVFNzZcdTRGRERcdTc1NTlcdTUxODVcdTVCQjknO1xyXG4gICAgICAgICAgICBtZXJnZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoJ21lcmdlJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRFQzVcdTRGN0ZcdTc1MjhcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTYzMDlcdTk0QUVcclxuICAgICAgICAgICAgY29uc3QgcmVwbGFjZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICByZXBsYWNlQnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NEVDNVx1NEY3Rlx1NzUyOFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCc7XHJcbiAgICAgICAgICAgIHJlcGxhY2VCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCdyZXBsYWNlJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcclxuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUzRDZcdTZEODgnO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCdjYW5jZWwnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NTIzMFx1NUJCOVx1NTY2OFxyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQobWVyZ2VCdXR0b24pO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmVwbGFjZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QkI5XHU1NjY4XHU1MjMwXHU5MDFBXHU3N0U1XHJcbiAgICAgICAgICAgIG5vdGljZS5ub3RpY2VFbC5hcHBlbmRDaGlsZChjb250ZW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgbm90aWNlLm5vdGljZUVsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTZENEJcdTVFNzZcdTRGRUVcdTU5MERcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1OEZEQlx1ODg0Q1x1NEU4Nlx1NEZFRVx1NTkwRFxyXG4gICAgICovXHJcbiAgICBhc3luYyBkZXRlY3RBbmRGaXhNZXJnZU1hcmtlcnMoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdGhpcy5nZXRBY3RpdmVFZGl0b3IoKTtcclxuICAgICAgICAgICAgaWYgKCFlZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1N0YxNlx1OEY5MVx1NTY2OCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVCOUFcdTRGNERcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgdGFibGVJbmZvID0gdGhpcy5sb2NhdGVUYWJsZUluTWFya2Rvd24oZWRpdG9yKTtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1RkYwQ1x1OEJGN1x1NUMwNlx1NTE0OVx1NjgwN1x1NjUzRVx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgaGFzRml4ZWRNYXJrZXJzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTkwNERcdTUzODZcdTg4NjhcdTY4M0NcdTc2ODRcdTZCQ0ZcdTRFMDBcdTg4NENcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRhYmxlSW5mby5zdGFydExpbmU7IGkgPD0gdGFibGVJbmZvLmVuZExpbmU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjA2XHU1MjcyXHU4ODRDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NkJDRlx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBjZWxscy5sZW5ndGggLSAxOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZENlbGwgPSBjZWxsLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVFNzZcdTdFREZcdTRFMDBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY4M0NcdTVGMEZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJpbW1lZENlbGwgPT09ICdcXFxcPCcgfHwgdHJpbW1lZENlbGwgPT09ICc8Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdFREZcdTRFMDBcdTRGN0ZcdTc1MjhcdTRFMERcdTVFMjZcdThGNkNcdTRFNDlcdTc2ODRcdTY4MDdcdThCQjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNbal0gPSAnIDwgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkQ2VsbCA9PT0gJ1xcXFxeJyB8fCB0cmltbWVkQ2VsbCA9PT0gJ14nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0VERlx1NEUwMFx1NEY3Rlx1NzUyOFx1NEUwRFx1NUUyNlx1OEY2Q1x1NEU0OVx1NzY4NFx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1tqXSA9ICcgXiAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NEZFRVx1NjUzOVx1RkYwQ1x1NjZGNFx1NjVCMFx1ODg0Q1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkTGluZSA9IGNlbGxzLmpvaW4oJ3wnKTtcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkTGluZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBpLCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGksIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNGaXhlZE1hcmtlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaGFzRml4ZWRNYXJrZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTdFREZcdTRFMDBcdTg4NjhcdTY4M0NcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcdTY4M0NcdTVGMEYnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NTNEMVx1NzNCMFx1OTcwMFx1ODk4MVx1NEZFRVx1NTkwRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gaGFzRml4ZWRNYXJrZXJzO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjhDMFx1NkQ0Qlx1NTQ4Q1x1NEZFRVx1NTkwRFx1ODg2OFx1NjgzQ1x1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTYyQzZcdTUyMDZcdTU0MDhcdTVFNzZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5RlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzcGxpdE1lcmdlZENlbGxzKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7XHJcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTdGMTZcdThGOTFcdTU2NjgnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MzU1XHU1MTQzXHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxQb3NpdGlvbiA9IHRoaXMuZ2V0Q2VsbFBvc2l0aW9uKGVkaXRvcik7XHJcbiAgICAgICAgICAgIGlmICghY2VsbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NcdTYyMTZcdTY1RTBcdTZDRDVcdTc4NkVcdTVCOUFcdTUzNTVcdTUxNDNcdTY4M0NcdTRGNERcdTdGNkVcdUZGMENcdThCRjdcdTVDMDZcdTUxNDlcdTY4MDdcdTY1M0VcdTU3MjhcdTg4NjhcdTY4M0NcdTUxODUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCB9ID0gY2VsbFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSW5kZXggPSB0YWJsZUluZm8uc3RhcnRMaW5lICsgcm93SW5kZXg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1QzFEXHU4QkQ1XHU2MkM2XHU1MjA2XHU1MzU1XHU1MTQzXHU2ODNDOiBcdTg4NEM9JHtyb3dJbmRleH0sIFx1NTIxNz0ke2NvbEluZGV4fSwgXHU4ODY4XHU2ODNDXHU4MzAzXHU1NkY0PSR7dGFibGVJbmZvLnN0YXJ0TGluZX0tJHt0YWJsZUluZm8uZW5kTGluZX1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODg0Q1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgaGFzU3BsaXRDZWxscyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1M0YzXHU0RkE3XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPCBsaW5lLnNwbGl0KCd8JykubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENlbGwgPSBjZWxsc1tjb2xJbmRleCArIDJdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHRDZWxsVHJpbW1lZCA9IHJpZ2h0Q2VsbC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTUzRjNcdTRGQTdcdTUzNTVcdTUxNDNcdTY4M0NcdTUxODVcdTVCQjk6IFwiJHtyaWdodENlbGxUcmltbWVkfVwiYCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQwNFx1NzlDRFx1NTNFRlx1ODBGRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgaWYgKC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdChyaWdodENlbGxUcmltbWVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjJDNlx1NTIwNlx1NTNGM1x1NEZBN1x1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxzW2NvbEluZGV4ICsgMl0gPSAnICAnOyAvLyBcdTY2RkZcdTYzNjJcdTRFM0FcdTdBN0FcdTc2N0RcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5qb2luKCd8JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IGxpbmUubGVuZ3RoIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTYyQzZcdTUyMDZcdTUzRjNcdTRGQTdcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNTcGxpdENlbGxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU0RTBCXHU2NUI5XHU1MzU1XHU1MTQzXHU2ODNDXHU2NjJGXHU1NDI2XHU2NzA5XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgIGlmIChsaW5lSW5kZXggPCB0YWJsZUluZm8uZW5kTGluZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVsb3dMaW5lID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVsb3dMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVsb3dDZWxscyA9IGJlbG93TGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPCBiZWxvd0NlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZWxvd0NlbGwgPSBiZWxvd0NlbGxzW2NvbEluZGV4ICsgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlbG93Q2VsbFRyaW1tZWQgPSBiZWxvd0NlbGwudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUwQlx1NjVCOVx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOTogXCIke2JlbG93Q2VsbFRyaW1tZWR9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTQwNFx1NzlDRFx1NTNFRlx1ODBGRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL14oPCt8XFxeK3xcXFxcPHxcXFxcXnxcXHMqPCtcXHMqfFxccypcXF4rXFxzKikkLy50ZXN0KGJlbG93Q2VsbFRyaW1tZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYyQzZcdTUyMDZcdTRFMEJcdTY1QjlcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlbG93Q2VsbHNbY29sSW5kZXggKyAxXSA9ICcgICc7IC8vIFx1NjZGRlx1NjM2Mlx1NEUzQVx1N0E3QVx1NzY3RFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTg4NENcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVsb3dDZWxscy5qb2luKCd8JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXggKyAxLCBjaDogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbGluZTogbGluZUluZGV4ICsgMSwgY2g6IGJlbG93TGluZS5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NURGMlx1NjJDNlx1NTIwNlx1NEUwQlx1NjVCOVx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzU3BsaXRDZWxscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjYyRlx1NTQyNlx1NjYyRlx1NTQwOFx1NUU3Nlx1NEUzQlx1NTM1NVx1NTE0M1x1NjgzQ1x1RkYwOFx1NTM3M1x1NTNGM1x1NEZBN1x1NjIxNlx1NEUwQlx1NjVCOVx1NjcwOVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwOVxyXG4gICAgICAgICAgICAvLyBcdThGRDlcdTc5Q0RcdTYwQzVcdTUxQjVcdTRFMEJcdTYyMTFcdTRFRUNcdTk3MDBcdTg5ODFcdTkwMTJcdTVGNTJcdTY3RTVcdTYyN0VcdTYyNDBcdTY3MDlcdTUxNzNcdTgwNTRcdTc2ODRcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAgICAgICAgY29uc3QgcmVjdXJzaXZlU3BsaXQgPSBhd2FpdCB0aGlzLnJlY3Vyc2l2ZVNwbGl0TWVyZ2VkQ2VsbHMoZWRpdG9yLCB0YWJsZUluZm8sIHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChyZWN1cnNpdmVTcGxpdCkge1xyXG4gICAgICAgICAgICAgICAgaGFzU3BsaXRDZWxscyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChoYXNTcGxpdENlbGxzKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTYyMTBcdTUyOUZcdTYyQzZcdTUyMDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU1M0VGXHU2MkM2XHU1MjA2XHU3Njg0XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU4QkY3XHU3ODZFXHU0RkREXHU1MTQ5XHU2ODA3XHU0RjREXHU0RThFXHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTg1Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTYyQzZcdTUyMDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTYyQzZcdTUyMDZcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHU2NzJBXHU3N0U1XHU5NTE5XHU4QkVGJ31gKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OTAxMlx1NUY1Mlx1NjJDNlx1NTIwNlx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICogXHU2N0U1XHU2MjdFXHU0RTBFXHU1RjUzXHU1MjREXHU1MzU1XHU1MTQzXHU2ODNDXHU3NkY4XHU1MTczXHU3Njg0XHU2MjQwXHU2NzA5XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU1RTc2XHU2MkM2XHU1MjA2XHU1QjgzXHU0RUVDXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICogQHBhcmFtIHRhYmxlSW5mbyBcdTg4NjhcdTY4M0NcdTRGRTFcdTYwNkZcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEByZXR1cm5zIFx1NjYyRlx1NTQyNlx1OEZEQlx1ODg0Q1x1NEU4Nlx1NjJDNlx1NTIwNlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlY3Vyc2l2ZVNwbGl0TWVyZ2VkQ2VsbHMoXHJcbiAgICAgICAgZWRpdG9yOiBFZGl0b3IsIFxyXG4gICAgICAgIHRhYmxlSW5mbzogeyBzdGFydExpbmU6IG51bWJlciwgZW5kTGluZTogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIHRhYmxlSWQ/OiBzdHJpbmcgfSxcclxuICAgICAgICByb3dJbmRleDogbnVtYmVyLCBcclxuICAgICAgICBjb2xJbmRleDogbnVtYmVyXHJcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBsZXQgaGFzU3BsaXRDZWxscyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IG1heFNlYXJjaERlcHRoID0gMTA7IC8vIFx1OTYzMlx1NkI2Mlx1NjVFMFx1OTY1MFx1OTAxMlx1NUY1MlxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTQxMVx1NTNGM1x1NjQxQ1x1N0QyMlx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gICAgICAgIGZvciAobGV0IGNvbCA9IGNvbEluZGV4ICsgMTsgY29sIDwgY29sSW5kZXggKyBtYXhTZWFyY2hEZXB0aDsgY29sKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZUluZGV4ID0gdGFibGVJbmZvLnN0YXJ0TGluZSArIHJvd0luZGV4O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFsaW5lKSBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gbGluZS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBpZiAoY29sICsgMSA+PSBjZWxscy5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2VsbENvbnRlbnQgPSBjZWxsc1tjb2wgKyAxXS50cmltKCk7XHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwOFx1NjUyRlx1NjMwMVx1NTkxQVx1NEUyQVx1OEZERVx1N0VFRFx1NzY4NDxcdTY4MDdcdThCQjBcdUZGMDlcclxuICAgICAgICAgICAgaWYgKC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdChjZWxsQ29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjJDNlx1NTIwNlx1OEJFNVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY2VsbHNbY29sICsgMV0gPSAnICAnO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICBjZWxscy5qb2luKCd8JyksXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaGFzU3BsaXRDZWxscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1REYyXHU2MkM2XHU1MjA2XHU0RjREXHU0RThFICgke3Jvd0luZGV4fSwgJHtjb2x9KSBcdTc2ODRcdTZDMzRcdTVFNzNcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTA0N1x1NTIzMFx1OTc1RVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwQ1x1NTA1Q1x1NkI2Mlx1NjQxQ1x1N0QyMlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1NDExXHU0RTBCXHU2NDFDXHU3RDIyXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgZm9yIChsZXQgcm93ID0gcm93SW5kZXggKyAxOyByb3cgPCByb3dJbmRleCArIG1heFNlYXJjaERlcHRoICYmIHJvdyArIHRhYmxlSW5mby5zdGFydExpbmUgPD0gdGFibGVJbmZvLmVuZExpbmU7IHJvdysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVJbmRleCA9IHRhYmxlSW5mby5zdGFydExpbmUgKyByb3c7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShsaW5lSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBsaW5lLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xJbmRleCArIDEgPj0gY2VsbHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gY2VsbHNbY29sSW5kZXggKyAxXS50cmltKCk7XHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFx1RkYwOFx1NjUyRlx1NjMwMVx1NTkxQVx1NEUyQVx1OEZERVx1N0VFRFx1NzY4NF5cdTY4MDdcdThCQjBcdUZGMDlcclxuICAgICAgICAgICAgaWYgKC9eKDwrfFxcXit8XFxcXDx8XFxcXF58XFxzKjwrXFxzKnxcXHMqXFxeK1xccyopJC8udGVzdChjZWxsQ29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjJDNlx1NTIwNlx1OEJFNVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICAgICAgY2VsbHNbY29sSW5kZXggKyAxXSA9ICcgICc7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLmpvaW4oJ3wnKSxcclxuICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IGxpbmUubGVuZ3RoIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBoYXNTcGxpdENlbGxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVERjJcdTYyQzZcdTUyMDZcdTRGNERcdTRFOEUgKCR7cm93fSwgJHtjb2xJbmRleH0pIFx1NzY4NFx1NTc4Mlx1NzZGNFx1NTQwOFx1NUU3Nlx1NTM1NVx1NTE0M1x1NjgzQ2ApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5MDQ3XHU1MjMwXHU5NzVFXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHVGRjBDXHU1MDVDXHU2QjYyXHU2NDFDXHU3RDIyXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gaGFzU3BsaXRDZWxscztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NTE0OVx1NjgwN1x1NjI0MFx1NTcyOFx1ODg2OFx1NjgzQ1x1NzY4NElEXHJcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NJRFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFRhYmxlSWQoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdGhpcy5nZXRBY3RpdmVFZGl0b3IoKTtcclxuICAgICAgICAgICAgaWYgKCFlZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU3RjE2XHU4RjkxXHU1NjY4Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU1QjlBXHU0RjREXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IHRoaXMubG9jYXRlVGFibGVJbk1hcmtkb3duKGVkaXRvcik7XHJcbiAgICAgICAgICAgIGlmICghdGFibGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NjcyQVx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1RkYwQ1x1OEJGN1x1NUMwNlx1NTE0OVx1NjgwN1x1NjUzRVx1NTcyOFx1ODg2OFx1NjgzQ1x1NTE4NScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgICAgICAgIGxldCB0YWJsZUlkID0gdGFibGVJbmZvLnRhYmxlSWQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUN0YWJsZUluZm9cdTRFMkRcdTZDQTFcdTY3MDlJRFx1RkYwQ1x1NUMxRFx1OEJENVx1NEY3Rlx1NzUyOGNoZWNrRXhpc3RpbmdUYWJsZUlkXHU2N0U1XHU2MjdFXHJcbiAgICAgICAgICAgIGlmICghdGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTcyOHRhYmxlSW5mb1x1NEUyRFx1NjcyQVx1NjI3RVx1NTIzMElEXHVGRjBDXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4Y2hlY2tFeGlzdGluZ1RhYmxlSWRcdTY3RTVcdTYyN0UnKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlSWQgPSB0aGlzLmNoZWNrRXhpc3RpbmdUYWJsZUlkKGVkaXRvciwgdGFibGVJbmZvLnN0YXJ0TGluZSkgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVJZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NJRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRJY29ucygpIHtcclxuICAgIC8vIFx1NTJBMFx1OEY3RFx1ODFFQVx1NUI5QVx1NEU0OVx1NTZGRVx1NjgwN1xyXG4gICAgYWRkSWNvbignYWxpZ24tbGVmdCcsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1vcGFjaXR5PVwiMC4zXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjUsMzAgTDc1LDMwIE0yNSw1MCBMNjAsNTAgTTI1LDcwIEw3MCw3MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignYWxpZ24tY2VudGVyJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjE1XCIgeT1cIjE1XCIgd2lkdGg9XCI3MFwiIGhlaWdodD1cIjcwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLW9wYWNpdHk9XCIwLjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0yNSwzMCBMNzUsMzAgTTM1LDUwIEw2NSw1MCBNMzAsNzAgTDcwLDcwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICBhZGRJY29uKCdhbGlnbi1yaWdodCcsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1vcGFjaXR5PVwiMC4zXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjUsMzAgTDc1LDMwIE00MCw1MCBMNzUsNTAgTTMwLDcwIEw3NSw3MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignYWxpZ24tdG9wJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjE1XCIgeT1cIjE1XCIgd2lkdGg9XCI3MFwiIGhlaWdodD1cIjcwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLW9wYWNpdHk9XCIwLjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0zMCwyNSBMMzAsNzUgTTUwLDI1IEw1MCw2MCBNNzAsMjUgTDcwLDcwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICBhZGRJY29uKCdhbGlnbi1taWRkbGUnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMTVcIiB3aWR0aD1cIjcwXCIgaGVpZ2h0PVwiNzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2Utb3BhY2l0eT1cIjAuM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTMwLDI1IEwzMCw3NSBNNTAsMzUgTDUwLDY1IE03MCwzMCBMNzAsNzBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ2FsaWduLWJvdHRvbScsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1vcGFjaXR5PVwiMC4zXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMzAsMjUgTDMwLDc1IE01MCw0MCBMNTAsNzUgTTcwLDMwIEw3MCw3NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignYWxpZ24tYWxsJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjIwXCIgeT1cIjIwXCIgd2lkdGg9XCI2MFwiIGhlaWdodD1cIjYwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMTVcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignbWVyZ2UtY2VsbHMnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTBcIiB5PVwiMTBcIiB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiMzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjYwXCIgeT1cIjEwXCIgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjMwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxMFwiIHk9XCI2MFwiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCIzMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cmVjdCB4PVwiNjBcIiB5PVwiNjBcIiB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiMzBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk01MCw0NSBMNTAsNTUgTTQ1LDUwIEw1NSw1MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignbWVyZ2UtcmlnaHQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMTVcIiB5PVwiMzBcIiB3aWR0aD1cIjMwXCIgaGVpZ2h0PVwiNDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjU1XCIgeT1cIjMwXCIgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjQwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNDUsNTAgTDU1LDUwIE01MCw0NSBMNTUsNTAgTDUwLDU1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICBhZGRJY29uKCdtZXJnZS1kb3duJywgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgaGVpZ2h0PVwiMTAwXCI+XHJcbiAgICAgICAgPHJlY3QgeD1cIjMwXCIgeT1cIjE1XCIgd2lkdGg9XCI0MFwiIGhlaWdodD1cIjMwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCIzMFwiIHk9XCI1NVwiIHdpZHRoPVwiNDBcIiBoZWlnaHQ9XCIzMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTUwLDQ1IEw1MCw1NSBNNDUsNTAgTDUwLDU1IEw1NSw1MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbignc3BsaXQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMjBcIiB5PVwiMjBcIiB3aWR0aD1cIjYwXCIgaGVpZ2h0PVwiNjBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk01MCwyMCBMNTAsODAgTTIwLDUwIEw4MCw1MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbigndGFibGUtaWQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMjBcIiB5PVwiMzBcIiB3aWR0aD1cIjYwXCIgaGVpZ2h0PVwiNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0yMCwzMCBMODAsMzBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCI1XCIvPlxyXG4gICAgICAgIDxyZWN0IHg9XCIzNVwiIHk9XCIxNVwiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCIxNVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTQ1LDQ1IEw0NSw2NSBNNTUsNDUgTDU1LDY1IE00NSw1NSBMNTUsNTVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbiAgICBcclxuICAgIGFkZEljb24oJ3RhYmxlLXJvdy1hZGQnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMjBcIiB5PVwiMjBcIiB3aWR0aD1cIjYwXCIgaGVpZ2h0PVwiNjBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0yMCw1MCBMODAsNTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIzXCIvPlxyXG4gICAgICAgIDxjaXJjbGUgY3g9XCI4NVwiIGN5PVwiNTBcIiByPVwiMTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk04NSw0NSBMODUsNTUgTTgwLDUwIEw5MCw1MFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgYWRkSWNvbigndGFibGUtc3R5bGUnLCBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMDAgMTAwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIj5cclxuICAgICAgICA8cmVjdCB4PVwiMjBcIiB5PVwiMjBcIiB3aWR0aD1cIjYwXCIgaGVpZ2h0PVwiNjBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjNcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0yMCw0MCBMODAsNDAgTTIwLDYwIEw4MCw2MCBNNDAsMjAgTDQwLDgwIE02MCwyMCBMNjAsODBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNjUsMjUgTDc1LDM1IE02NSwzNSBMNzUsMjVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNMjUsNDUgTDM1LDU1IE0zNSw0NSBMMjUsNTVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiNVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XHJcbiAgICA8L3N2Zz5gKTtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU1REU1XHU1MTc3XHU2ODBGXHU1MjA3XHU2MzYyXHU1NkZFXHU2ODA3XHJcbiAgICBhZGRJY29uKCd0YWJsZS10b29sYmFyLXRvZ2dsZScsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIxNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI3MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTE1LDM1IEw4NSwzNSBNMTUsNjUgTDg1LDY1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTM1LDE1IEwzNSw4NSBNNjUsMTUgTDY1LDg1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cmVjdCB4PVwiNDBcIiB5PVwiNVwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIxMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjQwXCIgeT1cIjg1XCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjEwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiLz5cclxuICAgICAgICA8cmVjdCB4PVwiNVwiIHk9XCI0MFwiIHdpZHRoPVwiMTBcIiBoZWlnaHQ9XCIyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XHJcbiAgICAgICAgPHJlY3QgeD1cIjg1XCIgeT1cIjQwXCIgd2lkdGg9XCIxMFwiIGhlaWdodD1cIjIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiLz5cclxuICAgIDwvc3ZnPmApO1xyXG4gICAgXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTg4NjhcdTY4M0NcdTY0Q0RcdTRGNUNcdTU2RkVcdTY4MDdcclxuICAgIGFkZEljb24oJ3RhYmxlLWVkaXQtbW9kZScsIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiPlxyXG4gICAgICAgIDxyZWN0IHg9XCIxNVwiIHk9XCIyNVwiIHdpZHRoPVwiNzBcIiBoZWlnaHQ9XCI1MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiM1wiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTE1LDQ1IEw4NSw0NVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk0zNSwyNSBMMzUsNzVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgIDxwYXRoIGQ9XCJNNTUsMjUgTDU1LDc1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cclxuICAgICAgICA8cGF0aCBkPVwiTTc1LDEwIEw5MCwyNSBMODAsMzUgTDY1LDIwIFpcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XHJcbiAgICAgICAgPHBhdGggZD1cIk02NSwyMCBMODAsMzVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgPC9zdmc+YCk7XHJcbn0gIiwgImltcG9ydCB7IEFwcCwgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25WaWV3LCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE9ic2lkaWFuU3ByZWFkc2hlZXQgfSBmcm9tICcuL21haW4nO1xyXG5cclxuLyoqXHJcbiAqIFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NkUzMlx1NjdEM1x1NTY2OFxyXG4gKiBcdTdFRTdcdTYyN0ZcdTgxRUFNYXJrZG93blJlbmRlckNoaWxkXHU0RUU1XHU5NkM2XHU2MjEwXHU1MjMwT2JzaWRpYW5cdTZFMzJcdTY3RDNcdTdDRkJcdTdFREZcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUYWJsZVN0eWxlUmVuZGVyZXIgZXh0ZW5kcyBNYXJrZG93blJlbmRlckNoaWxkIHtcclxuICAgIHByaXZhdGUgdGFibGVJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBzdHlsaW5nOiBhbnk7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRBcHAoKTogQXBwIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luKS5hcHA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY3ODRcdTkwMjBcdTUxRkRcdTY1NzBcclxuICAgICAqIEBwYXJhbSBlbCBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcclxuICAgICAqIEBwYXJhbSB0YWJsZUlkIFx1ODg2OFx1NjgzQ0lEXHJcbiAgICAgKiBAcGFyYW0gc3R5bGluZyBcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcclxuICAgICAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgdGFibGVJZDogc3RyaW5nLCBzdHlsaW5nOiBhbnksIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCkge1xyXG4gICAgICAgIHN1cGVyKGVsKTtcclxuICAgICAgICB0aGlzLnRhYmxlSWQgPSB0YWJsZUlkO1xyXG4gICAgICAgIHRoaXMuc3R5bGluZyA9IHN0eWxpbmc7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyQTBcdThGN0RcdTY1RjZcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAqL1xyXG4gICAgb25sb2FkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTZFMzJcdTY3RDNcdTU2NjhcdTUyQTBcdThGN0Q6IFx1ODg2OFx1NjgzQ0lEPSR7dGhpcy50YWJsZUlkfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIHRoaXMuYXBwbHlTdHlsZXMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTgxRUFcdTVCOUFcdTRFNDlcdTdDN0JcdTU0MERcdTRFRTVcdTRGQkZDU1NcdTkwMDlcdTYyRTlcdTU2NjhcdTRGN0ZcdTc1MjhcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoYHRhYmxlLSR7dGhpcy50YWJsZUlkfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1ODg2OFx1NjgzQ1x1NURGMlx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXN0eWxlcy1hcHBsaWVkJywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1NjI0MFx1NjcwOVx1NjgzN1x1NUYwRlxyXG4gICAgICovXHJcbiAgICBhcHBseVN0eWxlcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3R5bGluZykgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJGOVx1OUY1MFx1NjgzN1x1NUYwRlxyXG4gICAgICAgIGlmICh0aGlzLnN0eWxpbmcuYWxpZ25tZW50ICYmIEFycmF5LmlzQXJyYXkodGhpcy5zdHlsaW5nLmFsaWdubWVudCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUNvbHVtbkFsaWdubWVudCh0aGlzLnN0eWxpbmcuYWxpZ25tZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGluZy5jZWxsU3R5bGVzICYmIEFycmF5LmlzQXJyYXkodGhpcy5zdHlsaW5nLmNlbGxTdHlsZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDZWxsU3R5bGVzKHRoaXMuc3R5bGluZy5jZWxsU3R5bGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGluZy5yb3dIZWlnaHRzICYmIEFycmF5LmlzQXJyYXkodGhpcy5zdHlsaW5nLnJvd0hlaWdodHMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSb3dIZWlnaHRzKHRoaXMuc3R5bGluZy5yb3dIZWlnaHRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEXHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGluZy5jb2xXaWR0aHMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnN0eWxpbmcuY29sV2lkdGhzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Q29sdW1uV2lkdGhzKHRoaXMuc3R5bGluZy5jb2xXaWR0aHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJGOVx1OUY1MFx1NjgzN1x1NUYwRlxyXG4gICAgICogQHBhcmFtIGFsaWdubWVudHMgXHU1MjE3XHU1QkY5XHU5RjUwXHU2NTcwXHU2MzZFXHJcbiAgICAgKi9cclxuICAgIGFwcGx5Q29sdW1uQWxpZ25tZW50KGFsaWdubWVudHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICBcclxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBjb2xJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsaWdubWVudHNbY29sSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGNlbGwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnRleHRBbGlnbiA9IGFsaWdubWVudHNbY29sSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1NTM1NVx1NTE0M1x1NjgzQ1x1NjgzN1x1NUYwRlxyXG4gICAgICogQHBhcmFtIGNlbGxTdHlsZXMgXHU1MzU1XHU1MTQzXHU2ODNDXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAgICAgKi9cclxuICAgIGFwcGx5Q2VsbFN0eWxlcyhjZWxsU3R5bGVzOiBhbnlbXSkge1xyXG4gICAgICAgIGNlbGxTdHlsZXMuZm9yRWFjaChzdHlsZSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGUucm93ICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc3R5bGUuY29sICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5maW5kQ2VsbChzdHlsZS5yb3csIHN0eWxlLmNvbCk7XHJcbiAgICAgICAgICAgIGlmICghY2VsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS50ZXh0QWxpZ24pIGNlbGwuc3R5bGUudGV4dEFsaWduID0gc3R5bGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUudmVydGljYWxBbGlnbikgY2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gc3R5bGUudmVydGljYWxBbGlnbjtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmJhY2tncm91bmRDb2xvcikgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5jb2xvcikgY2VsbC5zdHlsZS5jb2xvciA9IHN0eWxlLmNvbG9yO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuZm9udFdlaWdodCkgY2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gc3R5bGUuZm9udFdlaWdodDtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmZvbnRTdHlsZSkgY2VsbC5zdHlsZS5mb250U3R5bGUgPSBzdHlsZS5mb250U3R5bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTg4NENcdTlBRDhcclxuICAgICAqIEBwYXJhbSBoZWlnaHRzIFx1ODg0Q1x1OUFEOFx1NjU3MFx1NjM2RVxyXG4gICAgICovXHJcbiAgICBhcHBseVJvd0hlaWdodHMoaGVpZ2h0czogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4OiAke0pTT04uc3RyaW5naWZ5KGhlaWdodHMpfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyb3dJbmRleCA8IGhlaWdodHMubGVuZ3RoICYmIGhlaWdodHNbcm93SW5kZXhdICYmIGhlaWdodHNbcm93SW5kZXhdICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgIChyb3cgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmhlaWdodCA9IGhlaWdodHNbcm93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEJCRVx1N0Y2RVx1N0IyQyR7cm93SW5kZXgrMX1cdTg4NENcdTlBRDhcdTVFQTY6ICR7aGVpZ2h0c1tyb3dJbmRleF19YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRFxyXG4gICAgICogQHBhcmFtIHdpZHRocyBcdTUyMTdcdTVCQkRcdTY1NzBcdTYzNkVcclxuICAgICAqL1xyXG4gICAgYXBwbHlDb2x1bW5XaWR0aHMod2lkdGhzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkQ6ICR7SlNPTi5zdHJpbmdpZnkod2lkdGhzKX1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTRFM0FcdTg4NjhcdTY4M0NcdTZERkJcdTUyQTBjb2xncm91cFx1NTQ4Q2NvbFx1NTE0M1x1N0QyMFxyXG4gICAgICAgIGxldCBjb2xncm91cCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKTtcclxuICAgICAgICBpZiAoIWNvbGdyb3VwKSB7XHJcbiAgICAgICAgICAgIGNvbGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5wcmVwZW5kKGNvbGdyb3VwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb2xncm91cC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBY29sXHU1MTQzXHU3RDIwXHU1RTc2XHU4QkJFXHU3RjZFXHU1QkJEXHU1RUE2XHJcbiAgICAgICAgd2lkdGhzLmZvckVhY2goKHdpZHRoLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2wnKTtcclxuICAgICAgICAgICAgaWYgKHdpZHRoICYmIHdpZHRoICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgIGNvbC5zdHlsZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OEJCRVx1N0Y2RVx1N0IyQyR7aW5kZXgrMX1cdTUyMTdcdTVCQkRcdTVFQTY6ICR7d2lkdGh9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gXHU0RkVFXHU1OTBEOiBcdTc4NkVcdTRGRERjb2xncm91cFx1NEUwRFx1NEUzQW51bGxcclxuICAgICAgICAgICAgaWYgKGNvbGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xncm91cC5hcHBlbmRDaGlsZChjb2wpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY3RTVcdTYyN0VcdTcyNzlcdTVCOUFcdTRGNERcdTdGNkVcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBjb2xJbmRleCBcdTUyMTdcdTdEMjJcdTVGMTVcclxuICAgICAqIEByZXR1cm5zIFx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE0M1x1N0QyMFx1NjIxNm51bGxcclxuICAgICAqL1xyXG4gICAgZmluZENlbGwocm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlcik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPD0gcm93SW5kZXgpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgaWYgKCFjZWxscyB8fCBjZWxscy5sZW5ndGggPD0gY29sSW5kZXgpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjZWxsc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUzNzhcdThGN0RcdTY1RjZcdTc2ODRcdTZFMDVcdTc0MDZcdTVERTVcdTRGNUNcclxuICAgICAqL1xyXG4gICAgb251bmxvYWQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQyAke3RoaXMudGFibGVJZH0gXHU3Njg0XHU2ODM3XHU1RjBGXHU2RTMyXHU2N0QzXHU1NjY4XHU1REYyXHU1Mzc4XHU4RjdEYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGFwcGx5VGFibGVTdHlsZXModGFibGVFbGVtZW50OiBIVE1MRWxlbWVudCwgdGFibGVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIGlmICh0YWJsZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXN0eWxlcy1hcHBsaWVkJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTRGRERcdTVCNThcdTc2ODRcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IGRhdGE/LnRhYmxlcz8uW3RhYmxlSWRdO1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlRGF0YSB8fCAhdGFibGVEYXRhLnN0eWxpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTUzMzlcdTkxNERcdTc2ODRcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcdUZGMUEke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVFOTRcdTc1MjhcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEYgLSBJRD0ke3RhYmxlSWR9YCwgdGFibGVEYXRhLnN0eWxpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICAgICAgICAgIGlmICh0YWJsZURhdGEuc3R5bGluZy5yb3dIZWlnaHRzICYmIHRhYmxlRGF0YS5zdHlsaW5nLnJvd0hlaWdodHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcucm93SGVpZ2h0cy5mb3JFYWNoKChoZWlnaHQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHJvd3MubGVuZ3RoICYmIGhlaWdodCAmJiBoZWlnaHQgIT09ICdhdXRvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAocm93c1tpbmRleF0gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEOCAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU5QUQ4XHU1RUE2PSR7aGVpZ2h0fWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkRcclxuICAgICAgICAgICAgaWYgKHRhYmxlRGF0YS5zdHlsaW5nLmNvbFdpZHRocyAmJiB0YWJsZURhdGEuc3R5bGluZy5jb2xXaWR0aHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2MjE2XHU4M0I3XHU1M0Q2Y29sZ3JvdXBcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgICAgIGxldCBjb2xncm91cCA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNvbGdyb3VwLCB0YWJsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NzNCMFx1NjcwOVx1NzY4NGNvbFx1NTE0M1x1N0QyMFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQWNvbFx1NTE0M1x1N0QyMFx1NUU3Nlx1OEJCRVx1N0Y2RVx1NUJCRFx1NUVBNlxyXG4gICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0eWxpbmcuY29sV2lkdGhzLmZvckVhY2goKHdpZHRoOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2wnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggJiYgd2lkdGggIT09ICdhdXRvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUU5NFx1NzUyOFx1NTIxN1x1NUJCRCAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU1QkJEXHU1RUE2PSR7d2lkdGh9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEZFRVx1NTkwRDogXHU3ODZFXHU0RkREY29sZ3JvdXBcdTRFMERcdTRFM0FudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NUJGOVx1OUY1MFx1NjVCOVx1NUYwRlxyXG4gICAgICAgICAgICBpZiAodGFibGVEYXRhLnN0eWxpbmcuYWxpZ25tZW50ICYmIHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBjZWxsSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxJbmRleCA8IHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsaWdubWVudCA9IHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudFtjZWxsSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjZWxsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbm1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgaWYgKHRhYmxlRGF0YS5zdHlsaW5nLmNlbGxTdHlsZXMgJiYgdGFibGVEYXRhLnN0eWxpbmcuY2VsbFN0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZy5jZWxsU3R5bGVzLmZvckVhY2goKGNlbGxTdHlsZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxTdHlsZS5yb3cgIT09IHVuZGVmaW5lZCAmJiBjZWxsU3R5bGUuY29sICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLnJvdyA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW2NlbGxTdHlsZS5yb3ddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLmNvbCA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjZWxsU3R5bGUuY29sXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTgwQ0NcdTY2NkZcdTk4OUNcdTgyNzJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLmJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNlbGxTdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjU4N1x1NjcyQ1x1OTg5Q1x1ODI3MlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsU3R5bGUudGV4dENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuY29sb3IgPSBjZWxsU3R5bGUudGV4dENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTVCNTdcdTRGNTNcdTdDOTdcdTdFQzZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbFN0eWxlLmZvbnRXZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gY2VsbFN0eWxlLmZvbnRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NUI1N1x1NEY1M1x1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsU3R5bGUuZm9udFN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFN0eWxlID0gY2VsbFN0eWxlLmZvbnRTdHlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU2ODA3XHU4QkIwXHU4ODY4XHU2ODNDXHU1REYyXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIHRhYmxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtc3R5bGVzLWFwcGxpZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4ODY4XHU2ODNDXHU3Mjc5XHU1QjlBXHU3Njg0Q1NTXHU3QzdCXHJcbiAgICAgICAgICAgIHRhYmxlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB0YWJsZS0ke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU1RTk0XHU3NTI4XHU1QjhDXHU2MjEwIC0gSUQ9JHt0YWJsZUlkfWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUU5NFx1NzUyOFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBhcHBseVByZXZpZXdNb2RlU3R5bGVzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTZGQzBcdTZEM0JcdUZGMENcdTVGMDBcdTU5Q0JcdTVFOTRcdTc1MjhcdTRGRERcdTVCNThcdTc2ODRcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZXMgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU2MjdFXHU1MjMwICR7dGFibGVzLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDXHU5NzAwXHU4OTgxXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXRhYmxlcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEUzQVx1NkJDRlx1NEUyQVx1ODg2OFx1NjgzQ1x1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGFibGVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGVFbGVtZW50ID0gdGFibGVzW2luZGV4XSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDSURcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZUlkID0gdGFibGVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTg4NjhcdTY4M0NcdTZDQTFcdTY3MDlJRFx1RkYwQ1x1NUMxRFx1OEJENVx1NEVDRVx1NTE3Nlx1NEVENlx1NjVCOVx1NUYwRlx1ODNCN1x1NTNENlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU0RUNFXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU1NDhDXHU4ODY4XHU2ODNDXHU3RDIyXHU1RjE1XHU4M0I3XHU1M0Q2SURcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVJZCA9IGF3YWl0IHRoaXMucGx1Z2luLnJlYWRUYWJsZUlkRnJvbU1hcmtkb3duKHRhYmxlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFM0FcdTg4NjhcdTY4M0NcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEYgLSBcdTdEMjJcdTVGMTU9JHtpbmRleH0sIElEPSR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5VGFibGVTdHlsZXModGFibGVFbGVtZW50LCB0YWJsZUlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NjVFMFx1NkNENVx1NEUzQVx1ODg2OFx1NjgzQ1x1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRiAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU2NzJBXHU2MjdFXHU1MjMwSURgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUU5NFx1NzUyOFx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU2RTMyXHU2N0QzXHU2MjQwXHU2NzA5XHU4ODY4XHU2ODNDXHU3Njg0XHU1QjU4XHU1MEE4XHU2ODM3XHU1RjBGXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyVGFibGVzV2l0aFN0b3JlZFN0eWxlcyhwbHVnaW46IE9ic2lkaWFuU3ByZWFkc2hlZXQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIFx1OEY4NVx1NTJBOVx1NTFGRFx1NjU3MFx1RkYwQ1x1ODNCN1x1NTNENmFwcFx1NUJGOVx1OEM2MVxyXG4gICAgZnVuY3Rpb24gZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuIChwbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4pLmFwcDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NUYwMFx1NTlDQlx1NkUzMlx1NjdEM1x1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1ODlDNlx1NTZGRVxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSBnZXRBcHAoKS53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NzJBXHU2MjdFXHU1MjMwXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHVGRjBDXHU2NUUwXHU2Q0Q1XHU2RTMyXHU2N0QzXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IGFjdGl2ZVZpZXcuZmlsZTtcclxuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NkQzQlx1NTJBOFx1NjU4N1x1NEVGNlx1RkYwQ1x1NjVFMFx1NkNENVx1NkUzMlx1NjdEM1x1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFxyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYWN0aXZlRmlsZS5wYXRoO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdThERUZcdTVGODQ6ICR7ZmlsZVBhdGh9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5OTk2XHU1MTQ4XHU1QzFEXHU4QkQ1XHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICBsZXQgdGFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1MjFEXHU1OUNCXHU1MzE2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2M0QwXHU1M0Q2XHU1NjY4XHVGRjBDXHU1MjE5XHU0RjdGXHU3NTI4XHU1QjgzXHU0RUNFXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgaWYgKHBsdWdpbi50YWJsZURhdGFFeHRyYWN0b3IpIHtcclxuICAgICAgICAgICAgdGFibGVzID0gYXdhaXQgcGx1Z2luLnRhYmxlRGF0YUV4dHJhY3Rvci5leHRyYWN0VGFibGVEYXRhRnJvbUZpbGUoYWN0aXZlRmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1NjNEMFx1NTNENlx1NTIzMCAke09iamVjdC5rZXlzKHRhYmxlcykubGVuZ3RofSBcdTRFMkFcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RUNFTWFya2Rvd25cdTY1ODdcdTRFRjZcdTRFMkRcdTZDQTFcdTY3MDlcdTYzRDBcdTUzRDZcdTUyMzBcdTY1NzBcdTYzNkVcdUZGMENcdTUyMTlcdTVDMURcdThCRDVcdTRFQ0VkYXRhLmpzb25cdTRFMkRcdTgzQjdcdTUzRDZcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGFibGVzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU2NzJBXHU2M0QwXHU1M0Q2XHU1MjMwXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHVGRjBDXHU1QzFEXHU4QkQ1XHU0RUNFZGF0YS5qc29uXHU4M0I3XHU1M0Q2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsdWdpbkRhdGEgPSBhd2FpdCBwbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcclxuICAgICAgICAgICAgdGFibGVzID0gcGx1Z2luRGF0YS50YWJsZXMgfHwge307XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTVCNThcdTUwQThcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgaWYgKCF0YWJsZXMgfHwgT2JqZWN0LmtleXModGFibGVzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTZDQTFcdTY3MDlcdTVCNThcdTUwQThcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdTRFMkRcdTc2ODRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcclxuICAgICAgICBjb25zdCBhbGxUYWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpO1xyXG4gICAgICAgIGlmICghYWxsVGFibGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU0RTJEXHU2Q0ExXHU2NzA5XHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1NEUyRFx1NjcwOSAke2FsbFRhYmxlcy5sZW5ndGh9IFx1NEUyQVx1ODg2OFx1NjgzQ2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NkUzMlx1NjdEM1x1OTYxRlx1NTIxN1xyXG4gICAgICAgIGNvbnN0IHJlbmRlclF1ZXVlID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkZCXHU1M0Q2XHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHVGRjBDXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHJcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBwbHVnaW4uYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XHJcbiAgICAgICAgY29uc3QgdGFibGVJbmZvcyA9IHBsdWdpbi50YWJsZUlkTWFuYWdlci5leHRyYWN0VGFibGVJZHNGcm9tTWFya2Rvd24oZmlsZUNvbnRlbnQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTRFQ0VcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTUyMzAgJHt0YWJsZUluZm9zLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDXHU0RkUxXHU2MDZGYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2QkNGXHU0RTJBXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxUYWJsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGFibGUgPSBhbGxUYWJsZXNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAxLiBcdTk5OTZcdTUxNDhcdTVDMURcdThCRDVcdTRFQ0VcdTg4NjhcdTY4M0NcdTVDNUVcdTYwMjdcdTRFMkRcdTgzQjdcdTUzRDZJRFxyXG4gICAgICAgICAgICBsZXQgdGFibGVJZCA9IHRhYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMi4gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5SURcdTVDNUVcdTYwMjdcdUZGMENcdTVDMURcdThCRDVcdTkwMUFcdThGQzdcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcclxuICAgICAgICAgICAgaWYgKCF0YWJsZUlkICYmIGkgPCB0YWJsZUluZm9zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGFibGVJZCA9IHRhYmxlSW5mb3NbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTkwMUFcdThGQzdcdTRGNERcdTdGNkVcdTUzMzlcdTkxNERcdTYyN0VcdTUyMzBcdTg4NjhcdTY4M0NJRDogJHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RUlEXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJywgdGFibGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIFx1NTk4Mlx1Njc5Q1x1OEZEOFx1NkNBMVx1NjcwOUlEXHVGRjBDXHU1QzFEXHU4QkQ1XHU5MDFBXHU4RkM3XHU3Mjc5XHU1RjgxXHU1MzM5XHU5MTREXHJcbiAgICAgICAgICAgIGlmICghdGFibGVJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGVGZWF0dXJlID0gcGx1Z2luLnRhYmxlSWRNYW5hZ2VyLmV4dHJhY3RUYWJsZUZlYXR1cmUodGFibGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgYmVzdE1hdGNoSWQgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCBiZXN0TWF0Y2hTY29yZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBpZCwgZmVhdHVyZSB9IG9mIHRhYmxlSW5mb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29yZSA9IHBsdWdpbi50YWJsZUlkTWFuYWdlci5jYWxjdWxhdGVGZWF0dXJlU2ltaWxhcml0eSh0YWJsZUZlYXR1cmUsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IGJlc3RNYXRjaFNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaFNjb3JlID0gc2NvcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaElkID0gaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYmVzdE1hdGNoSWQgJiYgYmVzdE1hdGNoU2NvcmUgPiAwLjcpIHsgLy8gNzAlXHU3NkY4XHU0RjNDXHU1RUE2XHU5NjA4XHU1MDNDXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1OTAxQVx1OEZDN1x1NzI3OVx1NUY4MVx1NzZGOFx1NEYzQ1x1NUVBNlx1NTMzOVx1OTE0RFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ0lEOiAke2Jlc3RNYXRjaElkfVx1RkYwOFx1NzZGOFx1NEYzQ1x1NUVBNjogJHtiZXN0TWF0Y2hTY29yZS50b0ZpeGVkKDIpfVx1RkYwOWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlSWQgPSBiZXN0TWF0Y2hJZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVJRFx1NUM1RVx1NjAyN1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pZCcsIHRhYmxlSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTRFODZJRFx1RkYwQ1x1NjdFNVx1NjI3RVx1NUJGOVx1NUU5NFx1NzY4NFx1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBpZiAodGFibGVJZCAmJiB0YWJsZXNbdGFibGVJZF0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHRhYmxlc1t0YWJsZUlkXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4ODY4XHU2ODNDXHU2NjJGXHU1NDI2XHU1QzVFXHU0RThFXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luQ3VycmVudEZpbGUgPSB0YWJsZURhdGEubG9jYXRpb25zPy5zb21lKChsb2M6IHtwYXRoOiBzdHJpbmd9KSA9PiBsb2MucGF0aCA9PT0gZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNJbkN1cnJlbnRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NEUzQVx1ODg2OFx1NjgzQyAke3RhYmxlSWR9IFx1NkRGQlx1NTJBMFx1NkUzMlx1NjdEM1x1NEVGQlx1NTJBMWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclF1ZXVlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2RTMyXHU2N0QzXHU5NjFGXHU1MjE3XHJcbiAgICAgICAgaWYgKHJlbmRlclF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1NUYwMFx1NTlDQlx1NTkwNFx1NzQwNiAke3JlbmRlclF1ZXVlLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDXHU2RTMyXHU2N0QzXHU0RUZCXHU1MkExYCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NSZW5kZXJRdWV1ZShyZW5kZXJRdWV1ZSwgcGx1Z2luKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2Q0ExXHU2NzA5XHU5NzAwXHU4OTgxXHU2RTMyXHU2N0QzXHU3Njg0XHU4ODY4XHU2ODNDJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcdTY4MzdcdTVGMEZcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU2Mjc5XHU5MUNGXHU1OTA0XHU3NDA2XHU2RTMyXHU2N0QzXHU5NjFGXHU1MjE3XHJcbiAqIEBwYXJhbSBxdWV1ZSBcdTZFMzJcdTY3RDNcdTk2MUZcdTUyMTdcclxuICogQHBhcmFtIHBsdWdpbiBcdTYzRDJcdTRFRjZcdTVCOUVcdTRGOEJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NSZW5kZXJRdWV1ZShxdWV1ZTogYW55W10sIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy8gXHU4QkJFXHU3RjZFXHU2Mjc5XHU1OTA0XHU3NDA2XHU1OTI3XHU1QzBGXHJcbiAgICBjb25zdCBiYXRjaFNpemUgPSAzOyAvLyBcdTUxQ0ZcdTVDMEZcdTYyNzlcdTU5MDRcdTc0MDZcdTU5MjdcdTVDMEZcdUZGMENcdTkwN0ZcdTUxNERcdTYwMjdcdTgwRkRcdTk1RUVcdTk4OThcclxuICAgIGxldCBwcm9jZXNzZWRDb3VudCA9IDA7XHJcbiAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYFx1NUYwMFx1NTlDQlx1NTkwNFx1NzQwNlx1NkUzMlx1NjdEM1x1OTYxRlx1NTIxN1x1RkYwQ1x1NTE3MSAke3F1ZXVlLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDYCk7XHJcbiAgICBcclxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NTkwNFx1NzQwNlx1NTFGRFx1NjU3MFxyXG4gICAgY29uc3QgcHJvY2Vzc0JhdGNoID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NUY1M1x1NTI0RFx1NjI3OVx1NkIyMVx1NzY4NFx1N0VEM1x1Njc1Rlx1N0QyMlx1NUYxNVxyXG4gICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IE1hdGgubWluKHByb2Nlc3NlZENvdW50ICsgYmF0Y2hTaXplLCBxdWV1ZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1RjUzXHU1MjREXHU2Mjc5XHU2QjIxXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBwcm9jZXNzZWRDb3VudDsgaSA8IGVuZEluZGV4OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGFibGUsIHRhYmxlSWQsIHRhYmxlRGF0YSB9ID0gcXVldWVbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU1OTA0XHU3NDA2XHU5NjFGXHU1MjE3XHU0RTJEXHU3Njg0XHU4ODY4XHU2ODNDICR7aSsxfS8ke3F1ZXVlLmxlbmd0aH0gLSBJRD0ke3RhYmxlSWR9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHJlbmRlclRhYmxlV2l0aFN0eWxlcyh0YWJsZSBhcyBIVE1MRWxlbWVudCwgdGFibGVJZCwgdGFibGVEYXRhLCBwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDICR7dGFibGVJZH0gXHU2NUY2XHU1MUZBXHU5NTE5OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1OTA0XHU3NDA2XHU4QkExXHU2NTcwXHJcbiAgICAgICAgICAgIHByb2Nlc3NlZENvdW50ID0gZW5kSW5kZXg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdThGRDhcdTY3MDlcdTY3MkFcdTU5MDRcdTc0MDZcdTc2ODRcdTg4NjhcdTY4M0NcdUZGMENcdTVCODlcdTYzOTJcdTRFMEJcdTRFMDBcdTYyNzlcclxuICAgICAgICAgICAgaWYgKHByb2Nlc3NlZENvdW50IDwgcXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcdTc4NkVcdTRGRERVSVx1NTRDRFx1NUU5NFx1NjAyN1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQmF0Y2goKS50aGVuKHJlc29sdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU2Mjc5XHU2QjIxXHU2NUY2XHU1MUZBXHU5NTE5OlwiLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gXHU1RjAwXHU1OUNCXHU1OTA0XHU3NDA2XHU3QjJDXHU0RTAwXHU2Mjc5XHJcbiAgICBhd2FpdCBwcm9jZXNzQmF0Y2goKTtcclxuICAgIGNvbnNvbGUubG9nKGBcdTVCOENcdTYyMTBcdTRFODYgJHtwcm9jZXNzZWRDb3VudH0gXHU0RTJBXHU4ODY4XHU2ODNDXHU3Njg0XHU1OTA0XHU3NDA2XHVGRjBDXHU2MjEwXHU1MjlGXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGOiAke3N1Y2Nlc3NDb3VudH1gKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NEUzQVx1NTM1NVx1NEUyQVx1ODg2OFx1NjgzQ1x1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAqIEBwYXJhbSB0YWJsZUlkIFx1ODg2OFx1NjgzQ0lEXHJcbiAqIEBwYXJhbSB0YWJsZURhdGEgXHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW5kZXJUYWJsZVdpdGhTdHlsZXMoXHJcbiAgICB0YWJsZTogSFRNTEVsZW1lbnQsIFxyXG4gICAgdGFibGVJZDogc3RyaW5nLCBcclxuICAgIHRhYmxlRGF0YTogYW55LCBcclxuICAgIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldFxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1NUYwMFx1NTlDQlx1NEUzQVx1ODg2OFx1NjgzQyAke3RhYmxlSWR9IFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRmApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NUU5NFx1NzUyOFx1NEU4Nlx1NjgzN1x1NUYwRlxyXG4gICAgICAgIGlmICh0YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtc3R5bGVzLWFwcGxpZWQnKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTVERjJcdTdFQ0ZcdTVFOTRcdTc1MjhcdTRFODZcdTY4MzdcdTVGMEZcdUZGMENcdThERjNcdThGQzdgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RVx1NjYyRlx1NTQyNlx1NjcwOVx1NjU0OFxyXG4gICAgICAgIGlmICghdGFibGVEYXRhLnN0eWxpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQyAke3RhYmxlSWR9IFx1NkNBMVx1NjcwOVx1NjcwOVx1NjU0OFx1NzY4NFx1NjgzN1x1NUYwRlx1NjU3MFx1NjM2RWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NkUzMlx1NjdEM1x1NEUwQVx1NEUwQlx1NjU4N1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IGdldENvbnRleHRGb3JUYWJsZSh0YWJsZSwgcGx1Z2luKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTRFMEFcdTRFMEJcdTY1ODdcdUZGMENcdTRGN0ZcdTc1MjhNYXJrZG93blJlbmRlckNoaWxkXHJcbiAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmFkZENoaWxkKG5ldyBUYWJsZVN0eWxlUmVuZGVyZXIodGFibGUsIHRhYmxlSWQsIHRhYmxlRGF0YS5zdHlsaW5nLCBwbHVnaW4pKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTVERjJcdTRGN0ZcdTc1MjhSZW5kZXJDaGlsZFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRmApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHU0RjdGXHU3NTI4UmVuZGVyQ2hpbGRcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcdTY1RjZcdTUxRkFcdTk1MTk6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDUmVuZGVyQ2hpbGRcdTU5MzFcdThEMjVcdUZGMENcdTU2REVcdTkwMDBcdTUyMzBcdTc2RjRcdTYzQTVcdTVFOTRcdTc1MjhcclxuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGVzRGlyZWN0bHkodGFibGUsIHRhYmxlRGF0YS5zdHlsaW5nKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTU2REVcdTkwMDBcdTUyMzBcdTc2RjRcdTYzQTVcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NEUwQVx1NEUwQlx1NjU4N1x1RkYwQ1x1NzZGNFx1NjNBNVx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxyXG4gICAgICAgICAgICBhcHBseVN0eWxlc0RpcmVjdGx5KHRhYmxlLCB0YWJsZURhdGEuc3R5bGluZyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTVERjJcdTc2RjRcdTYzQTVcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2ODA3XHU4QkIwXHU4ODY4XHU2ODNDXHU1REYyXHU1RTk0XHU3NTI4XHU2ODM3XHU1RjBGXHJcbiAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXN0eWxlcy1hcHBsaWVkJywgJ3RydWUnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTg4NjhcdTY4M0NcdTcyNzlcdTVCOUFcdTc2ODRDU1NcdTdDN0JcclxuICAgICAgICBpZiAoIXRhYmxlLmNsYXNzTGlzdC5jb250YWlucyhgdGFibGUtJHt0YWJsZUlkfWApKSB7XHJcbiAgICAgICAgICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoYHRhYmxlLSR7dGFibGVJZH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFx1ODg2OFx1NjgzQyAke3RhYmxlSWR9IFx1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFx1NUI4Q1x1NjIxMGApO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBcdTRFM0FcdTg4NjhcdTY4M0MgJHt0YWJsZUlkfSBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcdTY1RjZcdTUxRkFcdTk1MTk6YCwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NFx1NkUzMlx1NjdEM1x1NEUwQVx1NEUwQlx1NjU4N1xyXG4gKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAqIEByZXR1cm5zIFx1NkUzMlx1NjdEM1x1NEUwQVx1NEUwQlx1NjU4N1x1NjIxNm51bGxcclxuICovXHJcbmZ1bmN0aW9uIGdldENvbnRleHRGb3JUYWJsZSh0YWJsZTogSFRNTEVsZW1lbnQsIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCk6IGFueSB7XHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcclxuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICBpZiAoIWFjdGl2ZVZpZXcgfHwgYWN0aXZlVmlldy5nZXRNb2RlKCkgIT09ICdwcmV2aWV3JykgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIFx1NUMxRFx1OEJENVx1ODNCN1x1NTNENlx1NkUzMlx1NjdEM1x1NEUwQVx1NEUwQlx1NjU4N1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdTY1QjlcdTZDRDUxOiBcdTkwMUFcdThGQzdzZWN0aW9uLWlkXHU1QzVFXHU2MDI3XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkVsID0gdGFibGUuY2xvc2VzdCgnW2RhdGEtc2VjdGlvbi1pZF0nKTtcclxuICAgICAgICBpZiAoc2VjdGlvbkVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IHNlY3Rpb25FbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VjdGlvbi1pZCcpO1xyXG4gICAgICAgICAgICBpZiAoc2VjdGlvbklkICYmIGFjdGl2ZVZpZXcucHJldmlld01vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSBPYnNpZGlhbiBBUElcdTUzRUZcdTgwRkRcdTZDQTFcdTY3MDlcdTVCOENcdTUxNjhcdTdDN0JcdTU3OEJcdTUzMTZcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25zID0gYWN0aXZlVmlldy5wcmV2aWV3TW9kZS5yZW5kZXJlcj8uc2VjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbnMgJiYgc2VjdGlvbnNbc2VjdGlvbklkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWN0aW9uc1tzZWN0aW9uSWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjVCOVx1NkNENTI6IFx1OTAxQVx1OEZDN2dldFNlY3Rpb25JbmZvIEFQSVxyXG4gICAgICAgIGlmIChhY3RpdmVWaWV3LnByZXZpZXdNb2RlKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSBPYnNpZGlhbiBBUElcdTUzRUZcdTgwRkRcdTZDQTFcdTY3MDlcdTVCOENcdTUxNjhcdTdDN0JcdTU3OEJcdTUzMTZcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZm8gPSBhY3RpdmVWaWV3LnByZXZpZXdNb2RlLnJlbmRlcmVyPy5nZXRTZWN0aW9uSW5mbz8uKHRhYmxlKTtcclxuICAgICAgICAgICAgaWYgKHNlY3Rpb25JbmZvICYmIHNlY3Rpb25JbmZvLnNlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWN0aW9uSW5mby5zZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIlx1ODNCN1x1NTNENlx1ODg2OFx1NjgzQ1x1NkUzMlx1NjdEM1x1NEUwQVx1NEUwQlx1NjU4N1x1NTkzMVx1OEQyNTpcIiwgZSk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTc2RjRcdTYzQTVcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcdUZGMDhcdTVGNTNcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTZFMzJcdTY3RDNcdTRFMEFcdTRFMEJcdTY1ODdcdTY1RjZcdTc2ODRcdTU5MDdcdTc1MjhcdTY1QjlcdTZDRDVcdUZGMDlcclxuICogQHBhcmFtIHRhYmxlIFx1ODg2OFx1NjgzQ1x1NTE0M1x1N0QyMFxyXG4gKiBAcGFyYW0gc3R5bGluZyBcdTY4MzdcdTVGMEZcdTY1NzBcdTYzNkVcclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5U3R5bGVzRGlyZWN0bHkodGFibGU6IEhUTUxFbGVtZW50LCBzdHlsaW5nOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmICghc3R5bGluZykgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAvLyBcdTVFOTRcdTc1MjhcdTg4NENcdTlBRDhcclxuICAgIGlmIChzdHlsaW5nLnJvd0hlaWdodHMgJiYgQXJyYXkuaXNBcnJheShzdHlsaW5nLnJvd0hlaWdodHMpKSB7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgc3R5bGluZy5yb3dIZWlnaHRzLmZvckVhY2goKGhlaWdodDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHJvd3MubGVuZ3RoICYmIGhlaWdodCAmJiBoZWlnaHQgIT09ICdhdXRvJykge1xyXG4gICAgICAgICAgICAgICAgKHJvd3NbaW5kZXhdIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4IC0gXHU3RDIyXHU1RjE1PSR7aW5kZXh9LCBcdTlBRDhcdTVFQTY9JHtoZWlnaHR9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEXHJcbiAgICBpZiAoc3R5bGluZy5jb2xXaWR0aHMgJiYgQXJyYXkuaXNBcnJheShzdHlsaW5nLmNvbFdpZHRocykpIHtcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTYyMTZcdTgzQjdcdTUzRDZjb2xncm91cFx1NTE0M1x1N0QyMFxyXG4gICAgICAgIGxldCBjb2xncm91cCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgaWYgKCFjb2xncm91cCkge1xyXG4gICAgICAgICAgICBjb2xncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEJlZm9yZShjb2xncm91cCwgdGFibGUuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU3M0IwXHU2NzA5XHU3Njg0Y29sXHU1MTQzXHU3RDIwXHJcbiAgICAgICAgICAgIGNvbGdyb3VwLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFjb2xcdTUxNDNcdTdEMjBcdTVFNzZcdThCQkVcdTdGNkVcdTVCQkRcdTVFQTZcclxuICAgICAgICBzdHlsaW5nLmNvbFdpZHRocy5mb3JFYWNoKCh3aWR0aDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xyXG4gICAgICAgICAgICBpZiAod2lkdGggJiYgd2lkdGggIT09ICdhdXRvJykge1xyXG4gICAgICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU3NkY0XHU2M0E1XHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEIC0gXHU3RDIyXHU1RjE1PSR7aW5kZXh9LCBcdTVCQkRcdTVFQTY9JHt3aWR0aH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBcdTRGRUVcdTU5MEQ6IFx1Nzg2RVx1NEZERGNvbGdyb3VwXHU0RTBEXHU0RTNBbnVsbFxyXG4gICAgICAgICAgICBpZiAoY29sZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbGdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkY5XHU5RjUwXHJcbiAgICBpZiAoc3R5bGluZy5hbGlnbm1lbnQgJiYgQXJyYXkuaXNBcnJheShzdHlsaW5nLmFsaWdubWVudCkpIHtcclxuICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICBcclxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBjb2xJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxpbmcuYWxpZ25tZW50W2NvbEluZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIChjZWxsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS50ZXh0QWxpZ24gPSBzdHlsaW5nLmFsaWdubWVudFtjb2xJbmRleF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTVFOTRcdTc1MjhcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MzdcdTVGMEZcclxuICAgIGlmIChzdHlsaW5nLmNlbGxTdHlsZXMgJiYgQXJyYXkuaXNBcnJheShzdHlsaW5nLmNlbGxTdHlsZXMpKSB7XHJcbiAgICAgICAgc3R5bGluZy5jZWxsU3R5bGVzLmZvckVhY2goKHN0eWxlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHlsZS5yb3cgIT09ICdudW1iZXInIHx8IHR5cGVvZiBzdHlsZS5jb2wgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1NTM1NVx1NTE0M1x1NjgzQ1xyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoIDw9IHN0eWxlLnJvdykgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3dzW3N0eWxlLnJvd10ucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJyk7XHJcbiAgICAgICAgICAgIGlmICghY2VsbHMgfHwgY2VsbHMubGVuZ3RoIDw9IHN0eWxlLmNvbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW3N0eWxlLmNvbF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgaWYgKHN0eWxlLnRleHRBbGlnbikgY2VsbC5zdHlsZS50ZXh0QWxpZ24gPSBzdHlsZS50ZXh0QWxpZ247XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS52ZXJ0aWNhbEFsaWduKSBjZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBzdHlsZS52ZXJ0aWNhbEFsaWduO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuYmFja2dyb3VuZENvbG9yKSBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHN0eWxlLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgICAgaWYgKHN0eWxlLmNvbG9yKSBjZWxsLnN0eWxlLmNvbG9yID0gc3R5bGUuY29sb3I7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5mb250V2VpZ2h0KSBjZWxsLnN0eWxlLmZvbnRXZWlnaHQgPSBzdHlsZS5mb250V2VpZ2h0O1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuZm9udFN0eWxlKSBjZWxsLnN0eWxlLmZvbnRTdHlsZSA9IHN0eWxlLmZvbnRTdHlsZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5XHU3QzdCXHU1NDBEXHJcbiAgICBjb25zdCB0YWJsZUlkID0gdGFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWlkJyk7XHJcbiAgICBpZiAodGFibGVJZCkge1xyXG4gICAgICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoYHRhYmxlLSR7dGFibGVJZH1gKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyByZW5kZXJUYWJsZXNXaXRoU3RvcmVkU3R5bGVzIH0gZnJvbSAnLi90YWJsZVN0eWxlUmVuZGVyZXInO1xyXG5cclxuLyoqXHJcbiAqIFx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NEUyRFx1NzY4NFx1NTQwOFx1NUU3Nlx1NjgwN1x1OEJCMFxyXG4gKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDSFRNTFx1NTE0M1x1N0QyMFxyXG4gKiBAcmV0dXJucyBcdTY2MkZcdTU0MjZcdTYyN0VcdTUyMzBcdTU0MDhcdTVFNzZcdTY4MDdcdThCQjBcclxuICovXHJcbmZ1bmN0aW9uIGZpbmRNZXJnZU1hcmtlcnModGFibGU6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBjZWxscyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xyXG4gICAgZm9yIChjb25zdCBjZWxsIG9mIEFycmF5LmZyb20oY2VsbHMpKSB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICBpZiAoY29udGVudCA9PT0gJ14nIHx8IGNvbnRlbnQgPT09ICc8Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdThCQkVcdTdGNkVcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTg4NjhcdTY4M0NcdTkwMDlcdTYyRTlcdTU0OENcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzZcdTZFMzJcdTY3RDNcclxuICogXHU4RkQ5XHU0RTJBXHU2NTg3XHU0RUY2XHU1MzA1XHU1NDJCXHU0RTg2XHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU4ODY4XHU2ODNDXHU1OTA0XHU3NDA2XHU3Njg0XHU2ODM4XHU1RkMzXHU5MDNCXHU4RjkxXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQcmV2aWV3TW9kZVRhYmxlU2VsZWN0aW9uKHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTVGNTNcdTUyNERcdTdGMTZcdThGOTFcdTg4NjhcdTY4M0NcdTcyQjZcdTYwMDFcclxuICAgICAgICBwbHVnaW4uY3VycmVudEVkaXRpbmdUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU4ODY4XHU2ODNDXHJcbiAgICAgICAgY29uc3QgdGFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKTtcclxuICAgICAgICBpZiAoIXRhYmxlcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU2MjdFXHU1MjMwICR7dGFibGVzLmxlbmd0aH0gXHU0RTJBXHU4ODY4XHU2ODNDYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU0RTNBXHU2QkNGXHU0RTJBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHU1NDhDXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHJcbiAgICAgICAgdGFibGVzLmZvckVhY2goKHRhYmxlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTY1RTdcdTc2ODRcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdUZGMDlcclxuICAgICAgICAgICAgdGFibGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbHVnaW4uaGFuZGxlVGFibGVDbGljayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1QjBcdTc2ODRcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICAgICAgdGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbHVnaW4uaGFuZGxlVGFibGVDbGljayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg4NjhcdTY4M0NcdTdEMjJcdTVGMTVcclxuICAgICAgICAgICAgcGx1Z2luLnRhYmxlRGV0ZWN0b3Iuc2V0dXBUYWJsZUluZGljZXModGFibGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU1NzI4RE9NXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS10YWJsZS1pbmRleCcsIGluZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHU1RTc2XHU1QjU4XHU1MEE4XHU1NzI4XHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHU0RTBBXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRmVhdHVyZSA9IHBsdWdpbi50YWJsZUlkTWFuYWdlci5leHRyYWN0VGFibGVGZWF0dXJlKHRhYmxlKTtcclxuICAgICAgICAgICAgaWYgKHRhYmxlRmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1QzA2XHU3Mjc5XHU1RjgxXHU0RkUxXHU2MDZGXHU1QjU4XHU1MEE4XHU0RTNBSlNPTlx1NUI1N1x1N0IyNlx1NEUzMlxyXG4gICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWZlYXR1cmUnLCBKU09OLnN0cmluZ2lmeSh0YWJsZUZlYXR1cmUpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1QjU4XHU1MEE4XHU4ODRDXHU1MjE3XHU2NTcwXHU0RjVDXHU0RTNBXHU1MzU1XHU3MkVDXHU3Njg0XHU1QzVFXHU2MDI3XHVGRjBDXHU0RkJGXHU0RThFXHU1RkVCXHU5MDFGXHU4QkJGXHU5NUVFXHJcbiAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93cycsIHRhYmxlRmVhdHVyZS5yb3dzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLWNvbHMnLCB0YWJsZUZlYXR1cmUuY29scy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU1QjU4XHU1MEE4XHU4ODY4XHU2ODNDXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVGZWF0dXJlLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXBvc2l0aW9uJywgSlNPTi5zdHJpbmdpZnkodGFibGVGZWF0dXJlLnBvc2l0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEVDRU1hcmtkb3duXHU2NTg3XHU0RUY2XHU0RTJEXHU4QkZCXHU1M0Q2XHU4ODY4XHU2ODNDSURcdTVFNzZcdThCQkVcdTdGNkVcdTUyMzBcdTg4NjhcdTY4M0NcdTUxNDNcdTdEMjBcdTRFMEFcclxuICAgICAgICAgICAgcGx1Z2luLnJlYWRUYWJsZUlkRnJvbU1hcmtkb3duKHRhYmxlKS50aGVuKHRhYmxlSWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnLCB0YWJsZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDSURcdTVERjJcdThCQkVcdTdGNkU6ICR7dGFibGVJZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMDZJRFx1NTQ4Q1x1NzI3OVx1NUY4MVx1NEZFMVx1NjA2Rlx1NTE3M1x1ODA1NFx1OEQ3N1x1Njc2NVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU4ODY4XHU2ODNDXHU3Mjc5XHU1RjgxXHVGRjBDXHU2REZCXHU1MkEwSURcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVGZWF0dXJlLmlkID0gdGFibGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLWZlYXR1cmUnLCBKU09OLnN0cmluZ2lmeSh0YWJsZUZlYXR1cmUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEJGQlx1NTNENlx1ODg2OFx1NjgzQ0lEXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU0MDhcdTVFNzZcdTUzNTVcdTUxNDNcdTY4M0NcdTY4MDdcdThCQjBcdUZGMDhcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdTRFODZcdTUzNTVcdTUxNDNcdTY4M0NcdTU0MDhcdTVFNzZcdTUyOUZcdTgwRkRcdUZGMDlcclxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDZWxsTWVyZ2luZyAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NTkwNFx1NzQwNlx1OEZDN1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlLmRhdGFzZXQudGFibGVNZXJnZVByb2Nlc3NlZCAhPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU4ODY4XHU2ODNDXHU0RTJEXHU3Njg0XHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzTWVyZ2VNYXJrZXJzID0gZmluZE1lcmdlTWFya2Vycyh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc01lcmdlTWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHU4ODY4XHU2ODNDXHU1MzA1XHU1NDJCXHU1NDA4XHU1RTc2XHU2ODA3XHU4QkIwXHVGRjBDXHU1RTk0XHU3NTI4XHU1NDA4XHU1RTc2XHU1MzU1XHU1MTQzXHU2ODNDXHU2RTMyXHU2N0QzYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi50YWJsZURldGVjdG9yLmFwcGx5TWVyZ2VDZWxsc01hcmtlcnModGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NUI1OFx1NTBBOFx1NzY4NFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlxyXG4gICAgICAgIHJlbmRlclRhYmxlc1dpdGhTdG9yZWRTdHlsZXMocGx1Z2luKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXHU0RTBCXHU4QkJFXHU3RjZFXHU0RTg2XHU4ODY4XHU2ODNDXHU5MDA5XHU2MkU5Jyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEJCRVx1N0Y2RVx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1ODg2OFx1NjgzQ1x1OTAwOVx1NjJFOVx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBPYnNpZGlhblNwcmVhZHNoZWV0IH0gZnJvbSAnLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBcdTg4NjhcdTY4M0NcdTU5MjdcdTVDMEZcdThDMDNcdTY1NzRcdTU2NjhcdTdDN0JcclxuICogXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU4ODRDXHU5QUQ4XHU1NDhDXHU1MjE3XHU1QkJEXHU3Njg0XHU2MkQ2XHU2MkZEXHU4QzAzXHU2NTc0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGFibGVSZXNpemVyIHtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBPYnNpZGlhblNwcmVhZHNoZWV0O1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVUYWJsZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgcmVzaXplSGFuZGxlczogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBpc1Jlc2l6aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRIYW5kbGU6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHN0YXJ0WDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhcnRZOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGFydFdpZHRoOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGFydEhlaWdodDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgY29sdW1uSW5kZXg6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSB0YWJsZVdpZHRoOiBudW1iZXIgPSAwO1xyXG4gICAgXHJcbiAgICAvLyBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcdUZGMENcdTgzQjdcdTUzRDZhcHBcdTVCRjlcdThDNjFcclxuICAgIHByaXZhdGUgZ2V0QXBwKCk6IEFwcCB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0YXJnZXRJbmRleDogbnVtYmVyID0gLTE7XHJcbiAgICBwcml2YXRlIHJlc2l6ZVR5cGU6ICdjb2x1bW4nIHwgJ3JvdycgPSAnY29sdW1uJztcclxuICAgIHByaXZhdGUgcmVzaXplR3VpZGU6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY3ODRcdTkwMjBcdTUxRkRcdTY1NzBcclxuICAgICAqIEBwYXJhbSBwbHVnaW4gXHU2M0QyXHU0RUY2XHU1QjlFXHU0RjhCXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCkge1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1NTIxRFx1NTlDQlx1NTMxNlx1ODg2OFx1NjgzQ1x1NTkyN1x1NUMwRlx1OEMwM1x1NjU3NFx1NTY2OCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU2MkQ2XHU2MkZEXHU4QzAzXHU2NTc0XHU1OTI3XHU1QzBGXHU3Njg0XHU1MjlGXHU4MEZEXHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIHNldHVwVGFibGVSZXNpemUodGFibGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU0RTNBXHU4ODY4XHU2ODNDXHU4QkJFXHU3RjZFXHU1OTI3XHU1QzBGXHU4QzAzXHU2NTc0XHU1MjlGXHU4MEZEJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTY1RTdcdTc2ODRcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVSZXNpemVIYW5kbGVzKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTg4NjhcdTY4M0NcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IHRhYmxlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmVzaXplSGFuZGxlcyh0YWJsZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTg4NjhcdTY4M0NcdTU5MjdcdTVDMEZcdThDMDNcdTY1NzRcdTUyOUZcdTgwRkRcdThCQkVcdTdGNkVcdTVCOENcdTYyMTAnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUYWJsZVJlc2l6ZXI6IFx1OEJCRVx1N0Y2RVx1ODg2OFx1NjgzQ1x1NTkyN1x1NUMwRlx1OEMwM1x1NjU3NFx1NTI5Rlx1ODBGRFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RTNBXHU4ODY4XHU2ODNDXHU2REZCXHU1MkEwXHU2MkQ2XHU2MkZEXHU4QzAzXHU2NTc0XHU1OTI3XHU1QzBGXHU3Njg0XHU1M0U1XHU2N0M0XHJcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWRkUmVzaXplSGFuZGxlcyh0YWJsZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTZERkJcdTUyQTBcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzQnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTg4NjhcdTY4M0NcdTY3MDlcdTc2RjhcdTVCRjlcdTVCOUFcdTRGNERcdUZGMENcdTRFRTVcdTRGQkZcdTZCNjNcdTc4NkVcdTVCOUFcdTRGNERcdTUzRTVcdTY3QzRcclxuICAgICAgICB0YWJsZS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU3Njg0XHU2MjQwXHU2NzA5XHU4ODRDXHU1NDhDXHU1MjE3XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGFibGVSZXNpemVyOiBcdTg4NjhcdTY4M0NcdTZDQTFcdTY3MDlcdTg4NEMnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmaXJzdFJvd0NlbGxzID0gcm93c1swXS5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKTtcclxuICAgICAgICBpZiAoZmlyc3RSb3dDZWxscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUYWJsZVJlc2l6ZXI6IFx1ODg2OFx1NjgzQ1x1N0IyQ1x1NEUwMFx1ODg0Q1x1NkNBMVx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1ODg2OFx1NjgzQ1x1NjcwOSAke3Jvd3MubGVuZ3RofSBcdTg4NEMsICR7Zmlyc3RSb3dDZWxscy5sZW5ndGh9IFx1NTIxN2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTIxN1x1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyc3RSb3dDZWxscy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGZpcnN0Um93Q2VsbHNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRDZWxsID0gZmlyc3RSb3dDZWxsc1tpICsgMV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxSZWN0ID0gY2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgdGFibGVSZWN0ID0gdGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTUzRTVcdTY3QzRcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlTGVmdCA9IGNlbGwub2Zmc2V0TGVmdCArIGNlbGwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUyMTdcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICAgICAgY29uc3QgY29sSGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbEhhbmRsZS5jbGFzc05hbWUgPSAndGFibGUtcmVzaXplLWhhbmRsZS1jb2wnO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuc3R5bGUudG9wID0gJzAnO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuc3R5bGUubGVmdCA9IGAke2hhbmRsZUxlZnR9cHhgO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuc3R5bGUud2lkdGggPSAnNXB4JztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLmN1cnNvciA9ICdjb2wtcmVzaXplJztcclxuICAgICAgICAgICAgY29sSGFuZGxlLnN0eWxlLnpJbmRleCA9ICcxMDAnO1xyXG4gICAgICAgICAgICBjb2xIYW5kbGUuZGF0YXNldC5pbmRleCA9IGkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgY29sSGFuZGxlLmRhdGFzZXQudHlwZSA9ICdjb2x1bW4nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NkRGQlx1NTJBMFx1NTIxN1x1NjJENlx1NjJGRFx1NTNFNVx1NjdDNCAtIFx1N0QyMlx1NUYxNT0ke2l9LCBcdTRGNERcdTdGNkU9JHtoYW5kbGVMZWZ0fXB4YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVFdmVudExpc3RlbmVycyhjb2xIYW5kbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGNvbEhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplSGFuZGxlcy5wdXNoKGNvbEhhbmRsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1ODg0Q1x1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFJvdyA9IHJvd3NbaSArIDFdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCByb3dSZWN0ID0gcm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZVJlY3QgPSB0YWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NTNFNVx1NjdDNFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVUb3AgPSByb3cub2Zmc2V0VG9wICsgcm93Lm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1ODg0Q1x1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFxyXG4gICAgICAgICAgICBjb25zdCByb3dIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcm93SGFuZGxlLmNsYXNzTmFtZSA9ICd0YWJsZS1yZXNpemUtaGFuZGxlLXJvdyc7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5zdHlsZS5sZWZ0ID0gJzAnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUudG9wID0gYCR7aGFuZGxlVG9wfXB4YDtcclxuICAgICAgICAgICAgcm93SGFuZGxlLnN0eWxlLmhlaWdodCA9ICc1cHgnO1xyXG4gICAgICAgICAgICByb3dIYW5kbGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5zdHlsZS5jdXJzb3IgPSAncm93LXJlc2l6ZSc7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5zdHlsZS56SW5kZXggPSAnMTAwJztcclxuICAgICAgICAgICAgcm93SGFuZGxlLmRhdGFzZXQuaW5kZXggPSBpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJvd0hhbmRsZS5kYXRhc2V0LnR5cGUgPSAncm93JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTZERkJcdTUyQTBcdTg4NENcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzQgLSBcdTdEMjJcdTVGMTU9JHtpfSwgXHU0RjREXHU3RjZFPSR7aGFuZGxlVG9wfXB4YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVFdmVudExpc3RlbmVycyhyb3dIYW5kbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjMwXHU4ODY4XHU2ODNDXHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvd0hhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplSGFuZGxlcy5wdXNoKHJvd0hhbmRsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RTNBXHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlIFx1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFx1NTE0M1x1N0QyMFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFkZEhhbmRsZUV2ZW50TGlzdGVuZXJzKGhhbmRsZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBoYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MEFDXHU1MDVDXHU2NTQ4XHU2NzlDXHJcbiAgICAgICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jlc2l6aW5nIHx8IHRoaXMuY3VycmVudEhhbmRsZSAhPT0gaGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1OTA0XHU3NDA2XHU5RjIwXHU2ODA3XHU2MzA5XHU0RTBCXHU0RThCXHU0RUY2XHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgXHU5RjIwXHU2ODA3XHU0RThCXHU0RUY2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5NjNCXHU2QjYyXHU0RThCXHU0RUY2XHU1MTkyXHU2Q0UxXHU1NDhDXHU5RUQ4XHU4QkE0XHU4ODRDXHU0RTNBXHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTYyRDZcdTYyRkRcdTUzRTVcdTY3QzRcclxuICAgICAgICBjb25zdCBoYW5kbGUgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SGFuZGxlID0gaGFuZGxlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjJENlx1NjJGRFx1N0M3Qlx1NTc4Qlx1NTQ4Q1x1NzZFRVx1NjgwN1x1N0QyMlx1NUYxNVxyXG4gICAgICAgIHRoaXMucmVzaXplVHlwZSA9IGhhbmRsZS5kYXRhc2V0LnR5cGUgYXMgJ2NvbHVtbicgfCAncm93JztcclxuICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gcGFyc2VJbnQoaGFuZGxlLmRhdGFzZXQuaW5kZXggfHwgJy0xJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU1RjAwXHU1OUNCXHU2MkQ2XHU2MkZEIC0gXHU3QzdCXHU1NzhCPSR7dGhpcy5yZXNpemVUeXBlfSwgXHU3RDIyXHU1RjE1PSR7dGhpcy50YXJnZXRJbmRleH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdThCQjBcdTVGNTVcdThENzdcdTU5Q0JcdTRGNERcdTdGNkVcdTU0OENcdTVDM0FcdTVCRjhcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVR5cGUgPT09ICdjb2x1bW4nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKGB0cjpmaXJzdC1jaGlsZCA+ICo6bnRoLWNoaWxkKCR7dGhpcy50YXJnZXRJbmRleCArIDF9KWApO1xyXG4gICAgICAgICAgICBpZiAoY2VsbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFdpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NTIxN1x1NTIxRFx1NTlDQlx1NUJCRFx1NUVBNj0ke3RoaXMuc3RhcnRXaWR0aH1weGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuYWN0aXZlVGFibGUucXVlcnlTZWxlY3RvckFsbChgdHI6bnRoLWNoaWxkKCR7dGhpcy50YXJnZXRJbmRleCArIDF9KWApO1xyXG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSByb3dzWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEhlaWdodCA9IHJvdy5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTg4NENcdTUyMURcdTU5Q0JcdTlBRDhcdTVFQTY9JHt0aGlzLnN0YXJ0SGVpZ2h0fXB4YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4QzAzXHU2NTc0XHU1OTI3XHU1QzBGXHU3Njg0XHU4Rjg1XHU1MkE5XHU3RUJGXHJcbiAgICAgICAgdGhpcy5jcmVhdGVSZXNpemVHdWlkZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1OEMwM1x1NjU3NFx1NzJCNlx1NjAwMVxyXG4gICAgICAgIHRoaXMuaXNSZXNpemluZyA9IHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU5RjIwXHU2ODA3XHU3OUZCXHU1MkE4XHU1NDhDXHU2NzdFXHU1RjAwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTIxQlx1NUVGQVx1OEMwM1x1NjU3NFx1NTkyN1x1NUMwRlx1NzY4NFx1OEY4NVx1NTJBOVx1N0VCRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJlc2l6ZUd1aWRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVUYWJsZSB8fCAhdGhpcy5jdXJyZW50SGFuZGxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4Rjg1XHU1MkE5XHU3RUJGXHU1MTQzXHU3RDIwXHJcbiAgICAgICAgY29uc3QgZ3VpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBndWlkZS5jbGFzc05hbWUgPSBgdGFibGUtcmVzaXplLWd1aWRlIHRhYmxlLXJlc2l6ZS1ndWlkZS0ke3RoaXMucmVzaXplVHlwZX1gO1xyXG4gICAgICAgIGd1aWRlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBndWlkZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XHJcbiAgICAgICAgZ3VpZGUuc3R5bGUuekluZGV4ID0gJzEwMDAnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVR5cGUgPT09ICdjb2x1bW4nKSB7XHJcbiAgICAgICAgICAgIGd1aWRlLnN0eWxlLndpZHRoID0gJzJweCc7XHJcbiAgICAgICAgICAgIGd1aWRlLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICAgICAgZ3VpZGUuc3R5bGUudG9wID0gJzAnO1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS5sZWZ0ID0gdGhpcy5jdXJyZW50SGFuZGxlLnN0eWxlLmxlZnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3VpZGUuc3R5bGUuaGVpZ2h0ID0gJzJweCc7XHJcbiAgICAgICAgICAgIGd1aWRlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS5sZWZ0ID0gJzAnO1xyXG4gICAgICAgICAgICBndWlkZS5zdHlsZS50b3AgPSB0aGlzLmN1cnJlbnRIYW5kbGUuc3R5bGUudG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMzBcdTg4NjhcdTY4M0NcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLmFwcGVuZENoaWxkKGd1aWRlKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZUd1aWRlID0gZ3VpZGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU1MjFCXHU1RUZBXHU4QzAzXHU2NTc0XHU1OTI3XHU1QzBGXHU4Rjg1XHU1MkE5XHU3RUJGJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdTRFOEJcdTRFRjZcclxuICAgICAqIEBwYXJhbSBldmVudCBcdTlGMjBcdTY4MDdcdTRFOEJcdTRFRjZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVNb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSZXNpemluZyB8fCAhdGhpcy5hY3RpdmVUYWJsZSB8fCAhdGhpcy5jdXJyZW50SGFuZGxlIHx8ICF0aGlzLnJlc2l6ZUd1aWRlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU5RjIwXHU2ODA3XHU3OUZCXHU1MkE4XHU4REREXHU3OUJCXHJcbiAgICAgICAgY29uc3QgZGVsdGFYID0gZXZlbnQuY2xpZW50WCAtIHRoaXMuc3RhcnRYO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IGV2ZW50LmNsaWVudFkgLSB0aGlzLnN0YXJ0WTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdThGODVcdTUyQTlcdTdFQkZcdTRGNERcdTdGNkVcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVUeXBlID09PSAnY29sdW1uJykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdMZWZ0ID0gcGFyc2VJbnQodGhpcy5jdXJyZW50SGFuZGxlLnN0eWxlLmxlZnQpICsgZGVsdGFYO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUd1aWRlLnN0eWxlLmxlZnQgPSBgJHtuZXdMZWZ0fXB4YDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU4QzAzXHU2NTc0XHU1MjE3XHU4Rjg1XHU1MkE5XHU3RUJGIC0gXHU0RjREXHU3RjZFPSR7bmV3TGVmdH1weGApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1RvcCA9IHBhcnNlSW50KHRoaXMuY3VycmVudEhhbmRsZS5zdHlsZS50b3ApICsgZGVsdGFZO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUd1aWRlLnN0eWxlLnRvcCA9IGAke25ld1RvcH1weGA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1OEMwM1x1NjU3NFx1ODg0Q1x1OEY4NVx1NTJBOVx1N0VCRiAtIFx1NEY0RFx1N0Y2RT0ke25ld1RvcH1weGApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTkwNFx1NzQwNlx1OUYyMFx1NjgwN1x1Njc3RVx1NUYwMFx1NEU4Qlx1NEVGNlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFx1OUYyMFx1NjgwN1x1NEU4Qlx1NEVGNlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZU1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSZXNpemluZyB8fCAhdGhpcy5hY3RpdmVUYWJsZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1N0VEM1x1Njc1Rlx1NjJENlx1NjJGRCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1OUYyMFx1NjgwN1x1NzlGQlx1NTJBOFx1OERERFx1NzlCQlxyXG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLnN0YXJ0WDtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5zdGFydFk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU2NUIwXHU3Njg0XHU1QzNBXHU1QkY4XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplVHlwZSA9PT0gJ2NvbHVtbicgJiYgdGhpcy50YXJnZXRJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5tYXgoMjAsIHRoaXMuc3RhcnRXaWR0aCArIGRlbHRhWCk7IC8vIFx1NjcwMFx1NUMwRlx1NUJCRFx1NUVBNjIwcHhcclxuICAgICAgICAgICAgdGhpcy5hcHBseUNvbHVtbldpZHRoKHRoaXMudGFyZ2V0SW5kZXgsIG5ld1dpZHRoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU1RTk0XHU3NTI4XHU2NUIwXHU1MjE3XHU1QkJEIC0gXHU3RDIyXHU1RjE1PSR7dGhpcy50YXJnZXRJbmRleH0sIFx1NUJCRFx1NUVBNj0ke25ld1dpZHRofXB4YCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc2l6ZVR5cGUgPT09ICdyb3cnICYmIHRoaXMudGFyZ2V0SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSBNYXRoLm1heCgyMCwgdGhpcy5zdGFydEhlaWdodCArIGRlbHRhWSk7IC8vIFx1NjcwMFx1NUMwRlx1OUFEOFx1NUVBNjIwcHhcclxuICAgICAgICAgICAgdGhpcy5hcHBseVJvd0hlaWdodCh0aGlzLnRhcmdldEluZGV4LCBuZXdIZWlnaHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTVFOTRcdTc1MjhcdTY1QjBcdTg4NENcdTlBRDggLSBcdTdEMjJcdTVGMTU9JHt0aGlzLnRhcmdldEluZGV4fSwgXHU5QUQ4XHU1RUE2PSR7bmV3SGVpZ2h0fXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NEZERFx1NUI1OFx1ODg2OFx1NjgzQ1x1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RVxyXG4gICAgICAgIHRoaXMuc2F2ZVRhYmxlU2l6ZURhdGEoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdThGODVcdTUyQTlcdTdFQkZcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVHdWlkZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUd1aWRlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUd1aWRlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5MUNEXHU3RjZFXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SGFuZGxlID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEXHJcbiAgICAgKiBAcGFyYW0gY29sSW5kZXggXHU1MjE3XHU3RDIyXHU1RjE1XHJcbiAgICAgKiBAcGFyYW0gd2lkdGggXHU1QkJEXHU1RUE2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlDb2x1bW5XaWR0aChjb2xJbmRleDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU3Njg0Y29sZ3JvdXBcclxuICAgICAgICBsZXQgY29sZ3JvdXAgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgaWYgKCFjb2xncm91cCkge1xyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDljb2xncm91cFx1RkYwQ1x1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVxyXG4gICAgICAgICAgICBjb2xncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRFM0FcdTZCQ0ZcdTRFMDBcdTUyMTdcdTUyMUJcdTVFRkFjb2xcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RSb3cgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdFJvdykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbENvdW50ID0gZmlyc3RSb3cucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxsQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1ODg2OFx1NjgzQ1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYmxlLnByZXBlbmQoY29sZ3JvdXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVCRjlcdTVFOTRcdTc2ODRjb2xcdTUxNDNcdTdEMjBcclxuICAgICAgICBjb25zdCBjb2xzID0gY29sZ3JvdXAucXVlcnlTZWxlY3RvckFsbCgnY29sJyk7XHJcbiAgICAgICAgaWYgKGNvbEluZGV4IDwgY29scy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gY29sc1tjb2xJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVFOTRcdTc1MjhcdTg4NENcdTlBRDhcclxuICAgICAqIEBwYXJhbSByb3dJbmRleCBcdTg4NENcdTdEMjJcdTVGMTVcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgXHU5QUQ4XHU1RUE2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlSb3dIZWlnaHQocm93SW5kZXg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVCRjlcdTVFOTRcdTc2ODRcdTg4NENcclxuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5hY3RpdmVUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgIGlmIChyb3dJbmRleCA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3Nbcm93SW5kZXhdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICByb3cuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTVDM0FcdTVCRjhcdTY1NzBcdTYzNkVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlVGFibGVTaXplRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTg4NjhcdTY4M0NJRFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gdGhpcy5hY3RpdmVUYWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtaWQnKTtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RhYmxlUmVzaXplcjogXHU2NUUwXHU2Q0Q1XHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU1QzNBXHU1QkY4XHU2NTcwXHU2MzZFXHVGRjBDXHU4ODY4XHU2ODNDXHU2Q0ExXHU2NzA5SUQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU0RkREXHU1QjU4XHU4ODY4XHU2ODNDXHU1QzNBXHU1QkY4XHU2NTcwXHU2MzZFIC0gXHU4ODY4XHU2ODNDSUQ9JHt0YWJsZUlkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NTM2XHU5NkM2XHU1MjE3XHU1QkJEXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbFdpZHRoczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgY29sZ3JvdXAgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xncm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGNvbGdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvbCcpO1xyXG4gICAgICAgICAgICAgICAgY29scy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSAoY29sIGFzIEhUTUxFbGVtZW50KS5zdHlsZS53aWR0aCB8fCAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzLnB1c2god2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOWNvbGdyb3VwXHU2MjE2Y29sc1x1RkYwQ1x1NEVDRVx1ODg2OFx1NjgzQ1x1N0IyQ1x1NEUwMFx1ODg0Q1x1ODNCN1x1NTNENlx1NTIxN1x1NjU3MFxyXG4gICAgICAgICAgICBpZiAoY29sV2lkdGhzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3cgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsQ291bnQgPSBmaXJzdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxsQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aHMucHVzaCgnYXV0bycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2NTM2XHU5NkM2XHU4ODRDXHU5QUQ4XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0hlaWdodHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKHJvdyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuaGVpZ2h0IHx8ICdhdXRvJztcclxuICAgICAgICAgICAgICAgIHJvd0hlaWdodHMucHVzaChoZWlnaHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1NjUzNlx1OTZDNlx1NzY4NFx1NUMzQVx1NUJGOFx1NjU3MFx1NjM2RScsIHsgY29sV2lkdGhzLCByb3dIZWlnaHRzIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1MkEwXHU4RjdEXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGxldCBhbGxEYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcclxuICAgICAgICAgICAgaWYgKCFhbGxEYXRhLnRhYmxlcykge1xyXG4gICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFwcCgpLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUYWJsZVJlc2l6ZXI6IFx1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgaWYgKCFhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogdGFibGVJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ6IHJvd3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xDb3VudDogY29sV2lkdGhzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzSGVhZGVyczogcm93cy5sZW5ndGggPiAwICYmIHJvd3NbMF0ucXVlcnlTZWxlY3RvckFsbCgndGgnKS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IHJvd0hlaWdodHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoczogY29sV2lkdGhzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFycmF5KGNvbFdpZHRocy5sZW5ndGgpLmZpbGwoJ2xlZnQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFN0eWxlczogW11cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFibGVSZXNpemVyOiBcdTUyMUJcdTVFRkFcdTRFODZcdTY1QjBcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkUgLSBJRD0ke3RhYmxlSWR9YCwgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICBpZiAoIWFsbERhdGEudGFibGVzW3RhYmxlSWRdLnN0eWxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5zdHlsaW5nID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERGxvY2F0aW9uc1x1NTMwNVx1NTQyQlx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5sb2NhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5sb2NhdGlvbnMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlx1NjYyRlx1NTQyNlx1NURGMlx1NTcyOGxvY2F0aW9uc1x1NEUyRFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoRXhpc3RzID0gYWxsRGF0YS50YWJsZXNbdGFibGVJZF0ubG9jYXRpb25zLnNvbWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChsb2M6IHtwYXRoOiBzdHJpbmd9KSA9PiBsb2MucGF0aCA9PT0gYWN0aXZlRmlsZS5wYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGVQYXRoRXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERhdGEudGFibGVzW3RhYmxlSWRdLmxvY2F0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2ODM3XHU1RjBGXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgICAgICBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXS5zdHlsaW5nLnJvd0hlaWdodHMgPSByb3dIZWlnaHRzO1xyXG4gICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0uc3R5bGluZy5jb2xXaWR0aHMgPSBjb2xXaWR0aHM7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NTE3Nlx1NEVENlx1N0VEM1x1Njc4NFx1NjU3MFx1NjM2RVx1NkI2M1x1Nzg2RVxyXG4gICAgICAgICAgICAgICAgYWxsRGF0YS50YWJsZXNbdGFibGVJZF0uc3RydWN0dXJlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50OiByb3dzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xDb3VudDogY29sV2lkdGhzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBoYXNIZWFkZXJzOiByb3dzLmxlbmd0aCA+IDAgJiYgcm93c1swXS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NjZGNFx1NjVCMFx1NEU4Nlx1NzNCMFx1NjcwOVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RSAtIElEPSR7dGFibGVJZH1gLCBhbGxEYXRhLnRhYmxlc1t0YWJsZUlkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YShhbGxEYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1NjU4N1x1NEVGNlx1NUI1OFx1NTBBOFx1RkYwQ1x1NTIxOVx1NUMwNlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGQ1x1NTFGQVx1NTIzME1hcmtkb3duXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJGaWxlU3RvcmFnZSAmJiBhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi50YWJsZURhdGFFeHRyYWN0b3IuZXhwb3J0VGFibGVEYXRhVG9GaWxlKGFjdGl2ZUZpbGUsIHRhYmxlSWQsIGFsbERhdGEudGFibGVzW3RhYmxlSWRdKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1NURGMlx1NUMwNlx1ODg2OFx1NjgzQ1x1NTkyN1x1NUMwRlx1NjU3MFx1NjM2RVx1NUJGQ1x1NTFGQVx1NTIzMFx1NjU4N1x1NEVGNiAke2FjdGl2ZUZpbGUucGF0aH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVGFibGVSZXNpemVyOiBcdTg4NjhcdTY4M0NcdTVDM0FcdTVCRjhcdTY1NzBcdTYzNkVcdTRGRERcdTVCNThcdTYyMTBcdTUyOUYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1N0FDQlx1NTM3M1x1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlx1NTIzMFx1ODg2OFx1NjgzQ1x1RkYwQ1x1Nzg2RVx1NEZERFx1ODlDNlx1ODlDOVx1NTNDRFx1OTk4OFxyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Q3VycmVudFNpemVzKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGFibGVSZXNpemVyOiBcdTRGRERcdTVCNThcdTg4NjhcdTY4M0NcdTVDM0FcdTVCRjhcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTdBQ0JcdTUzNzNcdTVFOTRcdTc1MjhcdTVGNTNcdTUyNERcdTVDM0FcdTVCRjhcdTUyMzBcdTg4NjhcdTY4M0NcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseUN1cnJlbnRTaXplcygpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFibGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTUyMTdcdTVCQkRcclxuICAgICAgICAgICAgY29uc3QgY29sZ3JvdXAgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xncm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGNvbGdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvbCcpO1xyXG4gICAgICAgICAgICAgICAgY29scy5mb3JFYWNoKChjb2wsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSAoY29sIGFzIEhUTUxFbGVtZW50KS5zdHlsZS53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFRhYmxlUmVzaXplcjogXHU3QUNCXHU1MzczXHU1RTk0XHU3NTI4XHU1MjE3XHU1QkJEIC0gXHU3RDIyXHU1RjE1PSR7aW5kZXh9LCBcdTVCQkRcdTVFQTY9JHt3aWR0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4ODRDXHU5QUQ4XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLmFjdGl2ZVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XHJcbiAgICAgICAgICAgIHJvd3MuZm9yRWFjaCgocm93LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKHJvdyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUYWJsZVJlc2l6ZXI6IFx1N0FDQlx1NTM3M1x1NUU5NFx1NzUyOFx1ODg0Q1x1OUFEOCAtIFx1N0QyMlx1NUYxNT0ke2luZGV4fSwgXHU5QUQ4XHU1RUE2PSR7aGVpZ2h0fWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUYWJsZVJlc2l6ZXI6IFx1NUU5NFx1NzUyOFx1NUY1M1x1NTI0RFx1NUMzQVx1NUJGOFx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0XHJcbiAgICAgKi9cclxuICAgIHJlbW92ZVJlc2l6ZUhhbmRsZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlUmVzaXplcjogXHU3OUZCXHU5NjY0XHU2MkQ2XHU2MkZEXHU1M0U1XHU2N0M0Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU1M0U1XHU2N0M0XHJcbiAgICAgICAgdGhpcy5yZXNpemVIYW5kbGVzLmZvckVhY2goaGFuZGxlID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NTNFNVx1NjdDNFx1NjU3MFx1N0VDNFxyXG4gICAgICAgIHRoaXMucmVzaXplSGFuZGxlcyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1OEY4NVx1NTJBOVx1N0VCRlxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUd1aWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplR3VpZGUucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplR3VpZGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NkUwNVx1NzQwNlx1OEQ0NFx1NkU5MFxyXG4gICAgICovXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZVJlc2l6ZXI6IFx1NkUwNVx1NzQwNlx1OEQ0NFx1NkU5MCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjJENlx1NjJGRFx1NTNFNVx1NjdDNFxyXG4gICAgICAgIHRoaXMucmVtb3ZlUmVzaXplSGFuZGxlcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTFDRFx1N0Y2RVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFibGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNSZXNpemluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEhhbmRsZSA9IG51bGw7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFRGaWxlLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYWJsZURhdGEsIFRhYmxlTG9jYXRpb24sIFRhYmxlU3RydWN0dXJlLCBUYWJsZVN0eWxpbmcsIFRhYmxlRmVhdHVyZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgT2JzaWRpYW5TcHJlYWRzaGVldCB9IGZyb20gJy4vbWFpbic7XG5cbi8qKlxuICogXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2M0QwXHU1M0Q2XHU1NjY4XG4gKiBcdTc1MjhcdTRFOEVcdTRFQ0VNYXJrZG93blx1NjU4N1x1NEVGNlx1NEUyRFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICovXG5leHBvcnQgY2xhc3MgVGFibGVEYXRhRXh0cmFjdG9yIHtcbiAgICBwcml2YXRlIHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogT2JzaWRpYW5TcHJlYWRzaGVldCkge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU4M0I3XHU1M0Q2YXBwXHU1QkY5XHU4QzYxXG4gICAgcHJpdmF0ZSBnZXRBcHAoKTogQXBwIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbikuYXBwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NEVDRVx1NjU4N1x1NEVGNlx1NEUyRFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAqIEBwYXJhbSBmaWxlIFx1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MVxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVx1RkYwQ1x1OTUyRVx1NEUzQVx1ODg2OFx1NjgzQ0lEXG4gICAgICovXG4gICAgYXN5bmMgZXh0cmFjdFRhYmxlRGF0YUZyb21GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBUYWJsZURhdGE+PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdThCRkJcdTUzRDZcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5nZXRBcHAoKS52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTVCNThcdTUwQThcdTYzRDBcdTUzRDZcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgVGFibGVEYXRhPiA9IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUzMzlcdTkxNERKU09OXHU2ODNDXHU1RjBGXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICBjb25zdCBqc29uQ29kZUJsb2NrUmVnZXggPSAvYGBganNvbjp0YWJsZS1kYXRhXFxzKlxcbihbXFxzXFxTXSo/KVxcbmBgYC9nO1xuICAgICAgICAgICAgbGV0IGpzb25NYXRjaDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKChqc29uTWF0Y2ggPSBqc29uQ29kZUJsb2NrUmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0ciA9IGpzb25NYXRjaFsxXS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NjU3MFx1N0VDNFx1NjIxNlx1NTM1NVx1NEUyQVx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NjU3MFx1N0VDNFx1NUY2Mlx1NUYwRlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZURhdGEgb2YganNvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVEYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RhYmxlRGF0YU9iamVjdCh0YWJsZURhdGEsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpzb25EYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTUzNTVcdTRFMkFcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RhYmxlRGF0YU9iamVjdChqc29uRGF0YSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODlFM1x1Njc5MEpTT05cdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MzM5XHU5MTREQ1NWXHU2ODNDXHU1RjBGXHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICBjb25zdCBjc3ZDb2RlQmxvY2tSZWdleCA9IC9gYGBjc3Y6dGFibGUtZGF0YVxccypcXG4oW1xcc1xcU10qPylcXG5gYGAvZztcbiAgICAgICAgICAgIGxldCBjc3ZNYXRjaDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKChjc3ZNYXRjaCA9IGNzdkNvZGVCbG9ja1JlZ2V4LmV4ZWMoZmlsZUNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzdlN0ciA9IGNzdk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3N2TGluZXMgPSBjc3ZTdHIuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzdkxpbmVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1N0IyQ1x1NEUwMFx1ODg0Q1x1NEY1Q1x1NEUzQVx1ODg2OFx1NTkzNFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGNzdkxpbmVzWzBdLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NkJDRlx1NEUwMFx1ODg0Q1x1NjU3MFx1NjM2RVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjc3ZMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGNzdkxpbmVzW2ldLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMDZDU1ZcdTg4NENcdThGNkNcdTYzNjJcdTRFM0FcdTVCRjlcdThDNjFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGhlYWRlcnMubGVuZ3RoICYmIGogPCB2YWx1ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlc1tqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTg5RTNcdTY3OTBKU09OXHU1QjU3XHU2QkI1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhW2hlYWRlcnNbal1dID0gSlNPTi5wYXJzZSh2YWx1ZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU2NjJGSlNPTlx1RkYwQ1x1NTIxOVx1NEY1Q1x1NEUzQVx1NUI1N1x1N0IyNlx1NEUzMlx1NTkwNFx1NzQwNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YVtoZWFkZXJzW2pdXSA9IHZhbHVlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVEYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RhYmxlRGF0YU9iamVjdCh0YWJsZURhdGEsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwQ1NWXHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTMzOVx1OTE0RFx1ODFFQVx1NUI5QVx1NEU0OVx1NjgzQ1x1NUYwRiBgYGB0YWJsZS1kYXRhIFx1NEVFM1x1NzgwMVx1NTc1N1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29kZUJsb2NrUmVnZXggPSAvYGBgdGFibGUtZGF0YVxccypcXG4oW1xcc1xcU10qPylcXG5gYGAvZztcbiAgICAgICAgICAgIGxldCBjdXN0b21NYXRjaDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKChjdXN0b21NYXRjaCA9IGN1c3RvbUNvZGVCbG9ja1JlZ2V4LmV4ZWMoZmlsZUNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbVN0ciA9IGN1c3RvbU1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tTGluZXMgPSBjdXN0b21TdHIuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2QkNGXHU0RTAwXHU4ODRDXHU4MUVBXHU1QjlBXHU0RTQ5XHU2ODNDXHU1RjBGXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBjdXN0b21MaW5lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0gdGhpcy5wYXJzZUN1c3RvbVRhYmxlRGF0YUZvcm1hdChsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZURhdGEgJiYgdGFibGVEYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3RhYmxlRGF0YS5pZF0gPSB0YWJsZURhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTg5RTNcdTY3OTBcdTgxRUFcdTVCOUFcdTRFNDlcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RUNFSFRNTFx1NkNFOFx1OTFDQVx1NEUyRFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ0lEXHU1NDhDXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RUYWJsZURhdGFGcm9tQ29tbWVudHMoZmlsZUNvbnRlbnQsIHJlc3VsdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRFQ0VcdTY1ODdcdTRFRjZcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1NEVDRUhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTYzRDBcdTUzRDZcdTg4NjhcdTY4M0NJRFx1NTQ4Q1x1NjU3MFx1NjM2RVxuICAgICAqIEBwYXJhbSBmaWxlQ29udGVudCBcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcbiAgICAgKiBAcGFyYW0gcmVzdWx0IFx1N0VEM1x1Njc5Q1x1NUJGOVx1OEM2MVxuICAgICAqL1xuICAgIHByaXZhdGUgZXh0cmFjdFRhYmxlRGF0YUZyb21Db21tZW50cyhmaWxlQ29udGVudDogc3RyaW5nLCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIFRhYmxlRGF0YT4pOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1NTMzOVx1OTE0REhUTUxcdTZDRThcdTkxQ0FcdTRFMkRcdTc2ODRcdTg4NjhcdTY4M0NJRFx1NTQ4Q1x1NjU3MFx1NjM2RVxuICAgICAgICAgICAgLy8gXHU2ODNDXHU1RjBGOiA8IS0tIHRhYmxlLWlkOiBJRCB8IGtleTE6IHZhbHVlMSB8IGtleTI6IHZhbHVlMiAtLT5cbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRSZWdleCA9IC88IS0tXFxzKnRhYmxlLWlkOlxccyooW1xcdy1dKykoPzpcXHMqXFx8XFxzKihbXj5dKikpP1xccyotLT4vZztcbiAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IGNvbW1lbnRSZWdleC5leGVjKGZpbGVDb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUlkID0gbWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBtYXRjaFsyXSA/IG1hdGNoWzJdLnRyaW0oKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlSWQgJiYgZGF0YVN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTg5RTNcdTY3OTBcdTZDRThcdTkxQ0FcdTRFMkRcdTc2ODRcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0gdGhpcy5wYXJzZUN1c3RvbVRhYmxlRGF0YUZvcm1hdChgJHt0YWJsZUlkfXwke2RhdGFTdHJpbmd9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZURhdGEgJiYgdGFibGVEYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbdGFibGVEYXRhLmlkXSA9IHRhYmxlRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFibGVJZCAmJiAhcmVzdWx0W3RhYmxlSWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTNFQVx1NjcwOUlEXHU2Q0ExXHU2NzA5XHU2NTcwXHU2MzZFXHVGRjBDXHU0RTE0XHU3RUQzXHU2NzlDXHU0RTJEXHU4RkQ4XHU2Q0ExXHU2NzA5XHU4RkQ5XHU0RTJBSURcdTc2ODRcdTY1NzBcdTYzNkVcdUZGMENcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTdBN0FcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTdFRDNcdTY3ODRcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3RhYmxlSWRdID0gdGhpcy5jcmVhdGVFbXB0eVRhYmxlRGF0YSh0YWJsZUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRFQ0VIVE1MXHU2Q0U4XHU5MUNBXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBcdTUyMUJcdTVFRkFcdTdBN0FcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTdFRDNcdTY3ODRcbiAgICAgKiBAcGFyYW0gdGFibGVJZCBcdTg4NjhcdTY4M0NJRFxuICAgICAqIEByZXR1cm5zIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlRW1wdHlUYWJsZURhdGEodGFibGVJZDogc3RyaW5nKTogVGFibGVEYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0YWJsZUlkLFxuICAgICAgICAgICAgbG9jYXRpb25zOiBbXSxcbiAgICAgICAgICAgIHN0cnVjdHVyZToge1xuICAgICAgICAgICAgICAgIHJvd0NvdW50OiAwLFxuICAgICAgICAgICAgICAgIGNvbENvdW50OiAwLFxuICAgICAgICAgICAgICAgIGhhc0hlYWRlcnM6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3R5bGluZzoge1xuICAgICAgICAgICAgICAgIHJvd0hlaWdodHM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbFdpZHRoczogW10sXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcbiAgICAgKiBAcGFyYW0gdGFibGVEYXRhIFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAqIEBwYXJhbSByZXN1bHQgXHU3RUQzXHU2NzlDXHU1QkY5XHU4QzYxXG4gICAgICovXG4gICAgcHJpdmF0ZSBwcm9jZXNzVGFibGVEYXRhT2JqZWN0KHRhYmxlRGF0YTogYW55LCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIFRhYmxlRGF0YT4pOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFx1NUI4Q1x1NjU3NFxuICAgICAgICAgICAgaWYgKCF0YWJsZURhdGEuc3RydWN0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGFibGVEYXRhLnN0cnVjdHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGNvbENvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBoYXNIZWFkZXJzOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGFibGVEYXRhLnN0eWxpbmcpIHtcbiAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm93SGVpZ2h0czogW10sXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRhYmxlRGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0YWJsZURhdGEubG9jYXRpb25zID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1N0VEM1x1Njc5Q1x1NUJGOVx1OEM2MVxuICAgICAgICAgICAgcmVzdWx0W3RhYmxlRGF0YS5pZF0gPSB0YWJsZURhdGE7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFx1ODlFM1x1Njc5MFx1ODFFQVx1NUI5QVx1NEU0OVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjgzQ1x1NUYwRlxuICAgICAqIFx1NjgzQ1x1NUYwRjogdGFibGVJZHxrZXkxOnZhbHVlMXxrZXkyOnZhbHVlMiwuLi5cbiAgICAgKiBAcGFyYW0gbGluZSBcdTgxRUFcdTVCOUFcdTRFNDlcdTY4M0NcdTVGMEZcdTY1NzBcdTYzNkVcdTg4NENcbiAgICAgKiBAcmV0dXJucyBcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcbiAgICAgKi9cbiAgICBwYXJzZUN1c3RvbVRhYmxlRGF0YUZvcm1hdChsaW5lOiBzdHJpbmcpOiBUYWJsZURhdGEgfCBudWxsIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDEpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTdCMkNcdTRFMDBcdTkwRThcdTUyMDZcdTY2MkZcdTg4NjhcdTY4M0NJRFxuICAgICAgICAgICAgY29uc3QgdGFibGVJZCA9IHBhcnRzWzBdLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghdGFibGVJZCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhOiBUYWJsZURhdGEgPSB0aGlzLmNyZWF0ZUVtcHR5VGFibGVEYXRhKHRhYmxlSWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTg5RTNcdTY3OTBcdTUxNzZcdTRGNTlcdTkwRThcdTUyMDZcdTRGNUNcdTRFM0FcdTk1MkVcdTUwM0NcdTVCRjlcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlWYWx1ZSA9IHBhcnRzW2ldLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGtleVZhbHVlLmxlbmd0aCAhPT0gMikgY29udGludWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5VmFsdWVbMF0udHJpbSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0ga2V5VmFsdWVbMV0udHJpbSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1OTUyRVx1NTQwRFx1NTkwNFx1NzQwNlx1NEUwRFx1NTQwQ1x1N0M3Qlx1NTc4Qlx1NzY4NFx1NTAzQ1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dyYXBwZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4ODY4XHU2ODNDXHU1MzA1XHU4OEM1XHU1NjY4XHU4QkJFXHU3RjZFXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3RydWN0dXJlLnVzZVRhYmxlV3JhcHBlciA9IHZhbHVlID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTIxN1x1NUJCRFx1OEJCRVx1N0Y2RVx1RkYwQ1x1NjgzQ1x1NUYwRjogd2lkdGg6Y29sMSxjb2wyLGNvbDMsLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZy5jb2xXaWR0aHMgPSB2YWx1ZS5zcGxpdCgnLCcpLm1hcCh3ID0+IHcudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxpZ24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU5RjUwXHU2NUI5XHU1RjBGXHU4QkJFXHU3RjZFXHVGRjBDXHU2ODNDXHU1RjBGOiBhbGlnbjpsZWZ0LGNlbnRlcixyaWdodCwuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlRGF0YS5zdHlsaW5nLmFsaWdubWVudCA9IHZhbHVlLnNwbGl0KCcsJykubWFwKGEgPT4gYS50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4ODRDXHU5QUQ4XHU4QkJFXHU3RjZFXHVGRjBDXHU2ODNDXHU1RjBGOiBoZWlnaHQ6cm93MSxyb3cyLHJvdzMsLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZURhdGEuc3R5bGluZy5yb3dIZWlnaHRzID0gdmFsdWUuc3BsaXQoJywnKS5tYXAoaCA9PiBoLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTNFRlx1NEVFNVx1NkRGQlx1NTJBMFx1NjZGNFx1NTkxQVx1ODFFQVx1NUI5QVx1NEU0OVx1NUM1RVx1NjAyN1x1NzY4NFx1NTkwNFx1NzQwNlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRhYmxlRGF0YTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODlFM1x1Njc5MFx1ODFFQVx1NUI5QVx1NEU0OVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NjgzQ1x1NUYwRlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBcdTVCOENcdTU1ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdUZGMENcdTY4MzlcdTYzNkVcdTVCOUVcdTk2NDVcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcdTgxRUFcdTUyQThcdTU4NkJcdTUxNDVcdTdGM0FcdTU5MzFcdTc2ODRcdTdFRDNcdTY3ODRcdTRGRTFcdTYwNkZcbiAgICAgKiBAcGFyYW0gdGFibGUgXHU4ODY4XHU2ODNDXHU1MTQzXHU3RDIwXG4gICAgICogQHBhcmFtIHRhYmxlRGF0YSBcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcbiAgICAgKiBAcmV0dXJucyBcdTVCOENcdTU1ODRcdTU0MEVcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcbiAgICAgKi9cbiAgICBlbmhhbmNlVGFibGVEYXRhKHRhYmxlOiBIVE1MRWxlbWVudCwgdGFibGVEYXRhOiBUYWJsZURhdGEpOiBUYWJsZURhdGEge1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTY1QjBcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRjlcdThDNjFcdUZGMENcdTkwN0ZcdTUxNERcdTRGRUVcdTY1MzlcdTUzOUZcdTU5Q0JcdTVCRjlcdThDNjFcbiAgICAgICAgY29uc3QgZW5oYW5jZWREYXRhOiBUYWJsZURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRhYmxlRGF0YSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4ODY4XHU2ODNDXHU3Njg0XHU4ODRDXHU1NDhDXHU1MjE3XHU2NTcwXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xuICAgICAgICBjb25zdCByb3dDb3VudCA9IHJvd3MubGVuZ3RoO1xuICAgICAgICBsZXQgY29sQ291bnQgPSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5XHU4ODY4XHU1OTM0XG4gICAgICAgIGNvbnN0IGhhc0hlYWRlclJvdyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykgIT09IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBcdThCQTFcdTdCOTdcdTY3MDBcdTU5MjdcdTUyMTdcdTY1NzBcbiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICBjb25zdCBjZWxsQ291bnQgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQsIHRoJykubGVuZ3RoO1xuICAgICAgICAgICAgY29sQ291bnQgPSBNYXRoLm1heChjb2xDb3VudCwgY2VsbENvdW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTdFRDNcdTY3ODRcdTRGRTFcdTYwNkZcbiAgICAgICAgaWYgKCFlbmhhbmNlZERhdGEuc3RydWN0dXJlLnJvd0NvdW50IHx8IGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUucm93Q291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUucm93Q291bnQgPSByb3dDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFlbmhhbmNlZERhdGEuc3RydWN0dXJlLmNvbENvdW50IHx8IGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUuY29sQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUuY29sQ291bnQgPSBjb2xDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGVuaGFuY2VkRGF0YS5zdHJ1Y3R1cmUuaGFzSGVhZGVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbmhhbmNlZERhdGEuc3RydWN0dXJlLmhhc0hlYWRlcnMgPSBoYXNIZWFkZXJSb3c7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NjgzN1x1NUYwRlx1NjU3MFx1N0VDNFx1OTU3Rlx1NUVBNlx1NTMzOVx1OTE0RFxuICAgICAgICBpZiAoIWVuaGFuY2VkRGF0YS5zdHlsaW5nLnJvd0hlaWdodHMgfHwgZW5oYW5jZWREYXRhLnN0eWxpbmcucm93SGVpZ2h0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHlsaW5nLnJvd0hlaWdodHMgPSBBcnJheShyb3dDb3VudCkuZmlsbCgnYXV0bycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVuaGFuY2VkRGF0YS5zdHlsaW5nLmNvbFdpZHRocyB8fCBlbmhhbmNlZERhdGEuc3R5bGluZy5jb2xXaWR0aHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlbmhhbmNlZERhdGEuc3R5bGluZy5jb2xXaWR0aHMgPSBBcnJheShjb2xDb3VudCkuZmlsbCgnYXV0bycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVuaGFuY2VkRGF0YS5zdHlsaW5nLmFsaWdubWVudCB8fCBlbmhhbmNlZERhdGEuc3R5bGluZy5hbGlnbm1lbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBcdTlFRDhcdThCQTRcdTdCMkNcdTRFMDBcdTUyMTdcdTVERTZcdTVCRjlcdTlGNTBcdUZGMENcdTUxNzZcdTRGNTlcdTUzRjNcdTVCRjlcdTlGNTBcbiAgICAgICAgICAgIGVuaGFuY2VkRGF0YS5zdHlsaW5nLmFsaWdubWVudCA9IEFycmF5KGNvbENvdW50KS5maWxsKCdyaWdodCcpO1xuICAgICAgICAgICAgaWYgKGNvbENvdW50ID4gMCkgZW5oYW5jZWREYXRhLnN0eWxpbmcuYWxpZ25tZW50WzBdID0gJ2xlZnQnO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZW5oYW5jZWREYXRhO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBcdTVDMDZcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRkNcdTUxRkFcdTUyMzBNYXJrZG93blx1NjU4N1x1NEVGNlxuICAgICAqIEBwYXJhbSBmaWxlIFx1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MVxuICAgICAqIEBwYXJhbSB0YWJsZUlkIFx1ODg2OFx1NjgzQ0lEXG4gICAgICogQHBhcmFtIHRhYmxlRGF0YSBcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcbiAgICAgKi9cbiAgICBhc3luYyBleHBvcnRUYWJsZURhdGFUb0ZpbGUoZmlsZTogVEZpbGUsIHRhYmxlSWQ6IHN0cmluZywgdGFibGVEYXRhOiBUYWJsZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghZmlsZSB8fCAhdGFibGVJZCB8fCAhdGFibGVEYXRhKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5nZXRBcHAoKS52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTY1ODdcdTRFRjZcdTRFMkRcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NJRFxuICAgICAgICAgICAgY29uc3QgdGFibGVJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRSZWdleCA9IC88IS0tIHRhYmxlLWlkOiAoW1xcdy1dKykgLS0+L2c7XG4gICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSBjb21tZW50UmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGFibGVJZHMuYWRkKG1hdGNoWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU1RjUzXHU1MjREXHU4ODY4XHU2ODNDSURcdTRFNUZcdTUzMDVcdTU0MkJcdTU3MjhcdTUxODVcbiAgICAgICAgICAgIHRhYmxlSWRzLmFkZCh0YWJsZUlkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RUNFXHU2NTg3XHU0RUY2XHU0RTJEXHU2M0QwXHU1M0Q2XHU3M0IwXHU2NzA5XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1RhYmxlRGF0YSA9IGF3YWl0IHRoaXMuZXh0cmFjdFRhYmxlRGF0YUZyb21GaWxlKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTYyMTZcdTZERkJcdTUyQTBcdTVGNTNcdTUyNERcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgIGV4aXN0aW5nVGFibGVEYXRhW3RhYmxlSWRdID0gdGFibGVEYXRhO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTY1NzBcdTdFQzRcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YUFycmF5ID0gQXJyYXkuZnJvbSh0YWJsZUlkcylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlkID0+IGV4aXN0aW5nVGFibGVEYXRhW2lkXSkgLy8gXHU1M0VBXHU1MzA1XHU1NDJCXHU2NzA5XHU2NTcwXHU2MzZFXHU3Njg0XHU4ODY4XHU2ODNDXG4gICAgICAgICAgICAgICAgLm1hcChpZCA9PiBleGlzdGluZ1RhYmxlRGF0YVtpZF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUxQzZcdTU5MDdcdTg5ODFcdTVCRkNcdTUxRkFcdTc2ODRcdTY1NzBcdTYzNkVcbiAgICAgICAgICAgIGNvbnN0IGRhdGFUb0V4cG9ydCA9IEpTT04uc3RyaW5naWZ5KHRhYmxlRGF0YUFycmF5LCBudWxsLCAyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU2NTg3XHU0RUY2XHU0RTJEXHU2MjQwXHU2NzA5XHU3Njg0XHU4ODY4XHU2ODNDXHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICBjb25zdCBqc29uQmxvY2tSZWdleCA9IC9gYGBqc29uOnRhYmxlLWRhdGFcXHMqXFxuKFtcXHNcXFNdKj8pXFxuYGBgL2c7XG4gICAgICAgICAgICBjb25zdCBjb2RlQmxvY2tzOiB7c3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXJ9W10gPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IGpzb25CbG9ja1JlZ2V4LmV4ZWMoZmlsZUNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvZGVCbG9ja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTRFODZcdTRFRTNcdTc4MDFcdTU3NTdcdUZGMENcdTUyMjBcdTk2NjRcdTYyNDBcdTY3MDlcdTczQjBcdTY3MDlcdTc2ODRcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTRFRTNcdTc4MDFcdTU3NTdcbiAgICAgICAgICAgIGlmIChjb2RlQmxvY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBcdTRFQ0VcdTU0MEVcdTU0MTFcdTUyNERcdTUyMjBcdTk2NjRcdUZGMENcdTkwN0ZcdTUxNERcdTRGNERcdTdGNkVcdTUzRDhcdTUzMTZcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY29kZUJsb2Nrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9jayA9IGNvZGVCbG9ja3NbaV07XG4gICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ID0gZmlsZUNvbnRlbnQuc3Vic3RyaW5nKDAsIGJsb2NrLnN0YXJ0KSArIGZpbGVDb250ZW50LnN1YnN0cmluZyhibG9jay5lbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1NzI4XHU2NTg3XHU0RUY2XHU2NzJCXHU1QzNFXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTY1ODdcdTRFRjZcdTY3MkJcdTVDM0VcdTY3MDlcdThEQjNcdTU5MUZcdTc2ODRcdTdBN0FcdTg4NENcbiAgICAgICAgICAgIGlmICghZmlsZUNvbnRlbnQuZW5kc1dpdGgoJ1xcblxcbicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVDb250ZW50LmVuZHNXaXRoKCdcXG4nKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSAnXFxuXFxuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NEVFM1x1NzgwMVx1NTc1N1xuICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gJ2BgYGpzb246dGFibGUtZGF0YVxcbicgKyBkYXRhVG9FeHBvcnQgKyAnXFxuYGBgJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU0RkVFXHU2NTM5XHU1NDBFXHU3Njg0XHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldEFwcCgpLnZhdWx0Lm1vZGlmeShmaWxlLCBmaWxlQ29udGVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTVERjJcdTVDMDZcdTYyNDBcdTY3MDlcdTg4NjhcdTY4M0NcdTY1NzBcdTYzNkVcdTVCRkNcdTUxRkFcdTUyMzBcdTY1ODdcdTRFRjZcdTY3MkJcdTVDM0U6ICR7ZmlsZS5wYXRofSwgXHU4ODY4XHU2ODNDXHU2NTcwXHU5MUNGOiAke3RhYmxlRGF0YUFycmF5Lmxlbmd0aH1gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NUJGQ1x1NTFGQVx1ODg2OFx1NjgzQ1x1NjU3MFx1NjM2RVx1NTIzMFx1NjU4N1x1NEVGNlx1NjVGNlx1NTFGQVx1OTUxOTonLCBlcnJv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LHVCQUF1QjtBQUMvQixXQUFLLElBQUksVUFBVSxJQUFJLHNCQUFzQixLQUFLLHFCQUFxQjtBQUN2RSxXQUFLLElBQUksVUFBVSxJQUFJLGlCQUFpQixLQUFLLHFCQUFxQjtBQUFBLElBQ25FO0FBR0EsU0FBSyx3QkFBd0IsTUFBTTtBQUNsQyxXQUFLLHFCQUFxQjtBQUFBLElBQzNCO0FBR0EsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLFVBQVUsR0FBRyxzQkFBc0IsS0FBSyxxQkFBcUI7QUFBQSxJQUN2RTtBQUVBLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsaUJBQWlCLEtBQUsscUJBQXFCO0FBQUEsSUFDbEU7QUFFQSxZQUFRLElBQUksMEVBQWM7QUFBQSxFQUMzQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsdUJBQTZCO0FBRTVCLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFDdEUsUUFBSSxDQUFDO0FBQVk7QUFHakIsVUFBTSxnQkFBZ0IsV0FBVyxRQUFRLE1BQU07QUFHL0MsUUFBSSxpQkFBaUIsQ0FBQyxLQUFLLHNCQUFzQjtBQUVoRCxpQkFBVyxNQUFNO0FBQ2hCLHFDQUE2QixJQUFJO0FBQUEsTUFDbEMsR0FBRyxHQUFHO0FBQUEsSUFDUDtBQUdBLFNBQUssdUJBQXVCO0FBQUEsRUFDN0I7QUFDRDtBQUdBLElBQU8sZUFBUTsiLAogICJuYW1lcyI6IFsibW9kdWxlIiwgImRvY3VtZW50IiwgImtleSIsICJjIiwgInNvdXJjZSIsICJleHBvcnRzIiwgInBvcyIsICJjb2RlUG9pbnRBdCIsICJmcm9tQ29kZVBvaW50IiwgInBhcnNlIiwgInRva2VuIiwgImJ1ZmZlciIsICJzdHJpbmdpZnkiLCAic3RhY2siLCAidmFsdWUiLCAiaSIsICJsaXN0IiwgIkpTT041IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaGVhZGVyQ29sIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb2xTcGFuIiwgInJvd1NwYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjZWxsIiwgInJvd0luZGV4IiwgImNvbEluZGV4IiwgImFjdGl2ZVZpZXciLCAiZXZlbnQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZXZlbnQiLCAiZXZlbnQiXQp9Cg==

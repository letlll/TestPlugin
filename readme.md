# Advanced Table XT 插件

## 项目简介

**Advanced Table XT** 是为 Obsidian 设计的高级表格增强插件，支持 Markdown 表格的单元格合并、对齐、尺寸调整、唯一 ID 标识、元数据持久化等功能。插件兼容 Obsidian 编辑与阅读模式，支持多端同步与协作，适合需要复杂表格编辑和数据一致性的用户。

---

## 主要功能

- **单元格合并**：支持通过右键菜单或浮动工具栏进行横向（`<`）和纵向（`^`）合并，支持多单元格合并与取消合并。
- **表格尺寸调整**：可拖拽调整列宽、行高，支持自定义并自动记忆每个表格的尺寸。
- **单元格对齐**：支持左/中/右、上下居中等多种对齐方式。
- **唯一表格 ID**：每个表格自动生成唯一 UUID，通过 HTML 注释 `<!-- tbl-id: ... -->` 持久化，支持跨文件追踪和冲突检测。
- **元数据持久化**：行高、列宽等样式信息可持久保存，支持 Style Settings 插件联动。
- **复制粘贴感知**：表格复制到其他文件时自动检测并处理 ID 冲突，支持“共享”或“分叉”模式。
- **多人协作支持**：兼容 Git/SYNC，支持多端同步、冲突检测与恢复。
- **浮动工具栏（可选）**：可扩展为选择表格后自动显示浮动工具栏，提升操作效率。

---

## 安装方法

1. 下载本插件源码，放置于你的 Obsidian 仓库的 `.obsidian/plugins/obsidan-advanced-table-xt-master/` 目录下。
2. 在 Obsidian 设置 → 第三方插件中启用本插件。
3. （可选）自定义插件设置，调整合并、对齐、尺寸等功能选项。

---

## 使用说明

- **合并单元格**：右键点击表格单元格，选择“向右合并”或“向下合并”。支持连续合并（如 `<<`、`^^`）。
- **调整尺寸**：鼠标悬停在表格边缘，拖动控制柄调整列宽/行高。
- **对齐设置**：右键菜单选择对齐方式，或通过浮动工具栏一键切换。
- **复制粘贴表格**：复制表格时请包含注释行，插件会自动处理 ID 与元数据。
- **冲突处理**：如检测到同一 ID 出现在多个文件，插件会提示选择“共享”或“分叉”。
- **代码块换行控制**：每个代码块右上角有换行开关，支持独立控制并记忆状态。

---

## 数据结构说明

插件采用简化的数据结构，仅保留渲染所需的关键信息：

```json
{
  "tables": {
    "tbl-20241015-abcd1234": {
      "locations": [
        { "path": "文件1.md", "isActive": true }
      ],
      "structure": { "rowCount": 5, "colCount": 3, "hasHeaders": true },
      "styling": {
        "rowHeights": ["30px", ...],
        "colWidths": ["120px", ...],
        "alignment": ["left", "center", ...]
      }
    }
  }
}
```

---

## 常见问题

- **表格 ID 丢失/冲突**：插件会自动检测并提示处理，建议复制表格时保留注释行。
- **尺寸/样式未保存**：请确保已启用相关设置，或检查是否与其他表格插件冲突。
- **多人协作冲突**：建议结合 Git/SYNC 使用，开启重复 ID 检测。

---

## 参考资料

- [Obsidian 插件开发文档](https://docs.obsidian.md/Plugins/Plugin+development+guide)
- [Markdown 表格合并单元格讨论](https://github.com/quarto-dev/quarto-cli/discussions/8427)
- [Obsidian 论坛相关讨论](https://forum.obsidian.md/)
- [Style Settings 插件](https://github.com/mgmeyers/obsidian-style-settings)

---

## 贡献与反馈

欢迎提交 Issue、PR 或建议！如需定制功能或遇到问题，请在 GitHub 仓库留言。

---
